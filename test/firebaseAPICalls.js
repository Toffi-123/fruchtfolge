// Example for adding a new field
var 
 firebase.database().ref('users/' + firebase.auth().currentUser.uid + '/fields/').child(123).update({name: "Am Wald",
    size: 5,
    quality: 71,
    distance: 12.2,
    rootCrop: true,
    midpoint : {"type": "Feature", "properties": {}, "geometry": {"type": "Point", "coordinates": [8.35475543124339, 52.085610309401396 ] } },
    polygon: {"id": "118", "type": "Feature", "properties": {}, "geometry": {"coordinates": [[[8.355546144372962, 52.084557806291016 ], [8.356341068785174, 52.086214895200364 ], [8.355212466906101, 52.0864310913632 ], [8.354054579906773, 52.086649151419344 ], [8.354045199039337, 52.08663976293145 ], [8.353610335037475, 52.08601037719328 ], [8.353281874328786, 52.08551164316885 ], [8.353340272716284, 52.085440281250946 ], [8.353380082010434, 52.085334374741805 ], [8.35340861209777, 52.08521425726607 ], [8.353399680339015, 52.085037334365325 ], [8.353408457718462, 52.084959557592626 ], [8.354118502779963, 52.08483137816839 ], [8.354314365607754, 52.08478764106117 ], [8.354333192971524, 52.08477738119488 ], [8.354333336145999, 52.08477767418552 ], [8.354334844074236, 52.08477825786669 ], [8.354334165287783, 52.08477685245699 ], [8.355221711521581, 52.08461095123935 ], [8.35522254127005, 52.08461109873418 ], [8.355546144372962, 52.084557806291016 ] ] ], "type": "Polygon"} }, 
    buffer: {"type": "Feature", "geometry": {"type": "Polygon", "coordinates": [[[8.344468360123916, 52.0840081585351 ], [8.344303498068927, 52.08504688761433 ], [8.344405810278952, 52.08694088246733 ], [8.344903203120174, 52.08877126074873 ], [8.345773537243828, 52.09045655087352 ], [8.346101997952516, 52.09095528489795 ], [8.346213748828822, 52.09112093004469 ], [8.346648612830684, 52.09175031578285 ], [8.347685447842245, 52.09299435203698 ], [8.347694828709681, 52.09300374052488 ], [8.34904211362568, 52.0941125567929 ], [8.350578211207434, 52.09494023691253 ], [8.352245258785548, 52.09545560331948 ], [8.353980460985547, 52.09563924287464 ], [8.355718455142702, 52.0954842381302 ], [8.35687634214203, 52.095266178074056 ], [8.356903921899658, 52.09526093949292 ], [8.35803252377873, 52.09504474333008 ], [8.359779639239221, 52.09452172800364 ], [8.361385261072666, 52.093656895076464 ], [8.36278331959694, 52.092485831531356 ], [8.363916286145967, 52.09105672542517 ], [8.364737540314996, 52.08942838299993 ], [8.365213288342154, 52.08766780886669 ], [8.365323953686895, 52.085847448834876 ], [8.365064982584439, 52.08404220884194 ], [8.364447031428508, 52.08232637265138 ], [8.363652107016296, 52.08066928374203 ], [8.362805426631459, 52.07925402847888 ], [8.361714473322797, 52.07801724393326 ], [8.360415957379974, 52.07700054757731 ], [8.358953573520276, 52.07623815097393 ], [8.357376530572958, 52.075755708566724 ], [8.355737895615178, 52.075569454414826 ], [8.354092808278924, 52.07568565592108 ], [8.353768375427544, 52.07573880086941 ], [8.353569825920225, 52.075773614991974 ], [8.352682279686427, 52.075939516209615 ], [8.352358039242027, 52.07602685100363 ], [8.352355023961996, 52.07601334802388 ], [8.352339502223229, 52.07601681410246 ], [8.35181130065833, 52.07611216660351 ], [8.35022933778004, 52.07655001334777 ], [8.348753348518386, 52.077268186042346 ], [8.347432533885979, 52.07824274493055 ], [8.346310922263697, 52.07944120381116 ], [8.345425901747106, 52.08082361294198 ], [8.344806973841893, 52.08234389073498 ], [8.344675381097256, 52.082980642271465 ], [8.344600820487486, 52.083173579398654 ], [8.344485997591743, 52.083897031989224 ], [8.344474770052946, 52.08395135985206 ], [8.344468360123916, 52.0840081585351 ] ] ] }, "properties": {} },
    fieldid: 123,
    region: "Beuel",
    2014: "Winterweizen",
    2015: "Wintergerste",
    2016: "Winterraps",
    2017: "Winterweizen"})




    // Delete entire field
    firebase.database().ref('users/' + firebase.auth().currentUser.uid + '/fields/').child(123).remove()

    // update specific value
    firebase.database().ref('users/' + firebase.auth().currentUser.uid + '/fields/' + 124).update({name: 'Test'})

    // read specific value
    firebase.database().ref('users/' + firebase.auth().currentUser.uid + '/fields/').child(124).once('value').then(function(snapshot) {
      console.log(snapshot.val());
      // ...
    });
    firebase.database().ref('users/' + firebase.auth().currentUser.uid + '/fields/' + 124).once('value').then(function(snapshot) {
      console.log(snapshot.val());
      // ...
    });

    // check if field exists
    firebase.database().ref('users/' + firebase.auth().currentUser.uid + '/fields/' + 124).once('value').then(function(snapshot) {
        var userData = snapshot.val();
        if (userData){
          console.log("exists!");
        }
    });

    // check if value exists
    firebase.database().ref('users/' + firebase.auth().currentUser.uid).child('fields').orderByChild('fieldid').equalTo('123').once("value", function(snapshot) {
        var userData = snapshot.val();
        if (userData){
          console.log("exists!");
        }
    });
