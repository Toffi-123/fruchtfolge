function toHex(t){for(var e="",n=0;n<t.length;n++)e+=t.charCodeAt(n).toString(16);return e}function signup(){return new Promise(function(t,e){var n=new PouchDB(couchPath+"/users",{skip_setup:!0}),i={name:document.getElementById("name").value,street:document.getElementById("street").value,postcode:document.getElementById("postcode").value,email:document.getElementById("email2").value,password:document.getElementById("password2").value,repeatPass:document.getElementById("repeatPass").value};for(var r in i)if(""==i[r])return e("Bitte füllen Sie alle Felder aus");return i.password!==i.repeatPass?e("Die eingegeben Passwörter stimmen nicht überein"):get("http://open.mapquestapi.com/geocoding/v1/address?key=eoEN8KRKeFAMe9JR8UG53yw5Gh3XU9Ex&location="+i.street+","+i.postcode).then(function(r){var s=JSON.parse(r);if(!s.results[0].locations[0].latLng)return e("Adresse konnte nicht gefunden werden");var o=[s.results[0].locations[0].latLng.lng,s.results[0].locations[0].latLng.lat];n.signup(i.email.replace(/[^a-zA-Z0-9]/g,""),i.password,function(r,s){return r?e("conflict"===r.name?"Der Benutzername ist bereits vergeben":"forbidden"===r.name?"Der Benutzername ist nicht zulässig":"Ein unbekannter Fehler ist aufgetreten"):n.login(i.email.replace(/[^a-zA-Z0-9]/g,""),i.password,function(n,r){if(n&&"unauthorized"!==n.name)return e("Ein fehler ist aufgetreten");profile=new PouchDB(i.email.replace(/[^a-zA-Z0-9]/g,"")),profile.sync(couchPath+"/userdb-"+toHex(r.name),{live:!0,retry:!0}).on("change",function(t){}).on("paused",function(t){}).on("active",function(){}).on("denied",function(t){}).on("complete",function(t){}).on("error",function(t){}),profile.put({_id:"info",name:i.name,homeCoords:o,street:i.street,postcode:i.postcode}).then(function(){t()})})})})})}function login(){var t=new PouchDB(couchPath+"/users",{skip_setup:!0}),e=document.getElementById("email").value.replace(/[^a-zA-Z0-9]/g,""),n=document.getElementById("password").value;return new Promise(function(i,r){t.login(e,n,function(t,n){t&&r("unauthorized"===t.name?"Benutzername/Password unbekannt":"Ein unbekannter Fehler ist aufgetreten"),profile=new PouchDB(e.replace(/[^a-zA-Z0-9]/g,"")),profile.sync(couchPath+"/userdb-"+toHex(n.name),{live:!0,retry:!0}).on("change",function(t){}).on("paused",function(t){}).on("active",function(){}).on("denied",function(t){}).on("complete",function(t){}).on("error",function(t){}),i(n)})})}function loadingScreen(t,e,n,i,r){document.getElementById("loading-status").innerHTML=r;var n=document.getElementById(n),s=document.getElementById("blur"),o={lines:13,length:10,width:3,radius:9,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"},a=new Spinner(o).spin(s);n.value="WARTEN...";document.getElementById("wrapper");s.className="",s.style.opacity=1,setTimeout(function(){goTo(e),t?t().then(function(){s.style.opacity=0,n.value="WEITER",setTimeout(function(){s.className="blur-overlay",a.stop()},700)}).catch(function(t){alert(t),goTo(1),s.style.opacity=0}):Promise.all(i.map(function(t){return t()})).then(function(){s.style.opacity=0,n.value="WEITER",setTimeout(function(){s.className="blur-overlay",a.stop()},700)}).catch(function(t){alert(t),goTo(1),s.style.opacity=0})},2e3)}function logout(){new PouchDB(couchPath+"/users",{skip_setup:!0}).logout(function(t,e){goTo(1)})}function checkEnter(t){if("13"==(t=t||window.event).keyCode)return t.srcElement.blur(),!1}function constraints(){return new Promise(function(t,e){profile.bulkGet({docs:[{id:"crops"},{id:"fields"},{id:"constraints"}]}).then(function(e){function n(){document.getElementById("blur-const").className="",document.getElementById("addConstraint").className="";var t=document.getElementById("constraint.crop");Object.keys(s).forEach(function(e){if("_rev"!=e&&"_id"!=e){var n=document.createElement("option");n.innerHTML=e,t.appendChild(n)}})}function i(t,e,n,i){var s=document.createElement("tr"),o=document.createElement("td"),l="";t.forEach(function(e,n){l+=e,n<t.length-1&&(l+=" + ")}),l+="max"==e?" maximal "+n.toFixed(1)+" ha":" mindestens "+n.toFixed(1)+" ha",o.style.width="240px",o.appendChild(document.createTextNode(l));var u=document.createElement("td");u.innerHTML='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="64px" height="64px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve"> <g> <g> <g id="circle_63_"> <g> <path d="M32,0C14.327,0,0,14.327,0,32s14.327,32,32,32s32-14.327,32-32S49.673,0,32,0z M32,62C15.432,62,2,48.568,2,32 C2,15.432,15.432,2,32,2c16.568,0,30,13.432,30,30C62,48.568,48.568,62,32,62z" fill="grey"/> </g> </g> <g id="Rectangle_2_copy"> <g> <path d="M37,24v-2c0-1.104-0.896-2-2-2h-6c-1.104,0-2,0.896-2,2v2h-5v2h2v16c0,1.104,0.896,2,2,2h12c1.104,0,2-0.896,2-2V26h2 v-2H37z M29,22h6v2h-6V22z M38,42H26V26h12V42z M31,28h-2v12h2V28z M35,28h-2v12h2V28z" fill="grey"/> </g> </g> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg>',u.children[0].classList.toggle("deleteHover"),u.children[0].onclick=function(){r(this.parentNode.parentNode.rowIndex)},u.classList.toggle("deleteButton"),s.appendChild(o),s.appendChild(u),a.appendChild(s)}function r(t){a.deleteRow(t),profile.get("constraints").then(function(e){return e.array.splice(t,1),console.log(e),profile.put(e)})}var s=e.results[0].docs[0].ok,o=e.results[1].docs[0].ok,a=document.getElementById("tableConst"),l=0;if(Object.keys(o).forEach(function(t){o[t].size&&(l+=o[t].size)}),document.getElementById("addCrop").addEventListener("click",function(t){t.stopPropagation();var e=t.srcElement,n=t.srcElement.parentNode,i=document.createElement("select");return Object.keys(s).forEach(function(t){if("_rev"!=t&&"_id"!=t){var e=document.createElement("option");e.innerHTML=t,i.appendChild(e)}}),i.className="replacementDropDown",n.insertBefore(i,e)}),document.getElementById("buttonConstCancel").addEventListener("click",function(){document.getElementById("blur-const").className="hide",document.getElementById("addConstraint").className="hide"}),document.getElementById("buttonConstOk").addEventListener("click",function(){document.getElementById("blur-const").className="hide",document.getElementById("addConstraint").className="hide",profile.get("constraints").then(function(t){for(var e=document.getElementById("constraintInputs").getElementsByTagName("select"),n=[],r=0;r<e.length-1;r++)n.push(e[r].value);var s="maximal"==e[e.length-1].value?"max":"min",o=Number(document.getElementById("constraint.amount").value);return i(n,s,o),t.array.push([n,s,o]),profile.put(t)})}),e.results[2].docs[0].ok){(c=e.results[2].docs[0].ok).array.forEach(function(t){i(t[0],t[1],t[2],t[3])});var u=document.createElement("tr"),h=document.createElement("td");return h.innerHTML='<button type="button" id="const-btn" class="invekosBtn" name="const-btn">HINZUFÜGEN</button>',h.onclick=n,u.appendChild(h),h.style.backgroundColor="#F5F5F5",a.appendChild(u),t()}var c={_id:"constraints",array:[]},a=document.getElementById("tableConst");Object.keys(s).forEach(function(t,e){"_id"!=t&&"_rev"!=t&&(c.array.push([[t],"max",s[t].maxShare*l,e]),i([t],"max",s[t].maxShare*l))});u=document.createElement("tr");return(h=document.createElement("td")).innerHTML='<button type="button" id="const-btn" class="invekosBtn" name="const-btn">HINZUFÜGEN</button>',h.onclick=n,u.appendChild(h),a.appendChild(u),profile.put(c).then(function(){t()})})})}function createChart(t){var e=[],n=[],i=[],r=[],s=["#294D4A","#4A6D7C","#7690A5","#79ae98","#BBE29D","#9DD5C0","#B5DCE1","#D0D1D3","#B5DCE1"];Object.keys(t).forEach(function(e){n.push([parseFloat(t[e].toFixed(1)),e])});var o={};n.sort(function(t,e){return t[0]<e[0]?1:t[0]>e[0]?-1:0}).forEach(function(t,n){e.push(t[0]),i.push(t[1]),r.push(s[n]),o[t[1]]=s[n]}),Chart.defaults.global.defaultFontFamily="open_sanscondensed_light",Chart.defaults.global.defaultFontSize=16;var a={type:"pie",data:{datasets:[{data:e,backgroundColor:r,label:"Summe Kulturen"}],labels:i},options:{responsive:!1,legend:{position:"bottom"},tooltips:{callbacks:{label:function(t,e){var n=e.datasets[0].data[t.index];return e.labels[t.index]+": "+n+" ha"}},xPadding:6,yPadding:7,displayColors:!1}}},l=document.getElementById("chart-area").getContext("2d");return window.myPie=new Chart(l,a),o}function deleteProcedure(t){for(var e=t.parentElement.classList.value,n=e.split(";")[0],i=Number(e.split(";")[1]),r=t.parentElement.parentElement,s=document.getElementsByClassName(e),o=[],a=0;a<s.length;a++)o.push(s[a]);profile.get("crops").then(function(t){t[n].procedures.splice(i,1);for(var e=0;e<o.length;e++)r.removeChild(o[e]);return profile.put(t)})}function gmPlot(){return new Promise(function(t,e){function n(t,e){return e.reduce(function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e})}Promise.all([profile.bulkGet({docs:[{id:"fields"},{id:"crops"}]}),new PouchDB(couchPath+"/recommendations").get("machCombiIds")]).then(function(e){var i=e[0].results[0].docs[0].ok,r=Object.keys(e[0].results[0].docs[0].ok),s=e[0].results[1].docs[0].ok,o=e[1],a={"Reinsande (ss)":"leicht","Lehmsande (ls)":"leicht","Schluffsande (us)":"leicht","Sandlehme (sl)":"mittel","Normallehme (ll)":"mittel","Tonlehme (tl)":"mittel","Lehmschluffe (lu)":"schwer","Tonschluffe (tu)":"schwer","Schlufftone (ut)":"schwer","Moore (mo)":"schwer",Watt:"schwer",Siedlung:"mittel","Abbauflächen":"mittel","Gewässer":"mittel"},l=[],u={docs:[]},h=[],c=[];r.forEach(function(t){if("_rev"!=t&&"_id"!=t){var e=[i[t][2017],i[t][2016],i[t][2015]];if(void 0===s[e[0]])r=Object.keys(s).slice(0,-2);else var r=s[e[0]].subseqCrops;var d=[];r.forEach(function(n){if(-1!=Object.keys(s).indexOf(n)){var r=Number(s[n].rotBreak),o=Number(s[n].quality);s[n].rootCrop;e.slice(0,r-1).indexOf(n)>-1||Number(i[t].quality)<o&&0!==Number(i[t].quality)||1==s[n].rootCrop&&0==i[t].rootCrop||d.push(n)}});var f=n(i[t].size,[1,2,5,10,20,40,80]),g=n(i[t].distance,[1,2,3,4,5,6,10,15,20,30]),p=a[i[t].soilType];Object.keys(s).forEach(function(e){if("_rev"!=e&&"_id"!=e){var a=[];s[e].procedures.forEach(function(t){var e="",i=t.group;if(-1!=i){var r=t.procedure,s=t.combination;if(void 0!==o[i][r]&&void 0!==o[i][r][s]){var h=o[t.group][t.procedure][t.combination].workingWidth[0],c=t.amount[0];""==t.amount[0]||void 0===c?c=o[t.group][t.procedure][t.combination].amount[0]:Number("NaN"!==t.amount)&&(c=n(Number(c),o[t.group][t.procedure][t.combination].amount)),-1==o[t.group][t.procedure][t.combination].resistance.indexOf(p)&&(p=o[t.group][t.procedure][t.combination].resistance[0]),e=i+"/"+r+"/"+s+"/"+f+"/"+p+"/"+g+"/"+c+"/"+h,a.push(e),-1==l.indexOf(e)&&(l.push(e),u.docs.push({id:e}))}else a.push("notAvail")}}),r.indexOf(e)>-1&&h.push([t,e,a,i[t].size,i[t].distance]),c.push([t,e,a,i[t].size,i[t].distance])}})}}),new PouchDB("http://v-server-node.ilb.uni-bonn.de:5984/procedures2").bulkGet(u).then(function(e){function n(t){var n={};return t.forEach(function(t){function i(){n[r][o].gm=h-f,n[r][o].gmTot=(h-f)*Number(u),n[r][o].revenue=h,n[r][o].variableCosts=f,n[r][o].directCosts=c}var r=t[0],o=t[1],a=t[2],u=t[3],h=(t[4],Number(s[o].yield)*Number(s[o].price)),c=Number(s[o].variableCosts),d=function(t){var n=0;return t.forEach(function(t,i){var r=l.indexOf(t);r>-1&&e.results[r].docs[0].ok?e.results[r].docs[0].ok.steps.forEach(function(t){var e=.9472*Number(t.fuelCons);0==e&&(e=Number(t.lubricants)),n+=Number(t.maintenance)+e}):s[o].procedures[i].steps.forEach(function(t){var e=.9472*Number(t.fuelCons);0==e&&(e=Number(t.lubricants)),n+=Number(t.maintenance)+e+Number(t.services)})}),n}(a),f=c+d+d/12*3*.03;n[r]?n[r][o]?i():(n[r][o]={},i()):(n[r]={},n[r][o]={},i())}),n}var i=n(c),r=n(h);t([r,i])}).catch(console.log.bind(console))})})}function searchValueinObject(t,e){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e)return n}function createCroppingPage(){return new Promise(function(t,e){return profile||e("No user signed in"),profile.bulkGet({docs:[{id:"cropsList"},{id:"crops"}]}).then(function(e){if(document.getElementById("loading-status").innerHTML="DECKUNGSBEITRÄGE DER ANBAUFRÜCHTE WERDEN ABGEFRAGT",e.results[0].docs[0].ok&&e.results[1].docs[0].ok){var n=e.results[0].docs[0].ok.array,i=e.results[1].docs[0].ok;Object.keys(i).forEach(function(t){n.indexOf(t)>-1&&n.splice(n.indexOf(t),1)}),t(n.length>0?n:null)}else{if(e.results[0].docs[0].ok&&e.results[1].docs[0].error){n=e.results[0].docs[0].ok.array;return Promise.resolve(n)}if(e.results[0].docs[0].error&&e.results[1].docs[0].ok)return Promise.resolve(null);if(e.results[0].docs[0].error&&e.results[1].docs[0].error)return Promise.resolve(null)}}).then(function(t){return t?new PouchDB(couchPath+"/recommendations").bulkGet({docs:[{id:"cropObject"},{id:"recommendations"},{id:"cropToKTBL"}]}).then(function(e){var n={a:e,b:t};return Promise.resolve(n)}).catch(console.log.bind(console)):Promise.resolve(null)}).then(function(t){function e(t){return new PouchDB(couchPath+"crops").bulkGet(o).then(function(e){return e.results.forEach(function(e,i){var o=e.docs[0].ok,a=searchValueinObject(s,o._id.split("/")[0]),l={};o.specification;l.name=a,l.rotBreak=r[a].rotBreak;var u=[];r[a].subseqCrops.forEach(function(t){n.indexOf(t)>-1&&u.push(t)}),l.subseqCrops=u,l.narrowRot="false",l.rootCrop=r[a].rootCrop,l.efaFactor=r[a].efaFactor,l.quality=r[a].quality,l.maxShare=r[a].maxShare,l.leguminosae=r[a].leguminosae,l.procedures=o.specifications,t[a]=l}),profile.put(t).then(function(){return Promise.resolve()})}).catch(console.log.bind(console))}if(!t)return Promise.resolve(null);var n=t.b,i=t.a.results[0].docs[0].ok,r=t.a.results[1].docs[0].ok,s=t.a.results[2].docs[0].ok,o={docs:[]};return n.forEach(function(t){var e=s[t];if(void 0!==e){var n=i[e].name+"/"+i[e].tillage[0]+"/"+i[e].yield[0];o.docs.push({id:n})}}),profile.get("crops").then(function(t){return e(t)}).catch(function(t){if("not_found"==t.name){var n={};return n._id="crops",e(n)}})}).then(function(){var t=[];return profile.get("crops").then(function(e){return Object.keys(e).forEach(function(n){return"_id"==n||"_rev"==n||e[n].price>0||e[n].yield>0?void 0:t.push(new Promise(function(t){var i=new PouchDB(couchPath+"/sgm");if("Winterweizen"==n)r="Weichweizen und Spelz/Deutschland/2016";else if("Wintergerste"==n||"Sommergerste"==n)r="Gerste/Deutschland/2016";else if("Mais"==n)r="Grünmais (Silagemais)/Deutschland/2016";else if("Winterroggen"==n||"Sommerroggen"==n)r="Roggen/Deutschland/2016";else if("Acker-/Puff-/Pferdebohne"==n||"Erbsen"==n)r="Eiweißpflanzen/Deutschland/2016";else if("Winterraps"==n||"Sommerraps"==n||"Raps"==n)r="Raps und Rübsen/Deutschland/2016";else var r=n+"/Deutschland/2016";return i.get(r).then(function(t){return e[n].yield=t.yield,e[n].price=t.price,e[n].variableCosts=t.variableCosts,Promise.resolve()}).catch(function(t){return e[n].yield=0,e[n].price=0,e[n].variableCosts=0,Promise.resolve()})}))}),Promise.all(t).then(function(){return profile.put(e).then(function(){return Promise.resolve()})})})}).then(function(){return new PouchDB(couchPath+"/recommendations").get("machCombiObject").then(function(t){return machCombiObject=t,Promise.resolve()}).catch(console.log.bind(console))}).then(function(){return profile.get("crops").then(function(e){var n=Object.keys(e);n.forEach(function(t,r){if("_id"!=t&&"_rev"!=t){document.createElement("div").setAttribute("name","cropGM");var s=document.getElementById("tabelle"),o=document.createElement("TABLE"),a=document.createElement("THEAD"),l=document.createElement("TBODY");o.classList.add(t.toUpperCase()),o.appendChild(a),o.appendChild(l);var u=[];u[0]="Leistungs-/Kostenart",u[1]="Menge [dt]",u[2]="Preis [EUR]",u[3]="Betrag [EUR]";var h=document.createElement("TR");for(a.appendChild(h),i=0;i<u.length;i++){var c=document.createElement("TH");0==i?c.width="50%":c.width="22%",c.appendChild(document.createTextNode(u[i])),h.appendChild(c)}function d(n,i){var r=document.createElement("TR"),s=document.createElement("TD");s.appendChild(document.createTextNode(n[0])),s.style.padding="0px 0px 0px 10px",r.appendChild(s);var o=document.createElement("TD");o.appendChild(document.createTextNode(n[1])),n[1]==e[t].yield&&(o.ondblclick=function(){E(this,"yield")}),o.style.textAlign="center",r.appendChild(o);var a=document.createElement("TD");a.appendChild(document.createTextNode(n[2])),a.style.textAlign="center",n[2]==e[t].price&&(a.ondblclick=function(){E(this,"price")}),r.appendChild(a);var u=document.createElement("TD");u.appendChild(document.createTextNode(n[3])),u.style.textAlign="center",n[3]==e[t].variableCosts&&(u.ondblclick=function(){E(this,"variableCosts")}),r.appendChild(u),i&&(r.onclick=i),l.appendChild(r)}[[e[t].name,e[t].yield,e[t].price,(e[t].price*e[t].yield).toFixed(2)],["Summe Leistung","","",(e[t].price*e[t].yield).toFixed(2)],["Summe Direktkosten","","",e[t].variableCosts],["Direktkostenfreie Leistung","","",((e[t].price*e[t].yield).toFixed(2)-e[t].variableCosts).toFixed(2)]].forEach(d);var f={};function g(){var n=document.createElement("TR"),r=document.createElement("TD");r.colSpan="4",r.style.padding="20px 0px 20px 0px";var s=document.createElement("TABLE"),o=document.createElement("THEAD"),a=document.createElement("TBODY");s.appendChild(o),s.appendChild(a);var u=[];u[0]="",u[1]="Häufigkeit",u[2]="Arbeitsvorgang",u[3]="Menge",u[4]="Arbeitszeitbedarf",u[5]="Dieselbedarf",u[6]="Kosten [EUR/ha]";c=document.createElement("TR");for(o.appendChild(c),i=0;i<u.length;i++)(g=document.createElement("TH")).appendChild(document.createTextNode(u[i])),0==i?(g.rowSpan="2",g.style.width="40px",g.style.padding="0px",g.style.background="#F5F5F5"):1==i?g.colSpan="2":2==i?(g.classList.remove("table-small"),g.classList.add("table-desc")):6==i&&(g.colSpan="7"),c.appendChild(g);var h=[];h[0]="Zeitraum",h[1]="",h[2]="../ha",h[3]="[h/ha]",h[4]="[l/ha]",h[5]="Abschreibung",h[6]="Zinskosten",h[7]="Sonstiges",h[8]="Reparaturen",h[9]="Betriebsstoffe",h[10]="Dienstleistungen",h[11]="Summe";var c=document.createElement("TR");for(o.appendChild(c),i=0;i<h.length;i++){var g=document.createElement("TH");g.appendChild(document.createTextNode(h[i])),1==i?g.classList.add("table-desc"):i>4?g.classList.add("table-small"):g.classList.add("table-medium"),0==i&&(g.colSpan="2"),c.appendChild(g)}f.time=0,f.fuelCons=0,f.deprec=0,f.interest=0,f.others=0,f.maintenance=0,f.lubricants=0,f.services=0,f.total=0,e[t].procedures.forEach(function(e,n){var i=document.createElement("TR");if(i.classList.toggle(t+";"+n.toString()),i.setAttribute("name",e.group+";"+e.procedure+";"+e.combination),function(t){return t%2==0}(n))r="#ECECEC";else var r="#F5F5F5";var s=document.createElement("TD");s.style.background="#F5F5F5",s.innerHTML='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="64px" height="64px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve"> <g> <g> <g id="circle_copy_4"> <g> <path d="M32,0C14.327,0,0,14.327,0,32s14.327,32,32,32s32-14.327,32-32S49.673,0,32,0z M32,62.001C15.432,62.001,2,48.568,2,32 C2,15.432,15.432,2,32,2c16.568,0,30,13.432,30,30C62,48.568,48.568,62.001,32,62.001z" fill="grey"/> </g> </g> <g id="Menu_1_"> <g> <polygon points="44,31 33,31 33,20 31,20 31,31 20,31 20,33 31,33 31,44 33,44 33,33 44,33 \t\t\t\t" fill="grey"/> </g> </g> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg>',s.children[0].classList.toggle("insertBefore"),s.children[0].onclick=function(){replaceProcedure(s.children[0])},s.classList.toggle("insertBeforeButton"),s.rowSpan=(e.steps.length+1).toString(),i.appendChild(s),Object.keys(e).forEach(function(t){if("steps"!==t&&"group"!==t&&"procedure"!==t&&"combination"!==t){var n=document.createElement("TD");if("amount"==t)""!==e.amount&&n.appendChild(document.createTextNode(e.amount[0]+" "+e.amount[1]));else if("month"==t){var s=document.createElement("select");["JAN1","JAN2","FEB1","FEB2","MRZ1","MRZ2","APR1","APR2","MAI1","MAI2","JUN1","JUN2","JUL1","JUL2","AUG1","AUG2","SEP1","SEP2","OKT1","OKT2","NOV1","NOV2","DEZ1","DEZ2"].forEach(function(t){var n=document.createElement("option");n.innerHTML=t,n.value=t,e.month==t&&(n.selected="selected"),s.appendChild(n)}),s.classList.toggle("monthDropDown"),s.style.background=r,n.appendChild(s)}else n.appendChild(document.createTextNode(e[t]));n.style.textAlign="center","name"!==t?n.rowSpan=(e.steps.length+1).toString():(n.style.textAlign="left",n.onclick=function(){replaceProcedure(n)}),i.appendChild(n)}});for(l=0;l<10;l++){var o=document.createElement("TD");9==l&&(o.innerHTML='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="64px" height="64px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve"> <g> <g> <g id="circle_63_"> <g> <path d="M32,0C14.327,0,0,14.327,0,32s14.327,32,32,32s32-14.327,32-32S49.673,0,32,0z M32,62C15.432,62,2,48.568,2,32 C2,15.432,15.432,2,32,2c16.568,0,30,13.432,30,30C62,48.568,48.568,62,32,62z" fill="grey"/> </g> </g> <g id="Rectangle_2_copy"> <g> <path d="M37,24v-2c0-1.104-0.896-2-2-2h-6c-1.104,0-2,0.896-2,2v2h-5v2h2v16c0,1.104,0.896,2,2,2h12c1.104,0,2-0.896,2-2V26h2 v-2H37z M29,22h6v2h-6V22z M38,42H26V26h12V42z M31,28h-2v12h2V28z M35,28h-2v12h2V28z" fill="grey"/> </g> </g> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg>',o.children[0].classList.toggle("deleteHover"),o.children[0].onclick=function(){deleteProcedure(o)},o.classList.toggle("deleteButton"),o.rowSpan=(e.steps.length+1).toString()),i.appendChild(o)}i.style.background=r,a.appendChild(i);for(var l=0;l<e.steps.length;l++){var u=e.steps[l],h=document.createElement("TR");h.classList.toggle(t+";"+n.toString()),h.setAttribute("name",e.group+";"+e.procedure+";"+e.combination),["description","time","fuelCons","deprec","interest","others","maintenance","lubricants","services"].forEach(function(t){var e=document.createElement("TD");e.appendChild(document.createTextNode(u[t])),e.style.textAlign="center","description"==t&&(e.style.textAlign="left",e.onclick=function(){replaceProcedure(e)}),h.style.background=r,h.appendChild(e)});var c=document.createElement("TD"),d=(u.maintenance+u.lubricants+u.services).toFixed(2);c.appendChild(document.createTextNode(d)),c.style.textAlign="center",h.appendChild(c),a.appendChild(h),f.time+=u.time,f.fuelCons+=u.fuelCons,f.deprec+=u.deprec,f.interest+=u.interest,f.others+=u.others,f.maintenance+=u.maintenance,f.lubricants+=u.lubricants,f.services+=u.services,f.total+=Number(d)}});var p=["","","","","sum","time","fuelCons","deprec","interest","others","maintenance","lubricants","services","total"],m=document.createElement("TR");p.forEach(function(t){var e=document.createElement("TD");"sum"==t?(e.appendChild(document.createTextNode("Summe")),e.style.textAlign="right"):""!==t&&e.appendChild(document.createTextNode(f[t].toFixed(2))),e.style.textAlign="center",m.appendChild(e)}),a.appendChild(m),d(["Variable Maschinenkosten","","",f.total.toFixed(2)],function(t){t.__toggle=!t.__toggle;var e=t.srcElement.parentElement.nextSibling;e.classList.contains("hide")?e.classList.remove("hide"):e.classList.toggle("hide")}),r.appendChild(s),n.appendChild(r),n.classList.toggle("hide"),l.appendChild(n)}g(),d(["Zinskosten (3 Monate)","","",(Number(f.total.toFixed(2))/12*3*.03).toFixed(2)]),d(["Summe variable Kosten","","",(Number(e[t].variableCosts)+Number(f.total.toFixed(2))+Number(f.total.toFixed(2))/12*3*.03).toFixed(2)]),d(["Deckungsbeitrag","","",((Number(e[t].price)*Number(e[t].yield)).toFixed(2)-(Number(e[t].variableCosts)+Number(f.total.toFixed(2))+Number(f.total.toFixed(2))/12*3*.03)).toFixed(2)]),s.appendChild(o);var p=document.createElement("div");p.classList.toggle(t.toUpperCase());var m=document.createElement("h2");m.innerHTML="FOLGEFRÜCHTE",p.appendChild(m),n.forEach(function(n){if("_id"!=n&&"_rev"!=n){var i=document.createElement("input");i.type="checkbox",i.style.display="inline-block",i.value=n,i.id="subseqCrop/"+n;var r=document.createElement("label");r.htmlFor="subseqCrop/"+n,r.appendChild(document.createTextNode(n)),e[t].subseqCrops.indexOf(n)>-1&&(i.checked=!0),p.appendChild(i),p.appendChild(r),p.appendChild(document.createElement("br"))}}),document.getElementById("subseqCrops").appendChild(p);var v=document.createElement("div");v.classList.toggle(t.toUpperCase());var y=document.createElement("h2");y.innerHTML="ANBAUPAUSE IN JAHREN: "+e[t].rotBreak,y.ondblclick=function(){E(this,"rotBreak")},v.appendChild(y);var x=document.createElement("h2");x.innerHTML="MAX. ANTEIL ANBAUFLÄCHE: "+100*e[t].maxShare+"%",x.ondblclick=function(){E(this,"maxShare")},v.appendChild(x),document.getElementById("subseqCropsRight").appendChild(v);var b=document.createElement("h2");b.innerHTML=t.toUpperCase(),0==r?(o.style.display="block",p.style.display="block",v.style.display="block",b.classList.toggle("clicked")):(o.style.display="none",p.style.display="none",v.style.display="none");function E(e,n){if('<input type="text">'!==e.innerHTML){var i=e.innerHTML;e.innerHTML="";var r=document.createElement("INPUT");r.setAttribute("type","text"),r.value=i,e.appendChild(r),r.focus(),r.onkeypress=I,r.onblur=function(){r.value==i?e.innerHTML=i:(e.innerHTML=r.value,profile.get("crops").then(function(e){var i=r.value.replace("%","").replace(/^\D+/g,"");return console.log(i),"maxShare"==n?e[t][n]=i/100:(console.log(e[t][n]),e[t][n]=Number(i),console.log(e[t][n])),profile.put(e)}))}}}function I(t){if("13"==(t=t||window.event).keyCode)return t.srcElement.blur(),!1}b.onclick=function(t){var e=t.srcElement;document.getElementById("tabelle").childNodes.forEach(function(t){t.classList.contains(e.innerHTML)?t.style.display="block":t.style.display="none"}),document.getElementById("subseqCrops").childNodes.forEach(function(t){t.classList.contains(e.innerHTML)?t.style.display="block":t.style.display="none"}),document.getElementById("subseqCropsRight").childNodes.forEach(function(t){t.classList.contains(e.innerHTML)?t.style.display="block":t.style.display="none"});for(var n=document.getElementsByTagName("h2"),i=0;i<n.length;i++)n[i].classList.contains("clicked")&&n[i].classList.remove("clicked");this.classList.toggle("clicked")},document.getElementById("LeisteCrops").appendChild(b)}}),t()}).catch(function(t){console.log(t)})})})}function loadGrossMargins(t){return firebase.database().ref("users/"+firebase.auth().currentUser.uid+"/cropsList/").once("value").then(function(e){var n=e.val(),i=[];firebase.database().ref("users/"+firebase.auth().currentUser.uid+"/crops/").once("value").then(function(e){if(e.val()){var r=e.val();return Object.keys(r).forEach(function(t){n.indexOf(t)>-1&&n.splice(n.indexOf(t),1),i.push(r.cropDB)}),createCropObject(n,i,t)}return createCropObject(n,i,t)})})}function readJsonFiles(t){return Promise.all(t.map(readJSON))}function readJSON(t){return new Promise(function(e,n){var i=new XMLHttpRequest;i.open("get",t,!0),i.onload=function(){200==i.status?e(i.responseText):n(Error(i.statusText))},i.onerror=function(){n(Error("Network Error"))},i.send()})}function pushCrop(t,e){return new Promise(function(n,i){var r=e.cropObject,s=e.recommendations,o=e.cropToKTBL[t];void 0!==o?readJsonFiles(["../db/crops/"+r[o].name.replace(",","%2C")+"/"+r[o].tillage[0].replace(",","%2C")+"/2/"+r[o].yield[0].replace(",","%2C")+"/120/2/specification.json"]).then(function(e){var i={},r=JSON.parse(e[0]);i.name=t,i.rotBreak=s[t].rotBreak,i.subseqCrops=function(){var e=[];return s[t].subseqCrops.forEach(function(t){crops.indexOf(t)>-1&&e.push(t)}),e},i.narrowRot="false",i.rootCrop=s[t].rootCrop,i.efaFactor=s[t].efaFactor,i.quality=s[t].quality,i.maxShare=s[t].maxShare,i.leguminosae=s[t].leguminosae,i.procedures=r.specifications,n(i)}):n(null)})}function createCropObject(t,e,n){if(t){readJsonFiles(["../db/cropObject.json.gz","../db/recommendations.json.gz","../db/cropToKTBL.json.gz"]).then(function(i){var r={};r.cropObject=JSON.parse(i[0]),r.recommendations=JSON.parse(i[1]),r.cropToKTBL=JSON.parse(i[2]),Promise.all(t.map(function(t){return pushCrop(t,r)})).then(function(t){t.forEach(function(t){t&&e.push(t)}),n(e)})})}else n(e)}function drawCropPage(){return new Promise(function(t,e){profile.get("info").then(function(e){mapboxgl.accessToken="pk.eyJ1IjoidG9mZmkiLCJhIjoiY2l3cXRnNHplMDAxcTJ6cWY1YWp5djBtOSJ9.mBYmcCSgNdaRJ1qoHW5KSQ";var n=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/satellite-streets-v9?optimize=true",center:e.homeCoords,zoom:14,dragPan:!1,dragRotate:!1}),i=new MapboxDraw({displayControlsDefault:!1,controls:{polygon:!0,combine_features:!0,trash:!0},styles:[{id:"gl-draw-line",type:"line",filter:["all",["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ffffff","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#ffffff","fill-outline-color":"#ffffff","fill-opacity":0}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ffffff","line-width":2}},{id:"gl-draw-polygon-and-line-vertex-halo-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#FFF"}},{id:"gl-draw-polygon-and-line-vertex-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#79ae98"}},{id:"gl-draw-polygon-and-line-midpoint-active",type:"circle",filter:["all",["==","meta","midpoint"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#ffffff"}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","$type","LineString"],["==","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ffffff","line-width":3}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","$type","Polygon"],["==","mode","static"]],paint:{"fill-color":"#ffffff","fill-outline-color":"#ffffff","fill-opacity":.05}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","$type","Polygon"],["==","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#ffffff","line-width":3}}]});n.addControl(new mapboxgl.NavigationControl,"bottom-left"),n.addControl(i,"bottom-left"),n.on("load",function(){profile.get("fields").then(function(e){if(e){var r=0;Object.keys(e).forEach(function(t){void 0!==e[t].polygon?(e[t].polygon.properties.id=t,i.add(e[t].polygon),e[t].size=calcArea(e[t].polygon),r+=e[t].size):console.log("No polygon found for "+e[t].name)}),document.getElementById("loading-status").innerHTML="ANBAUREGIONEN WERDEN ERFASST",initialRegionFinder(i.getAll().features,.4).then(function(t){var e=t.map(locationUrl),n=[Promise.resolve(t)];return e.forEach(function(t){return n.push(get(t).then(locationName))}),Promise.all(n)}).then(function(i){var s=i[0],o=document.getElementById("Leiste"),a=document.createElement("h1");return a.innerHTML="GESAMT "+r.toFixed(1)+" ha",o.appendChild(a),s.forEach(function(t,r){function a(t){t.__toggle=!t.__toggle;var e=t.nextSibling;t.__toggle?e.style.height=e.scrollHeight+"px":e.style.height=0}var l=document.createElement("div"),u=document.createElement("h2"),h=document.createElement("div");h.className="expand",u.innerHTML=i[r+1].toUpperCase(),s[r].forEach(function(t){var s=document.createElement("p"),o=e[t.properties.id].name||"Ohne Bezeichnung";s.innerHTML=o+", "+e[t.properties.id].size+" ha",s.id=t.properties.id,s.onclick=function(t){profile.get("fields").then(function(e){var i=t.srcElement.id,r=turf.centerOfMass(e[i].polygon);n.flyTo({center:r.geometry.coordinates,zoom:16});for(var s=document.getElementById("Leiste").getElementsByTagName("p"),o=0;o<s.length;o++)s[o].classList.contains("geclickt")&&s[o].classList.remove("geclickt");t.srcElement.classList.toggle("geclickt")})},s.ondblclick=function(){var t=this.innerHTML,n=this.id;if('<input type="text">'!=t){var i=this.innerHTML.split(",");this.innerHTML="";var r=document.createElement("INPUT");r.setAttribute("type","text"),r.value=i[0],this.appendChild(r),r.focus(),r.onkeypress=checkEnter,r.onblur=function(){profile.get("fields").then(function(t){return r.value==i[0]?void(document.getElementById(n).innerHTML=i[0]+", "+e[n].size+" ha"):(document.getElementById(n).innerHTML=r.value+", "+e[n].size+" ha",t[n].name=r.value,profile.put(t))})}}},h.appendChild(s),e[t.properties.id].region=i[r+1]}),u.onclick=function(){a(this)},l.appendChild(u),l.appendChild(h),o.appendChild(l)}),n.resize(),t(profile.put(e))})}}),n.setLayoutProperty("country-label-lg","text-field","{name_de}"),n.setLayoutProperty("place-city-lg-n","text-field","{name_de}"),n.setLayoutProperty("place-city-md-s","text-field","{name_de}"),n.setLayoutProperty("place-city-lg-s","text-field","{name_de}"),n.setLayoutProperty("place-city-sm","text-field","{name_de}"),n.setLayoutProperty("place-city-md-n","text-field","{name_de}")}),n.on("draw.create",function(t){if(t.features.length>0){var e=calcArea(t.features[0]),n={};n.fieldid=t.features[0].id,n.name=prompt("Bitte geben Sie einen Name für das Feld ein","Ohne Bezeichnung"),""!=n.name&&null!=n.name||(n.name="Ohne Bezeichnung"),n[2017]=prompt("Bitte geben Sie die Vorfrucht aus der Anbauperiod 2016/2017 ein","Winterweizen"),""!=n[2017]&&null!=n[2017]||(n[2017]=""),n[2016]=prompt("Bitte geben Sie die Vorfrucht aus der Anbauperiod 2015/2016 ein","Winterweizen"),""!=n[2016]&&null!=n[2016]||(n[2016]=""),n.polygon=t.features[0],n.size=e,n.polygon.properties={},n.polygon.properties.name=n.fieldid,i.add(n.polygon),i.delete(t.features[0]),profile.get("fields").then(function(t){return t[n.fieldid]=n,profile.put(t)}).catch(function(t){if(404==t.status){var e={};return e[n.fieldid]=n,profile.put(e)}})}}),n.on("draw.update",function(t){if(t.features.length>0){var e=calcArea(t.features[0]);profile.get("fields").then(function(n){var i=n[t.features[0].properties.name];return i.polygon=t.features[0],i.size=e,profile.put(n)}).catch(function(t){console.log(t)})}}),n.on("draw.delete",function(t){profile.get("fields").then(function(e){return delete e[t.features[0].properties.name],profile.put(e)})}),n.on("draw.combine",function(t){if(t.deletedFeatures.length>=2){var e=[];profile.get("fields").then(function(n){for(var r=n[t.deletedFeatures[0].properties.name],s=0;s<t.deletedFeatures.length;s++)e.push(t.deletedFeatures[s]),delete n[t.deletedFeatures[s].properties.name];i.delete(t.createdFeatures[0].id);var o=turf.union.apply(this,e);return i.add(o),r.polygon=o,n[r.name]=r,profile.put(n)})}}),n.on("draw.modechange",function(t){t.mode})})})}function calcArea(t){var e=turf.area(t);return Number((e/1e4).toFixed(2))}function polyIntersect(t,e){var n=!0;return void 0===turf.intersect(t,e)&&(n=!1),n}function createBuffer(t,e){return bufferPoly=turf.buffer(t,e,"kilometers"),bufferPoly}function initialRegionFinder(t,e){return new Promise(function(n,i){function r(t){var e=a.pop(),i=[e];for(s[t]=[],s[t].push(e);i.length>0;)for(var l=i.pop(),u=0;u<o.length;u++)if(l!==o[u]&&1==polyIntersect(l,o[u])){var h=a.indexOf(o[u]);i.push(o[u]),s[t].push(o[u]),a.splice(h,1)}return a.length>0?r(t+1):n(s)}var s=[],o=[];t.forEach(function(t){o.push(createBuffer(t,e))});var a=o;return r(0)})}function locationUrl(t){return"https://nominatim.openstreetmap.org/reverse?lat="+turf.centerOfMass(turf.featureCollection(t)).geometry.coordinates[1]+"&lon="+turf.centerOfMass(turf.featureCollection(t)).geometry.coordinates[0]+"&format=json"}function locationName(t){var e=JSON.parse(t);return void 0!==e.address.suburb?e.address.suburb:"road"!=typeof e.address.suburb?e.address.road:e.address.city}function createModel(){return new Promise(function(t,e){Promise.all([gmPlot(),profile.bulkGet({docs:[{id:"fields"},{id:"crops"}]})]).then(function(t){var e=$("#loading-status"),n=t[0][0],i=t[0][1],r=t[1].results[0].docs[0].ok,s=t[1].results[1].docs[0].ok,o=0;Object.keys(r).forEach(function(t){r[t].size&&(o+=Number(r[t].size))});var a={name:"Fruchtfolge",optimize:"gm",opType:"max",constraints:{efa:{min:.05*o},[toHex("Mais").substring(0,8)]:{min:50},[toHex("Acker-/Puff-/Pferdebohne").substring(0,8)]:{min:20},[toHex("Winterweizen").substring(0,8)]:{min:30}},variables:{},ints:{},binaries:{}},l={};return Object.keys(n).forEach(function(t,e){var i="f"+e;a.constraints[i]={max:1},Object.keys(n[t]).forEach(function(e,u){var h=i+("c"+u);l[h]={name:r[t].name||"Unknown",field:t,crop:e},a.variables[h]={[i]:1,[toHex(e).substring(0,8)]:r[t].size,efa:s[e].efaFactor*r[t].size,gm:n[t][e].gmTot},a.binaries[h]=1,a.constraints[toHex(e).substring(0,8)]?a.constraints[toHex(e).substring(0,8)].max=s[e].maxShare*o:a.constraints[toHex(e).substring(0,8)]={max:s[e].maxShare*o}})}),Promise.all([solver.solveNEOS(a,0,e),Promise.resolve(l),Promise.resolve(n),Promise.resolve(r),Promise.resolve(s),Promise.resolve(o),Promise.resolve(i)])}).then(function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l={},u={},h={},c=0;return Object.keys(e).forEach(function(t){if("bounded"!=t&&"feasible"!=t&&"result"!=t&&e[t]>0){var a=n[t].field,d=n[t].crop,f=n[t].name;l[a]={[d]:i[a][d].gmTot,crop:d,name:f},h[d]=Number(s[d].maxShare)*o,r[a].size&&(c+=Number(r[a].size),u[d]?u[d]+=Number(r[a].size):u[d]=Number(r[a].size))}}),Promise.all([Promise.resolve(l),Promise.resolve(u),Promise.resolve(h),Promise.resolve(i),Promise.resolve(c),Promise.resolve(e),Promise.resolve(r),Promise.resolve(s),Promise.resolve(a)])}).then(function(t){function e(t,e,n){if(!t)var t="";var i=document.createElement("TD");i.appendChild(document.createTextNode(t)),i.style.display="inline-block",i.style.wordBreak="break-word",n&&(i.style.textAlign=n),e.appendChild(i)}var n=t[0],i=t[1],r=(t[2],t[3],t[4]),s=(t[5],t[6]),o=t[7],a=t[8],l=document.getElementById("tabelle-results"),u=document.createElement("TABLE"),h=document.createElement("THEAD"),c=document.createElement("TBODY");u.className="resultsTable",h.className="resultsTableHead",c.className="resultsTableBody",u.appendChild(h),u.appendChild(c);var d=["Feldname","Größe [ha]","Entfernung [km]","Hauptfrucht 2017","Empfehlung 2018"];d.forEach(function(t){var e=document.createElement("COL");u.appendChild(e)});var f=document.createElement("TR");h.appendChild(f),d.forEach(function(t,e){var n=document.createElement("TH");n.appendChild(document.createTextNode(t)),0===e&&(n.style.width="180px"),f.appendChild(n)}),Object.keys(s).forEach(function(t){if(s[t].size){var i=document.createElement("TR");s[t].name?e(s[t].name,i):e("Ohne Bezeichnung",i),e(s[t].size,i,"center"),e(parseFloat(s[t].distance).toFixed(1),i,"center"),e(s[t][2017],i,"center"),n[t]?e(n[t].crop,i,"center"):e("",i,"center"),c.appendChild(i)}});var g=document.createElement("TR");e("Summe",g),e("",g,"center"),e(r.toFixed(1),g,"center"),e(function(){var t=0;return Object.keys(s).forEach(function(e){s[e][2016]&&o[s[e][2016]]&&(t+=a[e][s[e][2016]].gmTot)}),t.toFixed(1)}(),g,"center"),e(function(){var t=0;return Object.keys(s).forEach(function(e){n[e]&&(t+=n[e][n[e].crop])}),t.toFixed(1)}(),g,"center"),c.appendChild(g),l.appendChild(u);for(var p=createChart(i),m=document.getElementById("tabelle-results").getElementsByTagName("table")[0].rows[0].cells,v=document.getElementById("tabelle-results").getElementsByTagName("table")[0].rows,y=1;y<v.length;y++){var x=v[y].cells;for(j=0;j<m.length;j++)breite=m[j].offsetWidth,x[j].style.width=breite-2+"px"}return Promise.all([Promise.resolve(n),Promise.resolve(s),profile.get("info"),Promise.resolve(p)])}).then(function(e){var n=e[0],i=e[1],r=e[2],s=e[3];mapboxgl.accessToken="pk.eyJ1IjoidG9mZmkiLCJhIjoiY2l3cXRnNHplMDAxcTJ6cWY1YWp5djBtOSJ9.mBYmcCSgNdaRJ1qoHW5KSQ";var o=new mapboxgl.Map({container:"mapResults",style:"mapbox://styles/toffi/cj5gy0lop2wqb2tuk7epjfol9",center:r.homeCoords,zoom:13,dragRotate:!1});o.addControl(new mapboxgl.NavigationControl,"bottom-left"),o.on("load",function(){var e=[];Object.keys(n).forEach(function(t){var r=i[t].polygon;r.crop=n[t].crop,r.properties={description:"<p>"+i[t].name+", "+n[t].crop+"</p>",crop:n[t].crop},e.push(r)});var r={type:"geojson",data:{type:"FeatureCollection",features:e}};o.addSource("plots",r),Object.keys(s).forEach(function(t,e){o.addLayer({id:t,type:"fill",source:"plots",paint:{"fill-color":s[t],"fill-opacity":.9},filter:["==","crop",t]}),o.addLayer({id:e.toFixed(0),type:"line",source:"plots",paint:{"line-color":s[t],"line-opacity":1},filter:["==","crop",t]});var n=document.getElementById("crop-legend"),i=document.createElement("div"),r=document.createElement("span");r.style.backgroundColor=s[t],i.appendChild(r),i.appendChild(document.createTextNode(t)),n.appendChild(i);var a=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});o.on("mouseenter",t,function(t){o.getCanvas().style.cursor="pointer";var e=turf.centerOfMass(t.features[0].geometry).geometry.coordinates;a.setLngLat(e).setHTML(t.features[0].properties.description).addTo(o)}),o.on("mouseleave",t,function(){o.getCanvas().style.cursor="",a.remove()})}),t()})}).catch(console.log.bind(console))})}function parseElanGml(t,e){var n=(new XML.ObjTree).parseXML(t);proj4.defs("EPSG:25832","+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs");var i=new proj4.Proj("EPSG:25832"),r=new proj4.Proj("WGS84");profile.get("fields").then(function(t){if(t)return n["wfs:FeatureCollection"]["gml:featureMember"].forEach(function(e){var n=e["elan:tschlag"]["elan:SCHLAGNR"];if(Object.keys(t).indexOf(n)>-1){var s=e["elan:tschlag"]["elan:GEO_COORD_"]["gml:Polygon"]["gml:outerBoundaryIs"]["gml:LinearRing"]["gml:coordinates"]["#text"].split(" ").map(function(t){return proj4(i,r,t.split(","))}),o=turf.polygon([s],{name:n});return t[n].polygon=o}}),profile.put(t)}).then(function(){e&&e()}).catch(function(t){console.log(t)})}function parseElanXml(t,e){function n(t,e,n){return t||((t={})._id="fields"),e||((e={array:[]})._id="cropsList"),i.nn.land.parzelle.forEach(function(n){if(!(o.indexOf(n.nutzungaj.code)>-1)){var i=parseFloat(n.schlag.nummer);return void 0===t[i]&&(t[i]={}),t[i].fieldid=i,void 0!==n.schlag.bezeichnung?t[i].name=n.schlag.bezeichnung:t[i].name="Ohne Bezeichnung",t[i].size=parseFloat((n.nettoflaeche/1e4).toFixed(2)),t[i].rootCrop=!0,void 0!==n.nutzungvj.code&&(t[i][r-1]=s[s.indexOf(n.nutzungvj.code)+1]),t[i][r]=s[s.indexOf(n.nutzungaj.code)+1],void(-1==e.array.indexOf(s[s.indexOf(n.nutzungaj.code)+1])&&e.array.push(s[s.indexOf(n.nutzungaj.code)+1]))}}),profile.bulkDocs([t,e]).then(function(){if(n)return n()})}var i=(new XML.ObjTree).parseXML(t),r=parseFloat(i.nn.antragsjahr),s=["50","Mischkulturen","51","Mischkulturen","54","Streifen","56","Pufferstreifen","57","Pufferstreifen","58","Feldrand","112","Winterhartweizen/Durum","113","Sommerhartweizen/Durum","114","Winter-Dinkel","115","Winterweizen","116","Sommerweizen","118","Winter-Emmer/","119","Sommer-Emmer/","120","Sommer-Dinkel","121","Winterroggen","122","Sommerroggen","125","Wintermenggetreide","131","Wintergerste","132","Sommergerste","142","Winterhafer","143","Sommerhafer","144","Sommermenggetreide","156","Wintertriticale","157","Sommertriticale","171","Mais","172","Zuckermais","181","Rispenhirse","182","Buchweizen","183","Sorghumhirse","186","Amarant","187","Quinoa","210","Erbsen","211","Gemüseerbse","212","Platterbse","220","Acker-/Puff-/Pferdebohne","221","Wicken","222","Dicke","230","Lupinen","240","Gemenge","250","Gemenge","292","Linsen","311","Raps","312","Sommerraps","315","Winterrübsen","316","Sommerrübsen","320","Sonnenblumen","330","Sojabohnen","341","Lein","392","Krambe/","393","Leindotter","411","Mais","413","Futterrübe/Runkelrübe","414","Kohl-/Steckrüben","421","Rot-/Weiß-/Alexandriner-/Inkarnat-/Erd-/Schweden-/Persischer Klee","422","Kleegras","423","Luzerne,","424","Ackergras","425","Klee-Luzerne-Gemisch","426","Bockshornklee,","427","Hornklee,","429","Esparsette","430","Serradella","431","Steinklee","432","Kleemischung","433","Luzerne-Gras-Gemisch","459","Grünland","480","Streuobst","492","Dauergrünland","510","Goldrute","511","Streptocarpus/Drehfrucht","512","Iberischer","513","Braunellen","514","Hauswurz","515","Mühlenbeckia/Drahtsträucher","516","Knöterich","517","Garten-Petunie","518","Polygonum","519","Köcherblümchen","520","Silberbrandschopf","563","Langj.","564","Aufforstung","567","Langj.","572","Uferrandstreifenprogramm","573","Uferrandstreifenprogramm","574","Blühstreifen","575","Blühfläche","576","Schutzstreifen","583","Naturschutz","590","Brache","593","Brachefläche","591","AL aus Erzeugung genommen","592","DGL aus Erzeugung genommen","594","Dauerkulturen","602","Kartoffeln","603","Zuckerrüben","604","Topinambur","613","Gemüsekohl","614","Brauner","615","Echte","616","Senfrauke","617","Gartenkresse","618","Gartenrettiche","619","Weißer","620","Gemüserübe","622","Tomaten","623","Auberginen","624","Paprika,","625","Schwarze","627","Salatgurke","628","Zuckermelone","629","Riesenkürbis","630","Gartenkürbis","631","Melone","633","Zwiebeln","634","Möhre","635","Gartenbohne","636","Feldsalate","637","Salat","638","Spinat","639","Mangold","640","Melde","641","Sellerie","642","Ampfer","643","Pastinaken","644","Zichorien/Wegwarten","645","Kichererbsen","646","Meerrettich","647","Schwarzwurzeln","648","Fenchel","649","Gemüserübsen","651","Anethum","652","Kerbel","653","Bibernellen","654","Kümmel","655","Kreuzkümmel","656","Schwarzkümmel","657","Koriander","658","Liebstöckel/Maggikraut","659","Petroselinum","660","Basilikum","661","Rosmarin","662","Salbei","663","Borretsch","664","Oregano","665","Bohnenkräuter","666","Hyssopus","667","Verbenen","668","Lavendel","669","Thymian","670","Melissen","671","Enziane","672","Minzen","673","Artemisia","674","Ringelblumen","675","Sonnenhut","676","Wegeriche","677","Kamillen","678","Schafgarben","679","Baldriane","680","Johanniskräuter","681","Frauenmantel","682","Mariendisteln","683","Galega","684","Löwenzahn","685","Engelwurzen","686","Malven","701","Hanf","702","Rollrasen","703","Färber-Waid","704","Glanzgräser","705","Virginischer","706","Mohn","707","Erdbeeren","708","Färberdisteln","709","Brennnesseln","710","Färberkrapp","721","Goldlack","722","Einjähriges","723","Garten-/","724","Kugelamarant","725","Taglilien","726","Lilien","727","Narzissen","728","Knorpelmöhren","729","Hasenohren","730","Seidenpflanzen","731","Hyazinthe","732","Milchstern","733","Astern","734","Chrysantheme,","735","Strohblumen","736","Edelweiß","737","Margeriten","738","Rudbeckien","739","Tagetes","740","Wucherblumen","741","Strandflieder","742","Spreublumen","743","Zinnien","744","Taubnesseln","745","Gladiolen","746","Tulpen","747","Christophskräuter","748","Feldrittersporne","749","Scabiosen","750","Dahlien","751","Rhodiola","752","Krokusse","753","Hibiskus","754","Strauch-/Bechermalven","755","Wolfsmilch","756","Löwenmäulchen","757","Garten-Montbretie","758","Halskräuter","759","Gipskräuter","760","Amerikanisches","761","Kosmeen","762","Nachtkerzen","763","Nachtkerzen","764","Königskerzen","765","Kapuzinerkressen","766","Pfingstrosen","767","Schwertlilien","768","Wiesenknopf","769","Zieste","770","Vergissmeinnicht","771","Portulak","772","Nelken","773","Ageratum","774","Lonas","775","Kornblumen","776","Veilchen","777","Phacelia","778","Alpendistel","779","Amacrinum","780","Begonien","781","Calla/Drachenwurz","782","Glockenblumen","783","Schildblume","784","Christrose-/Schnee-/Weihnachtsrose,","785","Eukalyptus","786","Fingerhut","787","Fuchsien","788","Geranien","789","Veronica/Hebe/Ehrenpreis","790","Anemonen","791","Knollenbegonien","792","Kornrade","793","Leimkraut/Taubenkropf-Leimkraut","794","Orchideen","795","Pelargonien","796","Fetthenne,","797","Rhizinus","798","Ramtillkraut","799","Husarenknopf","802","Silphium","803","Sudangras,","804","Sida","805","Igniscum","822","Streuobst","825","Kernobst","826","Steinobst","827","Beerenobst","829","Sonstige","833","Haselnüsse","834","Walnüsse","838","Baumschulen","839","Beerenobst","840","Korbweiden","841","Niederwald","842","Rebland","850","Sonstige","851","Rhabarber","852","Chinaschilf/Miscanthus","853","Riesenweizengras/Szarvasi-Gras","854","Rohrglanzgras","856","Hopfen","857","Aromahopfen","858","Bitterhopfen","859","Hopfen","860","Spargel","861","Artischocke","862","Heidekraut","863","Rosen","864","Rhododendron","865","Trüffel","907","Höhere","910","Wildacker","911","Rübensamenvermehrung","912","Grassamenvermehrung","913","Klee-/Luzernesamenvermehrung","914","Versuchsflächen","924","Vertragsnaturs.","956","Aufforstung","972","NFF: Dauergruenland","973","NFF: Ackernutzung","983","Weihnachtsbäume","994","Unbefestigte","995","Forstflächen","996","Vorübergehende, unbefestigte Mieten, Stroh-, Futter- oder Dunglagerplätze auf AL","999","Gattung/Art nicht in Liste"],o=["459","492","563","564","567","572","590","592","594","994","956","972","983","995","999"];profile.bulkGet({docs:[{id:"fields"},{id:"cropsList"}]}).then(function(t){if(t.results[0].docs[0].ok&&t.results[1].docs[0].ok)n(i=t.results[0].docs[0].ok,r=t.results[1].docs[0].ok,e);else if(t.results[0].docs[0].ok&&t.results[1].docs[0].error){var i=t.results[0].docs[0].ok;n(i,null,e)}else if(t.results[0].docs[0].error&&t.results[1].docs[0].ok){var r=t.results[1].docs[0].ok;n(null,r,e)}else n(null,null,e)}).catch(function(t){console.log(t)})}function plotData(){return profile.bulkGet({docs:[{id:"fields"},{id:"info"}]}).then(function(t){function e(t,e){var i=n[t];if(i.quality&&i.soilType&&i.distance||!i.polygon)return;const r=get(createSQRurl(i.polygon)).then(sqrHtmlParsing),s=get(createSoilTypeUrl(i.polygon)).then(soilTypeHtmlParsing),o=get("http://router.project-osrm.org/route/v1/driving/"+turf.centerOfMass(i.polygon).geometry.coordinates+";"+e.homeCoords+"?overview=false").then(JSON.parse);return Promise.all([r,s,o]).then(([t,e,n])=>Object.assign(i,{quality:t,soilType:e,distance:"Ok"==n.code?n.routes[0].distance/1e3:""}))}var n=t.results[0].docs[0].ok,i=Object.keys(t.results[0].docs[0].ok),r=t.results[1].docs[0].ok;Promise.all(i.map(function(t){return e(t,r)})).then(function(){return profile.put(n).then(function(t){return Promise.resolve()}).catch(function(t){console.log(t)})})})}function replaceProcedure(t){function e(t,e){var n=document.createElement("option");n.innerHTML=t,n.value=t,t!=g&&t!=p&&t!=m&&t!=v.slice(0,-1)||(n.selected="selected"),e.appendChild(n)}var n=t.parentElement.classList.value;if("insertBeforeButton"!==n){for(var i=n.split(";")[0],r=Number(n.split(";")[1]),s=t.parentElement.parentElement,o=document.getElementsByClassName(n),a=[],l=0;l<o.length;l++)a.push(o[l]);var u=a[0].rowIndex-2,h=o[0].getAttribute("name").split(";")[0],c=o[0].getAttribute("name").split(";")[1],d=o[0].getAttribute("name").split(";")[2];""!==a[0].children[4].innerHTML&&(v=a[0].children[4].innerHTML.split(" ")[0])}else{for(var s=t.parentElement.parentElement.parentElement,f=t.parentElement.parentElement.classList.value,i=f.split(";")[0],r=Number(f.split(";")[1]),o=document.getElementsByClassName(f),a=[],l=0;l<o.length;l++)a.push(o[l]);u=a[0].rowIndex-2}if("insertBeforeButton"!==n&&Object.keys(machCombiObject).forEach(function(t){"_id"==t&&"rev"==t||machCombiObject[t].id==h&&(g=t,Object.keys(machCombiObject[t]).forEach(function(e){machCombiObject[t][e].id==c&&(p=e,Object.keys(machCombiObject[t][e]).forEach(function(n){machCombiObject[t][e][n].id==d&&(m=n,void 0===v&&(v=machCombiObject[t][p][m].amount[0]),y=machCombiObject[t][p][m].workingWidth[0])}))}))}),void 0===g)var g="Bodenbearbeitung",p="Eggen mit Kreiselegge",m="2 m; 30 kW",v="0.0",y="1.8";var x=document.getElementById("procedure.group");x.innerHTML="",Object.keys(machCombiObject).forEach(function(t){"id"!=t&&"_id"!=t&&"_rev"!=t&&e(t,x)});var b=document.getElementById("procedure.procedure");b.innerHTML="",Object.keys(machCombiObject[g]).forEach(function(t){"id"!=t&&e(t,b)});var E=document.getElementById("procedure.combination");E.innerHTML="",Object.keys(machCombiObject[g][p]).forEach(function(t){"id"!=t&&e(t,E)});var I=document.getElementById("procedure.amount");I.innerHTML="",machCombiObject[g][p][m].amount.forEach(function(t){"id"!=t&&e(t,I)});var C=document.getElementById("procedure.workingWidth");C.innerHTML="",machCombiObject[g][p][m].workingWidth.forEach(function(t){"id"!=t&&e(t,C)});var w=document.getElementById("replacementBox"),M=document.getElementById("blur-costs");w.classList.remove("hide"),M.classList.remove("hide"),x.onchange=function(){var t=document.getElementById("procedure.group").value,n=document.getElementById("procedure.procedure");n.innerHTML="",Object.keys(machCombiObject[t]).forEach(function(t){"id"!=t&&e(t,n)}),document.getElementById("procedure.combination").innerHTML="",document.getElementById("procedure.amount").innerHTML="",document.getElementById("procedure.workingWidth").innerHTML="",Object.keys(machCombiObject[t][Object.keys(machCombiObject[t])[1]]).forEach(function(t){"id"!=t&&e(t,E)}),machCombiObject[t][Object.keys(machCombiObject[t])[1]][Object.keys(machCombiObject[t][Object.keys(machCombiObject[t])[1]])[1]].amount.forEach(function(t){"id"!=t&&e(t,I)}),machCombiObject[t][Object.keys(machCombiObject[t])[1]][Object.keys(machCombiObject[t][Object.keys(machCombiObject[t])[1]])[1]].workingWidth.forEach(function(t){"id"!=t&&e(t,C)})},b.onchange=function(){var t=document.getElementById("procedure.group").value,n=document.getElementById("procedure.procedure").value,i=document.getElementById("procedure.combination");i.innerHTML="";var r=Object.keys(machCombiObject[t][n]);r.forEach(function(t){"id"!=t&&e(t,i)}),document.getElementById("procedure.amount").innerHTML="",document.getElementById("procedure.workingWidth").innerHTML="",machCombiObject[t][n][r[1]].amount.forEach(function(t){"id"!=t&&e(t,I)}),machCombiObject[t][n][r[1]].workingWidth.forEach(function(t){"id"!=t&&e(t,C)})},E.onchange=function(){var t=document.getElementById("procedure.group").value,n=document.getElementById("procedure.procedure").value,i=document.getElementById("procedure.combination").value,r=document.getElementById("procedure.amount"),s=document.getElementById("procedure.workingWidth");r.innerHTML="",s.innerHTML="",machCombiObject[t][n][i].amount.forEach(function(t){"id"!=t&&e(t,r)}),machCombiObject[t][n][i].workingWidth.forEach(function(t){"id"!=t&&e(t,s)})},document.getElementById("buttonOk").onclick=function(){ids={group:machCombiObject[x.value].id,procedure:machCombiObject[x.value][b.value].id,combination:machCombiObject[x.value][b.value][E.value].id};var e=ids.group+"/"+ids.procedure+"/"+ids.combination+"/2/"+machCombiObject[x.value][b.value][E.value].resistance[0]+"/2/"+I.value+"/"+C.value,o=new PouchDB(couchPath+"/procedures");profile.get("crops").then(function(l){o.get(e).then(function(e){var o=document.createElement("TR");if("insertBeforeButton"!==n)o.classList.toggle(n);else{var h=t.parentElement.parentElement.classList.value;o.classList.toggle(h)}if(o.setAttribute("name",ids.group+";"+ids.procedure+";"+ids.combination),"insertBeforeButton"!==n)c=a[0].style.background;else if("#ECECEC"==a[0].children[1].style.background)c="#F5F5F5";else var c="#ECECEC";for(var d=1,f=0;f<e.steps.length;f++)"Summe"!==e.steps[f].description&&d++;var g=document.createElement("TD");g.style.background="#F5F5F5",g.innerHTML='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="64px" height="64px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve"> <g> <g> <g id="circle_copy_4"> <g> <path d="M32,0C14.327,0,0,14.327,0,32s14.327,32,32,32s32-14.327,32-32S49.673,0,32,0z M32,62.001C15.432,62.001,2,48.568,2,32 C2,15.432,15.432,2,32,2c16.568,0,30,13.432,30,30C62,48.568,48.568,62.001,32,62.001z" fill="grey"/> </g> </g> <g id="Menu_1_"> <g> <polygon points="44,31 33,31 33,20 31,20 31,31 20,31 20,33 31,33 31,44 33,44 33,33 44,33 \t\t\t\t" fill="grey"/> </g> </g> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg>',g.children[0].classList.toggle("insertBefore"),g.children[0].onclick=function(){replaceProcedure(g.children[0])},g.classList.toggle("insertBeforeButton"),g.rowSpan=(e.steps.length+1).toString(),o.appendChild(g);var p=document.createElement("TD");p.style.textAlign="center",p.rowSpan=d.toString(),p.appendChild(document.createTextNode(a[0].children[1].innerHTML)),o.appendChild(p);var m=document.createElement("TD");m.style.textAlign="center",m.rowSpan=d.toString(),m.appendChild(a[0].children[2].children[0].cloneNode(!0)),m.children[0].value=a[0].children[2].children[0].value,m.children[0].style.background=c,o.appendChild(m);var v=document.createElement("TD");v.style.textAlign="left",v.appendChild(document.createTextNode(e.name)),v.onclick=replaceProcedure,o.appendChild(v);var y=document.createElement("TD");y.style.textAlign="center",y.appendChild(document.createTextNode(e.amount)),y.rowSpan=d.toString(),o.appendChild(y);for(f=0;f<10;f++){var x=document.createElement("TD");9==f&&(x.innerHTML='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="64px" height="64px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve"> <g> <g> <g id="circle_63_"> <g> <path d="M32,0C14.327,0,0,14.327,0,32s14.327,32,32,32s32-14.327,32-32S49.673,0,32,0z M32,62C15.432,62,2,48.568,2,32 C2,15.432,15.432,2,32,2c16.568,0,30,13.432,30,30C62,48.568,48.568,62,32,62z" fill="grey"/> </g> </g> <g id="Rectangle_2_copy"> <g> <path d="M37,24v-2c0-1.104-0.896-2-2-2h-6c-1.104,0-2,0.896-2,2v2h-5v2h2v16c0,1.104,0.896,2,2,2h12c1.104,0,2-0.896,2-2V26h2 v-2H37z M29,22h6v2h-6V22z M38,42H26V26h12V42z M31,28h-2v12h2V28z M35,28h-2v12h2V28z" fill="grey"/> </g> </g> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg>',x.children[0].classList.toggle("deleteHover"),x.children[0].onclick=function(){deleteProcedure(x)},x.classList.toggle("deleteButton"),x.rowSpan=d.toString()),o.appendChild(x)}o.style.background=c,s.insertBefore(o,s.children[u]);for(var b=1,f=0;f<e.steps.length;f++){var E=e.steps[f];if("Summe"!=E.description){var C=document.createElement("TR");C.classList.toggle(n),C.setAttribute("name",ids.group+";"+ids.procedure+";"+ids.combination);var S=["description","time","fuelCons","deprec","interest","others","maintenance","lubricants","services"];void 0===E.services&&(E.services=0),S.forEach(function(t){var e=document.createElement("TD");e.appendChild(document.createTextNode(E[t])),e.style.textAlign="center","description"==t&&(e.style.textAlign="left",e.onclick=function(){replaceProcedure(e)}),C.style.background=c,C.appendChild(e)});var N=document.createElement("TD"),_=(E.deprec+E.interest+E.others+E.maintenance+E.lubricants+E.services+1*E.fuelCons).toFixed(2);N.appendChild(document.createTextNode(_)),N.style.textAlign="center",C.appendChild(N),s.insertBefore(C,s.children[u+b]),b++}}var T={frequency:Number(a[0].children[1].innerHTML),month:m.children[0].value,name:e.name,amount:I.value,steps:[],group:Number(ids.group),procedure:Number(ids.procedure),combination:Number(ids.combination)};if(e.steps.forEach(function(t){T.steps.push({abr:"",description:t.description,time:t.time,fuelCons:t.fuelCons,deprec:t.deprec,interest:t.interest,others:t.others,maintenance:t.maintenance,lubricants:t.lubricants,services:0})}),"insertBeforeButton"!==n?l[i].procedures.splice(r,1,T):l[i].procedures.splice(r,0,T),"insertBeforeButton"!==n)for(f=0;f<a.length;f++)s.removeChild(a[f]);return w.classList.toggle("hide"),M.classList.toggle("hide"),profile.put(l)})})},document.getElementById("buttonCancel").onclick=function(){w.classList.toggle("hide"),M.classList.toggle("hide")}}function asyncReq(t,e,n,i){Promise.all(t.map(get)).then(function(t){t.forEach(function(t){return e(t,n)})}).catch(function(t){}).then(function(){if(void 0!==i)return i()})}function get(t){return new Promise(function(e,n){var i=new XMLHttpRequest;i.open("get",t),i.onload=function(){200==i.status?e(i.response):n(Error(i.statusText))},i.onerror=function(){n(Error("Network Error"))},i.send()})}function createSQRurl(t){var e=new proj4.Proj("EPSG:3857"),n=new proj4.Proj("WGS84"),i=turf.bbox(t),r=i.splice(0,2),s=i;return reprojectionFirst=proj4(n,e,r),reprojectionSecond=proj4(n,e,s),bboxString=reprojectionFirst.concat(reprojectionSecond).toString().replace(/,/g,"%2C"),"https://services.bgr.de/wms/boden/sqr1000/?&REQUEST=GetFeatureInfo&SERVICE=WMS&CRS=EPSG%3A3857&STYLES=default&TRANSPARENT=true&VERSION=1.3.0&FORMAT=image%2Fpng&BBOX="+bboxString+"&HEIGHT=830&WIDTH=561&LAYERS=18&QUERY_LAYERS=18&INFO_FORMAT=text%2Fhtml"}function createSoilTypeUrl(t){var e=new proj4.Proj("EPSG:3857"),n=new proj4.Proj("WGS84"),i=turf.bbox(t),r=i.splice(0,2),s=i;return reprojectionFirst=proj4(n,e,r),reprojectionSecond=proj4(n,e,s),bboxString=reprojectionFirst.concat(reprojectionSecond).toString().replace(/,/g,"%2C"),"https://services.bgr.de/wms/boden/boart1000ob/?&REQUEST=GetFeatureInfo&SERVICE=WMS&CRS=EPSG%3A3857&STYLES=default&TRANSPARENT=true&VERSION=1.3.0&FORMAT=image%2Fpng&BBOX="+bboxString+"&HEIGHT=880&WIDTH=514&LAYERS=0&QUERY_LAYERS=0&INFO_FORMAT=text%2Fhtml&I=452&J=371"}function sqrHtmlParsing(t){var e=(new DOMParser).parseFromString(t,"text/html");return void 0===e.getElementsByTagName("td")[3]?0:Number(e.getElementsByTagName("td")[3].innerHTML)}function soilTypeHtmlParsing(t){var e=(new DOMParser).parseFromString(t,"text/html");return void 0===e.getElementsByTagName("td")[3]?"":e.getElementsByTagName("td")[3].innerHTML}function lstParse(t,e){var n=t.results,i=function(){var t=n.search("MODEL STATUS")+18,e=t+2,i=n.slice(t,e);return parseFloat(i)}();if(-1!==[1,2,8,9,15,16,17].indexOf(i)){for(var r=function(){var t=n.search("OBJECTIVE VALUE")+15,e=t+n.slice(t).search("\n"),i=n.slice(t,e);return parseFloat(i)}(),s={},o=0;o<Object.keys(e.variables).length;o++){var a,l=Object.keys(e.variables)[o],u=n.search(l.slice(0,9))+19,h=u+12,c=n.slice(u,h);a=isNaN(c)?0:parseFloat(c),s[l]=a}return s.feasible=!0,s.bounded=!0,s.result=r,s}var d=[1,"Optimal",2,"Locally Optimal",3,"Unbounded",4,"Infeasible",5,"Locally Infeasible",6,"Intermediate Infeasible",7,"Intermediate Nonoptimal",8,"Integer Solution",9,"Intermediate Non-Integer",10,"Integer Infeasible",11,"Licensing Problems - No Solution",12,"Error Unknown",13,"Error No Solution",14,"No Solution Returned",15,"Solved Unique",16,"Solved",17,"Solved Singular",18,"Unbounded - No Solution",19,"Infeasible - No Solution",NaN,"User error, rerun model with log flag"];throw new Error("The problem was not solved because of the following GAMS error: "+d[d.indexOf(i)+1])}function NEOSResults(t,e,n){var i=$('<input name="password">').attr("value",e),r=$('<input name="job_number">').attr("value",t);$("<form>").append(i).append(r).NEOSResults(n)}function NEOSResultsTxt(t,e,n){var i=$('<input name="password">').attr("value",e),r=$('<input name="job_number">').attr("value",t);$("<form>").append(i).append(r).NEOSResultsTxt(n)}function NEOSSubmitUrl(t,e){var n=$('<input name="url">').attr("value",t);$("<form>").append(n).NEOSSubmit(e)}function NEOSSubmitString(t,e){var n=$('<textarea name="string">').text(t);$("<form>").append(n).NEOSSubmit(e)}function NEOSSubmitStringAndWait(t,e,n){var i=$('<textarea name="string">').text(t);$("<form>").append(i).NEOSSubmitAndWait(e,n)}function reformatGAMS(t,e){if(!t)throw new Error("Solver requires a model to operate on");var n=!0,i=!0;void 0===t.ints&&(n=!1),void 0===t.binaries&&(i=!1),e||(e=.1);for(var r,s,o,a=Object.keys(t.variables),l=[t.optimize],u="",h=0;h<a.length;h++){var c=a[h];o=t.variables[a[h]],r=""===u?" ":" + ",!0===n&&!0===i?c in t.ints||c in t.binaries||l.push(c):!0===n&&!1===i?c in t.ints||l.push(c):!1===n&&!0===i&&(c in t.binaries||l.push(c)),t.optimize in t.variables[a[h]]&&(u+=r+a[h]+" * ("+o[t.optimize].toFixed(2)+")\n")}var d=Object.keys(t.constraints),f={};f.objective={},f.objective.name="e_Objective",f.objective.constraint=t.optimize+"  =e= "+u+" ;";for(h=0;h<d.length;h++){f[[h]]={},f[[h]].name="e_"+d[h];var g,p=t.constraints[d[h]],m=Object.getOwnPropertyNames(p)[0];switch(m){case"max":g="=g=";break;case"min":g="=l=";break;case"equal":g="=e=";break;default:throw new Error("The objective for the constraint /'"+d[h]+"/' is not compatible. Check for typos in 'max', 'min' or 'equal'.")}for(var v="",y=0;y<a.length;y++)o=t.variables[a[y]],r=""===v?" ":" + ",d[h]in o&&(v+=r+a[y]+" * ("+o[d[h]].toFixed(2)+")");f[[h]].constraint="("+p[m].toFixed(2)+") "+g+v+" ;"}var x="";x+="$ontext\n  jsLPsolver conversion\n  project: "+t.name+"\n$offtext\n\n",x+="Variable  \n ";for(h=0;h<l.length;h++)s=h===l.length-1?"":", ",x+=l[h]+s+"\n  ";if(x+=";\n\n",!0===i){var b=Object.keys(t.binaries);if(b.length>0){x+="Binary Variable  \n";for(h=0;h<b.length;h++)s=", ",h===b.length-1&&(s=""),x+=b[h]+s+"\n  ";x+=";\n\n"}}if(!0===n){var E=Object.keys(t.ints);if(E.length>0){x+="Integer Variable  \n";for(h=0;h<E.length;h++)s=", ",h===E.length-1&&(s=""),x+=E[h]+s+"\n  ";x+="; \n\n"}}var I=Object.keys(f);x+="Equation  \n";for(h=0;h<I.length;h++)s=", ",h===I.length-1&&(s=""),x+=f[I[h]].name+s+"\n  ";x+="; \n\n";for(h=0;h<I.length;h++)x+=f[I[h]].name+".. \n  "+f[I[h]].constraint+"\n  ";x+="\nmodel "+t.name+" / all /; \n",x+="option optcr = "+e+"; \n";var C="maximizing ";return"min"===t.opType&&(C="minimizing "),x+="solve "+t.name+" using MIP "+C+t.optimize+";",x=x.replace(/[^\x00-\x7F]/g,""),x=x.replace(/ü/,"ue"),x=x.replace(/ö/,"oe"),x=x.replace(/ä/,"ae"),x=x.replace(/Ü/,"Ue"),x=x.replace(/Ö/,"Oe"),x=x.replace(/Ä/,"Ae")}document.getElementById("signup").onclick=function(){loadingScreen(signup,2,"weiter-data",null,"EINEN AUGENBLICK BITTE")},document.getElementById("login-button").onclick=function(){loadingScreen(login,2,"weiter-data",null,"EINEN AUGENBLICK BITTE")},window.File&&window.FileList&&window.FileReader?(document.getElementById("xml").addEventListener("change",function(t){var e=t.target.files[0],n=new FileReader;n.addEventListener("load",function(t){return parseElanXml(t.target.result)}),n.readAsText(e)}),document.getElementById("gml").addEventListener("change",function(t){if(""!=document.getElementById("xml")){var e=t.target.files[0],n=new FileReader;n.addEventListener("load",function(t){return parseElanGml(t.target.result)}),n.readAsText(e)}})):console.log("Your browser does not support File API"),"object"==typeof exports&&(module.exports=require("./main")),function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return r(n||t)},h,h.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){function i(t,e,n){this.tableau=new r(t,e),this.name=n,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!0,this.checkForCycles=!1}var r=t("./Tableau/Tableau.js"),s=(t("./Tableau/branchAndCut.js"),t("./expressions.js")),o=s.Constraint,a=s.Equality,l=s.Variable,u=s.IntegerVariable;s.Term;e.exports=i,i.prototype.minimize=function(){return this.isMinimization=!0,this},i.prototype.maximize=function(){return this.isMinimization=!1,this},i.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var t=this.lastElementIndex;return this.lastElementIndex+=1,t},i.prototype._addConstraint=function(t){var e=t.slack;this.tableau.variablesPerIndex[e.index]=e,this.constraints.push(t),this.nConstraints+=1,!0===this.tableauInitialized&&this.tableau.addConstraint(t)},i.prototype.smallerThan=function(t){var e=new o(t,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(e),e},i.prototype.greaterThan=function(t){var e=new o(t,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(e),e},i.prototype.equal=function(t){var e=new o(t,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(e);var n=new o(t,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(n),new a(e,n)},i.prototype.addVariable=function(t,e,n,i,r){if("string"==typeof r)switch(r){case"required":r=0;break;case"strong":r=1;break;case"medium":r=2;break;case"weak":r=3;break;default:r=0}var s=this.tableau.getNewElementIndex();null!==e&&void 0!==e||(e="v"+s),null!==t&&void 0!==t||(t=0),null!==r&&void 0!==r||(r=0);var o;return n?(o=new u(e,t,s,r),this.integerVariables.push(o)):o=new l(e,t,s,r),this.variables.push(o),this.tableau.variablesPerIndex[s]=o,i&&(this.unrestrictedVariables[s]=!0),this.nVariables+=1,!0===this.tableauInitialized&&this.tableau.addVariable(o),o},i.prototype._removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e?(this.constraints.splice(e,1),this.nConstraints-=1,!0===this.tableauInitialized&&this.tableau.removeConstraint(t),t.relaxation&&this.removeVariable(t.relaxation)):console.warn("[Model.removeConstraint] Constraint not present in model")},i.prototype.removeConstraint=function(t){return t.isEquality?(this._removeConstraint(t.upperBound),this._removeConstraint(t.lowerBound)):this._removeConstraint(t),this},i.prototype.removeVariable=function(t){var e=this.variables.indexOf(t);if(-1!==e)return this.variables.splice(e,1),!0===this.tableauInitialized&&this.tableau.removeVariable(t),this;console.warn("[Model.removeVariable] Variable not present in model")},i.prototype.updateRightHandSide=function(t,e){return!0===this.tableauInitialized&&this.tableau.updateRightHandSide(t,e),this},i.prototype.updateConstraintCoefficient=function(t,e,n){return!0===this.tableauInitialized&&this.tableau.updateConstraintCoefficient(t,e,n),this},i.prototype.setCost=function(t,e){var n=t-e.cost;return!1===this.isMinimization&&(n=-n),e.cost=t,this.tableau.updateCost(e,n),this},i.prototype.loadJson=function(t){this.isMinimization="max"!==t.opType;for(var e=t.variables,n=t.constraints,i={},r={},s=Object.keys(n),o=s.length,l=0;l<o;l+=1){var u,h,c=s[l],d=n[c],f=d.equal,g=d.weight,p=d.priority,m=void 0!==g||void 0!==p;if(void 0===f){var v=d.min;void 0!==v&&(u=this.greaterThan(v),i[c]=u,m&&u.relax(g,p));var y=d.max;void 0!==y&&(h=this.smallerThan(y),r[c]=h,m&&h.relax(g,p))}else{u=this.greaterThan(f),i[c]=u,h=this.smallerThan(f),r[c]=h;var x=new a(u,h);m&&x.relax(g,p)}}for(var b=Object.keys(e),E=b.length,I=t.ints||{},C=t.binaries||{},w=t.unrestricted||{},M=t.optimize,S=0;S<E;S+=1){var N=b[S],_=e[N],T=_[M]||0,L=!!C[N],P=!!I[N]||L,R=!!w[N],O=this.addVariable(T,N,P,R);L&&this.smallerThan(1).addTerm(1,O);var D=Object.keys(_);for(l=0;l<D.length;l+=1){var k=D[l];if(k!==M){var A=_[k],F=i[k];void 0!==F&&F.addTerm(A,O);var B=r[k];void 0!==B&&B.addTerm(A,O)}}}return this},i.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},i.prototype.solve=function(){return!1===this.tableauInitialized&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},i.prototype.isFeasible=function(){return this.tableau.feasible},i.prototype.save=function(){return this.tableau.save()},i.prototype.restore=function(){return this.tableau.restore()},i.prototype.activateMIRCuts=function(t){this.useMIRCuts=t},i.prototype.debug=function(t){this.checkForCycles=t},i.prototype.log=function(t){return this.tableau.log(t)}},{"./Tableau/Tableau.js":6,"./Tableau/branchAndCut.js":8,"./expressions.js":17}],2:[function(t,e,n){e.exports=function(t,e){var n,i,r,s,o,a=e.optimize,l=JSON.parse(JSON.stringify(e.optimize)),u=Object.keys(e.optimize),h=0,c={},d="",f={},g=[];for(delete e.optimize,i=0;i<u.length;i++)l[u[i]]=0;for(i=0;i<u.length;i++){e.optimize=u[i],e.opType=a[u[i]],n=t.Solve(e,void 0,void 0,!0);for(o in u)if(!e.variables[u[o]]){n[u[o]]=n[u[o]]?n[u[o]]:0;for(s in e.variables)e.variables[s][u[o]]&&n[s]&&(n[u[o]]+=n[s]*e.variables[s][u[o]])}for(d="base",r=0;r<u.length;r++)n[u[r]]?d+="-"+(1e3*n[u[r]]|0)/1e3:d+="-0";if(!c[d]){for(c[d]=1,h++,r=0;r<u.length;r++)n[u[r]]&&(l[u[r]]+=n[u[r]]);delete n.feasible,delete n.result,g.push(n)}}for(i=0;i<u.length;i++)e.constraints[u[i]]={equal:l[u[i]]/h};e.optimize="cheater-"+Math.random(),e.opType="max";for(i in e.variables)e.variables[i].cheater=1;for(i in g)for(s in g[i])f[s]=f[s]||{min:1e99,max:-1e99};for(i in f)for(s in g)g[s][i]?(g[s][i]>f[i].max&&(f[i].max=g[s][i]),g[s][i]<f[i].min&&(f[i].min=g[s][i])):(g[s][i]=0,f[i].min=0);return n=t.Solve(e,void 0,void 0,!0),{midpoint:n,vertices:g,ranges:f}}},{}],3:[function(t,e,n){function i(t){var e={is_blank:/^\W{0,}$/,is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},n={opType:"",optimize:"_obj",constraints:{},variables:{}},i={">=":"min","<=":"max","=":"equal"},r="",s=null,o="",a="",l="",u=0;"string"==typeof t&&(t=t.split("\n"));for(var h=0;h<t.length;h++)if(l="__"+h,r=t[h],0,s=null,e.is_objective.test(r))n.opType=r.match(/(max|min)/gi)[0],(s=r.match(e.parse_lhs).map(function(t){return t.replace(/\s+/,"")}).slice(1)).forEach(function(t){o=t.match(e.get_num),o=null===o?"-"===t.substr(0,1)?-1:1:o[0],o=parseFloat(o),a=t.match(e.get_word)[0].replace(/\;$/,""),n.variables[a]=n.variables[a]||{},n.variables[a]._obj=o});else if(e.is_int.test(r))s=r.match(e.parse_int).slice(1),n.ints=n.ints||{},s.forEach(function(t){t=t.replace(";",""),n.ints[t]=1});else if(e.is_constraint.test(r)){var c=r.indexOf(":");(s=(-1===c?r:r.slice(c+1)).match(e.parse_lhs).map(function(t){return t.replace(/\s+/,"")})).forEach(function(t){o=t.match(e.get_num),o=null===o?"-"===t.substr(0,1)?-1:1:o[0],o=parseFloat(o),a=t.match(e.get_word)[0],n.variables[a]=n.variables[a]||{},n.variables[a][l]=o}),u=parseFloat(r.match(e.parse_rhs)[0]),r=i[r.match(e.parse_dir)[0]],n.constraints[l]=n.constraints[l]||{},n.constraints[l][r]=u}else e.is_unrestricted.test(r)&&(s=r.match(e.parse_int).slice(1),n.unrestricted=n.unrestricted||{},s.forEach(function(t){t=t.replace(";",""),n.unrestricted[t]=1}));return n}function r(t){if(!t)throw new Error("Solver requires a model to operate on");var e="",n={max:"<=",min:">=",equal:"="},i=new RegExp("[^A-Za-z0-9]+","gi");e+=t.opType+":";for(var r in t.variables)t.variables[r][r]=t.variables[r][r]?t.variables[r][r]:1,t.variables[r][t.optimize]&&(e+=" "+t.variables[r][t.optimize]+" "+r.replace(i,"_"));e+=";\n";for(r in t.constraints)for(var s in t.constraints[r]){for(var o in t.variables)t.variables[o][r]&&(e+=" "+t.variables[o][r]+" "+o.replace(i,"_"));e+=" "+n[s]+" "+t.constraints[r][s],e+=";\n"}if(t.ints){e+="\n\n";for(r in t.ints)e+="int "+r.replace(i,"_")+";\n"}if(t.unrestricted){e+="\n\n";for(r in t.unrestricted)e+="unrestricted "+r.replace(i,"_")+";\n"}return e}e.exports=function(t){return t.length?i(t):r(t)}},{}],4:[function(t,e,n){function i(t,e,n,i,s){r.call(this,t,e,n,i),this.iter=s}var r=t("./Solution.js");e.exports=i,i.prototype=Object.create(r.prototype),i.constructor=i},{"./Solution.js":5}],5:[function(t,e,n){function i(t,e,n,i){this.feasible=n,this.evaluation=e,this.bounded=i,this._tableau=t}e.exports=i,i.prototype.generateSolutionSet=function(){for(var t={},e=this._tableau,n=e.varIndexByRow,i=e.variablesPerIndex,r=e.matrix,s=e.rhsColumn,o=e.height-1,a=Math.round(1/e.precision),l=1;l<=o;l+=1){var u=i[n[l]];if(void 0!==u&&!0!==u.isSlack){var h=r[l][s];t[u.id]=Math.round(h*a)/a}}return t}},{}],6:[function(t,e,n){function i(t,e){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.tolerance=t||0,this.precision=e||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}function r(t,e){this.priority=t,this.reducedCosts=new Array(e);for(var n=0;n<e;n+=1)this.reducedCosts[n]=0}var s=t("./Solution.js"),o=t("./MilpSolution.js");e.exports=i,i.prototype.solve=function(){return this.simplex(),this.model.getNumberOfIntegerVariables()>0&&this.branchAndCut(),this.updateVariableValues(),this.getSolution()},r.prototype.copy=function(){var t=new r(this.priority,this.reducedCosts.length);return t.reducedCosts=this.reducedCosts.slice(),t},i.prototype.setOptionalObjective=function(t,e,n){var i=this.objectivesByPriority[t];void 0===i&&(i=new r(t,Math.max(this.width,e+1)),this.objectivesByPriority[t]=i,this.optionalObjectives.push(i),this.optionalObjectives.sort(function(t,e){return t.priority-e.priority})),i.reducedCosts[e]=n},i.prototype.initialize=function(t,e,n,i){this.variables=n,this.unrestrictedVars=i,this.width=t,this.height=e;for(var r=new Array(t),s=0;s<t;s++)r[s]=0;this.matrix=new Array(e);for(var o=0;o<e;o++)this.matrix[o]=r.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=t+e-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},i.prototype._resetMatrix=function(){var t,e,n=this.model.variables,i=this.model.constraints,r=n.length,s=i.length,o=this.matrix[0],a=!0===this.model.isMinimization?-1:1;for(t=0;t<r;t+=1){var l=n[t],u=l.priority,h=a*l.cost;0===u?o[t+1]=h:this.setOptionalObjective(u,t+1,h),e=n[t].index,this.rowByVarIndex[e]=-1,this.colByVarIndex[e]=t+1,this.varIndexByCol[t+1]=e}for(var c=1,d=0;d<s;d+=1){var f=i[d],g=f.index;this.rowByVarIndex[g]=c,this.colByVarIndex[g]=-1,this.varIndexByRow[c]=g;var p,m,v=f.terms,y=v.length,x=this.matrix[c++];if(f.isUpperBound){for(p=0;p<y;p+=1)m=v[p],x[this.colByVarIndex[m.variable.index]]=m.coefficient;x[0]=f.rhs}else{for(p=0;p<y;p+=1)m=v[p],x[this.colByVarIndex[m.variable.index]]=-m.coefficient;x[0]=-f.rhs}}},i.prototype.setModel=function(t){this.model=t;var e=t.nVariables+1,n=t.nConstraints+1;return this.initialize(e,n,t.variables,t.unrestrictedVariables),this._resetMatrix(),this},i.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var t=this.lastElementIndex;return this.lastElementIndex+=1,t},i.prototype.density=function(){for(var t=0,e=this.matrix,n=0;n<this.height;n++)for(var i=e[n],r=0;r<this.width;r++)0!==i[r]&&(t+=1);return t/(this.height*this.width)},i.prototype.setEvaluation=function(){var t=Math.round(1/this.precision),e=this.matrix[this.costRowIndex][this.rhsColumn],n=Math.round(e*t)/t;this.evaluation=n,0===this.simplexIters&&(this.relaxedSolution=n)},i.prototype.getSolution=function(){var t=!0===this.model.isMinimization?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new o(this,t,this.feasible,this.bounded,this.branchAndCutIterations):new s(this,t,this.feasible,this.bounded)}},{"./MilpSolution.js":4,"./Solution.js":5}],7:[function(t,e,n){var i=t("./Tableau.js");i.prototype.copy=function(){var t=new i(this.precision);t.width=this.width,t.height=this.height,t.nVars=this.nVars,t.model=this.model,t.variables=this.variables,t.variablesPerIndex=this.variablesPerIndex,t.unrestrictedVars=this.unrestrictedVars,t.lastElementIndex=this.lastElementIndex,t.varIndexByRow=this.varIndexByRow.slice(),t.varIndexByCol=this.varIndexByCol.slice(),t.rowByVarIndex=this.rowByVarIndex.slice(),t.colByVarIndex=this.colByVarIndex.slice(),t.availableIndexes=this.availableIndexes.slice();for(var e=[],n=0;n<this.optionalObjectives.length;n++)e[n]=this.optionalObjectives[n].copy();t.optionalObjectives=e;for(var r=this.matrix,s=new Array(this.height),o=0;o<this.height;o++)s[o]=r[o].slice();return t.matrix=s,t},i.prototype.save=function(){this.savedState=this.copy()},i.prototype.restore=function(){if(null!==this.savedState){var t=this.savedState,e=t.matrix;this.nVars=t.nVars,this.model=t.model,this.variables=t.variables,this.variablesPerIndex=t.variablesPerIndex,this.unrestrictedVars=t.unrestrictedVars,this.lastElementIndex=t.lastElementIndex,this.width=t.width,this.height=t.height;var n,i;for(n=0;n<this.height;n+=1){var r=e[n],s=this.matrix[n];for(i=0;i<this.width;i+=1)s[i]=r[i]}var o=t.varIndexByRow;for(i=0;i<this.height;i+=1)this.varIndexByRow[i]=o[i];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var a=t.varIndexByCol;for(n=0;n<this.width;n+=1)this.varIndexByCol[n]=a[n];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var l=t.rowByVarIndex,u=t.colByVarIndex,h=0;h<this.nVars;h+=1)this.rowByVarIndex[h]=l[h],this.colByVarIndex[h]=u[h];if(t.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var c=0;c<t.optionalObjectives.length;c++){var d=t.optionalObjectives[c].copy();this.optionalObjectives[c]=d,this.optionalObjectivePerPriority[d.priority]=d}}}}},{"./Tableau.js":6}],8:[function(t,e,n){function i(t,e,n){this.type=t,this.varIndex=e,this.value=n}function r(t,e){this.relaxedEvaluation=t,this.cuts=e}function s(t,e){return e.relaxedEvaluation-t.relaxedEvaluation}var o=t("./Tableau.js");o.prototype.applyCuts=function(t){if(this.restore(),this.addCutConstraints(t),this.simplex(),this.model.useMIRCuts)for(var e=!0;e;){var n=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex(),this.computeFractionalVolume(!0)>=.9*n&&(e=!1)}},o.prototype.branchAndCut=function(){for(var t=[],e=0,n=this.tolerance,o=this.relaxedSolution*(1-n/100),a=1/0,l=null,u=[],h=0;h<this.optionalObjectives.length;h+=1)u.push(1/0);var c=new r(-1/0,[]);for(t.push(c);t.length>0&&a===1/0||a>o;)if(!((c=t.pop()).relaxedEvaluation>a)){var d=c.cuts;if(this.applyCuts(d),e++,!1!==this.feasible){var f=this.evaluation;if(!(f>a)){if(f===a){for(var g=!0,p=0;p<this.optionalObjectives.length&&!(this.optionalObjectives[p].reducedCosts[0]>u[p]);p+=1)if(this.optionalObjectives[p].reducedCosts[0]<u[p]){g=!1;break}if(g)continue}if(!0===this.isIntegral()){if(1===e)return void(this.branchAndCutIterations=e);l=c,a=f;for(var m=0;m<this.optionalObjectives.length;m+=1)u[m]=this.optionalObjectives[m].reducedCosts[0]}else{1===e&&this.save();for(var v=this.getMostFractionalVar(),y=v.index,x=[],b=[],E=d.length,I=0;I<E;I+=1){var C=d[I];C.varIndex===y?"min"===C.type?b.push(C):x.push(C):(x.push(C),b.push(C))}var w=Math.ceil(v.value),M=Math.floor(v.value),S=new i("min",y,w);x.push(S);var N=new i("max",y,M);b.push(N),t.push(new r(f,x)),t.push(new r(f,b)),t.sort(s)}}}}null!==l&&this.applyCuts(l.cuts),this.branchAndCutIterations=e}},{"./Tableau.js":6}],9:[function(t,e,n){function i(t,e){this.index=t,this.value=e}var r=t("./Tableau.js");r.prototype.getMostFractionalVar=function(){for(var t=0,e=null,n=null,r=this.model.integerVariables,s=r.length,o=0;o<s;o++){var a=r[o].index,l=this.rowByVarIndex[a];if(-1!==l){var u=this.matrix[l][this.rhsColumn],h=Math.abs(u-Math.round(u));t<h&&(t=h,e=a,n=u)}}return new i(e,n)},r.prototype.getFractionalVarWithLowestCost=function(){for(var t=1/0,e=null,n=null,r=this.model.integerVariables,s=r.length,o=0;o<s;o++){var a=r[o],l=a.index,u=this.rowByVarIndex[l];if(-1!==u){var h=this.matrix[u][this.rhsColumn];if(Math.abs(h-Math.round(h))>this.precision){var c=a.cost;t>c&&(t=c,e=l,n=h)}}}return new i(e,n)}},{"./Tableau.js":6}],10:[function(t,e,n){var i=t("./Tableau.js"),r=t("../expressions.js").SlackVariable;i.prototype.addCutConstraints=function(t){for(var e=t.length,n=this.height,i=n+e,s=n;s<i;s+=1)void 0===this.matrix[s]&&(this.matrix[s]=this.matrix[s-1].slice());this.height=i,this.nVars=this.width+this.height-2;for(var o,a=this.width-1,l=0;l<e;l+=1){var u=t[l],h=n+l,c="min"===u.type?-1:1,d=u.varIndex,f=this.rowByVarIndex[d],g=this.matrix[h];if(-1===f){for(g[this.rhsColumn]=c*u.value,o=1;o<=a;o+=1)g[o]=0;g[this.colByVarIndex[d]]=c}else{var p=this.matrix[f],m=p[this.rhsColumn];for(g[this.rhsColumn]=c*(u.value-m),o=1;o<=a;o+=1)g[o]=-c*p[o]}var v=this.getNewElementIndex();this.varIndexByRow[h]=v,this.rowByVarIndex[v]=h,this.colByVarIndex[v]=-1,this.variablesPerIndex[v]=new r("s"+v,v),this.nVars+=1}},i.prototype._addLowerBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var e=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[t]].isInteger)return!1;var n=e[t][this.rhsColumn],i=n-Math.floor(n);if(i<this.precision||1-this.precision<i)return!1;var s=this.height;e[s]=e[s-1].slice(),this.height+=1,this.nVars+=1;var o=this.getNewElementIndex();this.varIndexByRow[s]=o,this.rowByVarIndex[o]=s,this.colByVarIndex[o]=-1,this.variablesPerIndex[o]=new r("s"+o,o),e[s][this.rhsColumn]=Math.floor(n);for(var a=1;a<this.varIndexByCol.length;a+=1)if(this.variablesPerIndex[this.varIndexByCol[a]].isInteger){var l=e[t][a],u=Math.floor(l)+Math.max(0,l-Math.floor(l)-i)/(1-i);e[s][a]=u}else e[s][a]=Math.min(0,e[t][a]/(1-i));for(var h=0;h<this.width;h+=1)e[s][h]-=e[t][h];return!0},i.prototype._addUpperBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var e=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[t]].isInteger)return!1;var n=e[t][this.rhsColumn],i=n-Math.floor(n);if(i<this.precision||1-this.precision<i)return!1;var s=this.height;e[s]=e[s-1].slice(),this.height+=1,this.nVars+=1;var o=this.getNewElementIndex();this.varIndexByRow[s]=o,this.rowByVarIndex[o]=s,this.colByVarIndex[o]=-1,this.variablesPerIndex[o]=new r("s"+o,o),e[s][this.rhsColumn]=-i;for(var a=1;a<this.varIndexByCol.length;a+=1){var l=this.variablesPerIndex[this.varIndexByCol[a]],u=e[t][a],h=u-Math.floor(u);l.isInteger?e[s][a]=h<=i?-h:-(1-h)*i/h:e[s][a]=u>=0?-u:u*i/(1-i)}return!0},i.prototype.applyMIRCuts=function(){for(var t=this.height,e=0;e<t;e+=1)this._addUpperBoundMIRCut(e);for(e=0;e<t;e+=1)this._addLowerBoundMIRCut(e)}},{"../expressions.js":17,"./Tableau.js":6}],11:[function(t,e,n){var i=t("./Tableau.js");i.prototype._putInBase=function(t){var e=this.rowByVarIndex[t];if(-1===e){for(var n=this.colByVarIndex[t],i=1;i<this.height;i+=1){var r=this.matrix[i][n];if(r<-this.precision||this.precision<r){e=i;break}}this.pivot(e,n)}return e},i.prototype._takeOutOfBase=function(t){var e=this.colByVarIndex[t];if(-1===e){for(var n=this.rowByVarIndex[t],i=this.matrix[n],r=1;r<this.height;r+=1){var s=i[r];if(s<-this.precision||this.precision<s){e=r;break}}this.pivot(n,e)}return e},i.prototype.updateVariableValues=function(){for(var t=this.variables.length,e=Math.round(1/this.precision),n=0;n<t;n+=1){var i=this.variables[n],r=i.index,s=this.rowByVarIndex[r];if(-1===s)i.value=0;else{var o=this.matrix[s][this.rhsColumn];i.value=Math.round(o*e)/e}}},i.prototype.updateRightHandSide=function(t,e){var n=this.height-1,i=this.rowByVarIndex[t.index];if(-1===i){for(var r=this.colByVarIndex[t.index],s=0;s<=n;s+=1){var o=this.matrix[s];o[this.rhsColumn]-=e*o[r]}var a=this.optionalObjectives.length;if(a>0)for(var l=0;l<a;l+=1){var u=this.optionalObjectives[l].reducedCosts;u[this.rhsColumn]-=e*u[r]}}else this.matrix[i][this.rhsColumn]-=e},i.prototype.updateConstraintCoefficient=function(t,e,n){if(t.index===e.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var i=this._putInBase(t.index),r=this.colByVarIndex[e.index];if(-1===r)for(var s=this.rowByVarIndex[e.index],o=0;o<this.width;o+=1)this.matrix[i][o]+=n*this.matrix[s][o];else this.matrix[i][r]-=n},i.prototype.updateCost=function(t,e){var n=t.index,i=this.width-1,r=this.colByVarIndex[n];if(-1===r){var s,o=this.matrix[this.rowByVarIndex[n]];if(0===t.priority){var a=this.matrix[0];for(s=0;s<=i;s+=1)a[s]+=e*o[s]}else{var l=this.objectivesByPriority[t.priority].reducedCosts;for(s=0;s<=i;s+=1)l[s]+=e*o[s]}}else this.matrix[0][r]-=e},i.prototype.addConstraint=function(t){var e=t.isUpperBound?1:-1,n=this.height,i=this.matrix[n];void 0===i&&(i=this.matrix[0].slice(),this.matrix[n]=i);for(var r=this.width-1,s=0;s<=r;s+=1)i[s]=0;i[this.rhsColumn]=e*t.rhs;for(var o=t.terms,a=o.length,l=0;l<a;l+=1){var u=o[l],h=u.coefficient,c=u.variable.index,d=this.rowByVarIndex[c];if(-1===d)i[this.colByVarIndex[c]]+=e*h;else{var f=this.matrix[d];f[this.rhsColumn];for(s=0;s<=r;s+=1)i[s]-=e*h*f[s]}}var g=t.index;this.varIndexByRow[n]=g,this.rowByVarIndex[g]=n,this.colByVarIndex[g]=-1,this.height+=1},i.prototype.removeConstraint=function(t){var e=t.index,n=this.height-1,i=this._putInBase(e),r=this.matrix[n];this.matrix[n]=this.matrix[i],this.matrix[i]=r,this.varIndexByRow[i]=this.varIndexByRow[n],this.varIndexByRow[n]=-1,this.rowByVarIndex[e]=-1,this.availableIndexes[this.availableIndexes.length]=e,t.slack.index=-1,this.height-=1},i.prototype.addVariable=function(t){var e=this.height-1,n=this.width,i=!0===this.model.isMinimization?-t.cost:t.cost,r=t.priority,s=this.optionalObjectives.length;if(s>0)for(var o=0;o<s;o+=1)this.optionalObjectives[o].reducedCosts[n]=0;0===r?this.matrix[0][n]=i:(this.setOptionalObjective(r,n,i),this.matrix[0][n]=0);for(var a=1;a<=e;a+=1)this.matrix[a][n]=0;var l=t.index;this.varIndexByCol[n]=l,this.rowByVarIndex[l]=-1,this.colByVarIndex[l]=n,this.width+=1},i.prototype.removeVariable=function(t){var e=t.index,n=this._takeOutOfBase(e),i=this.width-1;if(n!==i){for(var r=this.height-1,s=0;s<=r;s+=1){var o=this.matrix[s];o[n]=o[i]}var a=this.optionalObjectives.length;if(a>0)for(var l=0;l<a;l+=1){var u=this.optionalObjectives[l].reducedCosts;u[n]=u[i]}var h=this.varIndexByCol[i];this.varIndexByCol[n]=h,this.colByVarIndex[h]=n}this.varIndexByCol[i]=-1,this.colByVarIndex[e]=-1,this.availableIndexes[this.availableIndexes.length]=e,t.index=-1,this.width-=1}},{"./Tableau.js":6}],12:[function(t,e,n){t("./simplex.js"),t("./cuttingStrategies.js"),t("./dynamicModification.js"),t("./log.js"),t("./backup.js"),t("./branchingStrategies.js"),t("./integerProperties.js"),e.exports=t("./Tableau.js")},{"./Tableau.js":6,"./backup.js":7,"./branchingStrategies.js":9,"./cuttingStrategies.js":10,"./dynamicModification.js":11,"./integerProperties.js":13,"./log.js":14,"./simplex.js":15}],13:[function(t,e,n){var i=t("./Tableau.js");i.prototype.countIntegerValues=function(){for(var t=0,e=1;e<this.height;e+=1)if(this.variablesPerIndex[this.varIndexByRow[e]].isInteger){var n=this.matrix[e][this.rhsColumn];(n-=Math.floor(n))<this.precision&&-n<this.precision&&(t+=1)}return t},i.prototype.isIntegral=function(){for(var t=this.model.integerVariables,e=t.length,n=0;n<e;n++){var i=this.rowByVarIndex[t[n].index];if(-1!==i){var r=this.matrix[i][this.rhsColumn];if(Math.abs(r-Math.round(r))>this.precision)return!1}}return!0},i.prototype.computeFractionalVolume=function(t){for(var e=-1,n=1;n<this.height;n+=1)if(this.variablesPerIndex[this.varIndexByRow[n]].isInteger){var i=this.matrix[n][this.rhsColumn];if(i=Math.abs(i),Math.min(i-Math.floor(i),Math.floor(i+1))<this.precision){if(!t)return 0}else-1===e?e=i:e*=i}return-1===e?0:e}},{"./Tableau.js":6}],14:[function(t,e,n){t("./Tableau.js").prototype.log=function(t,e){console.log("****",t,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var n,i,r,s,o,a,l,u,h,c,d,f="",g=[" "];for(i=1;i<this.width;i+=1)o=this.varIndexByCol[i],l=(a=void 0===(s=this.variablesPerIndex[o])?"c"+o:s.id).length,Math.abs(l-5),u=" ",h="\t",l>5?u+=" ":h+="\t",g[i]=u,f+=h+a;console.log(f);var p=this.matrix[this.costRowIndex],m="\t";for(n=1;n<this.width;n+=1)m+="\t",m+=g[n],m+=p[n].toFixed(5);for(m+="\t"+g[0]+p[0].toFixed(5),console.log(m+"\tZ"),r=1;r<this.height;r+=1){for(c=this.matrix[r],d="\t",i=1;i<this.width;i+=1)d+="\t"+g[i]+c[i].toFixed(5);d+="\t"+g[0]+c[0].toFixed(5),o=this.varIndexByRow[r],a=void 0===(s=this.variablesPerIndex[o])?"c"+o:s.id,console.log(d+"\t"+a)}console.log("");var v=this.optionalObjectives.length;if(v>0){console.log("    Optional objectives:");for(var y=0;y<v;y+=1){var x=this.optionalObjectives[y].reducedCosts,b="";for(n=1;n<this.width;n+=1)b+=x[n]<0?"":" ",b+=g[n],b+=x[n].toFixed(5);b+=(x[0]<0?"":" ")+g[0]+x[0].toFixed(5),console.log(b+" z"+y)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this}},{"./Tableau.js":6}],15:[function(t,e,n){var i=t("./Tableau.js");i.prototype.simplex=function(){return this.bounded=!0,this.phase1(),!0===this.feasible&&this.phase2(),this},i.prototype.phase1=function(){for(var t=this.model.checkForCycles,e=[],n=this.matrix,i=this.rhsColumn,r=this.width-1,s=this.height-1,o=0;;){for(var a=0,l=-this.precision,u=1;u<=s;u++)if(!(!0===this.unrestrictedVars[this.varIndexByRow[u]])){var h=n[u][i];h<l&&(l=h,a=u)}if(0===a)return this.feasible=!0,o;for(var c=0,d=-1/0,f=n[0],g=n[a],p=1;p<=r;p++){var m=g[p];if(!(-this.precision<m&&m<this.precision)&&(!0===this.unrestrictedVars[this.varIndexByCol[p]]||m<-this.precision)){var v=-f[p]/m;d<v&&(d=v,c=p)}}if(0===c)return this.feasible=!1,o;if(t){e.push([this.varIndexByRow[a],this.varIndexByCol[c]]);var y=this.checkForCycles(e);if(y.length>0)throw console.log("Cycle in phase 1"),console.log("Start :",y[0]),console.log("Length :",y[1]),new Error}this.pivot(a,c),o+=1}},i.prototype.phase2=function(){for(var t,e,n=this.model.checkForCycles,i=[],r=this.matrix,s=this.rhsColumn,o=this.width-1,a=this.height-1,l=this.precision,u=this.optionalObjectives.length,h=null,c=0;;){var d=r[this.costRowIndex];u>0&&(h=[]);for(var f=0,g=l,p=!1,m=1;m<=o;m++)t=d[m],e=!0===this.unrestrictedVars[this.varIndexByCol[m]],u>0&&-l<t&&t<l?h.push(m):e&&t<0?-t>g&&(g=-t,f=m,p=!0):t>g&&(g=t,f=m,p=!1);if(u>0)for(var v=0;0===f&&h.length>0&&v<u;){var y=[],x=this.optionalObjectives[v].reducedCosts;g=l;for(var b=0;b<h.length;b++)t=x[m=h[b]],e=!0===this.unrestrictedVars[this.varIndexByCol[m]],-l<t&&t<l?y.push(m):e&&t<0?-t>g&&(g=-t,f=m,p=!0):t>g&&(g=t,f=m,p=!1);h=y,v+=1}if(0===f)return this.setEvaluation(),this.simplexIters+=1,c;for(var E=0,I=1/0,C=(this.varIndexByRow,1);C<=a;C++){var w=r[C],M=w[s],S=w[f];if(!(-l<S&&S<l)){if(S>0&&l>M&&M>-l){I=0,E=C;break}var N=p?-M/S:M/S;N>l&&I>N&&(I=N,E=C)}}if(I===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[f],c;if(n){i.push([this.varIndexByRow[E],this.varIndexByCol[f]]);var _=this.checkForCycles(i);if(_.length>0)throw console.log("Cycle in phase 2"),console.log("Start :",_[0]),console.log("Length :",_[1]),new Error}this.pivot(E,f,!0),c+=1}};var r=[];i.prototype.pivot=function(t,e){var n=this.matrix,i=n[t][e],s=this.height-1,o=this.width-1,a=this.varIndexByRow[t],l=this.varIndexByCol[e];this.varIndexByRow[t]=l,this.varIndexByCol[e]=a,this.rowByVarIndex[l]=t,this.rowByVarIndex[a]=-1,this.colByVarIndex[l]=-1,this.colByVarIndex[a]=e;for(var u=n[t],h=0,c=0;c<=o;c++)0!==u[c]&&(u[c]/=i,r[h]=c,h+=1);u[e]=1/i;this.precision;for(var d,f,g,p=0;p<=s;p++){var m=n[p];if(p!==t&&0!==(d=m[e])){for(f=0;f<h;f++)0!==(g=u[c=r[f]])&&(m[c]=m[c]-d*g);m[e]=-d/i}}var v=this.optionalObjectives.length;if(v>0)for(var y=0;y<v;y+=1){var x=this.optionalObjectives[y].reducedCosts;if(0!==(d=x[e])){for(f=0;f<h;f++)0!==(g=u[c=r[f]])&&(x[c]=x[c]-d*g);x[e]=-d/i}}},i.prototype.checkForCycles=function(t){for(var e=0;e<t.length-1;e++)for(var n=e+1;n<t.length;n++){var i=t[e],r=t[n];if(i[0]===r[0]&&i[1]===r[1]){if(n-e>t.length-n)break;for(var s=!0,o=1;o<n-e;o++){var a=t[e+o],l=t[n+o];if(a[0]!==l[0]||a[1]!==l[1]){s=!1;break}}if(s)return[e,n-e]}}return[]}},{"./Tableau.js":6}],16:[function(t,e,n){n.CleanObjectiveAttributes=function(t){var e,n,i;if("string"==typeof t.optimize){if(t.constraints[t.optimize]){e=Math.random();for(n in t.variables)t.variables[n][t.optimize]&&(t.variables[n][e]=t.variables[n][t.optimize]);return t.constraints[e]=t.constraints[t.optimize],delete t.constraints[t.optimize],t}return t}for(i in t.optimize)if(t.constraints[i])if("equal"===t.constraints[i])delete t.optimize[i];else{e=Math.random();for(n in t.variables)t.variables[n][i]&&(t.variables[n][e]=t.variables[n][i]);t.constraints[e]=t.constraints[i],delete t.constraints[i]}return t}},{}],17:[function(t,e,n){function i(t,e,n,i){this.id=t,this.cost=e,this.index=n,this.value=0,this.priority=i}function r(t,e,n,r){i.call(this,t,e,n,r)}function s(t,e){i.call(this,t,0,e,0)}function o(t,e){this.variable=t,this.coefficient=e}function a(t,e,n){return 0===n||"required"===n?null:(e=e||1,n=n||1,!1===t.isMinimization&&(e=-e),t.addVariable(e,"r"+t.relaxationIndex++,!1,!1,n))}function l(t,e,n,i){this.slack=new s("s"+n,n),this.index=n,this.model=i,this.rhs=t,this.isUpperBound=e,this.terms=[],this.termsByVarIndex={},this.relaxation=null}function u(t,e){this.upperBound=t,this.lowerBound=e,this.model=t.model,this.rhs=t.rhs,this.relaxation=null}r.prototype.isInteger=!0,s.prototype.isSlack=!0,l.prototype.addTerm=function(t,e){var n=e.index,i=this.termsByVarIndex[n];if(void 0===i)i=new o(e,t),this.termsByVarIndex[n]=i,this.terms.push(i),!0===this.isUpperBound&&(t=-t),this.model.updateConstraintCoefficient(this,e,t);else{var r=i.coefficient+t;this.setVariableCoefficient(r,e)}return this},l.prototype.removeTerm=function(t){return this},l.prototype.setRightHandSide=function(t){if(t!==this.rhs){var e=t-this.rhs;!0===this.isUpperBound&&(e=-e),this.rhs=t,this.model.updateRightHandSide(this,e)}return this},l.prototype.setVariableCoefficient=function(t,e){var n=e.index;if(-1!==n){var i=this.termsByVarIndex[n];if(void 0===i)this.addTerm(t,e);else if(t!==i.coefficient){var r=t-i.coefficient;!0===this.isUpperBound&&(r=-r),i.coefficient=t,this.model.updateConstraintCoefficient(this,e,r)}return this}console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.")},l.prototype.relax=function(t,e){this.relaxation=a(this.model,t,e),this._relax(this.relaxation)},l.prototype._relax=function(t){null!==t&&(this.isUpperBound?this.setVariableCoefficient(-1,t):this.setVariableCoefficient(1,t))},u.prototype.isEquality=!0,u.prototype.addTerm=function(t,e){return this.upperBound.addTerm(t,e),this.lowerBound.addTerm(t,e),this},u.prototype.removeTerm=function(t){return this.upperBound.removeTerm(t),this.lowerBound.removeTerm(t),this},u.prototype.setRightHandSide=function(t){this.upperBound.setRightHandSide(t),this.lowerBound.setRightHandSide(t),this.rhs=t},u.prototype.relax=function(t,e){this.relaxation=a(this.model,t,e),this.upperBound._relax(this.relaxation),this.lowerBound._relax(this.relaxation)},e.exports={Constraint:l,Variable:i,IntegerVariable:r,SlackVariable:s,Equality:u,Term:o}},{}],18:[function(t,e,n){var i=t("./Tableau/index.js"),r=t("./Model"),s=t("./Tableau/branchAndCut"),o=t("./expressions.js"),a=t("./Validation"),l=o.Constraint,u=o.Variable,h=o.Numeral,c=o.Term,d=function(){"use strict";this.Model=r,this.branchAndCut=s,this.Constraint=l,this.Variable=u,this.Numeral=h,this.Term=c,this.Tableau=i,this.lastSolvedModel=null,this.Solve=function(t,e,n,i,s){if(s)for(var o in a)t=a[o](t);if(!t)throw new Error("Solver requires a model to operate on");t instanceof r==!1&&(t=new r(e,n).loadJson(t));var l=t.solve();if(this.lastSolvedModel=t,l.solutionSet=l.generateSolutionSet(),i)return l;var u={};return u.feasible=l.feasible,u.result=l.evaluation,u.bounded=l.bounded,Object.keys(l.solutionSet).map(function(t){u[t]=l.solutionSet[t]}),u},this.ReformatLP=t("./Reformat"),this.solveNEOS=function(t,e,n,i){return new Promise(function(r,s){if(!t)throw new Error("Solver requires a model to operate on");for(var o=!1,a=0;a<Object.keys(t.variables).length;a++){var l=Object.keys(t.variables)[a];if("_"===l.charAt(0))throw new Error("GAMS does not allow variables to start with a '_' character");if("_"===t.optimize.charAt(0))throw new Error("GAMS does not allow the objective variable to start with a '_' character");l.length>8&&(o=!0)}!0===o&&window.console.log("It is recommended to reduce the lenght of the variable names to less than 8 characters in order to avoid issues with the GAMS listing interpretation");var u=reformatGAMS(t,e);!0===i&&window.console.log(u),NEOSSubmitStringAndWait("<document> <category>milp</category> <solver>CPLEX</solver> <inputMethod>GAMS</inputMethod> <model><![CDATA["+u+"]]></model> <options><![CDATA[]]></options> <gdx><![CDATA[]]></gdx> <wantgdx><![CDATA[]]></wantgdx> <wantlog><![CDATA[]]></wantlog> <comments><![CDATA[]]></comments> <email>jsLPsolver@test.edu</email> </document>",n,function(e){!0===i&&window.console.log(e.results);var n=lstParse(e,t);r(n)})})},this.MultiObjective=function(e){return t("./Polyopt")(this,e)}};"function"==typeof define?define([],function(){return new d}):"object"==typeof window?window.solver=new d:e.exports=new d},{"./Model":1,"./Polyopt":2,"./Reformat":3,"./Tableau/branchAndCut":8,"./Tableau/index.js":12,"./Validation":16,"./expressions.js":17}]},{},[18]),function(t){var e="https://neos-server.org/neos/cgi-bin";t.extend(t.fn,{NEOSResults:function(n){return t.ajax({method:"POST",url:e+"/results.cgi",data:this.serialize(),success:n}),this},NEOSResultsTxt:function(n){return t.ajax({method:"POST",url:e+"/results_txt.cgi",data:this.serialize(),success:n}),this},NEOSSubmit:function(n){var i,r={};return this.children().each(function(e,n){$value=t(n),(i=$value.val())||(i=$value.text()),r[$value.attr("name")]=i}),t.ajax({method:"POST",url:e+"/submit.cgi",data:r,success:n}),this},NEOSSubmitAndWait:function(e,n){t(this).NEOSSubmit(function(t){if(e.text("BETRIEBSMODELL WIRD VERSCHLÜSSELT UND ZUR BERECHNUNG ÜBERMITTELT"),"error"in t)throw e.text(t.error),t.error;var i=setInterval(function(){NEOSResults(t.job_number,t.password,function(t){if("error"in t)throw clearInterval(i),e.text(t.error),t.error;"Waiting"===t.status?e.text("IN WARTESCHLEIFE"):"Running"===t.status?e.text("MODELL WIRD GELÖST"):"Done"===t.status&&(e.text("LÖSUNG WIRD ÜBERTRAGEN"),clearInterval(i),n(t))})},5e3)})}})}(jQuery),this.solveNEOS=function(t,e,n,i){return new Promise(function(r,s){if(!t)throw new Error("Solver requires a model to operate on");for(var o=!1,a=0;a<Object.keys(t.variables).length;a++){var l=Object.keys(t.variables)[a];if("_"===l.charAt(0))throw new Error("GAMS does not allow variables to start with a '_' character");if("_"===t.optimize.charAt(0))throw new Error("GAMS does not allow the objective variable to start with a '_' character");l.length>8&&(o=!0)}!0===o&&window.console.log("It is recommended to reduce the lenght of the variable names to less than 8 characters in order to avoid issues with the GAMS listing interpretation");var u=reformatGAMS(t,e);!0===i&&window.console.log(u),NEOSSubmitStringAndWait("<document> <category>milp</category> <solver>CPLEX</solver> <inputMethod>GAMS</inputMethod> <model><![CDATA["+u+"]]></model> <options><![CDATA[]]></options> <gdx><![CDATA[]]></gdx> <wantgdx><![CDATA[]]></wantgdx> <wantlog><![CDATA[]]></wantlog> <comments><![CDATA[]]></comments> <email>jsLPsolver@test.edu</email> </document>",n,function(e){!0===i&&window.console.log(e.results);var n=lstParse(e,t);r(n)})})},"undefined"==typeof XML&&(XML=function(){}),XML.ObjTree=function(){return this},XML.ObjTree.VERSION="0.23",XML.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n',XML.ObjTree.prototype.attr_prefix="-",XML.ObjTree.prototype.parseXML=function(t){var e;if(window.DOMParser){var n=new DOMParser,i=n.parseFromString(t,"application/xml");if(!i)return;e=i.documentElement}else window.ActiveXObject&&((n=new ActiveXObject("Microsoft.XMLDOM")).async=!1,n.loadXML(t),e=n.documentElement);if(e)return this.parseDOM(e)},XML.ObjTree.prototype.parseHTTP=function(t,e,n){var i={};for(var r in e)i[r]=e[r];if(i.method||(void 0===i.postBody&&void 0===i.postbody&&void 0===i.parameters?i.method="get":i.method="post"),n){i.asynchronous=!0;var s=this,o=n,a=i.onComplete;i.onComplete=function(t){var e;t&&t.responseXML&&t.responseXML.documentElement&&(e=s.parseDOM(t.responseXML.documentElement)),o(e,t),a&&a(t)}}else i.asynchronous=!1;var l;if("undefined"!=typeof HTTP&&HTTP.Request)i.uri=t,(u=new HTTP.Request(i))&&(l=u.transport);else if("undefined"!=typeof Ajax&&Ajax.Request){var u=new Ajax.Request(t,i);u&&(l=u.transport)}return n?l:l&&l.responseXML&&l.responseXML.documentElement?this.parseDOM(l.responseXML.documentElement):void 0},XML.ObjTree.prototype.parseDOM=function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var n=this.parseElement(t);if(this.__force_array[t.nodeName]&&(n=[n]),11!=t.nodeType){var i={};i[t.nodeName]=n,n=i}return n}},XML.ObjTree.prototype.parseElement=function(t){if(7!=t.nodeType){if(3==t.nodeType||4==t.nodeType){if(null==t.nodeValue.match(/[^\x00-\x20]/))return;return t.nodeValue}var e,n={};if(t.attributes&&t.attributes.length){e={};for(s=0;s<t.attributes.length;s++)"string"==typeof(o=t.attributes[s].nodeName)&&(a=t.attributes[s].nodeValue)&&(void 0===n[o=this.attr_prefix+o]&&(n[o]=0),n[o]++,this.addNode(e,o,n[o],a))}if(t.childNodes&&t.childNodes.length){var i=!0;e&&(i=!1);for(s=0;s<t.childNodes.length&&i;s++){var r=t.childNodes[s].nodeType;3!=r&&4!=r&&(i=!1)}if(i){e||(e="");for(s=0;s<t.childNodes.length;s++)e+=t.childNodes[s].nodeValue}else{e||(e={});for(var s=0;s<t.childNodes.length;s++){var o=t.childNodes[s].nodeName;if("string"==typeof o){var a=this.parseElement(t.childNodes[s]);a&&(void 0===n[o]&&(n[o]=0),n[o]++,this.addNode(e,o,n[o],a))}}}}return e}},XML.ObjTree.prototype.addNode=function(t,e,n,i){this.__force_array[e]?(1==n&&(t[e]=[]),t[e][t[e].length]=i):1==n?t[e]=i:2==n?t[e]=[t[e],i]:t[e][t[e].length]=i},XML.ObjTree.prototype.writeXML=function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e},XML.ObjTree.prototype.hash_to_xml=function(t,e){var n=[],i=[];for(var r in e)if(e.hasOwnProperty(r)){var s=e[r];r.charAt(0)!=this.attr_prefix?void 0===s||null==s?n[n.length]="<"+r+" />":"object"==typeof s&&s.constructor==Array?n[n.length]=this.array_to_xml(r,s):n[n.length]="object"==typeof s?this.hash_to_xml(r,s):this.scalar_to_xml(r,s):i[i.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var o=i.join(""),a=n.join("");return void 0===t||null==t||(a=n.length>0?a.match(/\n/)?"<"+t+o+">\n"+a+"</"+t+">\n":"<"+t+o+">"+a+"</"+t+">\n":"<"+t+o+" />\n"),a},XML.ObjTree.prototype.array_to_xml=function(t,e){for(var n=[],i=0;i<e.length;i++){var r=e[i];void 0===r||null==r?n[n.length]="<"+t+" />":"object"==typeof r&&r.constructor==Array?n[n.length]=this.array_to_xml(t,r):n[n.length]="object"==typeof r?this.hash_to_xml(t,r):this.scalar_to_xml(t,r)}return n.join("")},XML.ObjTree.prototype.scalar_to_xml=function(t,e){return"#text"==t?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+">\n"},XML.ObjTree.prototype.xml_escape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.proj4=e()}(this,function(){"use strict";function t(t,e){if(t[e])return t[e];for(var n,i=Object.keys(t),r=e.toLowerCase().replace(ct,""),s=-1;++s<i.length;)if(n=i[s],n.toLowerCase().replace(ct,"")===r)return t[n]}function e(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ft}function n(t){return new e(t).output()}function i(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,s=n.reduce(function(t,e){return r(e,t),t},i);e&&(t[e]=s)}function r(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void r(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){Array.isArray(n)||(e[n]={});var s;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&r(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&r(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void i(e,n,t);default:for(s=-1;++s<t.length;)if(!Array.isArray(t[s]))return r(t,e[n]);return i(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}function s(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}function o(t){return t*xt}function a(t){function e(e){return e*(t.to_meter||1)}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var n=t.GEOGCS;"GEOGCS"===t.type&&(n=t),n&&(n.DATUM?t.datumCode=n.DATUM.name.toLowerCase():t.datumCode=n.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),n.DATUM&&n.DATUM.SPHEROID&&(t.ellps=n.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=n.DATUM.SPHEROID.a,t.rf=parseFloat(n.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",o],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",o],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",o],["lat0","latitude_of_origin",o],["lat0","standard_parallel_1",o],["lat1","standard_parallel_1",o],["lat2","standard_parallel_2",o],["alpha","azimuth",o],["srsCode","name"]].forEach(function(e){return s(t,e)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=o(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function l(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?l[t]=dt(arguments[1]):l[t]=bt(arguments[1]):l[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?l.apply(e,t):l(t)});if("string"==typeof t){if(t in l)return l[t]}else"EPSG"in t?l["EPSG:"+t.EPSG]=t:"ESRI"in t?l["ESRI:"+t.ESRI]=t:"IAU2000"in t?l["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function u(t){return"string"==typeof t}function h(t){return t in l}function c(t){return Et.some(function(e){return t.indexOf(e)>-1})}function d(t){return"+"===t[0]}function f(t){return u(t)?h(t)?l[t]:c(t)?bt(t):d(t)?dt(t):void 0:t}function g(t){return t}function p(t,e){var n=Lt.length;return t.names?(Lt[n]=t,t.names.forEach(function(t){Tt[t.toLowerCase()]=n}),this):(console.log(e),!0)}function m(t,e,n,i){var r=t*t,s=e*e,o=(r-s)/r,a=0;return i?(t*=1-o*(et+o*(nt+o*it)),r=t*t,o=0):a=Math.sqrt(o),{es:o,e:a,ep2:(r-s)/s}}function v(e,n,i,r,s){if(!e){var o=t(Rt,r);o||(o=Ot),e=o.a,n=o.b,i=o.rf}return i&&!n&&(n=(1-1/i)*e),(0===i||Math.abs(e-n)<rt)&&(s=!0,n=e),{a:e,b:n,rf:i,sphere:s}}function y(t,e,n,i,r,s){var o={};return o.datum_type=void 0===t||"none"===t?Q:J,e&&(o.datum_params=e.map(parseFloat),0===o.datum_params[0]&&0===o.datum_params[1]&&0===o.datum_params[2]||(o.datum_type=K),o.datum_params.length>3&&(0===o.datum_params[3]&&0===o.datum_params[4]&&0===o.datum_params[5]&&0===o.datum_params[6]||(o.datum_type=Z,o.datum_params[3]*=$,o.datum_params[4]*=$,o.datum_params[5]*=$,o.datum_params[6]=o.datum_params[6]/1e6+1))),o.a=n,o.b=i,o.es=r,o.ep2=s,o}function x(e,n){if(!(this instanceof x))return new x(e);n=n||function(t){if(t)throw t};var i=f(e);if("object"==typeof i){var r=x.projections.get(i.projName);if(r){if(i.datumCode&&"none"!==i.datumCode){var s=t(Dt,i.datumCode);s&&(i.datum_params=s.towgs84?s.towgs84.split(","):null,i.ellps=s.ellipse,i.datumName=s.datumName?s.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84";var o=v(i.a,i.b,i.rf,i.ellps,i.sphere),a=m(o.a,o.b,o.rf,i.R_A),l=i.datum||y(i.datumCode,i.datum_params,o.a,o.b,a.es,a.ep2);It(this,i),It(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,this.init(),n(null,this)}else n(e)}else n(e)}function b(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===K?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==Z||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}function E(t,e,n){var i,r,s,o,a=t.x,l=t.y,u=t.z?t.z:0;if(l<-tt&&l>-1.001*tt)l=-tt;else if(l>tt&&l<1.001*tt)l=tt;else if(l<-tt||l>tt)return null;return a>Math.PI&&(a-=2*Math.PI),r=Math.sin(l),o=Math.cos(l),s=r*r,i=n/Math.sqrt(1-e*s),{x:(i+u)*o*Math.cos(a),y:(i+u)*o*Math.sin(a),z:(i*(1-e)+u)*r}}function I(t,e,n,i){var r,s,o,a,l,u,h,c,d,f,g,p,m,v,y,x,b=1e-12,E=t.x,I=t.y,C=t.z?t.z:0;if(r=Math.sqrt(E*E+I*I),s=Math.sqrt(E*E+I*I+C*C),r/n<b){if(v=0,s/n<b)return y=tt,x=-i,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(I,E);o=C/s,c=(a=r/s)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*a*a)),d=o*l,m=0;do{m++,h=n/Math.sqrt(1-e*d*d),x=r*c+C*d-h*(1-e*d*d),u=e*h/(h+x),l=1/Math.sqrt(1-u*(2-u)*a*a),f=a*(1-u)*l,g=o*l,p=g*c-f*d,c=f,d=g}while(p*p>1e-24&&m<30);return y=Math.atan(g/Math.abs(f)),{x:v,y:y,z:x}}function C(t,e,n){if(e===K)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===Z){var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],u=n[6];return{x:u*(t.x-l*t.y+a*t.z)+i,y:u*(l*t.x+t.y-o*t.z)+r,z:u*(-a*t.x+o*t.y+t.z)+s}}}function w(t,e,n){if(e===K)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===Z){var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],u=n[6],h=(t.x-i)/u,c=(t.y-r)/u,d=(t.z-s)/u;return{x:h+l*c-a*d,y:-l*h+c+o*d,z:a*h-o*c+d}}}function M(t){return t===K||t===Z}function S(t,e){return(t.datum.datum_type===K||t.datum.datum_type===Z)&&"WGS84"!==e.datumCode||(e.datum.datum_type===K||e.datum.datum_type===Z)&&"WGS84"!==t.datumCode}function N(t,e,n){var i;return Array.isArray(n)&&(n=Ft(n)),t.datum&&e.datum&&S(t,e)&&(i=new x("WGS84"),n=N(t,i,n),t=i),"enu"!==t.axis&&(n=At(t,!1,n)),"longlat"===t.projName?n={x:n.x*st,y:n.y*st}:(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter}),n=t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=kt(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y}),"longlat"===e.projName?n={x:n.x*ot,y:n.y*ot}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter})),"enu"!==e.axis?At(e,!0,n):n}function _(t,e,n){var i;return Array.isArray(n)?(i=N(t,e,n),3===n.length?[i.x,i.y,i.z]:[i.x,i.y]):N(t,e,n)}function T(t){return t instanceof x?t:t.oProj?t.oProj:x(t)}function L(t,e,n){t=T(t);var i,r=!1;return void 0===e?(e=t,t=Bt,r=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=Bt,r=!0),e=T(e),n?_(t,e,n):(i={forward:function(n){return _(t,e,n)},inverse:function(n){return _(e,t,n)}},r&&(i.oProj=e),i)}function P(t,e){return e=e||5,B(k({lat:t[1],lon:t[0]}),e)}function R(t){var e=A(q(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function O(t){return t*(Math.PI/180)}function D(t){return t/Math.PI*180}function k(t){var e,n,i,r,s,o,a,l,u=t.lat,h=t.lon,c=6378137,d=.00669438,f=O(u),g=O(h);l=Math.floor((h+180)/6)+1,180===h&&(l=60),u>=56&&u<64&&h>=3&&h<12&&(l=32),u>=72&&u<84&&(h>=0&&h<9?l=31:h>=9&&h<21?l=33:h>=21&&h<33?l=35:h>=33&&h<42&&(l=37)),a=O(6*(l-1)-180+3),e=d/(1-d),n=c/Math.sqrt(1-d*Math.sin(f)*Math.sin(f)),i=Math.tan(f)*Math.tan(f),r=e*Math.cos(f)*Math.cos(f);var p=.9996*n*((s=Math.cos(f)*(g-a))+(1-i+r)*s*s*s/6+(5-18*i+i*i+72*r-58*e)*s*s*s*s*s/120)+5e5,m=.9996*((o=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-35*d*d*d/3072*Math.sin(6*f)))+n*Math.tan(f)*(s*s/2+(5-i+9*r+4*r*r)*s*s*s*s/24+(61-58*i+i*i+600*r-330*e)*s*s*s*s*s*s/720));return u<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(p),zoneNumber:l,zoneLetter:F(u)}}function A(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var s,o,a,l,u,h,c,d,f,g=6378137,p=.00669438,m=(1-Math.sqrt(1-p))/(1+Math.sqrt(1-p)),v=n-5e5,y=e;i<"N"&&(y-=1e7),c=6*(r-1)-180+3,s=p/(1-p),f=(d=y/.9996/6367449.145945056)+(3*m/2-27*m*m*m/32)*Math.sin(2*d)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*d)+151*m*m*m/96*Math.sin(6*d),o=g/Math.sqrt(1-p*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),l=s*Math.cos(f)*Math.cos(f),u=g*(1-p)/Math.pow(1-p*Math.sin(f)*Math.sin(f),1.5),h=v/(.9996*o);var x=f-o*Math.tan(f)/u*(h*h/2-(5+3*a+10*l-4*l*l-9*s)*h*h*h*h/24+(61+90*a+298*l+45*a*a-252*s-3*l*l)*h*h*h*h*h*h/720);x=D(x);var b=(h-(1+2*a+l)*h*h*h/6+(5-2*l+28*a-3*l*l+8*s+24*a*a)*h*h*h*h*h/120)/Math.cos(f);b=c+D(b);var E;if(t.accuracy){var I=A({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});E={top:I.lat,right:I.lon,bottom:x,left:b}}else E={lat:x,lon:b};return E}function F(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function B(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+V(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+i.substr(i.length-5,e)}function V(t,e,n){var i=G(n);return z(Math.floor(t/1e5),Math.floor(e/1e5)%20,i)}function G(t){var e=t%Vt;return 0===e&&(e=Vt),e}function z(t,e,n){var i=n-1,r=Gt.charCodeAt(i),s=zt.charCodeAt(i),o=r+t-1,a=s+e,l=!1;return o>Ut&&(o=o-Ut+qt-1,l=!0),(o===jt||r<jt&&o>jt||(o>jt||r<jt)&&l)&&o++,(o===Yt||r<Yt&&o>Yt||(o>Yt||r<Yt)&&l)&&++o===jt&&o++,o>Ut&&(o=o-Ut+qt-1),a>Wt?(a=a-Wt+qt-1,l=!0):l=!1,(a===jt||s<jt&&a>jt||(a>jt||s<jt)&&l)&&a++,(a===Yt||s<Yt&&a>Yt||(a>Yt||s<Yt)&&l)&&++a===jt&&a++,a>Wt&&(a=a-Wt+qt-1),String.fromCharCode(o)+String.fromCharCode(a)}function q(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,s++}var o=parseInt(r,10);if(0===s||s+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;i=t.substring(s,s+=2);for(var l=G(o),u=j(i.charAt(0),l),h=Y(i.charAt(1),l);h<W(a);)h+=2e6;var c=n-s;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,f,g,p,m,v=c/2,y=0,x=0;return v>0&&(d=1e5/Math.pow(10,v),f=t.substring(s,s+v),y=parseFloat(f)*d,g=t.substring(s+v),x=parseFloat(g)*d),p=y+u,m=x+h,{easting:p,northing:m,zoneLetter:a,zoneNumber:o,accuracy:d}}function j(t,e){for(var n=Gt.charCodeAt(e-1),i=1e5,r=!1;n!==t.charCodeAt(0);){if(++n===jt&&n++,n===Yt&&n++,n>Ut){if(r)throw"Bad character: "+t;n=qt,r=!0}i+=1e5}return i}function Y(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=zt.charCodeAt(e-1),i=0,r=!1;n!==t.charCodeAt(0);){if(++n===jt&&n++,n===Yt&&n++,n>Wt){if(r)throw"Bad character: "+t;n=qt,r=!0}i+=1e5}return i}function W(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function U(t,e,n){if(!(this instanceof U))return new U(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function H(t){var e,n=[];return n[0]=t*Le,e=t*t,n[0]+=e*Pe,n[1]=e*Oe,e*=t,n[0]+=e*Re,n[1]+=e*De,n[2]=e*ke,n}function X(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var K=1,Z=2,J=4,Q=5,$=484813681109536e-20,tt=Math.PI/2,et=.16666666666666666,nt=.04722222222222222,it=.022156084656084655,rt=void 0===Number.EPSILON?1e-10:Number.EPSILON,st=.017453292519943295,ot=57.29577951308232,at=Math.PI/4,lt=2*Math.PI,ut={};ut.greenwich=0,ut.lisbon=-9.131906111111,ut.paris=2.337229166667,ut.bogota=-74.080916666667,ut.madrid=-3.687938888889,ut.rome=12.452333333333,ut.bern=7.439583333333,ut.jakarta=106.807719444444,ut.ferro=-17.666666666667,ut.brussels=4.367975,ut.stockholm=18.058277777778,ut.athens=23.7163375,ut.oslo=10.722916666667;var ht={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},ct=/[\s_\-\/\(\)]/g,dt=function(e){var n,i,r,s={},o=e.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t)},lat_0:function(t){s.lat0=t*st},lat_1:function(t){s.lat1=t*st},lat_2:function(t){s.lat2=t*st},lat_ts:function(t){s.lat_ts=t*st},lon_0:function(t){s.long0=t*st},lon_1:function(t){s.long1=t*st},lon_2:function(t){s.long2=t*st},alpha:function(t){s.alpha=parseFloat(t)*st},lonc:function(t){s.longc=t*st},x_0:function(t){s.x0=parseFloat(t)},y_0:function(t){s.y0=parseFloat(t)},k_0:function(t){s.k0=parseFloat(t)},k:function(t){s.k0=parseFloat(t)},a:function(t){s.a=parseFloat(t)},b:function(t){s.b=parseFloat(t)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){s.to_meter=parseFloat(t)},units:function(e){s.units=e;var n=t(ht,e);n&&(s.to_meter=n.to_meter)},from_greenwich:function(t){s.from_greenwich=t*st},pm:function(e){var n=t(ut,e);s.from_greenwich=(n||parseFloat(e))*st},nadgrids:function(t){"@null"===t?s.datumCode="none":s.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(s.axis=t)}};for(n in o)i=o[n],n in a?"function"==typeof(r=a[n])?r(i):s[r]=i:s[n]=i;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s},ft=1,gt=/\s/,pt=/[A-Za-z]/,mt=/[A-Za-z84]/,vt=/[,\]]/,yt=/[\d\.E\-\+]/;e.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;gt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case ft:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},e.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(vt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},e.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=ft)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=ft,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},e.prototype.number=function(t){if(!yt.test(t)){if(vt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},e.prototype.quoted=function(t){return'"'===t?void(this.state=5):void(this.word+=t)},e.prototype.keyword=function(t){if(mt.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=ft)}if(!vt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},e.prototype.neutral=function(t){if(pt.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(yt.test(t))return this.word=t,void(this.state=3);if(!vt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},e.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var xt=.017453292519943295,bt=function(t){var e=n(t),i=e.shift(),s=e.shift();e.unshift(["name",s]),e.unshift(["type",i]);var o={};return r(e,o),a(o),o};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(l);var Et=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],It=function(t,e){t=t||{};var n,i;if(!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t},Ct=function(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)},wt=function(t){return t<0?-1:1},Mt=function(t){return Math.abs(t)<=3.14159265359?t:t-wt(t)*lt},St=function(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(tt-e))/i},Nt=function(t,e){for(var n,i,r=.5*t,s=tt-2*Math.atan(e),o=0;o<=15;o++)if(n=t*Math.sin(s),i=tt-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999},_t=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ct(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e=t.x,n=t.y;if(n*ot>90&&n*ot<-90&&e*ot>180&&e*ot<-180)return null;var i,r;if(Math.abs(Math.abs(n)-tt)<=rt)return null;if(this.sphere)i=this.x0+this.a*this.k0*Mt(e-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(at+.5*n));else{var s=Math.sin(n),o=St(this.e,n,s);i=this.x0+this.a*this.k0*Mt(e-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return t.x=i,t.y=r,t},inverse:function(t){var e,n,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)n=tt-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(-9999===(n=Nt(this.e,s)))return null}return e=Mt(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:g,inverse:g,names:["longlat","identity"]}],Tt={},Lt=[],Pt={start:function(){_t.forEach(p)},add:p,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==Tt[e]&&Lt[Tt[e]]?Lt[Tt[e]]:void 0}},Rt={};Rt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},Rt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},Rt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},Rt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},Rt.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},Rt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},Rt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},Rt.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},Rt.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},Rt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},Rt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},Rt.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},Rt.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},Rt.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},Rt.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},Rt.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},Rt.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},Rt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},Rt.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},Rt.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},Rt.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},Rt.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},Rt.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},Rt.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},Rt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},Rt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},Rt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},Rt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},Rt.hough={a:6378270,rf:297,ellipseName:"Hough"},Rt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},Rt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},Rt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},Rt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},Rt.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},Rt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},Rt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},Rt.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},Rt.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},Rt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},Rt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},Rt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Ot=Rt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Rt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Dt={};Dt.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Dt.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Dt.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Dt.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Dt.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Dt.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Dt.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Dt.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},Dt.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Dt.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Dt.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Dt.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Dt.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Dt.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Dt.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Dt.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},x.projections=Pt,x.projections.start();var kt=function(t,e,n){return b(t,e)?n:t.datum_type===Q||e.datum_type===Q?n:t.es!==e.es||t.a!==e.a||M(t.datum_type)||M(e.datum_type)?(n=E(n,t.es,t.a),M(t.datum_type)&&(n=C(n,t.datum_type,t.datum_params)),M(e.datum_type)&&(n=w(n,e.datum_type,e.datum_params)),I(n,e.es,e.a,e.b)):n},At=function(t,e,n){var i,r,s,o=n.x,a=n.y,l=n.z||0,u={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==n.z)switch(0===s?(i=o,r="x"):1===s?(i=a,r="y"):(i=l,r="z"),t.axis[s]){case"e":u[r]=i;break;case"w":u[r]=-i;break;case"n":u[r]=i;break;case"s":u[r]=-i;break;case"u":void 0!==n[r]&&(u.z=i);break;case"d":void 0!==n[r]&&(u.z=-i);break;default:return null}return u},Ft=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},Bt=x("WGS84"),Vt=6,Gt="AJSAJS",zt="AFAFAF",qt=65,jt=73,Yt=79,Wt=86,Ut=90,Ht={forward:P,inverse:function(t){var e=A(q(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:R};U.fromMGRS=function(t){return new U(R(t))},U.prototype.toMGRS=function(t){return P([this.x,this.y],t)};var Xt=.01953125,Kt=.01068115234375,Zt=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(Xt+t*Kt))),e[1]=t*(.75-t*(.046875+t*(Xt+t*Kt)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e},Jt=function(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))},Qt=function(t,e,n){for(var i=1/(1-e),r=t,s=20;s;--s){var o=Math.sin(r),a=1-e*o*o;if(a=(Jt(r,o,Math.cos(r),n)-t)*(a*Math.sqrt(a))*i,r-=a,Math.abs(a)<rt)return r}return r},$t={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Zt(this.es),this.ml0=Jt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,i,r=t.x,s=t.y,o=Mt(r-this.long0),a=Math.sin(s),l=Math.cos(s);if(this.es){var u=l*o,h=Math.pow(u,2),c=this.ep2*Math.pow(l,2),d=Math.pow(c,2),f=Math.abs(l)>rt?Math.tan(s):0,g=Math.pow(f,2),p=Math.pow(g,2);e=1-this.es*Math.pow(a,2),u/=Math.sqrt(e);var m=Jt(s,a,l,this.en);n=this.a*(this.k0*u*(1+h/6*(1-g+c+h/20*(5-18*g+p+14*c-58*g*c+h/42*(61+179*p-p*g-479*g)))))+this.x0,i=this.a*(this.k0*(m-this.ml0+a*o*u/2*(1+h/12*(5-g+9*c+4*d+h/30*(61+p-58*g+270*c-330*g*c+h/56*(1385+543*p-p*g-3111*g))))))+this.y0}else{var v=l*Math.sin(o);if(Math.abs(Math.abs(v)-1)<rt)return 93;if(n=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,i=l*Math.cos(o)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(i))>=1){if(v-1>rt)return 93;i=0}else i=Math.acos(i);s<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=n,t.y=i,t},inverse:function(t){var e,n,i,r,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,n=Qt(e,this.es,this.en),Math.abs(n)<tt){var a=Math.sin(n),l=Math.cos(n),u=Math.abs(l)>rt?Math.tan(n):0,h=this.ep2*Math.pow(l,2),c=Math.pow(h,2),d=Math.pow(u,2),f=Math.pow(d,2);e=1-this.es*Math.pow(a,2);var g=s*Math.sqrt(e)/this.k0,p=Math.pow(g,2);i=n-(e*=u)*p/(1-this.es)*.5*(1-p/12*(5+3*d-9*h*d+h-4*c-p/30*(61+90*d-252*h*d+45*f+46*h-p/56*(1385+3633*d+4095*f+1574*f*d)))),r=Mt(this.long0+g*(1-p/6*(1+2*d+h-p/20*(5+28*d+24*f+8*h*d+6*h-p/42*(61+662*d+1320*f+720*f*d))))/l)}else i=tt*wt(o),r=0;else{var m=Math.exp(s/this.k0),v=.5*(m-1/m),y=this.lat0+o/this.k0,x=Math.cos(y);e=Math.sqrt((1-Math.pow(x,2))/(1+Math.pow(v,2))),i=Math.asin(e),o<0&&(i=-i),r=0===v&&0===x?0:Mt(Math.atan2(v,x)+this.long0)}return t.x=r,t.y=i,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},te=function(t){var e=Math.exp(t);return e=(e-1/e)/2},ee=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))},ne=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n},ie=function(t){var e=Math.abs(t);return e=ne(e*(1+e/(ee(1,e)+1))),t<0?-e:e},re=function(t,e){for(var n,i=2*Math.cos(2*e),r=t.length-1,s=t[r],o=0;--r>=0;)n=i*s-o+t[r],o=s,s=n;return e+n*Math.sin(2*e)},se=function(t,e){for(var n,i=2*Math.cos(e),r=t.length-1,s=t[r],o=0;--r>=0;)n=i*s-o+t[r],o=s,s=n;return Math.sin(e)*n},oe=function(t){var e=Math.exp(t);return e=(e+1/e)/2},ae=function(t,e,n){for(var i,r,s=Math.sin(e),o=Math.cos(e),a=te(n),l=oe(n),u=2*o*l,h=-2*s*a,c=t.length-1,d=t[c],f=0,g=0,p=0;--c>=0;)i=g,r=f,g=d,f=p,d=u*g-i-h*f+t[c],p=h*g-r+u*f;return u=s*l,h=o*a,[u*d-h*p,u*p+h*d]},le={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var i=re(this.cbg,this.lat0);this.Zb=-this.Qn*(i+se(this.gtu,2*i))},forward:function(t){var e=Mt(t.x-this.long0),n=t.y;n=re(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),s=Math.sin(e),o=Math.cos(e);n=Math.atan2(i,o*r),e=Math.atan2(s*r,ee(i,r*o)),e=ie(Math.tan(e));var a=ae(this.gtu,2*n,2*e);n+=a[0],e+=a[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(l=1/0,u=1/0),t.x=l,t.y=u,t},inverse:function(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e/=this.Qn;var i,r;if(Math.abs(e)<=2.623395162778){var s=ae(this.utg,2*n,2*e);n+=s[0],e+=s[1],e=Math.atan(te(e));var o=Math.sin(n),a=Math.cos(n),l=Math.sin(e),u=Math.cos(e);n=Math.atan2(o*u,ee(l,u*a)),e=Math.atan2(l,u*a),i=Mt(e+this.long0),r=re(this.cgb,n)}else i=1/0,r=1/0;return t.x=i,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},ue=function(t,e){if(void 0===t){if((t=Math.floor(30*(Mt(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t},he={init:function(){var t=ue(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*st,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,le.init.apply(this),this.forward=le.forward,this.inverse=le.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},ce=function(t,e){return Math.pow((1-t)/(1+t),e)},de=20,fe={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+at)/(Math.pow(Math.tan(.5*this.lat0+at),this.C)*ce(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+at),this.C)*ce(this.e*Math.sin(n),this.ratexp))-tt,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,i=Math.pow(Math.tan(.5*n+at)/this.K,1/this.C),r=de;r>0&&(n=2*Math.atan(i*ce(this.e*Math.sin(t.y),-.5*this.e))-tt,!(Math.abs(n-t.y)<1e-14));--r)t.y=n;return r?(t.x=e,t.y=n,t):null},names:["gauss"]},ge={init:function(){fe.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,i,r;return t.x=Mt(t.x-this.long0),fe.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,i,r,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),n=Math.cos(o),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),i=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,i=0;return t.x=i,t.y=r,fe.inverse.apply(this,[t]),t.x=Mt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},pe={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=rt&&(this.k0=.5*(1+wt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=rt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=rt&&(this.k0=.5*this.cons*Ct(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/St(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ct(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-tt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,i,r,s,o,a=t.x,l=t.y,u=Math.sin(l),h=Math.cos(l),c=Mt(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=rt&&Math.abs(l+this.lat0)<=rt?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*h*Math.cos(c)),t.x=this.a*e*h*Math.sin(c)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*h*Math.cos(c))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,u,this.e))-tt,r=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=rt?(s=St(this.e,l*this.con,this.con*u),o=2*this.a*this.k0*s/this.cons,t.x=this.x0+o*Math.sin(a-this.long0),t.y=this.y0-this.con*o*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<rt?(e=2*this.a*this.k0/(1+r*Math.cos(c)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*r*Math.cos(c))),t.y=e*(this.cosX0*i-this.sinX0*r*Math.cos(c))+this.y0),t.x=e*r*Math.sin(c)+this.x0,t))},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,s,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(.5*this.a*this.k0));return e=this.long0,n=this.lat0,o<=rt?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),e=Mt(Math.abs(this.coslat0)<rt?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=rt){if(o<=rt)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=o*this.cons/(2*this.a*this.k0),n=this.con*Nt(this.e,i),e=this.con*Mt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=rt?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/o),e=Mt(this.long0+Math.atan2(t.x*Math.sin(r),o*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*Nt(this.e,Math.tan(.5*(tt+s)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(tt+t))*Math.pow((1-e)/(1+e),.5*n)}},me={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),s=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+s*e)/(1-s*e));this.K=o-this.alpha*a+this.alpha*s/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,l=0,u=s,h=-1e3,c=0;Math.abs(u-h)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),h=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=u,t},names:["somerc"]},ve={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var i=St(this.e,this.lat0,t),r=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));r*r<1&&(r=1);var s,o;if(isNaN(this.longc)){var a=St(this.e,this.lat1,Math.sin(this.lat1)),l=St(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(r+Math.sqrt(r*r-1))*Math.pow(i,this.bl):this.el=(r-Math.sqrt(r*r-1))*Math.pow(i,this.bl);var u=Math.pow(a,this.bl),h=Math.pow(l,this.bl);o=.5*((s=this.el/u)-1/s);var c=(this.el*this.el-h*u)/(this.el*this.el+h*u),d=(h-u)/(h+u),f=Mt(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(c*Math.tan(.5*this.bl*f)/d)/this.bl,this.long0=Mt(this.long0);var g=Mt(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*g)/o),this.alpha=Math.asin(r*Math.sin(this.gamma0))}else s=this.lat0>=0?r+Math.sqrt(r*r-1):r-Math.sqrt(r*r-1),this.el=s*Math.pow(i,this.bl),o=.5*(s-1/s),this.gamma0=Math.asin(Math.sin(this.alpha)/r),this.long0=this.longc-Math.asin(o*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha))},forward:function(t){var e,n,i,r=t.x,s=t.y,o=Mt(r-this.long0);if(Math.abs(Math.abs(s)-tt)<=rt)i=s>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(at+i*this.gamma0*.5)),e=-1*i*tt*this.al/this.bl;else{var a=St(this.e,s,Math.sin(s)),l=this.el/Math.pow(a,this.bl),u=.5*(l-1/l),h=.5*(l+1/l),c=Math.sin(this.bl*o),d=(u*Math.sin(this.gamma0)-c*Math.cos(this.gamma0))/h;n=Math.abs(Math.abs(d)-1)<=rt?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-d)/(1+d))/this.bl,e=Math.abs(Math.cos(this.bl*o))<=rt?this.al*this.bl*o:this.al*Math.atan2(u*Math.cos(this.gamma0)+c*Math.sin(this.gamma0),Math.cos(this.bl*o))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var i=Math.exp(-1*this.bl*n/this.al),r=.5*(i-1/i),s=.5*(i+1/i),o=Math.sin(this.bl*e/this.al),a=(o*Math.cos(this.gamma0)+r*Math.sin(this.gamma0))/s,l=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<rt?(t.x=this.long0,t.y=tt):Math.abs(a+1)<rt?(t.x=this.long0,t.y=-1*tt):(t.y=Nt(this.e,l),t.x=Mt(this.long0-Math.atan2(r*Math.cos(this.gamma0)-o*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},ye={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<rt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=Ct(this.e,e,n),r=St(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Ct(this.e,s,o),l=St(this.e,this.lat2,s),u=St(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>rt?this.ns=Math.log(i/a)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=rt&&(n=wt(n)*(tt-2*rt));var i,r,s=Math.abs(Math.abs(n)-tt);if(s>rt)i=St(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(i,this.ns);else{if((s=n*this.ns)<=0)return null;r=0}var o=this.ns*Mt(e-this.long0);return t.x=this.k0*(r*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(o))+this.y0,t},inverse:function(t){var e,n,i,r,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),n=1):(e=-Math.sqrt(o*o+a*a),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*o,n*a)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(r=Nt(this.e,i)))return null}else r=-tt;return s=Mt(l/this.ns+this.long0),t.x=s,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},xe={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,i,r,s,o,a,l=t.x,u=t.y,h=Mt(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),i=-h*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),s=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,i,r,s,o,a,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,o=e,a=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(a=1),o=t.y,u+=1}while(0===a&&u<15);return u>=15?null:t},names:["Krovak","krovak"]},be=function(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)},Ee=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},Ie=function(t){return.375*t*(1+.25*t*(1+.46875*t))},Ce=function(t){return.05859375*t*t*(1+.75*t)},we=function(t){return t*t*t*(35/3072)},Me=function(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)},Se=function(t){return Math.abs(t)<tt?t:t-wt(t)*Math.PI},Ne=function(t,e,n,i,r){var s,o;s=t/e;for(var a=0;a<15;a++)if(o=(t-(e*s-n*Math.sin(2*s)+i*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*i*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN},_e={init:function(){this.sphere||(this.e0=Ee(this.es),this.e1=Ie(this.es),this.e2=Ce(this.es),this.e3=we(this.es),this.ml0=this.a*be(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,i=t.x,r=t.y;if(i=Mt(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=Me(this.a,this.e,s),l=Math.tan(r)*Math.tan(r),u=i*Math.cos(r),h=u*u,c=this.es*o*o/(1-this.es);e=a*u*(1-h*l*(1/6-(8-l+8*c)*h/120)),n=this.a*be(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*s/o*h*(.5+(5-l+6*c)*h/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var s=r+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(s))}else{var o=this.ml0/this.a+r,a=Ne(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-tt)<=rt)return t.x=this.long0,t.y=tt,r<0&&(t.y*=-1),t;var l=Me(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(a),2),c=i*this.a/l,d=c*c;e=a-l*Math.tan(a)/u*c*c*(.5-(1+3*h)*c*c/24),n=c*(1-d*(h/3+(1+3*h)*h*d/15))/Math.cos(a)}return t.x=Mt(n+this.long0),t.y=Se(e),t},names:["Cassini","Cassini_Soldner","cass"]},Te=function(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e},Le=.3333333333333333,Pe=.17222222222222222,Re=.10257936507936508,Oe=.06388888888888888,De=.0664021164021164,ke=.016415012942191543,Ae={init:function(){var t=Math.abs(this.lat0);if(Math.abs(t-tt)<rt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<rt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Te(this.e,1),this.mmf=.5/(1-this.es),this.apa=H(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Te(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,i,r,s,o,a,l,u,h,c=t.x,d=t.y;if(c=Mt(c-this.long0),this.sphere){if(s=Math.sin(d),h=Math.cos(d),i=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+h*i:1+this.sinph0*s+this.cosph0*h*i)<=rt)return null;e=(n=Math.sqrt(2/n))*h*Math.sin(c),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*h*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(d+this.phi0)<rt)return null;n=at-.5*d,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(c),n*=i}}else{switch(a=0,l=0,u=0,i=Math.cos(c),r=Math.sin(c),s=Math.sin(d),o=Te(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*i;break;case this.EQUIT:u=1+l*i;break;case this.N_POLE:u=tt+d,o=this.qp-o;break;case this.S_POLE:u=d-tt,o=this.qp+o}if(Math.abs(u)<rt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),n=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*a-this.sinb1*l*i):(u=Math.sqrt(2/(1+l*i)))*a*this.ymf,e=this.xmf*u*l*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(u=Math.sqrt(o))*r,n=i*(this.mode===this.S_POLE?u:-u)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,s,o,a,l=t.x/this.a,u=t.y/this.a;if(this.sphere){var h,c=0,d=0;if(h=Math.sqrt(l*l+u*u),(n=.5*h)>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(n),c=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(h)<=rt?0:Math.asin(u*d/h),l*=d,u=c*h;break;case this.OBLIQ:n=Math.abs(h)<=rt?this.phi0:Math.asin(c*this.sinph0+u*d*this.cosph0/h),l*=d*this.cosph0,u=(c-Math.sin(n)*this.sinph0)*h;break;case this.N_POLE:u=-u,n=tt-n;break;case this.S_POLE:n-=tt}e=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,u):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,u*=this.dd,(o=Math.sqrt(l*l+u*u))<rt)return t.x=0,t.y=this.phi0,t;r=2*Math.asin(.5*o/this.rq),i=Math.cos(r),l*=r=Math.sin(r),this.mode===this.OBLIQ?(a=i*this.sinb1+u*r*this.cosb1/o,s=this.qp*a,u=o*this.cosb1*i-u*this.sinb1*r):(a=u*r/o,s=this.qp*a,u=o*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(s=l*l+u*u))return t.x=0,t.y=this.phi0,t;a=1-s/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(l,u),n=X(Math.asin(a),this.apa)}return t.x=Mt(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Fe=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},Be={init:function(){Math.abs(this.lat1+this.lat2)<rt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ct(this.e3,this.sin_po,this.cos_po),this.qs1=Te(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ct(this.e3,this.sin_po,this.cos_po),this.qs2=Te(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Te(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>rt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=Te(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*Mt(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return t.x=o,t.y=a,t},inverse:function(t){var e,n,i,r,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,n)),s=Mt(r/this.ns0+this.long0),t.x=s,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,i,r,s,o,a=Fe(.5*e);if(t<rt)return a;for(var l=t*t,u=1;u<=25;u++)if(n=Math.sin(a),i=Math.cos(a),r=t*n,s=1-r*r,o=.5*s*s/i*(e/(1-l)-n/s+.5/t*Math.log((1-r)/(1+r))),a+=o,Math.abs(o)<=1e-7)return a;return null}},Ve={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,i,r,s,o,a,l=t.x,u=t.y;return i=Mt(l-this.long0),e=Math.sin(u),n=Math.cos(u),r=Math.cos(i),(s=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(s)<=rt?(o=this.x0+1*this.a*n*Math.sin(i)/s,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)/s):(o=this.x0+this.infinity_dist*n*Math.sin(i),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=o,t.y=a,t},inverse:function(t){var e,n,i,r,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),i=Math.cos(r),o=Fe(i*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),s=Mt(this.long0+s)):(o=this.phic0,s=0),t.x=s,t.y=o,t},names:["gnom"]},Ge=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*tt:tt;for(var i,r,s,o,a=Math.asin(.5*e),l=0;l<30;l++)if(r=Math.sin(a),s=Math.cos(a),o=t*r,i=Math.pow(1-o*o,2)/(2*s)*(e/(1-t*t)-r/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),a+=i,Math.abs(i)<=1e-10)return a;return NaN},ze={init:function(){this.sphere||(this.k0=Ct(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,i=t.x,r=t.y,s=Mt(i-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=Te(this.e,Math.sin(r));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Mt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=Ge(this.e,2*t.y*this.k0/this.a),e=Mt(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]},qe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,i=Mt(e-this.long0),r=Se(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,n=t.y;return t.x=Mt(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Se(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},je=20,Ye={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ee(this.es),this.e1=Ie(this.es),this.e2=Ce(this.es),this.e3=we(this.es),this.ml0=this.a*be(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,i,r=t.x,s=t.y,o=Mt(r-this.long0);if(i=o*Math.sin(s),this.sphere)Math.abs(s)<=rt?(e=this.a*o,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(s),n=this.a*(Se(s-this.lat0)+(1-Math.cos(i))/Math.tan(s)));else if(Math.abs(s)<=rt)e=this.a*o,n=-1*this.ml0;else{var a=Me(this.a,this.e,Math.sin(s))/Math.tan(s);e=a*Math.sin(i),n=this.a*be(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+a*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,i,r,s,o,a,l,u;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=rt)e=Mt(i/this.a+this.long0),n=0;else{o=this.lat0+r/this.a,a=i*i/this.a/this.a+o*o,l=o;var h;for(s=je;s;--s)if(h=Math.tan(l),u=-1*(o*(l*h+1)-l-.5*(l*l+a)*h)/((l-o)/h-1),l+=u,Math.abs(u)<=rt){n=l;break}e=Mt(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=rt)n=0,e=Mt(this.long0+i/this.a);else{o=(this.ml0+r)/this.a,a=i*i/this.a/this.a+o*o,l=o;var c,d,f,g,p;for(s=je;s;--s)if(p=this.e*Math.sin(l),c=Math.sqrt(1-p*p)*Math.tan(l),d=this.a*be(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),g=d/this.a,u=(o*(c*g+1)-g-.5*c*(g*g+a))/(this.es*Math.sin(2*l)*(g*g+a-2*o*g)/(4*c)+(o-g)*(c*f-2/Math.sin(2*l))-f),l-=u,Math.abs(u)<=rt){n=l;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Mt(this.long0+Math.asin(i*c/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]},We={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,r=n-this.long0,s=i/$*1e-5,o=r,a=1,l=0;for(e=1;e<=10;e++)a*=s,l+=this.A[e]*a;var u,h,c=l,d=o,f=1,g=0,p=0,m=0;for(e=1;e<=6;e++)u=f*c-g*d,h=g*c+f*d,f=u,g=h,p=p+this.B_re[e]*f-this.B_im[e]*g,m=m+this.B_im[e]*f+this.B_re[e]*g;return t.x=m*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var e,n,i,r=t.x,s=t.y,o=r-this.x0,a=(s-this.y0)/this.a,l=o/this.a,u=1,h=0,c=0,d=0;for(e=1;e<=6;e++)n=u*a-h*l,i=h*a+u*l,u=n,h=i,c=c+this.C_re[e]*u-this.C_im[e]*h,d=d+this.C_im[e]*u+this.C_re[e]*h;for(var f=0;f<this.iterations;f++){var g,p,m=c,v=d,y=a,x=l;for(e=2;e<=6;e++)g=m*c-v*d,p=v*c+m*d,m=g,v=p,y+=(e-1)*(this.B_re[e]*m-this.B_im[e]*v),x+=(e-1)*(this.B_im[e]*m+this.B_re[e]*v);m=1,v=0;var b=this.B_re[1],E=this.B_im[1];for(e=2;e<=6;e++)g=m*c-v*d,p=v*c+m*d,m=g,v=p,b+=e*(this.B_re[e]*m-this.B_im[e]*v),E+=e*(this.B_im[e]*m+this.B_re[e]*v);var I=b*b+E*E;c=(y*b+x*E)/I,d=(x*b-y*E)/I}var C=c,w=d,M=1,S=0;for(e=1;e<=9;e++)M*=C,S+=this.D[e]*M;var N=this.lat0+S*$*1e5,_=this.long0+w;return t.x=_,t.y=N,t},names:["New_Zealand_Map_Grid","nzmg"]},Ue={init:function(){},forward:function(t){var e=t.x,n=t.y,i=Mt(e-this.long0),r=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=s,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Mt(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},He=20,Xe={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Zt(this.es)},forward:function(t){var e,n,i=t.x,r=t.y;if(i=Mt(i-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(r),o=He;o;--o){var a=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<rt)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var l=Math.sin(r),u=Math.cos(r);n=this.a*Jt(r,l,u,this.en),e=this.a*i*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=Fe((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Fe(Math.sin(e)/this.n)),i=Mt(i+this.long0),e=Se(e)):(e=Qt(t.y/this.a,this.es,this.en),(r=Math.abs(e))<tt?(r=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),i=Mt(n)):r-rt<tt&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]},Ke={init:function(){},forward:function(t){for(var e=t.x,n=t.y,i=Mt(e-this.long0),r=n,s=Math.PI*Math.sin(n),o=0;!0;o++){var a=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=a,Math.abs(a)<rt)break}r/=2,Math.PI/2-Math.abs(n)<rt&&(i=0);var l=.900316316158*this.a*i*Math.cos(r)+this.x0,u=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=l,t.y=u,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=Mt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return t.x=i,t.y=r,t},names:["Mollweide","moll"]},Ze={init:function(){Math.abs(this.lat1+this.lat2)<rt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ee(this.es),this.e1=Ie(this.es),this.e2=Ce(this.es),this.e3=we(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ct(this.e,this.sinphi,this.cosphi),this.ml1=be(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<rt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ct(this.e,this.sinphi,this.cosphi),this.ml2=be(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=be(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=be(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var s=this.ns*Mt(n-this.long0),o=this.x0+e*Math.sin(s),a=this.y0+this.rh-e*Math.cos(s);return t.x=o,t.y=a,t},inverse:function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,i,r;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(0!==n&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=Mt(this.long0+s/this.ns),i=Se(this.g-n/this.a),t.x=r,t.y=i,t;var o=this.g-n/this.a;return i=Ne(o,this.e0,this.e1,this.e2,this.e3),r=Mt(this.long0+s/this.ns),t.x=r,t.y=i,t},names:["Equidistant_Conic","eqdc"]},Je={init:function(){this.R=this.a},forward:function(t){var e,n,i=t.x,r=t.y,s=Mt(i-this.long0);Math.abs(r)<=rt&&(e=this.x0+this.R*s,n=this.y0);var o=Fe(2*Math.abs(r/Math.PI));(Math.abs(s)<=rt||Math.abs(Math.abs(r)-tt)<=rt)&&(e=this.x0,n=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/s-s/Math.PI),l=a*a,u=Math.sin(o),h=Math.cos(o),c=h/(u+h-1),d=c*c,f=c*(2/u-1),g=f*f,p=Math.PI*this.R*(a*(c-g)+Math.sqrt(l*(c-g)*(c-g)-(g+l)*(d-g)))/(g+l);s<0&&(p=-p),e=this.x0+p;var m=l+c;return p=Math.PI*this.R*(f*m-a*Math.sqrt((g+l)*(l+1)-m*m))/(g+l),n=r>=0?this.y0+p:this.y0-p,t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r,s,o,a,l,u,h,c,d,f;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,i=t.x/c,r=t.y/c,s=i*i+r*r,o=-Math.abs(r)*(1+s),a=o-2*r*r+i*i,l=-2*o+1+2*r*r+s*s,f=r*r/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,u=(o-a*a/3/l)/l,h=2*Math.sqrt(-u/3),c=3*f/u/h,Math.abs(c)>1&&(c=c>=0?1:-1),d=Math.acos(c)/3,n=t.y>=0?(-h*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:-(-h*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,e=Math.abs(i)<rt?this.long0:Mt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-r*r)+s*s))/2/i),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Qe={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,s,o,a,l,u,h,c,d,f,g,p,m,v,y,x,b,E,I,C,w=t.x,M=t.y,S=Math.sin(t.y),N=Math.cos(t.y),_=Mt(w-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=rt?(t.x=this.x0+this.a*(tt-M)*Math.sin(_),t.y=this.y0-this.a*(tt-M)*Math.cos(_),t):Math.abs(this.sin_p12+1)<=rt?(t.x=this.x0+this.a*(tt+M)*Math.sin(_),t.y=this.y0+this.a*(tt+M)*Math.cos(_),t):(y=this.sin_p12*S+this.cos_p12*N*Math.cos(_),m=Math.acos(y),v=m/Math.sin(m),t.x=this.x0+this.a*v*N*Math.sin(_),t.y=this.y0+this.a*v*(this.cos_p12*S-this.sin_p12*N*Math.cos(_)),t):(e=Ee(this.es),n=Ie(this.es),i=Ce(this.es),r=we(this.es),Math.abs(this.sin_p12-1)<=rt?(s=this.a*be(e,n,i,r,tt),o=this.a*be(e,n,i,r,M),t.x=this.x0+(s-o)*Math.sin(_),t.y=this.y0-(s-o)*Math.cos(_),t):Math.abs(this.sin_p12+1)<=rt?(s=this.a*be(e,n,i,r,tt),o=this.a*be(e,n,i,r,M),t.x=this.x0+(s+o)*Math.sin(_),t.y=this.y0+(s+o)*Math.cos(_),t):(a=S/N,l=Me(this.a,this.e,this.sin_p12),u=Me(this.a,this.e,S),h=Math.atan((1-this.es)*a+this.es*l*this.sin_p12/(u*N)),c=Math.atan2(Math.sin(_),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(_)),x=0===c?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(c)-Math.PI)<=rt?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(_)*Math.cos(h)/Math.sin(c)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),f=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es),g=d*f,p=f*f,b=x*x,E=b*x,I=E*x,C=I*x,m=l*x*(1-b*p*(1-p)/6+E/8*g*(1-2*p)+I/120*(p*(4-7*p)-3*d*d*(1-7*p))-C/48*g),t.x=this.x0+m*Math.sin(c),t.y=this.y0+m*Math.cos(c),t))},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,s,o,a,l,u,h,c,d,f,g,p,m,v,y,x,b,E,I,C;if(this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*tt*this.a)return;return n=e/this.a,i=Math.sin(n),r=Math.cos(n),s=this.long0,Math.abs(e)<=rt?o=this.lat0:(o=Fe(r*this.sin_p12+t.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-tt,s=Mt(Math.abs(a)<=rt?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))),t.x=s,t.y=o,t}return l=Ee(this.es),u=Ie(this.es),h=Ce(this.es),c=we(this.es),Math.abs(this.sin_p12-1)<=rt?(d=this.a*be(l,u,h,c,tt),e=Math.sqrt(t.x*t.x+t.y*t.y),f=d-e,o=Ne(f/this.a,l,u,h,c),s=Mt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=rt?(d=this.a*be(l,u,h,c,tt),e=Math.sqrt(t.x*t.x+t.y*t.y),f=e-d,o=Ne(f/this.a,l,u,h,c),s=Mt(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),g=Me(this.a,this.e,this.sin_p12),v=Math.cos(m),y=this.e*this.cos_p12*v,x=-y*y/(1-this.es),b=3*this.es*(1-x)*this.sin_p12*this.cos_p12*v/(1-this.es),E=e/g,I=E-x*(1+x)*Math.pow(E,3)/6-b*(1+3*x)*Math.pow(E,4)/24,C=1-x*I*I/2-E*I*I*I/6,p=Math.asin(this.sin_p12*Math.cos(I)+this.cos_p12*Math.sin(I)*v),s=Mt(this.long0+Math.asin(Math.sin(m)*Math.sin(I)/Math.cos(p))),o=Math.atan((1-this.es*C*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es)),t.x=s,t.y=o,t)},names:["Azimuthal_Equidistant","aeqd"]},$e={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,s,o,a,l=t.x,u=t.y;return i=Mt(l-this.long0),e=Math.sin(u),n=Math.cos(u),r=Math.cos(i),((s=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(s)<=rt)&&(o=1*this.a*n*Math.sin(i),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)),t.x=o,t.y=a,t},inverse:function(t){var e,n,i,r,s,o,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Fe(e/this.a),i=Math.sin(n),r=Math.cos(n),o=this.long0,Math.abs(e)<=rt?(a=this.lat0,t.x=o,t.y=a,t):(a=Fe(r*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.abs(this.lat0)-tt,Math.abs(s)<=rt?(o=Mt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=Mt(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i)),t.x=o,t.y=a,t))},names:["ortho"]};return L.defaultDatum="WGS84",L.Proj=x,L.WGS84=new L.Proj("WGS84"),L.Point=U,L.toPoint=Ft,L.defs=l,L.transform=N,L.mgrs=Ht,L.version="2.4.3",function(t){t.Proj.projections.add($t),t.Proj.projections.add(le),t.Proj.projections.add(he),t.Proj.projections.add(ge),t.Proj.projections.add(pe),t.Proj.projections.add(me),t.Proj.projections.add(ve),t.Proj.projections.add(ye),t.Proj.projections.add(xe),t.Proj.projections.add(_e),t.Proj.projections.add(Ae),t.Proj.projections.add(Be),t.Proj.projections.add(Ve),t.Proj.projections.add(ze),t.Proj.projections.add(qe),t.Proj.projections.add(Ye),t.Proj.projections.add(We),t.Proj.projections.add(Ue),t.Proj.projections.add(Xe),t.Proj.projections.add(Ke),t.Proj.projections.add(Ze),t.Proj.projections.add(Je),t.Proj.projections.add(Qe),t.Proj.projections.add($e)}(L),L}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chart=t()}}(function(){return function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return r(n||t)},h,h.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){function i(t){if(t){var e=/^#([a-fA-F0-9]{3})$/,n=/^#([a-fA-F0-9]{6})$/,i=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,r=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,s=/(\w+)/,o=[0,0,0],a=1,l=t.match(e);if(l){l=l[1];for(h=0;h<o.length;h++)o[h]=parseInt(l[h]+l[h],16)}else if(l=t.match(n)){l=l[1];for(h=0;h<o.length;h++)o[h]=parseInt(l.slice(2*h,2*h+2),16)}else if(l=t.match(i)){for(h=0;h<o.length;h++)o[h]=parseInt(l[h+1]);a=parseFloat(l[4])}else if(l=t.match(r)){for(h=0;h<o.length;h++)o[h]=Math.round(2.55*parseFloat(l[h+1]));a=parseFloat(l[4])}else if(l=t.match(s)){if("transparent"==l[1])return[0,0,0,0];if(!(o=c[l[1]]))return}for(var h=0;h<o.length;h++)o[h]=u(o[h],0,255);return a=a||0==a?u(a,0,1):1,o[3]=a,o}}function r(t){if(t){var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=t.match(e);if(n){var i=parseFloat(n[4]);return[u(parseInt(n[1]),0,360),u(parseFloat(n[2]),0,100),u(parseFloat(n[3]),0,100),u(isNaN(i)?1:i,0,1)]}}}function s(t){if(t){var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=t.match(e);if(n){var i=parseFloat(n[4]);return[u(parseInt(n[1]),0,360),u(parseFloat(n[2]),0,100),u(parseFloat(n[3]),0,100),u(isNaN(i)?1:i,0,1)]}}}function o(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function a(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function l(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function u(t,e,n){return Math.min(Math.max(e,t),n)}function h(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var c=t(5);e.exports={getRgba:i,getHsla:r,getRgb:function(t){var e=i(t);return e&&e.slice(0,3)},getHsl:function(t){var e=r(t);return e&&e.slice(0,3)},getHwb:s,getAlpha:function(t){var e=i(t);return e?e[3]:(e=r(t))?e[3]:(e=s(t))?e[3]:void 0},hexString:function(t){return"#"+h(t[0])+h(t[1])+h(t[2])},rgbString:function(t,e){return 1>e||t[3]&&t[3]<1?o(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:o,percentString:function(t,e){return 1>e||t[3]&&t[3]<1?a(t,e):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"},percentaString:a,hslString:function(t,e){return 1>e||t[3]&&t[3]<1?l(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:l,hwbString:function(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return d[t.slice(0,3)]}};var d={};for(var f in c)d[c[f]]=f},{5:5}],2:[function(t,e,n){var i=t(4),r=t(1),s=function(t){if(t instanceof s)return t;if(!(this instanceof s))return new s(t);this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var e;if("string"==typeof t)if(e=r.getRgba(t))this.setValues("rgb",e);else if(e=r.getHsla(t))this.setValues("hsl",e);else{if(!(e=r.getHwb(t)))throw new Error('Unable to parse color from string "'+t+'"');this.setValues("hwb",e)}else if("object"==typeof t)if(void 0!==(e=t).r||void 0!==e.red)this.setValues("rgb",e);else if(void 0!==e.l||void 0!==e.lightness)this.setValues("hsl",e);else if(void 0!==e.v||void 0!==e.value)this.setValues("hsv",e);else if(void 0!==e.w||void 0!==e.whiteness)this.setValues("hwb",e);else{if(void 0===e.c&&void 0===e.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(t));this.setValues("cmyk",e)}};s.prototype={rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t%=360,t=0>t?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return r.hexString(this.values.rgb)},rgbString:function(){return r.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return r.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return r.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return r.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return r.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return r.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return r.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],n=0;n<t.length;n++){var i=t[n]/255;e[n]=.03928>=i?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return 128>(299*t[0]+587*t[1]+114*t[2])/1e3},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;3>e;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,n=(e[0]+t)%360;return e[0]=0>n?360+n:n,this.setValues("hsl",e),this},mix:function(t,e){var n=this,i=t,r=void 0===e?.5:e,s=2*r-1,o=n.alpha()-i.alpha(),a=((s*o==-1?s:(s+o)/(1+s*o))+1)/2,l=1-a;return this.rgb(a*n.red()+l*i.red(),a*n.green()+l*i.green(),a*n.blue()+l*i.blue()).alpha(n.alpha()*r+i.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var t,e,n=new s,i=this.values,r=n.values;for(var o in i)i.hasOwnProperty(o)&&(t=i[o],"[object Array]"===(e={}.toString.call(t))?r[o]=t.slice(0):"[object Number]"===e?r[o]=t:console.error("unexpected color value:",t));return n}},s.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},s.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},s.prototype.getValues=function(t){for(var e=this.values,n={},i=0;i<t.length;i++)n[t.charAt(i)]=e[t][i];return 1!==e.alpha&&(n.a=e.alpha),n},s.prototype.setValues=function(t,e){var n,r=this.values,s=this.spaces,o=this.maxes,a=1;if("alpha"===t)a=e;else if(e.length)r[t]=e.slice(0,t.length),a=e[t.length];else if(void 0!==e[t.charAt(0)]){for(n=0;n<t.length;n++)r[t][n]=e[t.charAt(n)];a=e.a}else if(void 0!==e[s[t][0]]){var l=s[t];for(n=0;n<t.length;n++)r[t][n]=e[l[n]];a=e.alpha}if(r.alpha=Math.max(0,Math.min(1,void 0===a?r.alpha:a)),"alpha"===t)return!1;var u;for(n=0;n<t.length;n++)u=Math.max(0,Math.min(o[t][n],r[t][n])),r[t][n]=Math.round(u);for(var h in s)h!==t&&(r[h]=i[t][h](r[t]));return!0},s.prototype.setSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n),this)},s.prototype.setChannel=function(t,e,n){var i=this.values[t];return void 0===n?i[e]:n===i[e]?this:(i[e]=n,this.setValues(t,i),this)},"undefined"!=typeof window&&(window.Color=s),e.exports=s},{1:1,4:4}],3:[function(t,e,n){function i(t){var e,n,i,r=t[0]/255,s=t[1]/255,o=t[2]/255,a=Math.min(r,s,o),l=Math.max(r,s,o),u=l-a;return l==a?e=0:r==l?e=(s-o)/u:s==l?e=2+(o-r)/u:o==l&&(e=4+(r-s)/u),0>(e=Math.min(60*e,360))&&(e+=360),i=(a+l)/2,n=l==a?0:.5>=i?u/(l+a):u/(2-l-a),[e,100*n,100*i]}function s(t){var e,n,i,r=t[0],s=t[1],o=t[2],a=Math.min(r,s,o),l=Math.max(r,s,o),u=l-a;return n=0==l?0:u/l*1e3/10,l==a?e=0:r==l?e=(s-o)/u:s==l?e=2+(o-r)/u:o==l&&(e=4+(r-s)/u),0>(e=Math.min(60*e,360))&&(e+=360),i=l/255*1e3/10,[e,n,i]}function o(t){var e=t[0],n=t[1],r=t[2];return[i(t)[0],100*(1/255*Math.min(e,Math.min(n,r))),100*(r=1-1/255*Math.max(e,Math.max(n,r)))]}function a(t){var e,n,i,r,s=t[0]/255,o=t[1]/255,a=t[2]/255;return r=Math.min(1-s,1-o,1-a),e=(1-s-r)/(1-r)||0,n=(1-o-r)/(1-r)||0,i=(1-a-r)/(1-r)||0,[100*e,100*n,100*i,100*r]}function l(t){return M[JSON.stringify(t)]}function u(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*e+.7152*n+.0722*i),100*(.0193*e+.1192*n+.9505*i)]}function h(t){var e,n,i,r=u(t),s=r[0],o=r[1],a=r[2];return s/=95.047,o/=100,a/=108.883,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,e=116*o-16,n=500*(s-o),i=200*(o-a),[e,n,i]}function c(t){var e,n,i,r,s,o=t[0]/360,a=t[1]/100,l=t[2]/100;if(0==a)return s=255*l,[s,s,s];e=2*l-(n=.5>l?l*(1+a):l+a-l*a),r=[0,0,0];for(var u=0;3>u;u++)0>(i=o+1/3*-(u-1))&&i++,i>1&&i--,s=1>6*i?e+6*(n-e)*i:1>2*i?n:2>3*i?e+(n-e)*(2/3-i)*6:e,r[u]=255*s;return r}function d(t){var e=t[0]/60,n=t[1]/100,i=t[2]/100,r=Math.floor(e)%6,s=e-Math.floor(e),o=255*i*(1-n),a=255*i*(1-n*s),l=255*i*(1-n*(1-s)),i=255*i;switch(r){case 0:return[i,l,o];case 1:return[a,i,o];case 2:return[o,i,l];case 3:return[o,a,i];case 4:return[l,o,i];case 5:return[i,o,a]}}function f(t){var e,n,i,s,o=t[0]/360,a=t[1]/100,l=t[2]/100,u=a+l;switch(u>1&&(a/=u,l/=u),e=Math.floor(6*o),n=1-l,i=6*o-e,0!=(1&e)&&(i=1-i),s=a+i*(n-a),e){default:case 6:case 0:r=n,g=s,b=a;break;case 1:r=s,g=n,b=a;break;case 2:r=a,g=n,b=s;break;case 3:r=a,g=s,b=n;break;case 4:r=s,g=a,b=n;break;case 5:r=n,g=a,b=s}return[255*r,255*g,255*b]}function p(t){var e,n,i,r=t[0]/100,s=t[1]/100,o=t[2]/100,a=t[3]/100;return e=1-Math.min(1,r*(1-a)+a),n=1-Math.min(1,s*(1-a)+a),i=1-Math.min(1,o*(1-a)+a),[255*e,255*n,255*i]}function m(t){var e,n,i,r=t[0]/100,s=t[1]/100,o=t[2]/100;return e=3.2406*r+-1.5372*s+-.4986*o,n=-.9689*r+1.8758*s+.0415*o,i=.0557*r+-.204*s+1.057*o,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,e=Math.min(Math.max(0,e),1),n=Math.min(Math.max(0,n),1),i=Math.min(Math.max(0,i),1),[255*e,255*n,255*i]}function v(t){var e,n,i,r=t[0],s=t[1],o=t[2];return r/=95.047,s/=100,o/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,e=116*s-16,n=500*(r-s),i=200*(s-o),[e,n,i]}function y(t){var e,n,i,r,s=t[0],o=t[1],a=t[2];return 8>=s?(n=100*s/903.3,r=n/100*7.787+16/116):(n=100*Math.pow((s+16)/116,3),r=Math.pow(n/100,1/3)),e=.008856>=e/95.047?e=95.047*(o/500+r-16/116)/7.787:95.047*Math.pow(o/500+r,3),i=.008859>=i/108.883?i=108.883*(r-a/200-16/116)/7.787:108.883*Math.pow(r-a/200,3),[e,n,i]}function x(t){var e,n,i,r=t[0],s=t[1],o=t[2];return e=Math.atan2(o,s),0>(n=360*e/2/Math.PI)&&(n+=360),i=Math.sqrt(s*s+o*o),[r,i,n]}function E(t){return m(y(t))}function I(t){var e,n,i,r=t[0],s=t[1];return i=t[2]/360*2*Math.PI,e=s*Math.cos(i),n=s*Math.sin(i),[r,e,n]}function C(t){return w[t]}e.exports={rgb2hsl:i,rgb2hsv:s,rgb2hwb:o,rgb2cmyk:a,rgb2keyword:l,rgb2xyz:u,rgb2lab:h,rgb2lch:function(t){return x(h(t))},hsl2rgb:c,hsl2hsv:function(t){var e,n,i=t[0],r=t[1]/100,s=t[2]/100;return 0===s?[0,0,0]:(s*=2,r*=1>=s?s:2-s,n=(s+r)/2,e=2*r/(s+r),[i,100*e,100*n])},hsl2hwb:function(t){return o(c(t))},hsl2cmyk:function(t){return a(c(t))},hsl2keyword:function(t){return l(c(t))},hsv2rgb:d,hsv2hsl:function(t){var e,n,i=t[0],r=t[1]/100,s=t[2]/100;return n=(2-r)*s,e=r*s,e/=1>=n?n:2-n,e=e||0,n/=2,[i,100*e,100*n]},hsv2hwb:function(t){return o(d(t))},hsv2cmyk:function(t){return a(d(t))},hsv2keyword:function(t){return l(d(t))},hwb2rgb:f,hwb2hsl:function(t){return i(f(t))},hwb2hsv:function(t){return s(f(t))},hwb2cmyk:function(t){return a(f(t))},hwb2keyword:function(t){return l(f(t))},cmyk2rgb:p,cmyk2hsl:function(t){return i(p(t))},cmyk2hsv:function(t){return s(p(t))},cmyk2hwb:function(t){return o(p(t))},cmyk2keyword:function(t){return l(p(t))},keyword2rgb:C,keyword2hsl:function(t){return i(C(t))},keyword2hsv:function(t){return s(C(t))},keyword2hwb:function(t){return o(C(t))},keyword2cmyk:function(t){return a(C(t))},keyword2lab:function(t){return h(C(t))},keyword2xyz:function(t){return u(C(t))},xyz2rgb:m,xyz2lab:v,xyz2lch:function(t){return x(v(t))},lab2xyz:y,lab2rgb:E,lab2lch:x,lch2lab:I,lch2xyz:function(t){return y(I(t))},lch2rgb:function(t){return E(I(t))}};var w={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},M={};for(var S in w)M[JSON.stringify(w[S])]=S},{}],4:[function(t,e,n){var i=t(3),r=function(){return new u};for(var s in i){r[s+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),i[t](e)}}(s);var o=/(\w+)2(\w+)/.exec(s),a=o[1],l=o[2];(r[a]=r[a]||{})[l]=r[s]=function(t){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var n=i[t](e);if("string"==typeof n||void 0===n)return n;for(var r=0;r<n.length;r++)n[r]=Math.round(n[r]);return n}}(s)}var u=function(){this.convs={}};u.prototype.routeSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n))},u.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},u.prototype.getValues=function(t){var e=this.convs[t];if(!e){var n=this.space,i=this.convs[n];e=r[n][t](i),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){u.prototype[t]=function(e){return this.routeSpace(t,arguments)}}),e.exports=r},{3:3}],5:[function(t,e,n){e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],6:[function(t,e,n){!function(t,i){"object"==typeof n&&void 0!==e?e.exports=i():t.moment=i()}(this,function(){"use strict";function n(){return ye.apply(null,arguments)}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function r(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t){var e;for(e in t)return!1;return!0}function o(t){return"number"==typeof value||"[object Number]"===Object.prototype.toString.call(t)}function a(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function l(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var n in e)u(e,n)&&(t[n]=e[n]);return u(e,"toString")&&(t.toString=e.toString),u(e,"valueOf")&&(t.valueOf=e.valueOf),t}function c(t,e,n,i){return At(t,e,n,i,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function f(t){return null==t._pf&&(t._pf=d()),t._pf}function g(t){if(null==t._isValid){var e=f(t),n=be.call(e.parsedDateParts,function(t){return null!=t}),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function p(t){var e=c(NaN);return null!=t?h(f(e),t):f(e).userInvalidated=!0,e}function m(t){return void 0===t}function v(t,e){var n,i,r;if(m(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),m(e._i)||(t._i=e._i),m(e._f)||(t._f=e._f),m(e._l)||(t._l=e._l),m(e._strict)||(t._strict=e._strict),m(e._tzm)||(t._tzm=e._tzm),m(e._isUTC)||(t._isUTC=e._isUTC),m(e._offset)||(t._offset=e._offset),m(e._pf)||(t._pf=f(e)),m(e._locale)||(t._locale=e._locale),Ee.length>0)for(n in Ee)i=Ee[n],r=e[i],m(r)||(t[i]=r);return t}function y(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),!1===Ie&&(Ie=!0,n.updateOffset(this),Ie=!1)}function x(t){return t instanceof y||null!=t&&null!=t._isAMomentObject}function b(t){return 0>t?Math.ceil(t)||0:Math.floor(t)}function E(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=b(e)),n}function I(t,e,n){var i,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&E(t[i])!==E(e[i]))&&o++;return o+s}function C(t){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function w(t,e){var i=!0;return h(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,t),i){for(var r,s=[],o=0;o<arguments.length;o++){if(r="","object"==typeof arguments[o]){r+="\n["+o+"] ";for(var a in arguments[0])r+=a+": "+arguments[0][a]+", ";r=r.slice(0,-2)}else r=arguments[o];s.push(r)}C(t+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),i=!1}return e.apply(this,arguments)},e)}function M(t,e){null!=n.deprecationHandler&&n.deprecationHandler(t,e),Ce[t]||(C(e),Ce[t]=!0)}function S(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function N(t,e){var n,i=h({},t);for(n in e)u(e,n)&&(r(t[n])&&r(e[n])?(i[n]={},h(i[n],t[n]),h(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)u(t,n)&&!u(e,n)&&r(t[n])&&(i[n]=h({},i[n]));return i}function _(t){null!=t&&this.set(t)}function T(t,e){var n=t.toLowerCase();Pe[n]=Pe[n+"s"]=Pe[e]=t}function L(t){return"string"==typeof t?Pe[t]||Pe[t.toLowerCase()]:void 0}function P(t){var e,n,i={};for(n in t)u(t,n)&&(e=L(n))&&(i[e]=t[n]);return i}function R(t,e){Re[t]=e}function O(t){var e=[];for(var n in t)e.push({unit:n,priority:Re[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}function D(t,e){return function(i){return null!=i?(A(this,t,i),n.updateOffset(this,e),this):k(this,t)}}function k(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function A(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function F(t,e,n){var i=""+Math.abs(t),r=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function B(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(Ae[t]=r),e&&(Ae[e[0]]=function(){return F(r.apply(this,arguments),e[1],e[2])}),n&&(Ae[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function V(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function G(t){var e,n,i=t.match(Oe);for(e=0,n=i.length;n>e;e++)Ae[i[e]]?i[e]=Ae[i[e]]:i[e]=V(i[e]);return function(e){var r,s="";for(r=0;n>r;r++)s+=i[r]instanceof Function?i[r].call(e,t):i[r];return s}}function z(t,e){return t.isValid()?(e=q(e,t.localeData()),ke[e]=ke[e]||G(e),ke[e](t)):t.localeData().invalidDate()}function q(t,e){var n=5;for(De.lastIndex=0;n>=0&&De.test(t);)t=t.replace(De,function(t){return e.longDateFormat(t)||t}),De.lastIndex=0,n-=1;return t}function j(t,e,n){tn[t]=S(e)?e:function(t,i){return t&&n?n:e}}function Y(t,e){return u(tn,t)?tn[t](e._strict,e._locale):new RegExp(W(t))}function W(t){return U(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r}))}function U(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function H(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),o(e)&&(i=function(t,n){n[e]=E(t)}),n=0;n<t.length;n++)en[t[n]]=i}function X(t,e){H(t,function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function K(t,e,n){null!=e&&u(en,t)&&en[t](e,n._a,n,t)}function Z(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function J(t,e,n){var i,r,s,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;12>i;++i)s=c([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(s,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(r=dn.call(this._shortMonthsParse,o))?r:null:-1!==(r=dn.call(this._longMonthsParse,o))?r:null:"MMM"===e?-1!==(r=dn.call(this._shortMonthsParse,o))?r:-1!==(r=dn.call(this._longMonthsParse,o))?r:null:-1!==(r=dn.call(this._longMonthsParse,o))?r:-1!==(r=dn.call(this._shortMonthsParse,o))?r:null}function Q(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=E(e);else if(e=t.localeData().monthsParse(e),!o(e))return t;return n=Math.min(t.date(),Z(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function $(t){return null!=t?(Q(this,t),n.updateOffset(this,!0),this):k(this,"Month")}function tt(){function t(t,e){return e.length-t.length}var e,n,i=[],r=[],s=[];for(e=0;12>e;e++)n=c([2e3,e]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(i.sort(t),r.sort(t),s.sort(t),e=0;12>e;e++)i[e]=U(i[e]),r[e]=U(r[e]);for(e=0;24>e;e++)s[e]=U(s[e]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function et(t){return nt(t)?366:365}function nt(t){return t%4==0&&t%100!=0||t%400==0}function it(t,e,n,i,r,s,o){var a=new Date(t,e,n,i,r,s,o);return 100>t&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function rt(t){var e=new Date(Date.UTC.apply(null,arguments));return 100>t&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function st(t,e,n){var i=7+e-n;return-((7+rt(t,0,i).getUTCDay()-e)%7)+i-1}function ot(t,e,n,i,r){var s,o,a=1+7*(e-1)+(7+n-i)%7+st(t,i,r);return 0>=a?(s=t-1,o=et(s)+a):a>et(t)?(s=t+1,o=a-et(t)):(s=t,o=a),{year:s,dayOfYear:o}}function at(t,e,n){var i,r,s=st(t.year(),e,n),o=Math.floor((t.dayOfYear()-s-1)/7)+1;return 1>o?(r=t.year()-1,i=o+lt(r,e,n)):o>lt(t.year(),e,n)?(i=o-lt(t.year(),e,n),r=t.year()+1):(r=t.year(),i=o),{week:i,year:r}}function lt(t,e,n){var i=st(t,e,n),r=st(t+1,e,n);return(et(t)-i+r)/7}function ut(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function ht(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function ct(t,e,n){var i,r,s,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;7>i;++i)s=c([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(s,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(r=dn.call(this._weekdaysParse,o))?r:null:"ddd"===e?-1!==(r=dn.call(this._shortWeekdaysParse,o))?r:null:-1!==(r=dn.call(this._minWeekdaysParse,o))?r:null:"dddd"===e?-1!==(r=dn.call(this._weekdaysParse,o))?r:-1!==(r=dn.call(this._shortWeekdaysParse,o))?r:-1!==(r=dn.call(this._minWeekdaysParse,o))?r:null:"ddd"===e?-1!==(r=dn.call(this._shortWeekdaysParse,o))?r:-1!==(r=dn.call(this._weekdaysParse,o))?r:-1!==(r=dn.call(this._minWeekdaysParse,o))?r:null:-1!==(r=dn.call(this._minWeekdaysParse,o))?r:-1!==(r=dn.call(this._weekdaysParse,o))?r:-1!==(r=dn.call(this._shortWeekdaysParse,o))?r:null}function dt(){function t(t,e){return e.length-t.length}var e,n,i,r,s,o=[],a=[],l=[],u=[];for(e=0;7>e;e++)n=c([2e3,1]).day(e),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),s=this.weekdays(n,""),o.push(i),a.push(r),l.push(s),u.push(i),u.push(r),u.push(s);for(o.sort(t),a.sort(t),l.sort(t),u.sort(t),e=0;7>e;e++)a[e]=U(a[e]),l[e]=U(l[e]),u[e]=U(u[e]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function ft(){return this.hours()%12||12}function gt(t,e){B(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function pt(t,e){return e._meridiemParse}function mt(t){return t?t.toLowerCase().replace("_","-"):t}function vt(t){for(var e,n,i,r,s=0;s<t.length;){for(e=(r=mt(t[s]).split("-")).length,n=(n=mt(t[s+1]))?n.split("-"):null;e>0;){if(i=yt(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&I(r,n,!0)>=e-1)break;e--}s++}return null}function yt(n){var i=null;if(!Ln[n]&&void 0!==e&&e&&e.exports)try{i=Sn._abbr,t("./locale/"+n),xt(i)}catch(t){}return Ln[n]}function xt(t,e){var n;return t&&(n=m(e)?Et(t):bt(t,e))&&(Sn=n),Sn._abbr}function bt(t,e){if(null!==e){var n=Tn;if(e.abbr=t,null!=Ln[t])M("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Ln[t]._config;else if(null!=e.parentLocale){if(null==Ln[e.parentLocale])return Pn[e.parentLocale]||(Pn[e.parentLocale]=[]),Pn[e.parentLocale].push({name:t,config:e}),null;n=Ln[e.parentLocale]._config}return Ln[t]=new _(N(n,e)),Pn[t]&&Pn[t].forEach(function(t){bt(t.name,t.config)}),xt(t),Ln[t]}return delete Ln[t],null}function Et(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Sn;if(!i(t)){if(e=yt(t))return e;t=[t]}return vt(t)}function It(t){var e,n=t._a;return n&&-2===f(t).overflow&&(e=n[rn]<0||n[rn]>11?rn:n[sn]<1||n[sn]>Z(n[nn],n[rn])?sn:n[on]<0||n[on]>24||24===n[on]&&(0!==n[an]||0!==n[ln]||0!==n[un])?on:n[an]<0||n[an]>59?an:n[ln]<0||n[ln]>59?ln:n[un]<0||n[un]>999?un:-1,f(t)._overflowDayOfYear&&(nn>e||e>sn)&&(e=sn),f(t)._overflowWeeks&&-1===e&&(e=hn),f(t)._overflowWeekday&&-1===e&&(e=cn),f(t).overflow=e),t}function Ct(t){var e,n,i,r,s,o,a=t._i,l=Rn.exec(a)||On.exec(a);if(l){for(f(t).iso=!0,e=0,n=kn.length;n>e;e++)if(kn[e][1].exec(l[1])){r=kn[e][0],i=!1!==kn[e][2];break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,n=An.length;n>e;e++)if(An[e][1].exec(l[3])){s=(l[2]||" ")+An[e][0];break}if(null==s)return void(t._isValid=!1)}if(!i&&null!=s)return void(t._isValid=!1);if(l[4]){if(!Dn.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=r+(s||"")+(o||""),Tt(t)}else t._isValid=!1}function wt(t){var e=Fn.exec(t._i);return null!==e?void(t._d=new Date(+e[1])):(Ct(t),void(!1===t._isValid&&(delete t._isValid,n.createFromInputFallback(t))))}function Mt(t,e,n){return null!=t?t:null!=e?e:n}function St(t){var e=new Date(n.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Nt(t){var e,n,i,r,s=[];if(!t._d){for(i=St(t),t._w&&null==t._a[sn]&&null==t._a[rn]&&_t(t),t._dayOfYear&&(r=Mt(t._a[nn],i[nn]),t._dayOfYear>et(r)&&(f(t)._overflowDayOfYear=!0),n=rt(r,0,t._dayOfYear),t._a[rn]=n.getUTCMonth(),t._a[sn]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[on]&&0===t._a[an]&&0===t._a[ln]&&0===t._a[un]&&(t._nextDay=!0,t._a[on]=0),t._d=(t._useUTC?rt:it).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[on]=24)}}function _t(t){var e,n,i,r,s,o,a,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)s=1,o=4,n=Mt(e.GG,t._a[nn],at(Ft(),1,4).year),i=Mt(e.W,1),(1>(r=Mt(e.E,1))||r>7)&&(l=!0);else{s=t._locale._week.dow,o=t._locale._week.doy;var u=at(Ft(),s,o);n=Mt(e.gg,t._a[nn],u.year),i=Mt(e.w,u.week),null!=e.d?(0>(r=e.d)||r>6)&&(l=!0):null!=e.e?(r=e.e+s,(e.e<0||e.e>6)&&(l=!0)):r=s}1>i||i>lt(n,s,o)?f(t)._overflowWeeks=!0:null!=l?f(t)._overflowWeekday=!0:(a=ot(n,i,r,s,o),t._a[nn]=a.year,t._dayOfYear=a.dayOfYear)}function Tt(t){if(t._f!==n.ISO_8601){t._a=[],f(t).empty=!0;var e,i,r,s,o,a=""+t._i,l=a.length,u=0;for(r=q(t._f,t._locale).match(Oe)||[],e=0;e<r.length;e++)s=r[e],(i=(a.match(Y(s,t))||[])[0])&&((o=a.substr(0,a.indexOf(i))).length>0&&f(t).unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),u+=i.length),Ae[s]?(i?f(t).empty=!1:f(t).unusedTokens.push(s),K(s,i,t)):t._strict&&!i&&f(t).unusedTokens.push(s);f(t).charsLeftOver=l-u,a.length>0&&f(t).unusedInput.push(a),t._a[on]<=12&&!0===f(t).bigHour&&t._a[on]>0&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[on]=Lt(t._locale,t._a[on],t._meridiem),Nt(t),It(t)}else Ct(t)}function Lt(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((i=t.isPM(n))&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function Pt(t){var e,n,i,r,s;if(0===t._f.length)return f(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)s=0,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Tt(e),g(e)&&(s+=f(e).charsLeftOver,s+=10*f(e).unusedTokens.length,f(e).score=s,(null==i||i>s)&&(i=s,n=e));h(t,n||e)}function Rt(t){if(!t._d){var e=P(t._i);t._a=l([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),Nt(t)}}function Ot(t){var e=new y(It(Dt(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Dt(t){var e=t._i,n=t._f;return t._locale=t._locale||Et(t._l),null===e||void 0===n&&""===e?p({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),x(e)?new y(It(e)):(a(e)?t._d=e:i(n)?Pt(t):n?Tt(t):kt(t),g(t)||(t._d=null),t))}function kt(t){var e=t._i;void 0===e?t._d=new Date(n.now()):a(e)?t._d=new Date(e.valueOf()):"string"==typeof e?wt(t):i(e)?(t._a=l(e.slice(0),function(t){return parseInt(t,10)}),Nt(t)):"object"==typeof e?Rt(t):o(e)?t._d=new Date(e):n.createFromInputFallback(t)}function At(t,e,n,o,a){var l={};return(!0===n||!1===n)&&(o=n,n=void 0),(r(t)&&s(t)||i(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=a,l._l=n,l._i=t,l._f=e,l._strict=o,Ot(l)}function Ft(t,e,n,i){return At(t,e,n,i,!1)}function Bt(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Ft();for(n=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}function Vt(t){var e=P(t),n=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,u=e.second||0,h=e.millisecond||0;this._milliseconds=+h+1e3*u+6e4*l+1e3*a*60*60,this._days=+o+7*s,this._months=+r+3*i+12*n,this._data={},this._locale=Et(),this._bubble()}function Gt(t){return t instanceof Vt}function zt(t){return 0>t?-1*Math.round(-1*t):Math.round(t)}function qt(t,e){B(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+F(~~(t/60),2)+e+F(~~t%60,2)})}function jt(t,e){var n=(e||"").match(t);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(Gn)||["-",0,0],r=60*i[1]+E(i[2]);return 0===r?0:"+"===i[0]?r:-r}function Yt(t,e){var i,r;return e._isUTC?(i=e.clone(),r=(x(t)||a(t)?t.valueOf():Ft(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+r),n.updateOffset(i,!1),i):Ft(t).local()}function Wt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Ut(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ht(t,e){var n,i,r,s=t,a=null;return Gt(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:o(t)?(s={},e?s[e]=t:s.milliseconds=t):(a=zn.exec(t))?(n="-"===a[1]?-1:1,s={y:0,d:E(a[sn])*n,h:E(a[on])*n,m:E(a[an])*n,s:E(a[ln])*n,ms:E(zt(1e3*a[un]))*n}):(a=qn.exec(t))?(n="-"===a[1]?-1:1,s={y:Xt(a[2],n),M:Xt(a[3],n),w:Xt(a[4],n),d:Xt(a[5],n),h:Xt(a[6],n),m:Xt(a[7],n),s:Xt(a[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(r=Zt(Ft(s.from),Ft(s.to)),s={},s.ms=r.milliseconds,s.M=r.months),i=new Vt(s),Gt(t)&&u(t,"_locale")&&(i._locale=t._locale),i}function Xt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Kt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Zt(t,e){var n;return t.isValid()&&e.isValid()?(e=Yt(e,t),t.isBefore(e)?n=Kt(t,e):(n=Kt(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Jt(t,e){return function(n,i){var r,s;return null===i||isNaN(+i)||(M(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=i,i=s),n="string"==typeof n?+n:n,r=Ht(n,i),Qt(this,r,t),this}}function Qt(t,e,i,r){var s=e._milliseconds,o=zt(e._days),a=zt(e._months);t.isValid()&&(r=null==r||r,s&&t._d.setTime(t._d.valueOf()+s*i),o&&A(t,"Date",k(t,"Date")+o*i),a&&Q(t,k(t,"Month")+a*i),r&&n.updateOffset(t,o||a))}function $t(t,e){var n,i,r=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(r,"months");return 0>e-s?(n=t.clone().add(r-1,"months"),i=(e-s)/(s-n)):(n=t.clone().add(r+1,"months"),i=(e-s)/(n-s)),-(r+i)||0}function te(t){var e;return void 0===t?this._locale._abbr:(null!=(e=Et(t))&&(this._locale=e),this)}function ee(){return this._locale}function ne(t,e){B(0,[t,t.length],0,e)}function ie(t,e,n,i,r){var s;return null==t?at(this,i,r).year:(s=lt(t,i,r),e>s&&(e=s),re.call(this,t,e,n,i,r))}function re(t,e,n,i,r){var s=ot(t,e,n,i,r),o=rt(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function se(t){return t}function oe(t,e,n,i){var r=Et(),s=c().set(i,e);return r[n](s,t)}function ae(t,e,n){if(o(t)&&(e=t,t=void 0),t=t||"",null!=e)return oe(t,e,n,"month");var i,r=[];for(i=0;12>i;i++)r[i]=oe(t,i,n,"month");return r}function le(t,e,n,i){"boolean"==typeof t?(o(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,o(e)&&(n=e,e=void 0),e=e||"");var r=Et(),s=t?r._week.dow:0;if(null!=n)return oe(e,(n+s)%7,i,"day");var a,l=[];for(a=0;7>a;a++)l[a]=oe(e,(a+s)%7,i,"day");return l}function ue(t,e,n,i){var r=Ht(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function he(t){return 0>t?Math.floor(t):Math.ceil(t)}function ce(t){return 4800*t/146097}function de(t){return 146097*t/4800}function fe(t){return function(){return this.as(t)}}function ge(t){return function(){return this._data[t]}}function pe(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function me(t,e,n){var i=Ht(t).abs(),r=pi(i.as("s")),s=pi(i.as("m")),o=pi(i.as("h")),a=pi(i.as("d")),l=pi(i.as("M")),u=pi(i.as("y")),h=r<mi.s&&["s",r]||1>=s&&["m"]||s<mi.m&&["mm",s]||1>=o&&["h"]||o<mi.h&&["hh",o]||1>=a&&["d"]||a<mi.d&&["dd",a]||1>=l&&["M"]||l<mi.M&&["MM",l]||1>=u&&["y"]||["yy",u];return h[2]=e,h[3]=+t>0,h[4]=n,pe.apply(null,h)}function ve(){var t,e,n,i=vi(this._milliseconds)/1e3,r=vi(this._days),s=vi(this._months);e=b((t=b(i/60))/60),i%=60,t%=60;var o=n=b(s/12),a=s%=12,l=r,u=e,h=t,c=i,d=this.asSeconds();return d?(0>d?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(u||h||c?"T":"")+(u?u+"H":"")+(h?h+"M":"")+(c?c+"S":""):"P0D"}var ye,xe,be=xe=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,i=0;n>i;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1},Ee=n.momentProperties=[],Ie=!1,Ce={};n.suppressDeprecationWarnings=!1,n.deprecationHandler=null;var we,Me,Se=we=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)u(t,e)&&n.push(e);return n},Ne={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},_e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Te=/\d{1,2}/,Le={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Pe={},Re={},Oe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,De=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ke={},Ae={},Fe=/\d/,Be=/\d\d/,Ve=/\d{3}/,Ge=/\d{4}/,ze=/[+-]?\d{6}/,qe=/\d\d?/,je=/\d\d\d\d?/,Ye=/\d\d\d\d\d\d?/,We=/\d{1,3}/,Ue=/\d{1,4}/,He=/[+-]?\d{1,6}/,Xe=/\d+/,Ke=/[+-]?\d+/,Ze=/Z|[+-]\d\d:?\d\d/gi,Je=/Z|[+-]\d\d(?::?\d\d)?/gi,Qe=/[+-]?\d+(\.\d{1,3})?/,$e=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,tn={},en={},nn=0,rn=1,sn=2,on=3,an=4,ln=5,un=6,hn=7,cn=8,dn=Me=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};B("M",["MM",2],"Mo",function(){return this.month()+1}),B("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),B("MMMM",0,0,function(t){return this.localeData().months(this,t)}),T("month","M"),R("month",8),j("M",qe),j("MM",qe,Be),j("MMM",function(t,e){return e.monthsShortRegex(t)}),j("MMMM",function(t,e){return e.monthsRegex(t)}),H(["M","MM"],function(t,e){e[rn]=E(t)-1}),H(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[rn]=r:f(n).invalidMonth=t});var fn=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,gn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mn=$e,vn=$e;B("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),B(0,["YY",2],0,function(){return this.year()%100}),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),T("year","y"),R("year",1),j("Y",Ke),j("YY",qe,Be),j("YYYY",Ue,Ge),j("YYYYY",He,ze),j("YYYYYY",He,ze),H(["YYYYY","YYYYYY"],nn),H("YYYY",function(t,e){e[nn]=2===t.length?n.parseTwoDigitYear(t):E(t)}),H("YY",function(t,e){e[nn]=n.parseTwoDigitYear(t)}),H("Y",function(t,e){e[nn]=parseInt(t,10)}),n.parseTwoDigitYear=function(t){return E(t)+(E(t)>68?1900:2e3)};var yn=D("FullYear",!0);B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),T("week","w"),T("isoWeek","W"),R("week",5),R("isoWeek",5),j("w",qe),j("ww",qe,Be),j("W",qe),j("WW",qe,Be),X(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=E(t)});var xn={dow:0,doy:6};B("d",0,"do","day"),B("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),B("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),B("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),T("day","d"),T("weekday","e"),T("isoWeekday","E"),R("day",11),R("weekday",11),R("isoWeekday",11),j("d",qe),j("e",qe),j("E",qe),j("dd",function(t,e){return e.weekdaysMinRegex(t)}),j("ddd",function(t,e){return e.weekdaysShortRegex(t)}),j("dddd",function(t,e){return e.weekdaysRegex(t)}),X(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);null!=r?e.d=r:f(n).invalidWeekday=t}),X(["d","e","E"],function(t,e,n,i){e[i]=E(t)});var bn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),En="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),In="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Cn=$e,wn=$e,Mn=$e;B("H",["HH",2],0,"hour"),B("h",["hh",2],0,ft),B("k",["kk",2],0,function(){return this.hours()||24}),B("hmm",0,0,function(){return""+ft.apply(this)+F(this.minutes(),2)}),B("hmmss",0,0,function(){return""+ft.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}),B("Hmm",0,0,function(){return""+this.hours()+F(this.minutes(),2)}),B("Hmmss",0,0,function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)}),gt("a",!0),gt("A",!1),T("hour","h"),R("hour",13),j("a",pt),j("A",pt),j("H",qe),j("h",qe),j("HH",qe,Be),j("hh",qe,Be),j("hmm",je),j("hmmss",Ye),j("Hmm",je),j("Hmmss",Ye),H(["H","HH"],on),H(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),H(["h","hh"],function(t,e,n){e[on]=E(t),f(n).bigHour=!0}),H("hmm",function(t,e,n){var i=t.length-2;e[on]=E(t.substr(0,i)),e[an]=E(t.substr(i)),f(n).bigHour=!0}),H("hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[on]=E(t.substr(0,i)),e[an]=E(t.substr(i,2)),e[ln]=E(t.substr(r)),f(n).bigHour=!0}),H("Hmm",function(t,e,n){var i=t.length-2;e[on]=E(t.substr(0,i)),e[an]=E(t.substr(i))}),H("Hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[on]=E(t.substr(0,i)),e[an]=E(t.substr(i,2)),e[ln]=E(t.substr(r))});var Sn,Nn=/[ap]\.?m?\.?/i,_n=D("Hours",!0),Tn={calendar:Ne,longDateFormat:_e,invalidDate:"Invalid date",ordinal:"%d",ordinalParse:Te,relativeTime:Le,months:gn,monthsShort:pn,week:xn,weekdays:bn,weekdaysMin:In,weekdaysShort:En,meridiemParse:Nn},Ln={},Pn={},Rn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,On=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Dn=/Z|[+-]\d\d(?::?\d\d)?/,kn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],An=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Fn=/^\/?Date\((\-?\d+)/i;n.createFromInputFallback=w("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),n.ISO_8601=function(){};var Bn=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ft.apply(null,arguments);return this.isValid()&&t.isValid()?this>t?this:t:p()}),Vn=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ft.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:p()});qt("Z",":"),qt("ZZ",""),j("Z",Je),j("ZZ",Je),H(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=jt(Je,t)});var Gn=/([\+\-]|\d\d)/gi;n.updateOffset=function(){};var zn=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,qn=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ht.fn=Vt.prototype;var jn=Jt(1,"add"),Yn=Jt(-1,"subtract");n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Wn=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});B(0,["gg",2],0,function(){return this.weekYear()%100}),B(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ne("gggg","weekYear"),ne("ggggg","weekYear"),ne("GGGG","isoWeekYear"),ne("GGGGG","isoWeekYear"),T("weekYear","gg"),T("isoWeekYear","GG"),R("weekYear",1),R("isoWeekYear",1),j("G",Ke),j("g",Ke),j("GG",qe,Be),j("gg",qe,Be),j("GGGG",Ue,Ge),j("gggg",Ue,Ge),j("GGGGG",He,ze),j("ggggg",He,ze),X(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=E(t)}),X(["gg","GG"],function(t,e,i,r){e[r]=n.parseTwoDigitYear(t)}),B("Q",0,"Qo","quarter"),T("quarter","Q"),R("quarter",7),j("Q",Fe),H("Q",function(t,e){e[rn]=3*(E(t)-1)}),B("D",["DD",2],"Do","date"),T("date","D"),R("date",9),j("D",qe),j("DD",qe,Be),j("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),H(["D","DD"],sn),H("Do",function(t,e){e[sn]=E(t.match(qe)[0],10)});var Un=D("Date",!0);B("DDD",["DDDD",3],"DDDo","dayOfYear"),T("dayOfYear","DDD"),R("dayOfYear",4),j("DDD",We),j("DDDD",Ve),H(["DDD","DDDD"],function(t,e,n){n._dayOfYear=E(t)}),B("m",["mm",2],0,"minute"),T("minute","m"),R("minute",14),j("m",qe),j("mm",qe,Be),H(["m","mm"],an);var Hn=D("Minutes",!1);B("s",["ss",2],0,"second"),T("second","s"),R("second",15),j("s",qe),j("ss",qe,Be),H(["s","ss"],ln);var Xn=D("Seconds",!1);B("S",0,0,function(){return~~(this.millisecond()/100)}),B(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,function(){return 10*this.millisecond()}),B(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),B(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),B(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),B(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),B(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),T("millisecond","ms"),R("millisecond",16),j("S",We,Fe),j("SS",We,Be),j("SSS",We,Ve);var Kn;for(Kn="SSSS";Kn.length<=9;Kn+="S")j(Kn,Xe);for(Kn="S";Kn.length<=9;Kn+="S")H(Kn,function(t,e){e[un]=E(1e3*("0."+t))});var Zn=D("Milliseconds",!1);B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var Jn=y.prototype;Jn.add=jn,Jn.calendar=function(t,e){var i=t||Ft(),r=Yt(i,this).startOf("day"),s=n.calendarFormat(this,r)||"sameElse",o=e&&(S(e[s])?e[s].call(this,i):e[s]);return this.format(o||this.localeData().calendar(s,this,Ft(i)))},Jn.clone=function(){return new y(this)},Jn.diff=function(t,e,n){var i,r,s,o;return this.isValid()&&(i=Yt(t,this)).isValid()?(r=6e4*(i.utcOffset()-this.utcOffset()),"year"===(e=L(e))||"month"===e||"quarter"===e?(o=$t(this,i),"quarter"===e?o/=3:"year"===e&&(o/=12)):(s=this-i,o="second"===e?s/1e3:"minute"===e?s/6e4:"hour"===e?s/36e5:"day"===e?(s-r)/864e5:"week"===e?(s-r)/6048e5:s),n?o:b(o)):NaN},Jn.endOf=function(t){return void 0===(t=L(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))},Jn.format=function(t){t||(t=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var e=z(this,t);return this.localeData().postformat(e)},Jn.from=function(t,e){return this.isValid()&&(x(t)&&t.isValid()||Ft(t).isValid())?Ht({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Jn.fromNow=function(t){return this.from(Ft(),t)},Jn.to=function(t,e){return this.isValid()&&(x(t)&&t.isValid()||Ft(t).isValid())?Ht({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Jn.toNow=function(t){return this.to(Ft(),t)},Jn.get=function(t){return t=L(t),S(this[t])?this[t]():this},Jn.invalidAt=function(){return f(this).overflow},Jn.isAfter=function(t,e){var n=x(t)?t:Ft(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=L(m(e)?"millisecond":e))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},Jn.isBefore=function(t,e){var n=x(t)?t:Ft(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=L(m(e)?"millisecond":e))?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},Jn.isBetween=function(t,e,n,i){return("("===(i=i||"()")[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===i[1]?this.isBefore(e,n):!this.isAfter(e,n))},Jn.isSame=function(t,e){var n,i=x(t)?t:Ft(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=L(e||"millisecond"))?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},Jn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},Jn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},Jn.isValid=function(){return g(this)},Jn.lang=Wn,Jn.locale=te,Jn.localeData=ee,Jn.max=Vn,Jn.min=Bn,Jn.parsingFlags=function(){return h({},f(this))},Jn.set=function(t,e){if("object"==typeof t)for(var n=O(t=P(t)),i=0;i<n.length;i++)this[n[i].unit](t[n[i].unit]);else if(t=L(t),S(this[t]))return this[t](e);return this},Jn.startOf=function(t){switch(t=L(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},Jn.subtract=Yn,Jn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},Jn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},Jn.toDate=function(){return new Date(this.valueOf())},Jn.toISOString=function(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?S(Date.prototype.toISOString)?this.toDate().toISOString():z(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):z(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},Jn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',i=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r=e+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+r)},Jn.toJSON=function(){return this.isValid()?this.toISOString():null},Jn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Jn.unix=function(){return Math.floor(this.valueOf()/1e3)},Jn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Jn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Jn.year=yn,Jn.isLeapYear=function(){return nt(this.year())},Jn.weekYear=function(t){return ie.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Jn.isoWeekYear=function(t){return ie.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},Jn.quarter=Jn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},Jn.month=$,Jn.daysInMonth=function(){return Z(this.year(),this.month())},Jn.week=Jn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},Jn.isoWeek=Jn.isoWeeks=function(t){var e=at(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},Jn.weeksInYear=function(){var t=this.localeData()._week;return lt(this.year(),t.dow,t.doy)},Jn.isoWeeksInYear=function(){return lt(this.year(),1,4)},Jn.date=Un,Jn.day=Jn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=ut(t,this.localeData()),this.add(t-e,"d")):e},Jn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},Jn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=ht(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},Jn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},Jn.hour=Jn.hours=_n,Jn.minute=Jn.minutes=Hn,Jn.second=Jn.seconds=Xn,Jn.millisecond=Jn.milliseconds=Zn,Jn.utcOffset=function(t,e){var i,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=jt(Je,t)))return this}else Math.abs(t)<16&&(t*=60);return!this._isUTC&&e&&(i=Wt(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?Qt(this,Ht(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:Wt(this)},Jn.utc=function(t){return this.utcOffset(0,t)},Jn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Wt(this),"m")),this},Jn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var t=jt(Ze,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},Jn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Ft(t).utcOffset():0,(this.utcOffset()-t)%60==0)},Jn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Jn.isLocal=function(){return!!this.isValid()&&!this._isUTC},Jn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Jn.isUtc=Ut,Jn.isUTC=Ut,Jn.zoneAbbr=function(){return this._isUTC?"UTC":""},Jn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Jn.dates=w("dates accessor is deprecated. Use date instead.",Un),Jn.months=w("months accessor is deprecated. Use month instead",$),Jn.years=w("years accessor is deprecated. Use year instead",yn),Jn.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),Jn.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!m(this._isDSTShifted))return this._isDSTShifted;var t={};if(v(t,this),(t=Dt(t))._a){var e=t._isUTC?c(t._a):Ft(t._a);this._isDSTShifted=this.isValid()&&I(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var Qn=_.prototype;Qn.calendar=function(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return S(i)?i.call(e,n):i},Qn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},Qn.invalidDate=function(){return this._invalidDate},Qn.ordinal=function(t){return this._ordinal.replace("%d",t)},Qn.preparse=se,Qn.postformat=se,Qn.relativeTime=function(t,e,n,i){var r=this._relativeTime[n];return S(r)?r(t,e,n,i):r.replace(/%d/i,t)},Qn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return S(n)?n(e):n.replace(/%s/i,e)},Qn.set=function(t){var e,n;for(n in t)e=t[n],S(e)?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},Qn.months=function(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||fn).test(e)?"format":"standalone"][t.month()]:this._months},Qn.monthsShort=function(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[fn.test(e)?"format":"standalone"][t.month()]:this._monthsShort},Qn.monthsParse=function(t,e,n){var i,r,s;if(this._monthsParseExact)return J.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=c([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},Qn.monthsRegex=function(t){return this._monthsParseExact?(u(this,"_monthsRegex")||tt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=vn),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},Qn.monthsShortRegex=function(t){return this._monthsParseExact?(u(this,"_monthsRegex")||tt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=mn),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},Qn.week=function(t){return at(t,this._week.dow,this._week.doy).week},Qn.firstDayOfYear=function(){return this._week.doy},Qn.firstDayOfWeek=function(){return this._week.dow},Qn.weekdays=function(t,e){return t?i(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:this._weekdays},Qn.weekdaysMin=function(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin},Qn.weekdaysShort=function(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort},Qn.weekdaysParse=function(t,e,n){var i,r,s;if(this._weekdaysParseExact)return ct.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;7>i;i++){if(r=c([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},Qn.weekdaysRegex=function(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||dt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=Cn),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},Qn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||dt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=wn),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Qn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||dt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Mn),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Qn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},Qn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},xt("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===E(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),n.lang=w("moment.lang is deprecated. Use moment.locale instead.",xt),n.langData=w("moment.langData is deprecated. Use moment.localeData instead.",Et);var $n=Math.abs,ti=fe("ms"),ei=fe("s"),ni=fe("m"),ii=fe("h"),ri=fe("d"),si=fe("w"),oi=fe("M"),ai=fe("y"),li=ge("milliseconds"),ui=ge("seconds"),hi=ge("minutes"),ci=ge("hours"),di=ge("days"),fi=ge("months"),gi=ge("years"),pi=Math.round,mi={s:45,m:45,h:22,d:26,M:11},vi=Math.abs,yi=Vt.prototype;return yi.abs=function(){var t=this._data;return this._milliseconds=$n(this._milliseconds),this._days=$n(this._days),this._months=$n(this._months),t.milliseconds=$n(t.milliseconds),t.seconds=$n(t.seconds),t.minutes=$n(t.minutes),t.hours=$n(t.hours),t.months=$n(t.months),t.years=$n(t.years),this},yi.add=function(t,e){return ue(this,t,e,1)},yi.subtract=function(t,e){return ue(this,t,e,-1)},yi.as=function(t){var e,n,i=this._milliseconds;if("month"===(t=L(t))||"year"===t)return e=this._days+i/864e5,n=this._months+ce(e),"month"===t?n:n/12;switch(e=this._days+Math.round(de(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},yi.asMilliseconds=ti,yi.asSeconds=ei,yi.asMinutes=ni,yi.asHours=ii,yi.asDays=ri,yi.asWeeks=si,yi.asMonths=oi,yi.asYears=ai,yi.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*E(this._months/12)},yi._bubble=function(){var t,e,n,i,r,s=this._milliseconds,o=this._days,a=this._months,l=this._data;return s>=0&&o>=0&&a>=0||0>=s&&0>=o&&0>=a||(s+=864e5*he(de(a)+o),o=0,a=0),l.milliseconds=s%1e3,t=b(s/1e3),l.seconds=t%60,e=b(t/60),l.minutes=e%60,n=b(e/60),l.hours=n%24,o+=b(n/24),r=b(ce(o)),a+=r,o-=he(de(r)),i=b(a/12),a%=12,l.days=o,l.months=a,l.years=i,this},yi.get=function(t){return t=L(t),this[t+"s"]()},yi.milliseconds=li,yi.seconds=ui,yi.minutes=hi,yi.hours=ci,yi.days=di,yi.weeks=function(){return b(this.days()/7)},yi.months=fi,yi.years=gi,yi.humanize=function(t){var e=this.localeData(),n=me(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},yi.toISOString=ve,yi.toString=ve,yi.toJSON=ve,yi.locale=te,yi.localeData=ee,yi.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ve),yi.lang=Wn,B("X",0,0,"unix"),B("x",0,0,"valueOf"),j("x",Ke),j("X",Qe),H("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),H("x",function(t,e,n){n._d=new Date(E(t))}),n.version="2.16.0",function(t){ye=t}(Ft),n.fn=Jn,n.min=function(){return Bt("isBefore",[].slice.call(arguments,0))},n.max=function(){return Bt("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=c,n.unix=function(t){return Ft(1e3*t)},n.months=function(t,e){return ae(t,e,"months")},n.isDate=a,n.locale=xt,n.invalid=p,n.duration=Ht,n.isMoment=x,n.weekdays=function(t,e,n){return le(t,e,n,"weekdays")},n.parseZone=function(){return Ft.apply(null,arguments).parseZone()},n.localeData=Et,n.isDuration=Gt,n.monthsShort=function(t,e){return ae(t,e,"monthsShort")},n.weekdaysMin=function(t,e,n){return le(t,e,n,"weekdaysMin")},n.defineLocale=bt,n.updateLocale=function(t,e){if(null!=e){var n,i=Tn;null!=Ln[t]&&(i=Ln[t]._config),(n=new _(e=N(i,e))).parentLocale=Ln[t],Ln[t]=n,xt(t)}else null!=Ln[t]&&(null!=Ln[t].parentLocale?Ln[t]=Ln[t].parentLocale:null!=Ln[t]&&delete Ln[t]);return Ln[t]},n.locales=function(){return Se(Ln)},n.weekdaysShort=function(t,e,n){return le(t,e,n,"weekdaysShort")},n.normalizeUnits=L,n.relativeTimeRounding=function(t){return void 0===t?pi:"function"==typeof t&&(pi=t,!0)},n.relativeTimeThreshold=function(t,e){return void 0!==mi[t]&&(void 0===e?mi[t]:(mi[t]=e,!0))},n.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse"},n.prototype=Jn,n})},{}],7:[function(t,e,n){var i=t(28)();t(26)(i),t(22)(i),t(25)(i),t(21)(i),t(23)(i),t(24)(i),t(29)(i),t(33)(i),t(31)(i),t(34)(i),t(32)(i),t(35)(i),t(30)(i),t(27)(i),t(36)(i),t(37)(i),t(38)(i),t(39)(i),t(40)(i),t(43)(i),t(41)(i),t(42)(i),t(44)(i),t(45)(i),t(46)(i),t(15)(i),t(16)(i),t(17)(i),t(18)(i),t(19)(i),t(20)(i),t(8)(i),t(9)(i),t(10)(i),t(11)(i),t(12)(i),t(13)(i),t(14)(i),window.Chart=e.exports=i},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,8:8,9:9}],8:[function(t,e,n){"use strict";e.exports=function(t){t.Bar=function(e,n){return n.type="bar",new t(e,n)}}},{}],9:[function(t,e,n){"use strict";e.exports=function(t){t.Bubble=function(e,n){return n.type="bubble",new t(e,n)}}},{}],10:[function(t,e,n){"use strict";e.exports=function(t){t.Doughnut=function(e,n){return n.type="doughnut",new t(e,n)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t){t.Line=function(e,n){return n.type="line",new t(e,n)}}},{}],12:[function(t,e,n){"use strict";e.exports=function(t){t.PolarArea=function(e,n){return n.type="polarArea",new t(e,n)}}},{}],13:[function(t,e,n){"use strict";e.exports=function(t){t.Radar=function(e,n){return n.type="radar",new t(e,n)}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t){var e={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-1"}],yAxes:[{type:"linear",position:"left",id:"y-axis-1"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}};t.defaults.scatter=e,t.controllers.scatter=t.controllers.line,t.Scatter=function(e,n){return n.type="scatter",new t(e,n)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.bar={hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}},t.controllers.bar=t.DatasetController.extend({dataElementType:t.elements.Rectangle,initialize:function(e,n){t.DatasetController.prototype.initialize.call(this,e,n),this.getMeta().bar=!0},getBarCount:function(){var t=this,n=0;return e.each(t.chart.data.datasets,function(e,i){t.chart.getDatasetMeta(i).bar&&t.chart.isDatasetVisible(i)&&++n},t),n},update:function(t){var n=this;e.each(n.getMeta().data,function(e,i){n.updateElement(e,i,t)},n)},updateElement:function(t,n,i){var r=this,s=r.getMeta(),o=r.getScaleForId(s.xAxisID),a=r.getScaleForId(s.yAxisID),l=a.getBasePixel(),u=r.chart.options.elements.rectangle,h=t.custom||{},c=r.getDataset();t._xScale=o,t._yScale=a,t._datasetIndex=r.index,t._index=n;var d=r.getRuler(n);t._model={x:r.calculateBarX(n,r.index,d),y:i?l:r.calculateBarY(n,r.index),label:r.chart.data.labels[n],datasetLabel:c.label,base:i?l:r.calculateBarBase(r.index,n),width:r.calculateBarWidth(d),backgroundColor:h.backgroundColor?h.backgroundColor:e.getValueAtIndexOrDefault(c.backgroundColor,n,u.backgroundColor),borderSkipped:h.borderSkipped?h.borderSkipped:u.borderSkipped,borderColor:h.borderColor?h.borderColor:e.getValueAtIndexOrDefault(c.borderColor,n,u.borderColor),borderWidth:h.borderWidth?h.borderWidth:e.getValueAtIndexOrDefault(c.borderWidth,n,u.borderWidth)},t.pivot()},calculateBarBase:function(t,e){var n=this,i=n.getMeta(),r=n.getScaleForId(i.yAxisID),s=0;if(r.options.stacked){for(var o=n.chart,a=o.data.datasets,l=Number(a[t].data[e]),u=0;t>u;u++){var h=a[u],c=o.getDatasetMeta(u);if(c.bar&&c.yAxisID===r.id&&o.isDatasetVisible(u)){var d=Number(h.data[e]);s+=0>l?Math.min(d,0):Math.max(d,0)}}return r.getPixelForValue(s)}return r.getBasePixel()},getRuler:function(t){var e,n=this,i=n.getMeta(),r=n.getScaleForId(i.xAxisID),s=n.getBarCount(),o=(e="category"===r.options.type?r.getPixelForTick(t+1)-r.getPixelForTick(t):r.width/r.ticks.length)*r.options.categoryPercentage,a=(e-e*r.options.categoryPercentage)/2,l=o/s;return r.ticks.length!==n.chart.data.labels.length&&(l*=r.ticks.length/n.chart.data.labels.length),{datasetCount:s,tickWidth:e,categoryWidth:o,categorySpacing:a,fullBarWidth:l,barWidth:l*r.options.barPercentage,barSpacing:l-l*r.options.barPercentage}},calculateBarWidth:function(t){var e=this.getScaleForId(this.getMeta().xAxisID);return e.options.barThickness?e.options.barThickness:e.options.stacked?t.categoryWidth:t.barWidth},getBarIndex:function(t){var e,n=0;for(e=0;t>e;++e)this.chart.getDatasetMeta(e).bar&&this.chart.isDatasetVisible(e)&&++n;return n},calculateBarX:function(t,e,n){var i=this,r=i.getMeta(),s=i.getScaleForId(r.xAxisID),o=i.getBarIndex(e),a=s.getPixelForValue(null,t,e,i.chart.isCombo);return a-=i.chart.isCombo?n.tickWidth/2:0,s.options.stacked?a+n.categoryWidth/2+n.categorySpacing:a+n.barWidth/2+n.categorySpacing+n.barWidth*o+n.barSpacing/2+n.barSpacing*o},calculateBarY:function(t,e){var n=this,i=n.getMeta(),r=n.getScaleForId(i.yAxisID),s=Number(n.getDataset().data[t]);if(r.options.stacked){for(var o=0,a=0,l=0;e>l;l++){var u=n.chart.data.datasets[l],h=n.chart.getDatasetMeta(l);if(h.bar&&h.yAxisID===r.id&&n.chart.isDatasetVisible(l)){var c=Number(u.data[t]);0>c?a+=c||0:o+=c||0}}return 0>s?r.getPixelForValue(a+s):r.getPixelForValue(o+s)}return r.getPixelForValue(s)},draw:function(t){var e,n,i=this,r=t||1,s=i.getMeta().data,o=i.getDataset();for(e=0,n=s.length;n>e;++e){var a=o.data[e];null===a||void 0===a||isNaN(a)||s[e].transition(r).draw()}},setHoverStyle:function(t){var n=this.chart.data.datasets[t._datasetIndex],i=t._index,r=t.custom||{},s=t._model;s.backgroundColor=r.hoverBackgroundColor?r.hoverBackgroundColor:e.getValueAtIndexOrDefault(n.hoverBackgroundColor,i,e.getHoverColor(s.backgroundColor)),s.borderColor=r.hoverBorderColor?r.hoverBorderColor:e.getValueAtIndexOrDefault(n.hoverBorderColor,i,e.getHoverColor(s.borderColor)),s.borderWidth=r.hoverBorderWidth?r.hoverBorderWidth:e.getValueAtIndexOrDefault(n.hoverBorderWidth,i,s.borderWidth)},removeHoverStyle:function(t){var n=this.chart.data.datasets[t._datasetIndex],i=t._index,r=t.custom||{},s=t._model,o=this.chart.options.elements.rectangle;s.backgroundColor=r.backgroundColor?r.backgroundColor:e.getValueAtIndexOrDefault(n.backgroundColor,i,o.backgroundColor),s.borderColor=r.borderColor?r.borderColor:e.getValueAtIndexOrDefault(n.borderColor,i,o.borderColor),s.borderWidth=r.borderWidth?r.borderWidth:e.getValueAtIndexOrDefault(n.borderWidth,i,o.borderWidth)}}),t.defaults.horizontalBar={hover:{mode:"label"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(t,e){var n="";return t.length>0&&(t[0].yLabel?n=t[0].yLabel:e.labels.length>0&&t[0].index<e.labels.length&&(n=e.labels[t[0].index])),n},label:function(t,e){return(e.datasets[t.datasetIndex].label||"")+": "+t.xLabel}}}},t.controllers.horizontalBar=t.controllers.bar.extend({updateElement:function(t,n,i){var r=this,s=r.getMeta(),o=r.getScaleForId(s.xAxisID),a=r.getScaleForId(s.yAxisID),l=o.getBasePixel(),u=t.custom||{},h=r.getDataset(),c=r.chart.options.elements.rectangle;t._xScale=o,t._yScale=a,t._datasetIndex=r.index,t._index=n;var d=r.getRuler(n);t._model={x:i?l:r.calculateBarX(n,r.index),y:r.calculateBarY(n,r.index,d),label:r.chart.data.labels[n],datasetLabel:h.label,base:i?l:r.calculateBarBase(r.index,n),height:r.calculateBarHeight(d),backgroundColor:u.backgroundColor?u.backgroundColor:e.getValueAtIndexOrDefault(h.backgroundColor,n,c.backgroundColor),borderSkipped:u.borderSkipped?u.borderSkipped:c.borderSkipped,borderColor:u.borderColor?u.borderColor:e.getValueAtIndexOrDefault(h.borderColor,n,c.borderColor),borderWidth:u.borderWidth?u.borderWidth:e.getValueAtIndexOrDefault(h.borderWidth,n,c.borderWidth)},t.draw=function(){function t(t){return l[(u+t)%4]}var e=this._chart.ctx,n=this._view,i=n.height/2,r=n.y-i,s=n.y+i,o=n.base-(n.base-n.x),a=n.borderWidth/2;n.borderWidth&&(r+=a,s-=a,o+=a),e.beginPath(),e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth;var l=[[n.base,s],[n.base,r],[o,r],[o,s]],u=["bottom","left","top","right"].indexOf(n.borderSkipped,0);-1===u&&(u=0),e.moveTo.apply(e,t(0));for(var h=1;4>h;h++)e.lineTo.apply(e,t(h));e.fill(),n.borderWidth&&e.stroke()},t.pivot()},calculateBarBase:function(t,e){var n=this,i=n.getMeta(),r=n.getScaleForId(i.xAxisID),s=0;if(r.options.stacked){for(var o=n.chart,a=o.data.datasets,l=Number(a[t].data[e]),u=0;t>u;u++){var h=a[u],c=o.getDatasetMeta(u);if(c.bar&&c.xAxisID===r.id&&o.isDatasetVisible(u)){var d=Number(h.data[e]);s+=0>l?Math.min(d,0):Math.max(d,0)}}return r.getPixelForValue(s)}return r.getBasePixel()},getRuler:function(t){var e,n=this,i=n.getMeta(),r=n.getScaleForId(i.yAxisID),s=n.getBarCount(),o=(e="category"===r.options.type?r.getPixelForTick(t+1)-r.getPixelForTick(t):r.width/r.ticks.length)*r.options.categoryPercentage,a=(e-e*r.options.categoryPercentage)/2,l=o/s;return r.ticks.length!==n.chart.data.labels.length&&(l*=r.ticks.length/n.chart.data.labels.length),{datasetCount:s,tickHeight:e,categoryHeight:o,categorySpacing:a,fullBarHeight:l,barHeight:l*r.options.barPercentage,barSpacing:l-l*r.options.barPercentage}},calculateBarHeight:function(t){var e=this,n=e.getScaleForId(e.getMeta().yAxisID);return n.options.barThickness?n.options.barThickness:n.options.stacked?t.categoryHeight:t.barHeight},calculateBarX:function(t,e){var n=this,i=n.getMeta(),r=n.getScaleForId(i.xAxisID),s=Number(n.getDataset().data[t]);if(r.options.stacked){for(var o=0,a=0,l=0;e>l;l++){var u=n.chart.data.datasets[l],h=n.chart.getDatasetMeta(l);if(h.bar&&h.xAxisID===r.id&&n.chart.isDatasetVisible(l)){var c=Number(u.data[t]);0>c?a+=c||0:o+=c||0}}return 0>s?r.getPixelForValue(a+s):r.getPixelForValue(o+s)}return r.getPixelForValue(s)},calculateBarY:function(t,e,n){var i=this,r=i.getMeta(),s=i.getScaleForId(r.yAxisID),o=i.getBarIndex(e),a=s.getPixelForValue(null,t,e,i.chart.isCombo);return a-=i.chart.isCombo?n.tickHeight/2:0,s.options.stacked?a+n.categoryHeight/2+n.categorySpacing:a+n.barHeight/2+n.categorySpacing+n.barHeight*o+n.barSpacing/2+n.barSpacing*o}})}},{}],16:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.bubble={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.datasets[t.datasetIndex].label||"",i=e.datasets[t.datasetIndex].data[t.index];return n+": ("+t.xLabel+", "+t.yLabel+", "+i.r+")"}}}},t.controllers.bubble=t.DatasetController.extend({dataElementType:t.elements.Point,update:function(t){var n=this,i=n.getMeta().data;e.each(i,function(e,i){n.updateElement(e,i,t)})},updateElement:function(n,i,r){var s=this,o=s.getMeta(),a=s.getScaleForId(o.xAxisID),l=s.getScaleForId(o.yAxisID),u=n.custom||{},h=s.getDataset(),c=h.data[i],d=s.chart.options.elements.point,f=s.index;e.extend(n,{_xScale:a,_yScale:l,_datasetIndex:f,_index:i,_model:{x:r?a.getPixelForDecimal(.5):a.getPixelForValue("object"==typeof c?c:NaN,i,f,s.chart.isCombo),y:r?l.getBasePixel():l.getPixelForValue(c,i,f),radius:r?0:u.radius?u.radius:s.getRadius(c),hitRadius:u.hitRadius?u.hitRadius:e.getValueAtIndexOrDefault(h.hitRadius,i,d.hitRadius)}}),t.DatasetController.prototype.removeHoverStyle.call(s,n,d);var g=n._model;g.skip=u.skip?u.skip:isNaN(g.x)||isNaN(g.y),n.pivot()},getRadius:function(t){return t.r||this.chart.options.elements.point.radius},setHoverStyle:function(n){var i=this;t.DatasetController.prototype.setHoverStyle.call(i,n);var r=i.chart.data.datasets[n._datasetIndex],s=n._index,o=n.custom||{};n._model.radius=o.hoverRadius?o.hoverRadius:e.getValueAtIndexOrDefault(r.hoverRadius,s,i.chart.options.elements.point.hoverRadius)+i.getRadius(r.data[s])},removeHoverStyle:function(e){var n=this;t.DatasetController.prototype.removeHoverStyle.call(n,e,n.chart.options.elements.point);var i=n.chart.data.datasets[e._datasetIndex].data[e._index],r=e.custom||{};e._model.radius=r.radius?r.radius:n.getRadius(i)}})}},{}],17:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers,n=t.defaults;n.doughnut={animation:{animateRotate:!0,animateScale:!1},aspectRatio:1,hover:{mode:"single"},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var n=t.data,i=n.datasets,r=n.labels;if(i.length)for(var s=0;s<i[0].data.length;++s)e.push('<li><span style="background-color:'+i[0].backgroundColor[s]+'"></span>'),r[s]&&e.push(r[s]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var n=t.data;return n.labels.length&&n.datasets.length?n.labels.map(function(i,r){var s=t.getDatasetMeta(0),o=n.datasets[0],a=s.data[r],l=a&&a.custom||{},u=e.getValueAtIndexOrDefault,h=t.options.elements.arc;return{text:i,fillStyle:l.backgroundColor?l.backgroundColor:u(o.backgroundColor,r,h.backgroundColor),strokeStyle:l.borderColor?l.borderColor:u(o.borderColor,r,h.borderColor),lineWidth:l.borderWidth?l.borderWidth:u(o.borderWidth,r,h.borderWidth),hidden:isNaN(o.data[r])||s.data[r].hidden,index:r}}):[]}},onClick:function(t,e){var n,i,r,s=e.index,o=this.chart;for(n=0,i=(o.data.datasets||[]).length;i>n;++n)(r=o.getDatasetMeta(n)).data[s]&&(r.data[s].hidden=!r.data[s].hidden);o.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(t,n){var i=n.labels[t.index],r=": "+n.datasets[t.datasetIndex].data[t.index];return e.isArray(i)?(i=i.slice(),i[0]+=r):i+=r,i}}}},n.pie=e.clone(n.doughnut),e.extend(n.pie,{cutoutPercentage:0}),t.controllers.doughnut=t.controllers.pie=t.DatasetController.extend({dataElementType:t.elements.Arc,linkScales:e.noop,getRingIndex:function(t){for(var e=0,n=0;t>n;++n)this.chart.isDatasetVisible(n)&&++e;return e},update:function(t){var n=this,i=n.chart,r=i.chartArea,s=i.options,o=s.elements.arc,a=r.right-r.left-o.borderWidth,l=r.bottom-r.top-o.borderWidth,u=Math.min(a,l),h={x:0,y:0},c=n.getMeta(),d=s.cutoutPercentage,f=s.circumference;if(f<2*Math.PI){var g=s.rotation%(2*Math.PI),p=(g+=2*Math.PI*(g>=Math.PI?-1:g<-Math.PI?1:0))+f,m={x:Math.cos(g),y:Math.sin(g)},v={x:Math.cos(p),y:Math.sin(p)},y=0>=g&&p>=0||g<=2*Math.PI&&2*Math.PI<=p,x=g<=.5*Math.PI&&.5*Math.PI<=p||g<=2.5*Math.PI&&2.5*Math.PI<=p,b=g<=-Math.PI&&-Math.PI<=p||g<=Math.PI&&Math.PI<=p,E=g<=.5*-Math.PI&&.5*-Math.PI<=p||g<=1.5*Math.PI&&1.5*Math.PI<=p,I=d/100,C={x:b?-1:Math.min(m.x*(m.x<0?1:I),v.x*(v.x<0?1:I)),y:E?-1:Math.min(m.y*(m.y<0?1:I),v.y*(v.y<0?1:I))},w={x:y?1:Math.max(m.x*(m.x>0?1:I),v.x*(v.x>0?1:I)),y:x?1:Math.max(m.y*(m.y>0?1:I),v.y*(v.y>0?1:I))},M={width:.5*(w.x-C.x),height:.5*(w.y-C.y)};u=Math.min(a/M.width,l/M.height),h={x:-.5*(w.x+C.x),y:-.5*(w.y+C.y)}}i.borderWidth=n.getMaxBorderWidth(c.data),i.outerRadius=Math.max((u-i.borderWidth)/2,0),i.innerRadius=Math.max(d?i.outerRadius/100*d:1,0),i.radiusLength=(i.outerRadius-i.innerRadius)/i.getVisibleDatasetCount(),i.offsetX=h.x*i.outerRadius,i.offsetY=h.y*i.outerRadius,c.total=n.calculateTotal(),n.outerRadius=i.outerRadius-i.radiusLength*n.getRingIndex(n.index),n.innerRadius=n.outerRadius-i.radiusLength,e.each(c.data,function(e,i){n.updateElement(e,i,t)})},updateElement:function(t,n,i){var r=this,s=r.chart,o=s.chartArea,a=s.options,l=a.animation,u=(o.left+o.right)/2,h=(o.top+o.bottom)/2,c=a.rotation,d=a.rotation,f=r.getDataset(),g=i&&l.animateRotate?0:t.hidden?0:r.calculateCircumference(f.data[n])*(a.circumference/(2*Math.PI)),p=i&&l.animateScale?0:r.innerRadius,m=i&&l.animateScale?0:r.outerRadius,v=e.getValueAtIndexOrDefault;e.extend(t,{_datasetIndex:r.index,_index:n,_model:{x:u+s.offsetX,y:h+s.offsetY,startAngle:c,endAngle:d,circumference:g,outerRadius:m,innerRadius:p,label:v(f.label,n,s.data.labels[n])}});var y=t._model;this.removeHoverStyle(t),i&&l.animateRotate||(y.startAngle=0===n?a.rotation:r.getMeta().data[n-1]._model.endAngle,y.endAngle=y.startAngle+y.circumference),t.pivot()},removeHoverStyle:function(e){t.DatasetController.prototype.removeHoverStyle.call(this,e,this.chart.options.elements.arc)},calculateTotal:function(){var t,n=this.getDataset(),i=this.getMeta(),r=0;return e.each(i.data,function(e,i){t=n.data[i],isNaN(t)||e.hidden||(r+=Math.abs(t))}),r},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?2*Math.PI*(t/e):0},getMaxBorderWidth:function(t){for(var e,n,i=0,r=this.index,s=t.length,o=0;s>o;o++)e=t[o]._model?t[o]._model.borderWidth:0,n=t[o]._chart?t[o]._chart.config.data.datasets[r].hoverBorderWidth:0,i=e>i?e:i,i=n>i?n:i;return i}})}},{}],18:[function(t,e,n){"use strict";e.exports=function(t){function e(t,e){return n.getValueOrDefault(t.showLine,e.showLines)}var n=t.helpers;t.defaults.line={showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}},t.controllers.line=t.DatasetController.extend({datasetElementType:t.elements.Line,dataElementType:t.elements.Point,update:function(t){var i,r,s,o=this,a=o.getMeta(),l=a.dataset,u=a.data||[],h=o.chart.options,c=h.elements.line,d=o.getScaleForId(a.yAxisID),f=o.getDataset(),g=e(f,h);for(g&&(s=l.custom||{},void 0!==f.tension&&void 0===f.lineTension&&(f.lineTension=f.tension),l._scale=d,l._datasetIndex=o.index,l._children=u,l._model={spanGaps:f.spanGaps?f.spanGaps:h.spanGaps,tension:s.tension?s.tension:n.getValueOrDefault(f.lineTension,c.tension),backgroundColor:s.backgroundColor?s.backgroundColor:f.backgroundColor||c.backgroundColor,borderWidth:s.borderWidth?s.borderWidth:f.borderWidth||c.borderWidth,borderColor:s.borderColor?s.borderColor:f.borderColor||c.borderColor,borderCapStyle:s.borderCapStyle?s.borderCapStyle:f.borderCapStyle||c.borderCapStyle,borderDash:s.borderDash?s.borderDash:f.borderDash||c.borderDash,borderDashOffset:s.borderDashOffset?s.borderDashOffset:f.borderDashOffset||c.borderDashOffset,borderJoinStyle:s.borderJoinStyle?s.borderJoinStyle:f.borderJoinStyle||c.borderJoinStyle,fill:s.fill?s.fill:void 0!==f.fill?f.fill:c.fill,steppedLine:s.steppedLine?s.steppedLine:n.getValueOrDefault(f.steppedLine,c.stepped),cubicInterpolationMode:s.cubicInterpolationMode?s.cubicInterpolationMode:n.getValueOrDefault(f.cubicInterpolationMode,c.cubicInterpolationMode),scaleTop:d.top,scaleBottom:d.bottom,scaleZero:d.getBasePixel()},l.pivot()),i=0,r=u.length;r>i;++i)o.updateElement(u[i],i,t);for(g&&0!==l._model.tension&&o.updateBezierControlPoints(),i=0,r=u.length;r>i;++i)u[i].pivot()},getPointBackgroundColor:function(t,e){var i=this.chart.options.elements.point.backgroundColor,r=this.getDataset(),s=t.custom||{};return s.backgroundColor?i=s.backgroundColor:r.pointBackgroundColor?i=n.getValueAtIndexOrDefault(r.pointBackgroundColor,e,i):r.backgroundColor&&(i=r.backgroundColor),i},getPointBorderColor:function(t,e){var i=this.chart.options.elements.point.borderColor,r=this.getDataset(),s=t.custom||{};return s.borderColor?i=s.borderColor:r.pointBorderColor?i=n.getValueAtIndexOrDefault(r.pointBorderColor,e,i):r.borderColor&&(i=r.borderColor),i},getPointBorderWidth:function(t,e){var i=this.chart.options.elements.point.borderWidth,r=this.getDataset(),s=t.custom||{};return s.borderWidth?i=s.borderWidth:r.pointBorderWidth?i=n.getValueAtIndexOrDefault(r.pointBorderWidth,e,i):r.borderWidth&&(i=r.borderWidth),i},updateElement:function(t,e,i){var r,s,o=this,a=o.getMeta(),l=t.custom||{},u=o.getDataset(),h=o.index,c=u.data[e],d=o.getScaleForId(a.yAxisID),f=o.getScaleForId(a.xAxisID),g=o.chart.options.elements.point,p=1===(o.chart.data.labels||[]).length||1===u.data.length||o.chart.isCombo;void 0!==u.radius&&void 0===u.pointRadius&&(u.pointRadius=u.radius),void 0!==u.hitRadius&&void 0===u.pointHitRadius&&(u.pointHitRadius=u.hitRadius),r=f.getPixelForValue("object"==typeof c?c:NaN,e,h,p),s=i?d.getBasePixel():o.calculatePointY(c,e,h),t._xScale=f,t._yScale=d,t._datasetIndex=h,t._index=e,t._model={x:r,y:s,skip:l.skip||isNaN(r)||isNaN(s),radius:l.radius||n.getValueAtIndexOrDefault(u.pointRadius,e,g.radius),pointStyle:l.pointStyle||n.getValueAtIndexOrDefault(u.pointStyle,e,g.pointStyle),backgroundColor:o.getPointBackgroundColor(t,e),borderColor:o.getPointBorderColor(t,e),borderWidth:o.getPointBorderWidth(t,e),tension:a.dataset._model?a.dataset._model.tension:0,steppedLine:!!a.dataset._model&&a.dataset._model.steppedLine,hitRadius:l.hitRadius||n.getValueAtIndexOrDefault(u.pointHitRadius,e,g.hitRadius)}},calculatePointY:function(t,e,n){var i,r,s,o=this,a=o.chart,l=o.getMeta(),u=o.getScaleForId(l.yAxisID),h=0,c=0;if(u.options.stacked){for(i=0;n>i;i++)if(r=a.data.datasets[i],"line"===(s=a.getDatasetMeta(i)).type&&s.yAxisID===u.id&&a.isDatasetVisible(i)){var d=Number(u.getRightValue(r.data[e]));0>d?c+=d||0:h+=d||0}var f=Number(u.getRightValue(t));return 0>f?u.getPixelForValue(c+f):u.getPixelForValue(h+f)}return u.getPixelForValue(t)},updateBezierControlPoints:function(){function t(t,e,n){return Math.max(Math.min(t,n),e)}var e,i,r,s,o,a=this,l=a.getMeta(),u=a.chart.chartArea,h=l.data||[];if(l.dataset._model.spanGaps&&(h=h.filter(function(t){return!t._model.skip})),"monotone"===l.dataset._model.cubicInterpolationMode)n.splineCurveMonotone(h);else for(e=0,i=h.length;i>e;++e)r=h[e],s=r._model,o=n.splineCurve(n.previousItem(h,e)._model,s,n.nextItem(h,e)._model,l.dataset._model.tension),s.controlPointPreviousX=o.previous.x,s.controlPointPreviousY=o.previous.y,s.controlPointNextX=o.next.x,s.controlPointNextY=o.next.y;if(a.chart.options.elements.line.capBezierPoints)for(e=0,i=h.length;i>e;++e)s=h[e]._model,s.controlPointPreviousX=t(s.controlPointPreviousX,u.left,u.right),s.controlPointPreviousY=t(s.controlPointPreviousY,u.top,u.bottom),s.controlPointNextX=t(s.controlPointNextX,u.left,u.right),s.controlPointNextY=t(s.controlPointNextY,u.top,u.bottom)},draw:function(t){var n,i,r=this,s=r.getMeta(),o=s.data||[],a=t||1;for(n=0,i=o.length;i>n;++n)o[n].transition(a);for(e(r.getDataset(),r.chart.options)&&s.dataset.transition(a).draw(),n=0,i=o.length;i>n;++n)o[n].draw()},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],i=t._index,r=t.custom||{},s=t._model;s.radius=r.hoverRadius||n.getValueAtIndexOrDefault(e.pointHoverRadius,i,this.chart.options.elements.point.hoverRadius),s.backgroundColor=r.hoverBackgroundColor||n.getValueAtIndexOrDefault(e.pointHoverBackgroundColor,i,n.getHoverColor(s.backgroundColor)),s.borderColor=r.hoverBorderColor||n.getValueAtIndexOrDefault(e.pointHoverBorderColor,i,n.getHoverColor(s.borderColor)),s.borderWidth=r.hoverBorderWidth||n.getValueAtIndexOrDefault(e.pointHoverBorderWidth,i,s.borderWidth)},removeHoverStyle:function(t){var e=this,i=e.chart.data.datasets[t._datasetIndex],r=t._index,s=t.custom||{},o=t._model;void 0!==i.radius&&void 0===i.pointRadius&&(i.pointRadius=i.radius),o.radius=s.radius||n.getValueAtIndexOrDefault(i.pointRadius,r,e.chart.options.elements.point.radius),o.backgroundColor=e.getPointBackgroundColor(t,r),o.borderColor=e.getPointBorderColor(t,r),o.borderWidth=e.getPointBorderWidth(t,r)}})}},{}],19:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.polarArea={scale:{type:"radialLinear",lineArc:!0,ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,aspectRatio:1,legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var n=t.data,i=n.datasets,r=n.labels;if(i.length)for(var s=0;s<i[0].data.length;++s)e.push('<li><span style="background-color:'+i[0].backgroundColor[s]+'"></span>'),r[s]&&e.push(r[s]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var n=t.data;return n.labels.length&&n.datasets.length?n.labels.map(function(i,r){var s=t.getDatasetMeta(0),o=n.datasets[0],a=s.data[r].custom||{},l=e.getValueAtIndexOrDefault,u=t.options.elements.arc;return{text:i,fillStyle:a.backgroundColor?a.backgroundColor:l(o.backgroundColor,r,u.backgroundColor),strokeStyle:a.borderColor?a.borderColor:l(o.borderColor,r,u.borderColor),lineWidth:a.borderWidth?a.borderWidth:l(o.borderWidth,r,u.borderWidth),hidden:isNaN(o.data[r])||s.data[r].hidden,index:r}}):[]}},onClick:function(t,e){var n,i,r,s=e.index,o=this.chart;for(n=0,i=(o.data.datasets||[]).length;i>n;++n)r=o.getDatasetMeta(n),r.data[s].hidden=!r.data[s].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}},t.controllers.polarArea=t.DatasetController.extend({dataElementType:t.elements.Arc,linkScales:e.noop,update:function(t){var n=this,i=n.chart,r=i.chartArea,s=n.getMeta(),o=i.options,a=o.elements.arc,l=Math.min(r.right-r.left,r.bottom-r.top);i.outerRadius=Math.max((l-a.borderWidth/2)/2,0),i.innerRadius=Math.max(o.cutoutPercentage?i.outerRadius/100*o.cutoutPercentage:1,0),i.radiusLength=(i.outerRadius-i.innerRadius)/i.getVisibleDatasetCount(),n.outerRadius=i.outerRadius-i.radiusLength*n.index,n.innerRadius=n.outerRadius-i.radiusLength,s.count=n.countVisibleElements(),e.each(s.data,function(e,i){n.updateElement(e,i,t)})},updateElement:function(t,n,i){for(var r=this,s=r.chart,o=r.getDataset(),a=s.options,l=a.animation,u=s.scale,h=e.getValueAtIndexOrDefault,c=s.data.labels,d=r.calculateCircumference(o.data[n]),f=u.xCenter,g=u.yCenter,p=0,m=r.getMeta(),v=0;n>v;++v)isNaN(o.data[v])||m.data[v].hidden||++p;var y=a.startAngle,x=t.hidden?0:u.getDistanceFromCenterForValue(o.data[n]),b=y+d*p,E=b+(t.hidden?0:d),I=l.animateScale?0:u.getDistanceFromCenterForValue(o.data[n]);e.extend(t,{_datasetIndex:r.index,_index:n,_scale:u,_model:{x:f,y:g,innerRadius:0,outerRadius:i?I:x,startAngle:i&&l.animateRotate?y:b,endAngle:i&&l.animateRotate?y:E,label:h(c,n,c[n])}}),r.removeHoverStyle(t),t.pivot()},removeHoverStyle:function(e){t.DatasetController.prototype.removeHoverStyle.call(this,e,this.chart.options.elements.arc)},countVisibleElements:function(){var t=this.getDataset(),n=this.getMeta(),i=0;return e.each(n.data,function(e,n){isNaN(t.data[n])||e.hidden||i++}),i},calculateCircumference:function(t){var e=this.getMeta().count;return e>0&&!isNaN(t)?2*Math.PI/e:0}})}},{}],20:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.radar={aspectRatio:1,scale:{type:"radialLinear"},elements:{line:{tension:0}}},t.controllers.radar=t.DatasetController.extend({datasetElementType:t.elements.Line,dataElementType:t.elements.Point,linkScales:e.noop,update:function(t){var n=this,i=n.getMeta(),r=i.dataset,s=i.data,o=r.custom||{},a=n.getDataset(),l=n.chart.options.elements.line,u=n.chart.scale;void 0!==a.tension&&void 0===a.lineTension&&(a.lineTension=a.tension),e.extend(i.dataset,{_datasetIndex:n.index,_children:s,_loop:!0,_model:{tension:o.tension?o.tension:e.getValueOrDefault(a.lineTension,l.tension),backgroundColor:o.backgroundColor?o.backgroundColor:a.backgroundColor||l.backgroundColor,borderWidth:o.borderWidth?o.borderWidth:a.borderWidth||l.borderWidth,borderColor:o.borderColor?o.borderColor:a.borderColor||l.borderColor,fill:o.fill?o.fill:void 0!==a.fill?a.fill:l.fill,borderCapStyle:o.borderCapStyle?o.borderCapStyle:a.borderCapStyle||l.borderCapStyle,borderDash:o.borderDash?o.borderDash:a.borderDash||l.borderDash,borderDashOffset:o.borderDashOffset?o.borderDashOffset:a.borderDashOffset||l.borderDashOffset,borderJoinStyle:o.borderJoinStyle?o.borderJoinStyle:a.borderJoinStyle||l.borderJoinStyle,scaleTop:u.top,scaleBottom:u.bottom,scaleZero:u.getBasePosition()}}),i.dataset.pivot(),e.each(s,function(e,i){n.updateElement(e,i,t)},n),n.updateBezierControlPoints()},updateElement:function(t,n,i){var r=this,s=t.custom||{},o=r.getDataset(),a=r.chart.scale,l=r.chart.options.elements.point,u=a.getPointPositionForValue(n,o.data[n]);e.extend(t,{_datasetIndex:r.index,_index:n,_scale:a,_model:{x:i?a.xCenter:u.x,y:i?a.yCenter:u.y,tension:s.tension?s.tension:e.getValueOrDefault(o.tension,r.chart.options.elements.line.tension),radius:s.radius?s.radius:e.getValueAtIndexOrDefault(o.pointRadius,n,l.radius),backgroundColor:s.backgroundColor?s.backgroundColor:e.getValueAtIndexOrDefault(o.pointBackgroundColor,n,l.backgroundColor),borderColor:s.borderColor?s.borderColor:e.getValueAtIndexOrDefault(o.pointBorderColor,n,l.borderColor),borderWidth:s.borderWidth?s.borderWidth:e.getValueAtIndexOrDefault(o.pointBorderWidth,n,l.borderWidth),pointStyle:s.pointStyle?s.pointStyle:e.getValueAtIndexOrDefault(o.pointStyle,n,l.pointStyle),hitRadius:s.hitRadius?s.hitRadius:e.getValueAtIndexOrDefault(o.hitRadius,n,l.hitRadius)}}),t._model.skip=s.skip?s.skip:isNaN(t._model.x)||isNaN(t._model.y)},updateBezierControlPoints:function(){var t=this.chart.chartArea,n=this.getMeta();e.each(n.data,function(i,r){var s=i._model,o=e.splineCurve(e.previousItem(n.data,r,!0)._model,s,e.nextItem(n.data,r,!0)._model,s.tension);s.controlPointPreviousX=Math.max(Math.min(o.previous.x,t.right),t.left),s.controlPointPreviousY=Math.max(Math.min(o.previous.y,t.bottom),t.top),s.controlPointNextX=Math.max(Math.min(o.next.x,t.right),t.left),s.controlPointNextY=Math.max(Math.min(o.next.y,t.bottom),t.top),i.pivot()})},draw:function(t){var n=this.getMeta(),i=t||1;e.each(n.data,function(t){t.transition(i)}),n.dataset.transition(i).draw(),e.each(n.data,function(t){t.draw()})},setHoverStyle:function(t){var n=this.chart.data.datasets[t._datasetIndex],i=t.custom||{},r=t._index,s=t._model;s.radius=i.hoverRadius?i.hoverRadius:e.getValueAtIndexOrDefault(n.pointHoverRadius,r,this.chart.options.elements.point.hoverRadius),s.backgroundColor=i.hoverBackgroundColor?i.hoverBackgroundColor:e.getValueAtIndexOrDefault(n.pointHoverBackgroundColor,r,e.getHoverColor(s.backgroundColor)),s.borderColor=i.hoverBorderColor?i.hoverBorderColor:e.getValueAtIndexOrDefault(n.pointHoverBorderColor,r,e.getHoverColor(s.borderColor)),s.borderWidth=i.hoverBorderWidth?i.hoverBorderWidth:e.getValueAtIndexOrDefault(n.pointHoverBorderWidth,r,s.borderWidth)},removeHoverStyle:function(t){var n=this.chart.data.datasets[t._datasetIndex],i=t.custom||{},r=t._index,s=t._model,o=this.chart.options.elements.point;s.radius=i.radius?i.radius:e.getValueAtIndexOrDefault(n.radius,r,o.radius),s.backgroundColor=i.backgroundColor?i.backgroundColor:e.getValueAtIndexOrDefault(n.pointBackgroundColor,r,o.backgroundColor),s.borderColor=i.borderColor?i.borderColor:e.getValueAtIndexOrDefault(n.pointBorderColor,r,o.borderColor),s.borderWidth=i.borderWidth?i.borderWidth:e.getValueAtIndexOrDefault(n.pointBorderWidth,r,o.borderWidth)}})}},{}],21:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.global.animation={duration:1e3,easing:"easeOutQuart",onProgress:e.noop,onComplete:e.noop},t.Animation=t.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),t.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(t,e,n,i){var r=this;i||(t.animating=!0);for(var s=0;s<r.animations.length;++s)if(r.animations[s].chartInstance===t)return void(r.animations[s].animationObject=e);r.animations.push({chartInstance:t,animationObject:e}),1===r.animations.length&&r.requestAnimationFrame()},cancelAnimation:function(t){var n=e.findIndex(this.animations,function(e){return e.chartInstance===t});-1!==n&&(this.animations.splice(n,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=e.requestAnimFrame.call(window,function(){t.request=null,t.startDigest()}))},startDigest:function(){var t=this,e=Date.now(),n=0;t.dropFrames>1&&(n=Math.floor(t.dropFrames),t.dropFrames=t.dropFrames%1);for(var i=0;i<t.animations.length;)null===t.animations[i].animationObject.currentStep&&(t.animations[i].animationObject.currentStep=0),t.animations[i].animationObject.currentStep+=1+n,t.animations[i].animationObject.currentStep>t.animations[i].animationObject.numSteps&&(t.animations[i].animationObject.currentStep=t.animations[i].animationObject.numSteps),t.animations[i].animationObject.render(t.animations[i].chartInstance,t.animations[i].animationObject),t.animations[i].animationObject.onAnimationProgress&&t.animations[i].animationObject.onAnimationProgress.call&&t.animations[i].animationObject.onAnimationProgress.call(t.animations[i].chartInstance,t.animations[i]),t.animations[i].animationObject.currentStep===t.animations[i].animationObject.numSteps?(t.animations[i].animationObject.onAnimationComplete&&t.animations[i].animationObject.onAnimationComplete.call&&t.animations[i].animationObject.onAnimationComplete.call(t.animations[i].chartInstance,t.animations[i]),t.animations[i].chartInstance.animating=!1,t.animations.splice(i,1)):++i;var r=(Date.now()-e)/t.frameDuration;t.dropFrames+=r,t.animations.length>0&&t.requestAnimationFrame()}}}},{}],22:[function(t,e,n){"use strict";e.exports=function(t){(t.canvasHelpers={}).drawPoint=function(t,e,n,i,r){var s,o,a,l,u,h;if("object"!=typeof e||"[object HTMLImageElement]"!==(s=e.toString())&&"[object HTMLCanvasElement]"!==s){if(!(isNaN(n)||0>=n)){switch(e){default:t.beginPath(),t.arc(i,r,n,0,2*Math.PI),t.closePath(),t.fill();break;case"triangle":t.beginPath(),u=(o=3*n/Math.sqrt(3))*Math.sqrt(3)/2,t.moveTo(i-o/2,r+u/3),t.lineTo(i+o/2,r+u/3),t.lineTo(i,r-2*u/3),t.closePath(),t.fill();break;case"rect":h=1/Math.SQRT2*n,t.beginPath(),t.fillRect(i-h,r-h,2*h,2*h),t.strokeRect(i-h,r-h,2*h,2*h);break;case"rectRot":h=1/Math.SQRT2*n,t.beginPath(),t.moveTo(i-h,r),t.lineTo(i,r+h),t.lineTo(i+h,r),t.lineTo(i,r-h),t.closePath(),t.fill();break;case"cross":t.beginPath(),t.moveTo(i,r+n),t.lineTo(i,r-n),t.moveTo(i-n,r),t.lineTo(i+n,r),t.closePath();break;case"crossRot":t.beginPath(),a=Math.cos(Math.PI/4)*n,l=Math.sin(Math.PI/4)*n,t.moveTo(i-a,r-l),t.lineTo(i+a,r+l),t.moveTo(i-a,r+l),t.lineTo(i+a,r-l),t.closePath();break;case"star":t.beginPath(),t.moveTo(i,r+n),t.lineTo(i,r-n),t.moveTo(i-n,r),t.lineTo(i+n,r),a=Math.cos(Math.PI/4)*n,l=Math.sin(Math.PI/4)*n,t.moveTo(i-a,r-l),t.lineTo(i+a,r+l),t.moveTo(i-a,r+l),t.lineTo(i+a,r-l),t.closePath();break;case"line":t.beginPath(),t.moveTo(i-n,r),t.lineTo(i+n,r),t.closePath();break;case"dash":t.beginPath(),t.moveTo(i,r),t.lineTo(i+n,r),t.closePath()}t.stroke()}}else t.drawImage(e,i-e.width/2,r-e.height/2)}}},{}],23:[function(t,e,n){"use strict";e.exports=function(t){function e(t,e){var n=o.getStyle(t,e),i=n&&n.match(/(\d+)px/);return i?Number(i[1]):void 0}function n(t,n){var i=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t._chartjs={initial:{height:r,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",null===s||""===s){var o=e(t,"width");void 0!==o&&(t.width=o)}if(null===r||""===r)if(""===t.style.height)t.height=t.width/(n.options.aspectRatio||2);else{var a=e(t,"height");void 0!==o&&(t.height=a)}return t}function i(t){if(t._chartjs){var e=t._chartjs.initial;["height","width"].forEach(function(n){var i=e[n];void 0===i||null===i?t.removeAttribute(n):t.setAttribute(n,i)}),o.each(e.style||{},function(e,n){t.style[n]=e}),t.width=t.width,delete t._chartjs}}function r(t,e){if("string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t instanceof HTMLCanvasElement){var i=t.getContext&&t.getContext("2d");if(i instanceof CanvasRenderingContext2D)return n(t,e),i}return null}function s(e){var n=(e=e||{}).data=e.data||{};return n.datasets=n.datasets||[],n.labels=n.labels||[],e.options=o.configMerge(t.defaults.global,t.defaults[e.type],e.options||{}),e}var o=t.helpers;t.types={},t.instances={},t.controllers={},t.Controller=function(e,n,i){var a=this,l=r(e,n=s(n)),u=l&&l.canvas,h=u&&u.height,c=u&&u.width;return i.ctx=l,i.canvas=u,i.config=n,i.width=c,i.height=h,i.aspectRatio=h?c/h:null,a.id=o.uid(),a.chart=i,a.config=n,a.options=n.options,a._bufferedRender=!1,t.instances[a.id]=a,Object.defineProperty(a,"data",{get:function(){return a.config.data}}),l&&u?(o.retinaScale(i),a.options.responsive&&(o.addResizeListener(u.parentNode,function(){a.resize()}),a.resize(!0)),a.initialize(),a):(console.error("Failed to create chart: can't acquire context from the given item"),a)},o.extend(t.Controller.prototype,{initialize:function(){var e=this;return t.plugins.notify("beforeInit",[e]),e.bindEvents(),e.ensureScalesHaveIDs(),e.buildOrUpdateControllers(),e.buildScales(),e.updateLayout(),e.resetElements(),e.initToolTip(),e.update(),t.plugins.notify("afterInit",[e]),e},clear:function(){return o.clear(this.chart),this},stop:function(){return t.animationService.cancelAnimation(this),this},resize:function(e){var n=this,i=n.chart,r=n.options,s=i.canvas,a=r.maintainAspectRatio&&i.aspectRatio||null,l=Math.floor(o.getMaximumWidth(s)),u=Math.floor(a?l/a:o.getMaximumHeight(s));if(i.width!==l||i.height!==u){s.width=i.width=l,s.height=i.height=u,s.style.width=l+"px",s.style.height=u+"px",o.retinaScale(i);var h={width:l,height:u};t.plugins.notify("resize",[n,h]),n.options.onResize&&n.options.onResize(n,h),e||(n.stop(),n.update(n.options.responsiveAnimationDuration))}},ensureScalesHaveIDs:function(){var t=this.options,e=t.scales||{},n=t.scale;o.each(e.xAxes,function(t,e){t.id=t.id||"x-axis-"+e}),o.each(e.yAxes,function(t,e){t.id=t.id||"y-axis-"+e}),n&&(n.id=n.id||"scale")},buildScales:function(){var e=this,n=e.options,i=e.scales={},r=[];n.scales&&(r=r.concat((n.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category"}}),(n.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear"}}))),n.scale&&r.push({options:n.scale,dtype:"radialLinear",isDefault:!0}),o.each(r,function(n){var r=n.options,s=o.getValueOrDefault(r.type,n.dtype),a=t.scaleService.getScaleConstructor(s);if(a){var l=new a({id:r.id,options:r,ctx:e.chart.ctx,chart:e});i[l.id]=l,n.isDefault&&(e.scale=l)}}),t.scaleService.addScalesToLayout(this)},updateLayout:function(){t.layoutService.update(this,this.chart.width,this.chart.height)},buildOrUpdateControllers:function(){var e=this,n=[],i=[];if(o.each(e.data.datasets,function(r,s){var o=e.getDatasetMeta(s);o.type||(o.type=r.type||e.config.type),n.push(o.type),o.controller?o.controller.updateIndex(s):(o.controller=new t.controllers[o.type](e,s),i.push(o.controller))},e),n.length>1)for(var r=1;r<n.length;r++)if(n[r]!==n[r-1]){e.isCombo=!0;break}return i},resetElements:function(){var t=this;o.each(t.data.datasets,function(e,n){t.getDatasetMeta(n).controller.reset()},t)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e,n){var i=this;t.plugins.notify("beforeUpdate",[i]),i.tooltip._data=i.data;var r=i.buildOrUpdateControllers();o.each(i.data.datasets,function(t,e){i.getDatasetMeta(e).controller.buildOrUpdateElements()},i),t.layoutService.update(i,i.chart.width,i.chart.height),t.plugins.notify("afterScaleUpdate",[i]),o.each(r,function(t){t.reset()}),i.updateDatasets(),t.plugins.notify("afterUpdate",[i]),i._bufferedRender?i._bufferedRequest={lazy:n,duration:e}:i.render(e,n)},updateDatasets:function(){var e,n,i=this;if(t.plugins.notify("beforeDatasetsUpdate",[i])){for(e=0,n=i.data.datasets.length;n>e;++e)i.getDatasetMeta(e).controller.update();t.plugins.notify("afterDatasetsUpdate",[i])}},render:function(e,n){var i=this;t.plugins.notify("beforeRender",[i]);var r=i.options.animation;if(r&&(void 0!==e&&0!==e||void 0===e&&0!==r.duration)){var s=new t.Animation;s.numSteps=(e||r.duration)/16.66,s.easing=r.easing,s.render=function(t,e){var n=o.easingEffects[e.easing],i=e.currentStep/e.numSteps,r=n(i);t.draw(r,i,e.currentStep)},s.onAnimationProgress=r.onProgress,s.onAnimationComplete=r.onComplete,t.animationService.addAnimation(i,s,e,n)}else i.draw(),r&&r.onComplete&&r.onComplete.call&&r.onComplete.call(i);return i},draw:function(e){var n=this,i=e||1;n.clear(),t.plugins.notify("beforeDraw",[n,i]),o.each(n.boxes,function(t){t.draw(n.chartArea)},n),n.scale&&n.scale.draw(),t.plugins.notify("beforeDatasetsDraw",[n,i]),o.each(n.data.datasets,function(t,i){n.isDatasetVisible(i)&&n.getDatasetMeta(i).controller.draw(e)},n,!0),t.plugins.notify("afterDatasetsDraw",[n,i]),n.tooltip.transition(i).draw(),t.plugins.notify("afterDraw",[n,i])},getElementAtEvent:function(e){return t.Interaction.modes.single(this,e)},getElementsAtEvent:function(e){return t.Interaction.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return t.Interaction.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,n,i){var r=t.Interaction.modes[n];return"function"==typeof r?r(this,e,i):[]},getDatasetAtEvent:function(e){return t.Interaction.modes.dataset(this,e)},getDatasetMeta:function(t){var e=this,n=e.data.datasets[t];n._meta||(n._meta={});var i=n._meta[e.id];return i||(i=n._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),i},getVisibleDatasetCount:function(){for(var t=0,e=0,n=this.data.datasets.length;n>e;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroy:function(){var e,n,r,s=this,a=s.chart.canvas;for(s.stop(),n=0,r=s.data.datasets.length;r>n;++n)(e=s.getDatasetMeta(n)).controller&&(e.controller.destroy(),e.controller=null);a&&(o.unbindEvents(s,s.events),o.removeResizeListener(a.parentNode),o.clear(s.chart),i(a),s.chart.canvas=null,s.chart.ctx=null),t.plugins.notify("destroy",[s]),delete t.instances[s.id]},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new t.Tooltip({_chart:e.chart,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e),e.tooltip.initialize()},bindEvents:function(){var t=this;o.bindEvents(t,t.options.events,function(e){t.eventHandler(e)})},updateHoverStyle:function(t,e,n){var i,r,s,o=n?"setHoverStyle":"removeHoverStyle";for(r=0,s=t.length;s>r;++r)(i=t[r])&&this.getDatasetMeta(i._datasetIndex).controller[o](i)},eventHandler:function(t){var e=this,n=e.legend,i=e.tooltip,r=e.options.hover;e._bufferedRender=!0,e._bufferedRequest=null;var s=e.handleEvent(t);s|=n&&n.handleEvent(t),s|=i&&i.handleEvent(t);var o=e._bufferedRequest;return o?e.render(o.duration,o.lazy):s&&!e.animating&&(e.stop(),e.render(r.animationDuration,!0)),e._bufferedRender=!1,e._bufferedRequest=null,e},handleEvent:function(t){var e=this,n=e.options||{},i=n.hover,r=!1;return e.lastActive=e.lastActive||[],"mouseout"===t.type?e.active=[]:e.active=e.getElementsAtEventForMode(t,i.mode,i),i.onHover&&i.onHover.call(e,e.active),("mouseup"===t.type||"click"===t.type)&&n.onClick&&n.onClick.call(e,t,e.active),e.lastActive.length&&e.updateHoverStyle(e.lastActive,i.mode,!1),e.active.length&&i.mode&&e.updateHoverStyle(e.active,i.mode,!0),r=!o.arrayEquals(e.active,e.lastActive),e.lastActive=e.active,r}})}},{}],24:[function(t,e,n){"use strict";e.exports=function(t){function e(t,e){return t._chartjs?void t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),void r.forEach(function(e){var n="onData"+e.charAt(0).toUpperCase()+e.slice(1),r=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),s=r.apply(this,e);return i.each(t._chartjs.listeners,function(t){"function"==typeof t[n]&&t[n].apply(t,e)}),s}})}))}function n(t,e){var n=t._chartjs;if(n){var i=n.listeners,s=i.indexOf(e);-1!==s&&i.splice(s,1),i.length>0||(r.forEach(function(e){delete t[e]}),delete t._chartjs)}}var i=t.helpers,r=["push","pop","shift","splice","unshift"];t.DatasetController=function(t,e){this.initialize(t,e)},i.extend(t.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(t,e){var n=this;n.chart=t,n.index=e,n.linkScales(),n.addElements()},updateIndex:function(t){this.index=t},linkScales:function(){var t=this,e=t.getMeta(),n=t.getDataset();null===e.xAxisID&&(e.xAxisID=n.xAxisID||t.chart.options.scales.xAxes[0].id),null===e.yAxisID&&(e.yAxisID=n.yAxisID||t.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},reset:function(){this.update(!0)},destroy:function(){this._data&&n(this._data,this)},createMetaDataset:function(){var t=this,e=t.datasetElementType;return e&&new e({_chart:t.chart.chart,_datasetIndex:t.index})},createMetaData:function(t){var e=this,n=e.dataElementType;return n&&new n({_chart:e.chart.chart,_datasetIndex:e.index,_index:t})},addElements:function(){var t,e,n=this,i=n.getMeta(),r=n.getDataset().data||[],s=i.data;for(t=0,e=r.length;e>t;++t)s[t]=s[t]||n.createMetaData(t);i.dataset=i.dataset||n.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var t=this,i=t.getDataset(),r=i.data||(i.data=[]);t._data!==r&&(t._data&&n(t._data,t),e(r,t),t._data=r),t.resyncElements()},update:i.noop,draw:function(t){var e,n,i=t||1,r=this.getMeta().data;for(e=0,n=r.length;n>e;++e)r[e].transition(i).draw()},removeHoverStyle:function(t,e){var n=this.chart.data.datasets[t._datasetIndex],r=t._index,s=t.custom||{},o=i.getValueAtIndexOrDefault,a=t._model;a.backgroundColor=s.backgroundColor?s.backgroundColor:o(n.backgroundColor,r,e.backgroundColor),a.borderColor=s.borderColor?s.borderColor:o(n.borderColor,r,e.borderColor),a.borderWidth=s.borderWidth?s.borderWidth:o(n.borderWidth,r,e.borderWidth)},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t._index,r=t.custom||{},s=i.getValueAtIndexOrDefault,o=i.getHoverColor,a=t._model;a.backgroundColor=r.hoverBackgroundColor?r.hoverBackgroundColor:s(e.hoverBackgroundColor,n,o(a.backgroundColor)),a.borderColor=r.hoverBorderColor?r.hoverBorderColor:s(e.hoverBorderColor,n,o(a.borderColor)),a.borderWidth=r.hoverBorderWidth?r.hoverBorderWidth:s(e.hoverBorderWidth,n,a.borderWidth)},resyncElements:function(){var t=this,e=t.getMeta(),n=t.getDataset().data,i=e.data.length,r=n.length;i>r?e.data.splice(r,i-r):r>i&&t.insertElements(i,r-i)},insertElements:function(t,e){for(var n=0;e>n;++n)this.addElementAndReset(t+n)},onDataPush:function(){this.insertElements(this.getDataset().data.length-1,arguments.length)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),t.DatasetController.extend=i.inherits}},{}],25:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers;t.elements={},t.Element=function(t){e.extend(this,t),this.initialize.apply(this,arguments)},e.extend(t.Element.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=e.clone(t._model)),t._start=e.clone(t._view),t},transition:function(t){var n=this;return n._view||(n._view=e.clone(n._model)),1===t?(n._view=n._model,n._start=null,n):(n._start||n.pivot(),e.each(n._model,function(i,r){if("_"===r[0]);else if(n._view.hasOwnProperty(r))if(i===n._view[r]);else if("string"==typeof i)try{var s=e.color(n._model[r]).mix(e.color(n._start[r]),t);n._view[r]=s.rgbString()}catch(t){n._view[r]=i}else if("number"==typeof i){var o=void 0!==n._start[r]&&!1===isNaN(n._start[r])?n._start[r]:0;n._view[r]=(n._model[r]-o)*t+o}else n._view[r]=i;else"number"!=typeof i||isNaN(n._view[r])?n._view[r]=i:n._view[r]=i*t},n),n)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return e.isNumber(this._model.x)&&e.isNumber(this._model.y)}}),t.Element.extend=e.inherits}},{}],26:[function(t,e,n){"use strict";var i=t(2);e.exports=function(t){function e(t,e,n){var i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}function n(t){return void 0!==t&&null!==t&&"none"!==t}function r(t,i,r){var s=document.defaultView,o=t.parentNode,a=s.getComputedStyle(t)[i],l=s.getComputedStyle(o)[i],u=n(a),h=n(l),c=Number.POSITIVE_INFINITY;return u||h?Math.min(u?e(a,t,r):c,h?e(l,o,r):c):"none"}var s=t.helpers={};s.each=function(t,e,n,i){var r,o;if(s.isArray(t))if(o=t.length,i)for(r=o-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;o>r;r++)e.call(n,t[r],r);else if("object"==typeof t){var a=Object.keys(t);for(o=a.length,r=0;o>r;r++)e.call(n,t[a[r]],a[r])}},s.clone=function(t){var e={};return s.each(t,function(t,n){s.isArray(t)?e[n]=t.slice(0):e[n]="object"==typeof t&&null!==t?s.clone(t):t}),e},s.extend=function(t){for(var e=function(e,n){t[n]=e},n=1,i=arguments.length;i>n;n++)s.each(arguments[n],e);return t},s.configMerge=function(e){var n=s.clone(e);return s.each(Array.prototype.slice.call(arguments,1),function(e){s.each(e,function(e,i){var r=n.hasOwnProperty(i),o=r?n[i]:{};"scales"===i?n[i]=s.scaleMerge(o,e):"scale"===i?n[i]=s.configMerge(o,t.scaleService.getScaleDefaults(e.type),e):!r||"object"!=typeof o||s.isArray(o)||null===o||"object"!=typeof e||s.isArray(e)?n[i]=e:n[i]=s.configMerge(o,e)})}),n},s.scaleMerge=function(e,n){var i=s.clone(e);return s.each(n,function(e,n){"xAxes"===n||"yAxes"===n?i.hasOwnProperty(n)?s.each(e,function(e,r){var o=s.getValueOrDefault(e.type,"xAxes"===n?"category":"linear"),a=t.scaleService.getScaleDefaults(o);r>=i[n].length||!i[n][r].type?i[n].push(s.configMerge(a,e)):e.type&&e.type!==i[n][r].type?i[n][r]=s.configMerge(i[n][r],a,e):i[n][r]=s.configMerge(i[n][r],e)}):(i[n]=[],s.each(e,function(e){var r=s.getValueOrDefault(e.type,"xAxes"===n?"category":"linear");i[n].push(s.configMerge(t.scaleService.getScaleDefaults(r),e))})):i.hasOwnProperty(n)&&"object"==typeof i[n]&&null!==i[n]&&"object"==typeof e?i[n]=s.configMerge(i[n],e):i[n]=e}),i},s.getValueAtIndexOrDefault=function(t,e,n){return void 0===t||null===t?n:s.isArray(t)?e<t.length?t[e]:n:t},s.getValueOrDefault=function(t,e){return void 0===t?e:t},s.indexOf=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length;i>n;++n)if(t[n]===e)return n;return-1},s.where=function(t,e){if(s.isArray(t)&&Array.prototype.filter)return t.filter(e);var n=[];return s.each(t,function(t){e(t)&&n.push(t)}),n},s.findIndex=Array.prototype.findIndex?function(t,e,n){return t.findIndex(e,n)}:function(t,e,n){n=void 0===n?t:n;for(var i=0,r=t.length;r>i;++i)if(e.call(n,t[i],i,t))return i;return-1},s.findNextWhere=function(t,e,n){(void 0===n||null===n)&&(n=-1);for(var i=n+1;i<t.length;i++){var r=t[i];if(e(r))return r}},s.findPreviousWhere=function(t,e,n){(void 0===n||null===n)&&(n=t.length);for(var i=n-1;i>=0;i--){var r=t[i];if(e(r))return r}},s.inherits=function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,n.extend=s.inherits,t&&s.extend(n.prototype,t),n.__super__=e.prototype,n},s.noop=function(){},s.uid=function(){var t=0;return function(){return t++}}(),s.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},s.almostEquals=function(t,e,n){return Math.abs(t-e)<n},s.max=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.max(t,e)},Number.NEGATIVE_INFINITY)},s.min=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.min(t,e)},Number.POSITIVE_INFINITY)},s.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},s.log10=Math.log10?function(t){return Math.log10(t)}:function(t){return Math.log(t)/Math.LN10},s.toRadians=function(t){return t*(Math.PI/180)},s.toDegrees=function(t){return t*(180/Math.PI)},s.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i),s=Math.atan2(i,n);return s<-.5*Math.PI&&(s+=2*Math.PI),{angle:s,distance:r}},s.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},s.aliasPixel=function(t){return t%2==0?0:.5},s.splineCurve=function(t,e,n,i){var r=t.skip?e:t,s=e,o=n.skip?e:n,a=Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2)),l=Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2)),u=a/(a+l),h=l/(a+l),c=i*(u=isNaN(u)?0:u),d=i*(h=isNaN(h)?0:h);return{previous:{x:s.x-c*(o.x-r.x),y:s.y-c*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}},s.EPSILON=Number.EPSILON||1e-14,s.splineCurveMonotone=function(t){var e,n,i,r,o=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}}),a=o.length;for(e=0;a>e;++e)(i=o[e]).model.skip||(n=e>0?o[e-1]:null,(r=a-1>e?o[e+1]:null)&&!r.model.skip&&(i.deltaK=(r.model.y-i.model.y)/(r.model.x-i.model.x)),!n||n.model.skip?i.mK=i.deltaK:!r||r.model.skip?i.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(i.deltaK)?i.mK=0:i.mK=(n.deltaK+i.deltaK)/2);var l,u,h,c;for(e=0;a-1>e;++e)i=o[e],r=o[e+1],i.model.skip||r.model.skip||(s.almostEquals(i.deltaK,0,this.EPSILON)?i.mK=r.mK=0:(l=i.mK/i.deltaK,u=r.mK/i.deltaK,9>=(c=Math.pow(l,2)+Math.pow(u,2))||(h=3/Math.sqrt(c),i.mK=l*h*i.deltaK,r.mK=u*h*i.deltaK)));var d;for(e=0;a>e;++e)(i=o[e]).model.skip||(n=e>0?o[e-1]:null,r=a-1>e?o[e+1]:null,n&&!n.model.skip&&(d=(i.model.x-n.model.x)/3,i.model.controlPointPreviousX=i.model.x-d,i.model.controlPointPreviousY=i.model.y-d*i.mK),r&&!r.model.skip&&(d=(r.model.x-i.model.x)/3,i.model.controlPointNextX=i.model.x+d,i.model.controlPointNextY=i.model.y+d*i.mK))},s.nextItem=function(t,e,n){return n?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},s.previousItem=function(t,e,n){return n?0>=e?t[t.length-1]:t[e-1]:0>=e?t[0]:t[e-1]},s.niceNum=function(t,e){var n=Math.floor(s.log10(t)),i=t/Math.pow(10,n);return(e?1.5>i?1:3>i?2:7>i?5:10:1>=i?1:2>=i?2:5>=i?5:10)*Math.pow(10,n)};var o=s.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(1-Math.pow(2,-10*t/1))},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.3*1.5*1),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),1>t?i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-o.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t*1:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*o.easeInBounce(2*t):.5*o.easeOutBounce(2*t-1)+.5}};s.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},s.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)},s.getRelativePosition=function(t,e){var n,i,r=t.originalEvent||t,o=t.currentTarget||t.srcElement,a=o.getBoundingClientRect(),l=r.touches;l&&l.length>0?(n=l[0].clientX,i=l[0].clientY):(n=r.clientX,i=r.clientY);var u=parseFloat(s.getStyle(o,"padding-left")),h=parseFloat(s.getStyle(o,"padding-top")),c=parseFloat(s.getStyle(o,"padding-right")),d=parseFloat(s.getStyle(o,"padding-bottom")),f=a.right-a.left-u-c,g=a.bottom-a.top-h-d;return n=Math.round((n-a.left-u)/f*o.width/e.currentDevicePixelRatio),i=Math.round((i-a.top-h)/g*o.height/e.currentDevicePixelRatio),{x:n,y:i}},s.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},s.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=s.noop},s.bindEvents=function(t,e,n){var i=t.events=t.events||{};s.each(e,function(e){i[e]=function(){n.apply(t,arguments)},s.addEvent(t.chart.canvas,e,i[e])})},s.unbindEvents=function(t,e){var n=t.chart.canvas;s.each(e,function(t,e){s.removeEvent(n,e,t)})},s.getConstraintWidth=function(t){return r(t,"max-width","clientWidth")},s.getConstraintHeight=function(t){return r(t,"max-height","clientHeight")},s.getMaximumWidth=function(t){var e=t.parentNode,n=parseInt(s.getStyle(e,"padding-left"),10),i=parseInt(s.getStyle(e,"padding-right"),10),r=e.clientWidth-n-i,o=s.getConstraintWidth(t);return isNaN(o)?r:Math.min(r,o)},s.getMaximumHeight=function(t){var e=t.parentNode,n=parseInt(s.getStyle(e,"padding-top"),10),i=parseInt(s.getStyle(e,"padding-bottom"),10),r=e.clientHeight-n-i,o=s.getConstraintHeight(t);return isNaN(o)?r:Math.min(r,o)},s.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},s.retinaScale=function(t){var e=t.currentDevicePixelRatio=window.devicePixelRatio||1;if(1!==e){var n=t.canvas,i=t.height,r=t.width;n.height=i*e,n.width=r*e,t.ctx.scale(e,e),n.style.height=i+"px",n.style.width=r+"px"}},s.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},s.fontString=function(t,e,n){return e+" "+t+"px "+n},s.longestText=function(t,e,n,i){var r=(i=i||{}).data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},o=i.garbageCollect=[],i.font=e),t.font=e;var a=0;s.each(n,function(e){void 0!==e&&null!==e&&!0!==s.isArray(e)?a=s.measureText(t,r,o,a,e):s.isArray(e)&&s.each(e,function(e){void 0===e||null===e||s.isArray(e)||(a=s.measureText(t,r,o,a,e))})});var l=o.length/2;if(l>n.length){for(var u=0;l>u;u++)delete r[o[u]];o.splice(0,l)}return a},s.measureText=function(t,e,n,i,r){var s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i},s.numberOfLabelLines=function(t){var e=1;return s.each(t,function(t){s.isArray(t)&&t.length>e&&(e=t.length)}),e},s.drawRoundedRectangle=function(t,e,n,i,r,s){t.beginPath(),t.moveTo(e+s,n),t.lineTo(e+i-s,n),t.quadraticCurveTo(e+i,n,e+i,n+s),t.lineTo(e+i,n+r-s),t.quadraticCurveTo(e+i,n+r,e+i-s,n+r),t.lineTo(e+s,n+r),t.quadraticCurveTo(e,n+r,e,n+r-s),t.lineTo(e,n+s),t.quadraticCurveTo(e,n,e+s,n),t.closePath()},s.color=function(e){return i?i(e instanceof CanvasGradient?t.defaults.global.defaultColor:e):(console.error("Color.js not found!"),e)},s.addResizeListener=function(t,e){var n=document.createElement("iframe");n.className="chartjs-hidden-iframe",n.style.cssText="display:block;overflow:hidden;border:0;margin:0;top:0;left:0;bottom:0;right:0;height:100%;width:100%;position:absolute;pointer-events:none;z-index:-1;",n.tabIndex=-1;var i=t._chartjs={resizer:n,ticking:!1},r=function(){i.ticking||(i.ticking=!0,s.requestAnimFrame.call(window,function(){return i.resizer?(i.ticking=!1,e()):void 0}))};s.addEvent(n,"load",function(){s.addEvent(n.contentWindow||n,"resize",r),r()}),t.insertBefore(n,t.firstChild)},s.removeResizeListener=function(t){if(t&&t._chartjs){var e=t._chartjs.resizer;e&&(e.parentNode.removeChild(e),t._chartjs.resizer=null),delete t._chartjs}},s.isArray=Array.isArray?function(t){return Array.isArray(t)}:function(t){return"[object Array]"===Object.prototype.toString.call(t)},s.arrayEquals=function(t,e){var n,i,r,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;i>n;++n)if(r=t[n],o=e[n],r instanceof Array&&o instanceof Array){if(!s.arrayEquals(r,o))return!1}else if(r!==o)return!1;return!0},s.callCallback=function(t,e,n){t&&"function"==typeof t.call&&t.apply(n,e)},s.getHoverColor=function(t){return t instanceof CanvasPattern?t:s.color(t).saturate(.5).darken(.1).rgbString()}}},{2:2}],27:[function(t,e,n){"use strict";e.exports=function(t){function e(t,e){var n,i,r,s,o;for(i=0,s=t.data.datasets.length;s>i;++i)if(t.isDatasetVisible(i))for(n=t.getDatasetMeta(i),r=0,o=n.data.length;o>r;++r){var a=n.data[r];a._view.skip||e(a)}}function n(t,n){var i=[];return e(t,function(t){t.inRange(n.x,n.y)&&i.push(t)}),i}function i(t,n,i,r){var o=Number.POSITIVE_INFINITY,a=[];return r||(r=s.distanceBetweenPoints),e(t,function(t){if(!i||t.inRange(n.x,n.y)){var e=t.getCenterPoint(),s=r(n,e);o>s?(a=[t],o=s):s===o&&a.push(t)}}),a}function r(t,e,r){var o=s.getRelativePosition(e,t.chart),a=r.intersect?n(t,o):i(t,o,!1,function(t,e){return Math.abs(t.x-e.x)}),l=[];return a.length?(t.data.datasets.forEach(function(e,n){if(t.isDatasetVisible(n)){var i=t.getDatasetMeta(n).data[a[0]._index];i&&!i._view.skip&&l.push(i)}}),l):[]}var s=t.helpers;t.Interaction={modes:{single:function(t,n){var i=s.getRelativePosition(n,t.chart),r=[];return e(t,function(t){return t.inRange(i.x,i.y)?(r.push(t),r):void 0}),r.slice(0,1)},label:r,index:r,dataset:function(t,e,r){var o=s.getRelativePosition(e,t.chart),a=r.intersect?n(t,o):i(t,o,!1);return a.length>0&&(a=t.getDatasetMeta(a[0]._datasetIndex).data),a},"x-axis":function(t,e){return r(t,e,!0)},point:function(t,e){return n(t,s.getRelativePosition(e,t.chart))},nearest:function(t,e,n){var r=i(t,s.getRelativePosition(e,t.chart),n.intersect);return r.length>1&&r.sort(function(t,e){var n=t.getArea()-e.getArea();return 0===n&&(n=t._datasetIndex-e._datasetIndex),n}),r.slice(0,1)},x:function(t,n,i){var r=s.getRelativePosition(n,t.chart),o=[],a=!1;return e(t,function(t){t.inXRange(r.x)&&o.push(t),t.inRange(r.x,r.y)&&(a=!0)}),i.intersect&&!a&&(o=[]),o},y:function(t,n,i){var r=s.getRelativePosition(n,t.chart),o=[],a=!1;return e(t,function(t){t.inYRange(r.y)&&o.push(t),t.inRange(r.x,r.y)&&(a=!0)}),i.intersect&&!a&&(o=[]),o}}}}},{}],28:[function(t,e,n){"use strict";e.exports=function(){var t=function(e,n){return this.controller=new t.Controller(e,n,this),this.controller};return t.defaults={global:{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');for(var n=0;n<t.data.datasets.length;n++)e.push('<li><span style="background-color:'+t.data.datasets[n].backgroundColor+'"></span>'),t.data.datasets[n].label&&e.push(t.data.datasets[n].label),e.push("</li>");return e.push("</ul>"),e.join("")}}},t.Chart=t,t}},{}],29:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers;t.layoutService={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),t.boxes.push(e)},removeBox:function(t,e){t.boxes&&t.boxes.splice(t.boxes.indexOf(e),1)},update:function(t,n,i){function r(t){var n=e.findNextWhere(w,function(e){return e.box===t});if(n)if(t.isHorizontal()){var i={left:M,right:S,top:0,bottom:0};t.update(t.options.fullWidth?v:I,y/2,i)}else t.update(n.minSize.width,C)}function s(t){t.isHorizontal()?(t.left=t.options.fullWidth?l:M,t.right=t.options.fullWidth?n-u:M+I,t.top=R,t.bottom=R+t.height,R=t.bottom):(t.left=P,t.right=P+t.width,t.top=N,t.bottom=N+C,P=t.right)}if(t){var o=t.options.layout,a=o?o.padding:null,l=0,u=0,h=0,c=0;isNaN(a)?(l=a.left||0,u=a.right||0,h=a.top||0,c=a.bottom||0):(l=a,u=a,h=a,c=a);var d=e.where(t.boxes,function(t){return"left"===t.options.position}),f=e.where(t.boxes,function(t){return"right"===t.options.position}),g=e.where(t.boxes,function(t){return"top"===t.options.position}),p=e.where(t.boxes,function(t){return"bottom"===t.options.position}),m=e.where(t.boxes,function(t){return"chartArea"===t.options.position});g.sort(function(t,e){return(e.options.fullWidth?1:0)-(t.options.fullWidth?1:0)}),p.sort(function(t,e){return(t.options.fullWidth?1:0)-(e.options.fullWidth?1:0)});var v=n-l-u,y=i-h-c,x=y/2,b=(n-v/2)/(d.length+f.length),E=(i-x)/(g.length+p.length),I=v,C=y,w=[];e.each(d.concat(f,g,p),function(t){var e,n=t.isHorizontal();n?(e=t.update(t.options.fullWidth?v:I,E),C-=e.height):(e=t.update(b,x),I-=e.width),w.push({horizontal:n,minSize:e,box:t})});var M=l,S=u,N=h,_=c;e.each(d.concat(f),r),e.each(d,function(t){M+=t.width}),e.each(f,function(t){S+=t.width}),e.each(g.concat(p),r),e.each(g,function(t){N+=t.height}),e.each(p,function(t){_+=t.height}),e.each(d.concat(f),function(t){var n=e.findNextWhere(w,function(e){return e.box===t}),i={left:0,right:0,top:N,bottom:_};n&&t.update(n.minSize.width,C,i)}),M=l,S=u,N=h,_=c,e.each(d,function(t){M+=t.width}),e.each(f,function(t){S+=t.width}),e.each(g,function(t){N+=t.height}),e.each(p,function(t){_+=t.height});var T=i-N-_,L=n-M-S;(L!==I||T!==C)&&(e.each(d,function(t){t.height=T}),e.each(f,function(t){t.height=T}),e.each(g,function(t){t.options.fullWidth||(t.width=L)}),e.each(p,function(t){t.options.fullWidth||(t.width=L)}),C=T,I=L);var P=l,R=h;e.each(d.concat(g),s),P+=I,R+=C,e.each(f,s),e.each(p,s),t.chartArea={left:M,top:N,right:M+I,bottom:N+C},e.each(m,function(e){e.left=t.chartArea.left,e.top=t.chartArea.top,e.right=t.chartArea.right,e.bottom=t.chartArea.bottom,e.update(I,C)})}}}}},{}],30:[function(t,e,n){"use strict";e.exports=function(t){function e(t,e){return t.usePointStyle?e*Math.SQRT2:t.boxWidth}var n=t.helpers,i=n.noop;t.defaults.global.legend={display:!0,position:"top",fullWidth:!0,reverse:!1,onClick:function(t,e){var n=e.datasetIndex,i=this.chart,r=i.getDatasetMeta(n);r.hidden=null===r.hidden?!i.data.datasets[n].hidden:null,i.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var e=t.data;return n.isArray(e.datasets)?e.datasets.map(function(e,i){return{text:e.label,fillStyle:n.isArray(e.backgroundColor)?e.backgroundColor[0]:e.backgroundColor,hidden:!t.isDatasetVisible(i),lineCap:e.borderCapStyle,lineDash:e.borderDash,lineDashOffset:e.borderDashOffset,lineJoin:e.borderJoinStyle,lineWidth:e.borderWidth,strokeStyle:e.borderColor,pointStyle:e.pointStyle,datasetIndex:i}},this):[]}}},t.Legend=t.Element.extend({initialize:function(t){n.extend(this,t),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:i,update:function(t,e,n){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:i,beforeSetDimensions:i,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:i,beforeBuildLabels:i,buildLabels:function(){var t=this;t.legendItems=t.options.labels.generateLabels.call(t,t.chart),t.options.reverse&&t.legendItems.reverse()},afterBuildLabels:i,beforeFit:i,fit:function(){var i=this,r=i.options,s=r.labels,o=r.display,a=i.ctx,l=t.defaults.global,u=n.getValueOrDefault,h=u(s.fontSize,l.defaultFontSize),c=u(s.fontStyle,l.defaultFontStyle),d=u(s.fontFamily,l.defaultFontFamily),f=n.fontString(h,c,d),g=i.legendHitBoxes=[],p=i.minSize,m=i.isHorizontal();if(m?(p.width=i.maxWidth,p.height=o?10:0):(p.width=o?10:0,p.height=i.maxHeight),o)if(a.font=f,m){var v=i.lineWidths=[0],y=i.legendItems.length?h+s.padding:0;a.textAlign="left",a.textBaseline="top",n.each(i.legendItems,function(t,n){var r=e(s,h)+h/2+a.measureText(t.text).width;v[v.length-1]+r+s.padding>=i.width&&(y+=h+s.padding,v[v.length]=i.left),g[n]={left:0,top:0,width:r,height:h},v[v.length-1]+=r+s.padding}),p.height+=y}else{var x=s.padding,b=i.columnWidths=[],E=s.padding,I=0,C=0,w=h+x;n.each(i.legendItems,function(t,n){var i=e(s,h)+h/2+a.measureText(t.text).width;C+w>p.height&&(E+=I+s.padding,b.push(I),I=0,C=0),I=Math.max(I,i),C+=w,g[n]={left:0,top:0,width:i,height:h}}),E+=I,b.push(I),p.width+=E}i.width=p.width,i.height=p.height},afterFit:i,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var i=this,r=i.options,s=r.labels,o=t.defaults.global,a=o.elements.line,l=i.width,u=i.lineWidths;if(r.display){var h,c=i.ctx,d=n.getValueOrDefault,f=d(s.fontColor,o.defaultFontColor),g=d(s.fontSize,o.defaultFontSize),p=d(s.fontStyle,o.defaultFontStyle),m=d(s.fontFamily,o.defaultFontFamily),v=n.fontString(g,p,m);c.textAlign="left",c.textBaseline="top",c.lineWidth=.5,c.strokeStyle=f,c.fillStyle=f,c.font=v;var y=e(s,g),x=i.legendHitBoxes,b=function(e,n,i){if(!(isNaN(y)||0>=y)){c.save(),c.fillStyle=d(i.fillStyle,o.defaultColor),c.lineCap=d(i.lineCap,a.borderCapStyle),c.lineDashOffset=d(i.lineDashOffset,a.borderDashOffset),c.lineJoin=d(i.lineJoin,a.borderJoinStyle),c.lineWidth=d(i.lineWidth,a.borderWidth),c.strokeStyle=d(i.strokeStyle,o.defaultColor);var s=0===d(i.lineWidth,a.borderWidth);if(c.setLineDash&&c.setLineDash(d(i.lineDash,a.borderDash)),r.labels&&r.labels.usePointStyle){var l=g*Math.SQRT2/2,u=l/Math.SQRT2,h=e+u,f=n+u;t.canvasHelpers.drawPoint(c,i.pointStyle,l,h,f)}else s||c.strokeRect(e,n,y,g),c.fillRect(e,n,y,g);c.restore()}},E=function(t,e,n,i){c.fillText(n.text,y+g/2+t,e),n.hidden&&(c.beginPath(),c.lineWidth=2,c.moveTo(y+g/2+t,e+g/2),c.lineTo(y+g/2+t+i,e+g/2),c.stroke())},I=i.isHorizontal();h=I?{x:i.left+(l-u[0])/2,y:i.top+s.padding,line:0}:{x:i.left+s.padding,y:i.top+s.padding,line:0};var C=g+s.padding;n.each(i.legendItems,function(t,e){var n=c.measureText(t.text).width,r=y+g/2+n,o=h.x,a=h.y;I?o+r>=l&&(a=h.y+=C,h.line++,o=h.x=i.left+(l-u[h.line])/2):a+C>i.bottom&&(o=h.x=o+i.columnWidths[h.line]+s.padding,a=h.y=i.top,h.line++),b(o,a,t),x[e].left=o,x[e].top=a,E(o,a,t,n),I?h.x+=r+s.padding:h.y+=C})}},handleEvent:function(t){var e=this,i=e.options,r="mouseup"===t.type?"click":t.type,s=!1;if("mousemove"===r){if(!i.onHover)return}else{if("click"!==r)return;if(!i.onClick)return}var o=n.getRelativePosition(t,e.chart.chart),a=o.x,l=o.y;if(a>=e.left&&a<=e.right&&l>=e.top&&l<=e.bottom)for(var u=e.legendHitBoxes,h=0;h<u.length;++h){var c=u[h];if(a>=c.left&&a<=c.left+c.width&&l>=c.top&&l<=c.top+c.height){if("click"===r){i.onClick.call(e,t,e.legendItems[h]),s=!0;break}if("mousemove"===r){i.onHover.call(e,t,e.legendItems[h]),s=!0;break}}}return s}}),t.plugins.register({beforeInit:function(e){var n=e.options.legend;n&&(e.legend=new t.Legend({ctx:e.chart.ctx,options:n,chart:e}),t.layoutService.addBox(e,e.legend))}})}},{}],31:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers.noop;t.plugins={_plugins:[],register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){-1===e.indexOf(t)&&e.push(t)})},unregister:function(t){var e=this._plugins;[].concat(t).forEach(function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)})},clear:function(){this._plugins=[]},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e){var n,i,r=this._plugins,s=r.length;for(n=0;s>n;++n)if("function"==typeof(i=r[n])[t]&&!1===i[t].apply(i,e||[]))return!1;return!0}},t.PluginBase=t.Element.extend({beforeInit:e,afterInit:e,beforeUpdate:e,afterUpdate:e,beforeDraw:e,afterDraw:e,destroy:e}),t.pluginService=t.plugins}},{}],32:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.scale={display:!0,position:"left",gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{labelString:"",display:!1},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:10,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:t.Ticks.formatters.values}},t.Scale=t.Element.extend({beforeUpdate:function(){e.callCallback(this.options.beforeUpdate,[this])},update:function(t,n,i){var r=this;return r.beforeUpdate(),r.maxWidth=t,r.maxHeight=n,r.margins=e.extend({left:0,right:0,top:0,bottom:0},i),r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeDataLimits(),r.determineDataLimits(),r.afterDataLimits(),r.beforeBuildTicks(),r.buildTicks(),r.afterBuildTicks(),r.beforeTickToLabelConversion(),r.convertTicksToLabels(),r.afterTickToLabelConversion(),r.beforeCalculateTickRotation(),r.calculateTickRotation(),r.afterCalculateTickRotation(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:function(){e.callCallback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){e.callCallback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){e.callCallback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){e.callCallback(this.options.beforeDataLimits,[this])},determineDataLimits:e.noop,afterDataLimits:function(){e.callCallback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){e.callCallback(this.options.beforeBuildTicks,[this])},buildTicks:e.noop,afterBuildTicks:function(){e.callCallback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){e.callCallback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this,e=t.options.ticks;t.ticks=t.ticks.map(e.userCallback||e.callback)},afterTickToLabelConversion:function(){e.callCallback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){e.callCallback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var n=this,i=n.ctx,r=t.defaults.global,s=n.options.ticks,o=e.getValueOrDefault(s.fontSize,r.defaultFontSize),a=e.getValueOrDefault(s.fontStyle,r.defaultFontStyle),l=e.getValueOrDefault(s.fontFamily,r.defaultFontFamily),u=e.fontString(o,a,l);i.font=u;var h,c=i.measureText(n.ticks[0]).width,d=i.measureText(n.ticks[n.ticks.length-1]).width;if(n.labelRotation=s.minRotation||0,n.paddingRight=0,n.paddingLeft=0,n.options.display&&n.isHorizontal()){n.paddingRight=d/2+3,n.paddingLeft=c/2+3,n.longestTextCache||(n.longestTextCache={});for(var f,g,p=e.longestText(i,u,n.ticks,n.longestTextCache),m=p,v=n.getPixelForTick(1)-n.getPixelForTick(0)-6;m>v&&n.labelRotation<s.maxRotation;){if(f=Math.cos(e.toRadians(n.labelRotation)),g=Math.sin(e.toRadians(n.labelRotation)),(h=f*c)+o/2>n.yLabelWidth&&(n.paddingLeft=h+o/2),n.paddingRight=o/2,g*p>n.maxHeight){n.labelRotation--;break}n.labelRotation++,m=f*p}}n.margins&&(n.paddingLeft=Math.max(n.paddingLeft-n.margins.left,0),n.paddingRight=Math.max(n.paddingRight-n.margins.right,0))},afterCalculateTickRotation:function(){e.callCallback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){e.callCallback(this.options.beforeFit,[this])},fit:function(){var n=this,i=n.minSize={width:0,height:0},r=n.options,s=t.defaults.global,o=r.ticks,a=r.scaleLabel,l=r.gridLines,u=r.display,h=n.isHorizontal(),c=e.getValueOrDefault(o.fontSize,s.defaultFontSize),d=e.getValueOrDefault(o.fontStyle,s.defaultFontStyle),f=e.getValueOrDefault(o.fontFamily,s.defaultFontFamily),g=e.fontString(c,d,f),p=e.getValueOrDefault(a.fontSize,s.defaultFontSize),m=r.gridLines.tickMarkLength;if(i.width=h?n.isFullWidth()?n.maxWidth-n.margins.left-n.margins.right:n.maxWidth:u&&l.drawTicks?m:0,i.height=h?u&&l.drawTicks?m:0:n.maxHeight,a.display&&u&&(h?i.height+=1.5*p:i.width+=1.5*p),o.display&&u){n.longestTextCache||(n.longestTextCache={});var v=e.longestText(n.ctx,g,n.ticks,n.longestTextCache),y=e.numberOfLabelLines(n.ticks),x=.5*c;if(h){n.longestLabelWidth=v;var b=Math.sin(e.toRadians(n.labelRotation))*n.longestLabelWidth+c*y+x*y;i.height=Math.min(n.maxHeight,i.height+b),n.ctx.font=g;var E=n.ctx.measureText(n.ticks[0]).width,I=n.ctx.measureText(n.ticks[n.ticks.length-1]).width,C=Math.cos(e.toRadians(n.labelRotation)),w=Math.sin(e.toRadians(n.labelRotation));n.paddingLeft=0!==n.labelRotation?C*E+3:E/2+3,n.paddingRight=0!==n.labelRotation?w*(c/2)+3:I/2+3}else{var M=n.maxWidth-i.width;o.mirror?v=0:v+=n.options.ticks.padding,M>v?i.width+=v:i.width=n.maxWidth,n.paddingTop=c/2,n.paddingBottom=c/2}}n.margins&&(n.paddingLeft=Math.max(n.paddingLeft-n.margins.left,0),n.paddingTop=Math.max(n.paddingTop-n.margins.top,0),n.paddingRight=Math.max(n.paddingRight-n.margins.right,0),n.paddingBottom=Math.max(n.paddingBottom-n.margins.bottom,0)),n.width=i.width,n.height=i.height},afterFit:function(){e.callCallback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){return null===t||void 0===t?NaN:"number"!=typeof t||isFinite(t)?"object"==typeof t?t instanceof Date||t.isValid?t:this.getRightValue(this.isHorizontal()?t.x:t.y):t:NaN},getLabelForIndex:e.noop,getPixelForValue:e.noop,getValueForPixel:e.noop,getPixelForTick:function(t,e){var n=this;if(n.isHorizontal()){var i=(n.width-(n.paddingLeft+n.paddingRight))/Math.max(n.ticks.length-(n.options.gridLines.offsetGridLines?0:1),1),r=i*t+n.paddingLeft;e&&(r+=i/2);var s=n.left+Math.round(r);return s+=n.isFullWidth()?n.margins.left:0}var o=n.height-(n.paddingTop+n.paddingBottom);return n.top+t*(o/(n.ticks.length-1))},getPixelForDecimal:function(t){var e=this;if(e.isHorizontal()){var n=(e.width-(e.paddingLeft+e.paddingRight))*t+e.paddingLeft,i=e.left+Math.round(n);return i+=e.isFullWidth()?e.margins.left:0}return e.top+t*e.height},getBasePixel:function(){var t=this,e=t.min,n=t.max;return t.getPixelForValue(t.beginAtZero?0:0>e&&0>n?n:e>0&&n>0?e:0)},draw:function(n){var i=this,r=i.options;if(r.display){var s,o,a=i.ctx,l=t.defaults.global,u=r.ticks,h=r.gridLines,c=r.scaleLabel,d=0!==i.labelRotation,f=u.autoSkip,g=i.isHorizontal();u.maxTicksLimit&&(o=u.maxTicksLimit);var p=e.getValueOrDefault(u.fontColor,l.defaultFontColor),m=e.getValueOrDefault(u.fontSize,l.defaultFontSize),v=e.getValueOrDefault(u.fontStyle,l.defaultFontStyle),y=e.getValueOrDefault(u.fontFamily,l.defaultFontFamily),x=e.fontString(m,v,y),b=h.tickMarkLength,E=e.getValueOrDefault(h.borderDash,l.borderDash),I=e.getValueOrDefault(h.borderDashOffset,l.borderDashOffset),C=e.getValueOrDefault(c.fontColor,l.defaultFontColor),w=e.getValueOrDefault(c.fontSize,l.defaultFontSize),M=e.getValueOrDefault(c.fontStyle,l.defaultFontStyle),S=e.getValueOrDefault(c.fontFamily,l.defaultFontFamily),N=e.fontString(w,M,S),_=e.toRadians(i.labelRotation),T=Math.cos(_),L=i.longestLabelWidth*T;a.fillStyle=p;var P=[];if(g){if(s=!1,d&&(L/=2),(L+u.autoSkipPadding)*i.ticks.length>i.width-(i.paddingLeft+i.paddingRight)&&(s=1+Math.floor((L+u.autoSkipPadding)*i.ticks.length/(i.width-(i.paddingLeft+i.paddingRight)))),o&&i.ticks.length>o)for(;!s||i.ticks.length/(s||1)>o;)s||(s=1),s+=1;f||(s=!1)}var R="right"===r.position?i.left:i.right-b,O="right"===r.position?i.left+b:i.right,D="bottom"===r.position?i.top:i.bottom-b,k="bottom"===r.position?i.top+b:i.bottom;if(e.each(i.ticks,function(t,o){if(void 0!==t&&null!==t){var a=i.ticks.length===o+1;if((!(s>1&&o%s>0||o%s==0&&o+s>=i.ticks.length)||a)&&void 0!==t&&null!==t){var l,c;o===(void 0!==i.zeroLineIndex?i.zeroLineIndex:0)?(l=h.zeroLineWidth,c=h.zeroLineColor):(l=e.getValueAtIndexOrDefault(h.lineWidth,o),c=e.getValueAtIndexOrDefault(h.color,o));var f,p,m,v,y,x,C,w,M,S,N="middle",T="middle";if(g){d||(T="top"===r.position?"bottom":"top"),N=d?"right":"center";var L=i.getPixelForTick(o)+e.aliasPixel(l);M=i.getPixelForTick(o,h.offsetGridLines)+u.labelOffset,S=d?i.top+12:"top"===r.position?i.bottom-b:i.top+b,f=m=y=C=L,p=D,v=k,x=n.top,w=n.bottom}else{"left"===r.position?u.mirror?(M=i.right+u.padding,N="left"):(M=i.right-u.padding,N="right"):u.mirror?(M=i.left-u.padding,N="right"):(M=i.left+u.padding,N="left");var A=i.getPixelForTick(o);A+=e.aliasPixel(l),S=i.getPixelForTick(o,h.offsetGridLines),f=R,m=O,y=n.left,C=n.right,p=v=x=w=A}P.push({tx1:f,ty1:p,tx2:m,ty2:v,x1:y,y1:x,x2:C,y2:w,labelX:M,labelY:S,glWidth:l,glColor:c,glBorderDash:E,glBorderDashOffset:I,rotation:-1*_,label:t,textBaseline:T,textAlign:N})}}}),e.each(P,function(t){if(h.display&&(a.save(),a.lineWidth=t.glWidth,a.strokeStyle=t.glColor,a.setLineDash&&(a.setLineDash(t.glBorderDash),a.lineDashOffset=t.glBorderDashOffset),a.beginPath(),h.drawTicks&&(a.moveTo(t.tx1,t.ty1),a.lineTo(t.tx2,t.ty2)),h.drawOnChartArea&&(a.moveTo(t.x1,t.y1),a.lineTo(t.x2,t.y2)),a.stroke(),a.restore()),u.display){a.save(),a.translate(t.labelX,t.labelY),a.rotate(t.rotation),a.font=x,a.textBaseline=t.textBaseline,a.textAlign=t.textAlign;var n=t.label;if(e.isArray(n))for(var i=0,r=-(n.length-1)*m*.75;i<n.length;++i)a.fillText(""+n[i],0,r),r+=1.5*m;else a.fillText(n,0,0);a.restore()}}),c.display){var A,F,B=0;if(g)A=i.left+(i.right-i.left)/2,F="bottom"===r.position?i.bottom-w/2:i.top+w/2;else{var V="left"===r.position;A=V?i.left+w/2:i.right-w/2,F=i.top+(i.bottom-i.top)/2,B=V?-.5*Math.PI:.5*Math.PI}a.save(),a.translate(A,F),a.rotate(B),a.textAlign="center",a.textBaseline="middle",a.fillStyle=C,a.font=N,a.fillText(c.labelString,0,0),a.restore()}if(h.drawBorder){a.lineWidth=e.getValueAtIndexOrDefault(h.lineWidth,0),a.strokeStyle=e.getValueAtIndexOrDefault(h.color,0);var G=i.left,z=i.right,q=i.top,j=i.bottom,Y=e.aliasPixel(a.lineWidth);g?(q=j="top"===r.position?i.bottom:i.top,q+=Y,j+=Y):(G=z="left"===r.position?i.right:i.left,G+=Y,z+=Y),a.beginPath(),a.moveTo(G,q),a.lineTo(z,j),a.stroke()}}}})}},{}],33:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers;t.scaleService={constructors:{},defaults:{},registerScaleType:function(t,n,i){this.constructors[t]=n,this.defaults[t]=e.clone(i)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(n){return this.defaults.hasOwnProperty(n)?e.scaleMerge(t.defaults.scale,this.defaults[n]):{}},updateScaleDefaults:function(t,n){var i=this.defaults;i.hasOwnProperty(t)&&(i[t]=e.extend(i[t],n))},addScalesToLayout:function(n){e.each(n.scales,function(e){t.layoutService.addBox(n,e)})}}}},{}],34:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers;t.Ticks={generators:{linear:function(t,n){var i,r=[];if(t.stepSize&&t.stepSize>0)i=t.stepSize;else{var s=e.niceNum(n.max-n.min,!1);i=e.niceNum(s/(t.maxTicks-1),!0)}var o=Math.floor(n.min/i)*i,a=Math.ceil(n.max/i)*i;t.min&&t.max&&t.stepSize&&(t.max-t.min)%t.stepSize==0&&(o=t.min,a=t.max);var l=(a-o)/i;l=e.almostEquals(l,Math.round(l),i/1e3)?Math.round(l):Math.ceil(l),r.push(void 0!==t.min?t.min:o);for(var u=1;l>u;++u)r.push(o+u*i);return r.push(void 0!==t.max?t.max:a),r},logarithmic:function(t,n){for(var i=[],r=e.getValueOrDefault,s=r(t.min,Math.pow(10,Math.floor(e.log10(n.min))));s<n.max;){i.push(s);var o,a;0===s?(o=Math.floor(e.log10(n.minNotZero)),a=Math.round(n.minNotZero/Math.pow(10,o))):(o=Math.floor(e.log10(s)),a=Math.floor(s/Math.pow(10,o))+1),10===a&&(a=1,++o),s=a*Math.pow(10,o)}var l=r(t.max,s);return i.push(l),i}},formatters:{values:function(t){return e.isArray(t)?t:""+t},linear:function(t,n,i){var r=i.length>3?i[2]-i[1]:i[1]-i[0];Math.abs(r)>1&&t!==Math.floor(t)&&(r=t-Math.floor(t));var s=e.log10(Math.abs(r)),o="";if(0!==t){var a=-1*Math.floor(s);a=Math.max(Math.min(a,20),0),o=t.toFixed(a)}else o="0";return o},logarithmic:function(t,n,i){var r=t/Math.pow(10,Math.floor(e.log10(t)));return 0===t?"0":1===r||2===r||5===r||0===n||n===i.length-1?t.toExponential():""}}}}},{}],35:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers;t.defaults.global.title={display:!1,position:"top",fullWidth:!0,fontStyle:"bold",padding:10,text:""};var n=e.noop;t.Title=t.Element.extend({initialize:function(n){var i=this;e.extend(i,n),i.options=e.configMerge(t.defaults.global.title,n.options),i.legendHitBoxes=[]},beforeUpdate:function(){var n=this.chart.options;n&&n.title&&(this.options=e.configMerge(t.defaults.global.title,n.title))},update:function(t,e,n){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:n,beforeSetDimensions:n,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:n,beforeBuildLabels:n,buildLabels:n,afterBuildLabels:n,beforeFit:n,fit:function(){var n=this,i=e.getValueOrDefault,r=n.options,s=t.defaults.global,o=r.display,a=i(r.fontSize,s.defaultFontSize),l=n.minSize;n.isHorizontal()?(l.width=n.maxWidth,l.height=o?a+2*r.padding:0):(l.width=o?a+2*r.padding:0,l.height=n.maxHeight),n.width=l.width,n.height=l.height},afterFit:n,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var n=this,i=n.ctx,r=e.getValueOrDefault,s=n.options,o=t.defaults.global;if(s.display){var a,l,u,h=r(s.fontSize,o.defaultFontSize),c=r(s.fontStyle,o.defaultFontStyle),d=r(s.fontFamily,o.defaultFontFamily),f=e.fontString(h,c,d),g=0,p=n.top,m=n.left,v=n.bottom,y=n.right;i.fillStyle=r(s.fontColor,o.defaultFontColor),i.font=f,n.isHorizontal()?(a=m+(y-m)/2,l=p+(v-p)/2,u=y-m):(a="left"===s.position?m+h/2:y-h/2,l=p+(v-p)/2,u=v-p,g=Math.PI*("left"===s.position?-.5:.5)),i.save(),i.translate(a,l),i.rotate(g),i.textAlign="center",i.textBaseline="middle",i.fillText(s.text,0,0,u),i.restore()}}}),t.plugins.register({beforeInit:function(e){var n=e.options.title;n&&(e.titleBlock=new t.Title({ctx:e.chart.ctx,options:n,chart:e}),t.layoutService.addBox(e,e.titleBlock))}})}},{}],36:[function(t,e,n){"use strict";e.exports=function(t){function e(t,e){var n=l.color(t);return n.alpha(e*n.alpha()).rgbaString()}function n(t,e){return e&&(l.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function i(t){var e=t._xScale,n=t._yScale||t._scale,i=t._index,r=t._datasetIndex;return{xLabel:e?e.getLabelForIndex(i,r):"",yLabel:n?n.getLabelForIndex(i,r):"",index:i,datasetIndex:r,x:t._model.x,y:t._model.y}}function r(e){var n=t.defaults.global,i=l.getValueOrDefault;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,bodyFontColor:e.bodyFontColor,_bodyFontFamily:i(e.bodyFontFamily,n.defaultFontFamily),_bodyFontStyle:i(e.bodyFontStyle,n.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:i(e.bodyFontSize,n.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:i(e.titleFontFamily,n.defaultFontFamily),_titleFontStyle:i(e.titleFontStyle,n.defaultFontStyle),titleFontSize:i(e.titleFontSize,n.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:i(e.footerFontFamily,n.defaultFontFamily),_footerFontStyle:i(e.footerFontStyle,n.defaultFontStyle),footerFontSize:i(e.footerFontSize,n.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors}}function s(t,e){var n=t._chart.ctx,i=2*e.yPadding,r=0,s=e.body,o=s.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);o+=e.beforeBody.length+e.afterBody.length;var a=e.title.length,u=e.footer.length,h=e.titleFontSize,c=e.bodyFontSize,d=e.footerFontSize;i+=a*h,i+=a?(a-1)*e.titleSpacing:0,i+=a?e.titleMarginBottom:0,i+=o*c,i+=o?(o-1)*e.bodySpacing:0,i+=u?e.footerMarginTop:0,i+=u*d,i+=u?(u-1)*e.footerSpacing:0;var f=0,g=function(t){r=Math.max(r,n.measureText(t).width+f)};return n.font=l.fontString(h,e._titleFontStyle,e._titleFontFamily),l.each(e.title,g),n.font=l.fontString(c,e._bodyFontStyle,e._bodyFontFamily),l.each(e.beforeBody.concat(e.afterBody),g),f=e.displayColors?c+2:0,l.each(s,function(t){l.each(t.before,g),l.each(t.lines,g),l.each(t.after,g)}),f=0,n.font=l.fontString(d,e._footerFontStyle,e._footerFontFamily),l.each(e.footer,g),r+=2*e.xPadding,{width:r,height:i}}function o(t,e){var n=t._model,i=t._chart,r=t._chartInstance.chartArea,s="center",o="center";n.y<e.height?o="top":n.y>i.height-e.height&&(o="bottom");var a,l,u,h,c,d=(r.left+r.right)/2,f=(r.top+r.bottom)/2;"center"===o?(a=function(t){return d>=t},l=function(t){return t>d}):(a=function(t){return t<=e.width/2},l=function(t){return t>=i.width-e.width/2}),u=function(t){return t+e.width>i.width},h=function(t){return t-e.width<0},c=function(t){return f>=t?"top":"bottom"},a(n.x)?(s="left",u(n.x)&&(s="center",o=c(n.y))):l(n.x)&&(s="right",h(n.x)&&(s="center",o=c(n.y)));var g=t._options;return{xAlign:g.xAlign?g.xAlign:s,yAlign:g.yAlign?g.yAlign:o}}function a(t,e,n){var i=t.x,r=t.y,s=t.caretSize,o=t.caretPadding,a=t.cornerRadius,l=n.xAlign,u=n.yAlign,h=s+o,c=a+o;return"right"===l?i-=e.width:"center"===l&&(i-=e.width/2),"top"===u?r+=h:r-="bottom"===u?e.height+h:e.height/2,"center"===u?"left"===l?i+=h:"right"===l&&(i-=h):"left"===l?i-=c:"right"===l&&(i+=c),{x:i,y:r}}var l=t.helpers;t.defaults.global.tooltips={enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,callbacks:{beforeTitle:l.noop,title:function(t,e){var n="",i=e.labels,r=i?i.length:0;if(t.length>0){var s=t[0];s.xLabel?n=s.xLabel:r>0&&s.index<r&&(n=i[s.index])}return n},afterTitle:l.noop,beforeBody:l.noop,beforeLabel:l.noop,label:function(t,e){return(e.datasets[t.datasetIndex].label||"")+": "+t.yLabel},labelColor:function(t,e){var n=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},afterLabel:l.noop,afterBody:l.noop,beforeFooter:l.noop,footer:l.noop,afterFooter:l.noop}},t.Tooltip=t.Element.extend({initialize:function(){this._model=r(this._options)},getTitle:function(){var t=this,e=t._options.callbacks,i=e.beforeTitle.apply(t,arguments),r=e.title.apply(t,arguments),s=e.afterTitle.apply(t,arguments),o=[];return o=n(o,i),o=n(o,r),o=n(o,s)},getBeforeBody:function(){var t=this._options.callbacks.beforeBody.apply(this,arguments);return l.isArray(t)?t:void 0!==t?[t]:[]},getBody:function(t,e){var i=this,r=i._options.callbacks,s=[];return l.each(t,function(t){var o={before:[],lines:[],after:[]};n(o.before,r.beforeLabel.call(i,t,e)),n(o.lines,r.label.call(i,t,e)),n(o.after,r.afterLabel.call(i,t,e)),s.push(o)}),s},getAfterBody:function(){var t=this._options.callbacks.afterBody.apply(this,arguments);return l.isArray(t)?t:void 0!==t?[t]:[]},getFooter:function(){var t=this,e=t._options.callbacks,i=e.beforeFooter.apply(t,arguments),r=e.footer.apply(t,arguments),s=e.afterFooter.apply(t,arguments),o=[];return o=n(o,i),o=n(o,r),o=n(o,s)},update:function(e){var n,u,h=this,c=h._options,d=h._model,f=h._model=r(c),g=h._active,p=h._data,m=h._chartInstance,v={xAlign:d.xAlign,yAlign:d.yAlign},y={x:d.x,y:d.y},x={width:d.width,height:d.height},b={x:d.caretX,y:d.caretY};if(g.length){f.opacity=1;var E=[];b=t.Tooltip.positioners[c.position](g,h._eventPosition);var I=[];for(n=0,u=g.length;u>n;++n)I.push(i(g[n]));c.filter&&(I=I.filter(function(t){return c.filter(t,p)})),c.itemSort&&(I=I.sort(function(t,e){return c.itemSort(t,e,p)})),l.each(I,function(t){E.push(c.callbacks.labelColor.call(h,t,m))}),f.title=h.getTitle(I,p),f.beforeBody=h.getBeforeBody(I,p),f.body=h.getBody(I,p),f.afterBody=h.getAfterBody(I,p),f.footer=h.getFooter(I,p),f.x=Math.round(b.x),f.y=Math.round(b.y),f.caretPadding=l.getValueOrDefault(b.padding,2),f.labelColors=E,f.dataPoints=I,y=a(f,x=s(this,f),v=o(this,x))}else f.opacity=0;return f.xAlign=v.xAlign,f.yAlign=v.yAlign,f.x=y.x,f.y=y.y,f.width=x.width,f.height=x.height,f.caretX=b.x,f.caretY=b.y,h._model=f,e&&c.custom&&c.custom.call(h,f),h},drawCaret:function(t,n,i){var r,s,o,a,l,u,h=this._view,c=this._chart.ctx,d=h.caretSize,f=h.cornerRadius,g=h.xAlign,p=h.yAlign,m=t.x,v=t.y,y=n.width,x=n.height;"center"===p?("left"===g?(r=m,s=r-d,o=r):(r=m+y,s=r+d,o=r),l=v+x/2,a=l-d,u=l+d):("left"===g?(r=m+f,s=r+d,o=s+d):"right"===g?(r=m+y-f,s=r-d,o=s-d):(s=m+y/2,r=s-d,o=s+d),"top"===p?(a=v,l=a-d,u=a):(a=v+x,l=a+d,u=a)),c.fillStyle=e(h.backgroundColor,i),c.beginPath(),c.moveTo(r,a),c.lineTo(s,l),c.lineTo(o,u),c.closePath(),c.fill()},drawTitle:function(t,n,i,r){var s=n.title;if(s.length){i.textAlign=n._titleAlign,i.textBaseline="top";var o=n.titleFontSize,a=n.titleSpacing;i.fillStyle=e(n.titleFontColor,r),i.font=l.fontString(o,n._titleFontStyle,n._titleFontFamily);var u,h;for(u=0,h=s.length;h>u;++u)i.fillText(s[u],t.x,t.y),t.y+=o+a,u+1===s.length&&(t.y+=n.titleMarginBottom-a)}},drawBody:function(t,n,i,r){var s=n.bodyFontSize,o=n.bodySpacing,a=n.body;i.textAlign=n._bodyAlign,i.textBaseline="top";var u=e(n.bodyFontColor,r);i.fillStyle=u,i.font=l.fontString(s,n._bodyFontStyle,n._bodyFontFamily);var h=0,c=function(e){i.fillText(e,t.x+h,t.y),t.y+=s+o};l.each(n.beforeBody,c);var d=n.displayColors;h=d?s+2:0,l.each(a,function(o,a){l.each(o.before,c),l.each(o.lines,function(o){d&&(i.fillStyle=e(n.legendColorBackground,r),i.fillRect(t.x,t.y,s,s),i.strokeStyle=e(n.labelColors[a].borderColor,r),i.strokeRect(t.x,t.y,s,s),i.fillStyle=e(n.labelColors[a].backgroundColor,r),i.fillRect(t.x+1,t.y+1,s-2,s-2),i.fillStyle=u),c(o)}),l.each(o.after,c)}),h=0,l.each(n.afterBody,c),t.y-=o},drawFooter:function(t,n,i,r){var s=n.footer;s.length&&(t.y+=n.footerMarginTop,i.textAlign=n._footerAlign,i.textBaseline="top",i.fillStyle=e(n.footerFontColor,r),i.font=l.fontString(n.footerFontSize,n._footerFontStyle,n._footerFontFamily),l.each(s,function(e){i.fillText(e,t.x,t.y),t.y+=n.footerFontSize+n.footerSpacing}))},drawBackground:function(t,n,i,r,s){i.fillStyle=e(n.backgroundColor,s),l.drawRoundedRectangle(i,t.x,t.y,r.width,r.height,n.cornerRadius),i.fill()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var n={width:e.width,height:e.height},i={x:e.x,y:e.y},r=Math.abs(e.opacity<.001)?0:e.opacity;this._options.enabled&&(this.drawBackground(i,e,t,n,r),this.drawCaret(i,n,r),i.x+=e.xPadding,i.y+=e.yPadding,this.drawTitle(i,e,t,r),this.drawBody(i,e,t,r),this.drawFooter(i,e,t,r))}},handleEvent:function(t){var e=this,n=e._options,i=!1;if(e._lastActive=e._lastActive||[],"mouseout"===t.type?e._active=[]:e._active=e._chartInstance.getElementsAtEventForMode(t,n.mode,n),i=!l.arrayEquals(e._active,e._lastActive),e._lastActive=e._active,n.enabled||n.custom){e._eventPosition=l.getRelativePosition(t,e._chart);var r=e._model;e.update(!0),e.pivot(),i|=r.x!==e._model.x||r.y!==e._model.y}return i}}),t.Tooltip.positioners={average:function(t){if(!t.length)return!1;var e,n,i=0,r=0,s=0;for(e=0,n=t.length;n>e;++e){var o=t[e];if(o&&o.hasValue()){var a=o.tooltipPosition();i+=a.x,r+=a.y,++s}}return{x:Math.round(i/s),y:Math.round(r/s)}},nearest:function(t,e){var n,i,r,s=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(i=0,r=t.length;r>i;++i){var u=t[i];if(u&&u.hasValue()){var h=u.getCenterPoint(),c=l.distanceBetweenPoints(e,h);a>c&&(a=c,n=u)}}if(n){var d=n.tooltipPosition();s=d.x,o=d.y}return{x:s,y:o}}}}},{}],37:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers,n=t.defaults.global;n.elements.arc={backgroundColor:n.defaultColor,borderColor:"#fff",borderWidth:2},t.elements.Arc=t.Element.extend({inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,n){var i=this._view;if(i){for(var r=e.getAngleFromPoint(i,{x:t,y:n}),s=r.angle,o=r.distance,a=i.startAngle,l=i.endAngle;a>l;)l+=2*Math.PI;for(;s>l;)s-=2*Math.PI;for(;a>s;)s+=2*Math.PI;var u=s>=a&&l>=s,h=o>=i.innerRadius&&o<=i.outerRadius;return u&&h}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,n=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,n=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},draw:function(){var t=this._chart.ctx,e=this._view,n=e.startAngle,i=e.endAngle;t.beginPath(),t.arc(e.x,e.y,e.outerRadius,n,i),t.arc(e.x,e.y,e.innerRadius,i,n,!0),t.closePath(),t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,t.fillStyle=e.backgroundColor,t.fill(),t.lineJoin="bevel",e.borderWidth&&t.stroke()}})}},{}],38:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers,n=t.defaults.global;t.defaults.global.elements.line={tension:.4,backgroundColor:n.defaultColor,borderWidth:3,borderColor:n.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0},t.elements.Line=t.Element.extend({draw:function(){function t(t,e){var n=e._view;!0===e._view.steppedLine?(l.lineTo(n.x,t._view.y),l.lineTo(n.x,n.y)):0===e._view.tension?l.lineTo(n.x,n.y):l.bezierCurveTo(t._view.controlPointNextX,t._view.controlPointNextY,n.controlPointPreviousX,n.controlPointPreviousY,n.x,n.y)}var i=this,r=i._view,s=r.spanGaps,o=r.scaleZero,a=i._loop;a||("top"===r.fill?o=r.scaleTop:"bottom"===r.fill&&(o=r.scaleBottom));var l=i._chart.ctx;l.save();var u=i._children.slice(),h=-1;a&&u.length&&u.push(u[0]);var c,d,f,g;if(u.length&&r.fill){for(l.beginPath(),c=0;c<u.length;++c)d=u[c],f=e.previousItem(u,c),g=d._view,0===c?(a?l.moveTo(o.x,o.y):l.moveTo(g.x,o),g.skip||(h=c,l.lineTo(g.x,g.y))):(f=-1===h?f:u[h],g.skip?s||h!==c-1||(a?l.lineTo(o.x,o.y):l.lineTo(f._view.x,o)):(h!==c-1?s&&-1!==h?t(f,d):a?l.lineTo(g.x,g.y):(l.lineTo(g.x,o),l.lineTo(g.x,g.y)):t(f,d),h=c));a||-1===h||l.lineTo(u[h]._view.x,o),l.fillStyle=r.backgroundColor||n.defaultColor,l.closePath(),l.fill()}var p=n.elements.line;for(l.lineCap=r.borderCapStyle||p.borderCapStyle,l.setLineDash&&l.setLineDash(r.borderDash||p.borderDash),l.lineDashOffset=r.borderDashOffset||p.borderDashOffset,l.lineJoin=r.borderJoinStyle||p.borderJoinStyle,l.lineWidth=r.borderWidth||p.borderWidth,l.strokeStyle=r.borderColor||n.defaultColor,l.beginPath(),h=-1,c=0;c<u.length;++c)d=u[c],f=e.previousItem(u,c),g=d._view,0===c?g.skip||(l.moveTo(g.x,g.y),h=c):(f=-1===h?f:u[h],g.skip||(h!==c-1&&!s||-1===h?l.moveTo(g.x,g.y):t(f,d),h=c));l.stroke(),l.restore()}})}},{}],39:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hitRadius,2)}var n=t.helpers,i=t.defaults.global,r=i.defaultColor;i.elements.point={radius:3,pointStyle:"circle",backgroundColor:r,borderWidth:1,borderColor:r,hitRadius:1,hoverRadius:4,hoverBorderWidth:1},t.elements.Point=t.Element.extend({inRange:function(t,e){var n=this._view;return!!n&&Math.pow(t-n.x,2)+Math.pow(e-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:e,inXRange:e,inYRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.y,2)<Math.pow(e.radius+e.hitRadius,2)},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(){var e=this._view,s=this._chart.ctx,o=e.pointStyle,a=e.radius,l=e.x,u=e.y;e.skip||(s.strokeStyle=e.borderColor||r,s.lineWidth=n.getValueOrDefault(e.borderWidth,i.elements.point.borderWidth),s.fillStyle=e.backgroundColor||r,t.canvasHelpers.drawPoint(s,o,a,l,u))}})}},{}],40:[function(t,e,n){"use strict";e.exports=function(t){function e(t){return void 0!==t._view.width}function n(t){var n,i,r,s,o=t._view;if(e(t)){var a=o.width/2;n=o.x-a,i=o.x+a,r=Math.min(o.y,o.base),s=Math.max(o.y,o.base)}else{var l=o.height/2;n=Math.min(o.x,o.base),i=Math.max(o.x,o.base),r=o.y-l,s=o.y+l}return{left:n,top:r,right:i,bottom:s}}var i=t.defaults.global;i.elements.rectangle={backgroundColor:i.defaultColor,borderWidth:0,borderColor:i.defaultColor,borderSkipped:"bottom"},t.elements.Rectangle=t.Element.extend({draw:function(){function t(t){return l[(u+t)%4]}var e=this._chart.ctx,n=this._view,i=n.width/2,r=n.x-i,s=n.x+i,o=n.base-(n.base-n.y),a=n.borderWidth/2;n.borderWidth&&(r+=a,s-=a,o+=a),e.beginPath(),e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth;var l=[[r,n.base],[r,o],[s,o],[s,n.base]],u=["bottom","left","top","right"].indexOf(n.borderSkipped,0);-1===u&&(u=0);var h=t(0);e.moveTo(h[0],h[1]);for(var c=1;4>c;c++)h=t(c),e.lineTo(h[0],h[1]);e.fill(),n.borderWidth&&e.stroke()},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){var i=!1;if(this._view){var r=n(this);i=t>=r.left&&t<=r.right&&e>=r.top&&e<=r.bottom}return i},inLabelRange:function(t,i){var r=this;if(!r._view)return!1;var s=n(r);return e(r)?t>=s.left&&t<=s.right:i>=s.top&&i<=s.bottom},inXRange:function(t){var e=n(this);return t>=e.left&&t<=e.right},inYRange:function(t){var e=n(this);return t>=e.top&&t<=e.bottom},getCenterPoint:function(){var t,n,i=this._view;return e(this)?(t=i.x,n=(i.y+i.base)/2):(t=(i.x+i.base)/2,n=i.y),{x:t,y:n}},getArea:function(){var t=this._view;return t.width*Math.abs(t.y-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}})}},{}],41:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers,n={position:"bottom"},i=t.Scale.extend({getLabels:function(){var t=this.chart.data;return(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels},determineDataLimits:function(){var t=this,n=t.getLabels();t.minIndex=0,t.maxIndex=n.length-1;var i;void 0!==t.options.ticks.min&&(i=e.indexOf(n,t.options.ticks.min),t.minIndex=-1!==i?i:t.minIndex),void 0!==t.options.ticks.max&&(i=e.indexOf(n,t.options.ticks.max),t.maxIndex=-1!==i?i:t.maxIndex),t.min=n[t.minIndex],t.max=n[t.maxIndex]},buildTicks:function(){var t=this,e=t.getLabels();t.ticks=0===t.minIndex&&t.maxIndex===e.length-1?e:e.slice(t.minIndex,t.maxIndex+1)},getLabelForIndex:function(t,e){var n=this,i=n.chart.data,r=n.isHorizontal();return i.xLabels&&r||i.yLabels&&!r?n.getRightValue(i.datasets[e].data[t]):n.ticks[t]},getPixelForValue:function(t,e,n,i){var r=this,s=Math.max(r.maxIndex+1-r.minIndex-(r.options.gridLines.offsetGridLines?0:1),1);if(void 0!==t&&isNaN(e)){var o=r.getLabels().indexOf(t);e=-1!==o?o:e}if(r.isHorizontal()){var a=(r.width-(r.paddingLeft+r.paddingRight))/s,l=a*(e-r.minIndex)+r.paddingLeft;return(r.options.gridLines.offsetGridLines&&i||r.maxIndex===r.minIndex&&i)&&(l+=a/2),r.left+Math.round(l)}var u=(r.height-(r.paddingTop+r.paddingBottom))/s,h=u*(e-r.minIndex)+r.paddingTop;return r.options.gridLines.offsetGridLines&&i&&(h+=u/2),r.top+Math.round(h)},getPixelForTick:function(t,e){return this.getPixelForValue(this.ticks[t],t+this.minIndex,null,e)},getValueForPixel:function(t){var e=this,n=Math.max(e.ticks.length-(e.options.gridLines.offsetGridLines?0:1),1),i=e.isHorizontal(),r=(i?e.width-(e.paddingLeft+e.paddingRight):e.height-(e.paddingTop+e.paddingBottom))/n;return t-=i?e.left:e.top,e.options.gridLines.offsetGridLines&&(t-=r/2),t-=i?e.paddingLeft:e.paddingTop,0>=t?0:Math.round(t/r)},getBasePixel:function(){return this.bottom}});t.scaleService.registerScaleType("category",i,n)}},{}],42:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers,n={position:"left",ticks:{callback:t.Ticks.formatters.linear}},i=t.LinearScaleBase.extend({determineDataLimits:function(){function t(t){return o?t.xAxisID===n.id:t.yAxisID===n.id}var n=this,i=n.options,r=n.chart,s=r.data.datasets,o=n.isHorizontal();if(n.min=null,n.max=null,i.stacked){var a={};e.each(s,function(s,o){var l=r.getDatasetMeta(o);void 0===a[l.type]&&(a[l.type]={positiveValues:[],negativeValues:[]});var u=a[l.type].positiveValues,h=a[l.type].negativeValues;r.isDatasetVisible(o)&&t(l)&&e.each(s.data,function(t,e){var r=+n.getRightValue(t);isNaN(r)||l.data[e].hidden||(u[e]=u[e]||0,h[e]=h[e]||0,i.relativePoints?u[e]=100:0>r?h[e]+=r:u[e]+=r)})}),e.each(a,function(t){var i=t.positiveValues.concat(t.negativeValues),r=e.min(i),s=e.max(i);n.min=null===n.min?r:Math.min(n.min,r),n.max=null===n.max?s:Math.max(n.max,s)})}else e.each(s,function(i,s){var o=r.getDatasetMeta(s);r.isDatasetVisible(s)&&t(o)&&e.each(i.data,function(t,e){var i=+n.getRightValue(t);isNaN(i)||o.data[e].hidden||(null===n.min?n.min=i:i<n.min&&(n.min=i),null===n.max?n.max=i:i>n.max&&(n.max=i))})});this.handleTickRangeOptions()},getTickLimit:function(){var n,i=this,r=i.options.ticks;if(i.isHorizontal())n=Math.min(r.maxTicksLimit?r.maxTicksLimit:11,Math.ceil(i.width/50));else{var s=e.getValueOrDefault(r.fontSize,t.defaults.global.defaultFontSize);n=Math.min(r.maxTicksLimit?r.maxTicksLimit:11,Math.ceil(i.height/(2*s)))}return n},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e,n,i=this,r=i.paddingLeft,s=i.paddingBottom,o=i.start,a=+i.getRightValue(t),l=i.end-o;return i.isHorizontal()?(n=i.width-(r+i.paddingRight),e=i.left+n/l*(a-o),Math.round(e+r)):(n=i.height-(i.paddingTop+s),e=i.bottom-s-n/l*(a-o),Math.round(e))},getValueForPixel:function(t){var e=this,n=e.isHorizontal(),i=e.paddingLeft,r=e.paddingBottom,s=n?e.width-(i+e.paddingRight):e.height-(e.paddingTop+r),o=(n?t-e.left-i:e.bottom-r-t)/s;return e.start+(e.end-e.start)*o},getPixelForTick:function(t){return this.getPixelForValue(this.ticksAsNumbers[t])}});t.scaleService.registerScaleType("linear",i,n)}},{}],43:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers,n=e.noop;t.LinearScaleBase=t.Scale.extend({handleTickRangeOptions:function(){var t=this,n=t.options.ticks;if(n.beginAtZero){var i=e.sign(t.min),r=e.sign(t.max);0>i&&0>r?t.max=0:i>0&&r>0&&(t.min=0)}void 0!==n.min?t.min=n.min:void 0!==n.suggestedMin&&(t.min=Math.min(t.min,n.suggestedMin)),void 0!==n.max?t.max=n.max:void 0!==n.suggestedMax&&(t.max=Math.max(t.max,n.suggestedMax)),t.min===t.max&&(t.max++,n.beginAtZero||t.min--)},getTickLimit:n,handleDirectionalChanges:n,buildTicks:function(){var n=this,i=n.options.ticks,r=n.getTickLimit(),s={maxTicks:r=Math.max(2,r),min:i.min,max:i.max,stepSize:e.getValueOrDefault(i.fixedStepSize,i.stepSize)},o=n.ticks=t.Ticks.generators.linear(s,n);n.handleDirectionalChanges(),n.max=e.max(o),n.min=e.min(o),i.reverse?(o.reverse(),n.start=n.max,n.end=n.min):(n.start=n.min,n.end=n.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),t.Scale.prototype.convertTicksToLabels.call(e)}})}},{}],44:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers,n={position:"left",ticks:{callback:t.Ticks.formatters.logarithmic}},i=t.Scale.extend({determineDataLimits:function(){function t(t){return l?t.xAxisID===n.id:t.yAxisID===n.id}var n=this,i=n.options,r=i.ticks,s=n.chart,o=s.data.datasets,a=e.getValueOrDefault,l=n.isHorizontal();if(n.min=null,n.max=null,n.minNotZero=null,i.stacked){var u={};e.each(o,function(r,o){var a=s.getDatasetMeta(o);s.isDatasetVisible(o)&&t(a)&&(void 0===u[a.type]&&(u[a.type]=[]),e.each(r.data,function(t,e){var r=u[a.type],s=+n.getRightValue(t);isNaN(s)||a.data[e].hidden||(r[e]=r[e]||0,i.relativePoints?r[e]=100:r[e]+=s)}))}),e.each(u,function(t){var i=e.min(t),r=e.max(t);n.min=null===n.min?i:Math.min(n.min,i),n.max=null===n.max?r:Math.max(n.max,r)})}else e.each(o,function(i,r){var o=s.getDatasetMeta(r);s.isDatasetVisible(r)&&t(o)&&e.each(i.data,function(t,e){var i=+n.getRightValue(t);isNaN(i)||o.data[e].hidden||(null===n.min?n.min=i:i<n.min&&(n.min=i),null===n.max?n.max=i:i>n.max&&(n.max=i),0!==i&&(null===n.minNotZero||i<n.minNotZero)&&(n.minNotZero=i))})});n.min=a(r.min,n.min),n.max=a(r.max,n.max),n.min===n.max&&(0!==n.min&&null!==n.min?(n.min=Math.pow(10,Math.floor(e.log10(n.min))-1),n.max=Math.pow(10,Math.floor(e.log10(n.max))+1)):(n.min=1,n.max=10))},buildTicks:function(){var n=this,i=n.options.ticks,r={min:i.min,max:i.max},s=n.ticks=t.Ticks.generators.logarithmic(r,n);n.isHorizontal()||s.reverse(),n.max=e.max(s),n.min=e.min(s),i.reverse?(s.reverse(),n.start=n.max,n.end=n.min):(n.start=n.min,n.end=n.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),t.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){return this.getPixelForValue(this.tickValues[t])},getPixelForValue:function(t){var n,i,r,s=this,o=s.start,a=+s.getRightValue(t),l=s.paddingTop,u=s.paddingBottom,h=s.paddingLeft,c=s.options.ticks;return s.isHorizontal()?(r=e.log10(s.end)-e.log10(o),0===a?i=s.left+h:(n=s.width-(h+s.paddingRight),i=s.left+n/r*(e.log10(a)-e.log10(o)),i+=h)):(n=s.height-(l+u),0!==o||c.reverse?0===s.end&&c.reverse?(r=e.log10(s.start)-e.log10(s.minNotZero),i=a===s.end?s.top+l:a===s.minNotZero?s.top+l+.02*n:s.top+l+.02*n+.98*n/r*(e.log10(a)-e.log10(s.minNotZero))):(r=e.log10(s.end)-e.log10(o),n=s.height-(l+u),i=s.bottom-u-n/r*(e.log10(a)-e.log10(o))):(r=e.log10(s.end)-e.log10(s.minNotZero),i=a===o?s.bottom-u:a===s.minNotZero?s.bottom-u-.02*n:s.bottom-u-.02*n-.98*n/r*(e.log10(a)-e.log10(s.minNotZero)))),i},getValueForPixel:function(t){var n,i,r=this,s=e.log10(r.end)-e.log10(r.start);return r.isHorizontal()?(i=r.width-(r.paddingLeft+r.paddingRight),n=r.start*Math.pow(10,(t-r.left-r.paddingLeft)*s/i)):(i=r.height-(r.paddingTop+r.paddingBottom),n=Math.pow(10,(r.bottom-r.paddingBottom-t)*s/i)/r.start),n}});t.scaleService.registerScaleType("logarithmic",i,n)}},{}],45:[function(t,e,n){"use strict";e.exports=function(t){var e=t.helpers,n=t.defaults.global,i={display:!0,animate:!0,lineArc:!1,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:t.Ticks.formatters.linear},pointLabels:{fontSize:10,callback:function(t){return t}}},r=t.LinearScaleBase.extend({getValueCount:function(){return this.chart.data.labels.length},setDimensions:function(){var t=this,i=t.options,r=i.ticks;t.width=t.maxWidth,t.height=t.maxHeight,t.xCenter=Math.round(t.width/2),t.yCenter=Math.round(t.height/2);var s=e.min([t.height,t.width]),o=e.getValueOrDefault(r.fontSize,n.defaultFontSize);t.drawingArea=i.display?s/2-(o/2+r.backdropPaddingY):s/2},determineDataLimits:function(){var t=this,n=t.chart;t.min=null,t.max=null,e.each(n.data.datasets,function(i,r){if(n.isDatasetVisible(r)){var s=n.getDatasetMeta(r);e.each(i.data,function(e,n){var i=+t.getRightValue(e);isNaN(i)||s.data[n].hidden||(null===t.min?t.min=i:i<t.min&&(t.min=i),null===t.max?t.max=i:i>t.max&&(t.max=i))})}}),t.handleTickRangeOptions()},getTickLimit:function(){var t=this.options.ticks,i=e.getValueOrDefault(t.fontSize,n.defaultFontSize);return Math.min(t.maxTicksLimit?t.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*i)))},convertTicksToLabels:function(){var e=this;t.LinearScaleBase.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(e.options.pointLabels.callback,e)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t,i,r,s,o,a,l,u,h,c,d,f,g=this.options.pointLabels,p=e.getValueOrDefault(g.fontSize,n.defaultFontSize),m=e.getValueOrDefault(g.fontStyle,n.defaultFontStyle),v=e.getValueOrDefault(g.fontFamily,n.defaultFontFamily),y=e.fontString(p,m,v),x=e.min([this.height/2-p-5,this.width/2]),b=this.width,E=0;for(this.ctx.font=y,i=0;i<this.getValueCount();i++){t=this.getPointPosition(i,x),r=this.ctx.measureText(this.pointLabels[i]?this.pointLabels[i]:"").width+5;var I=360*(this.getIndexAngle(i)+Math.PI/2)/(2*Math.PI)%360;0===I||180===I?(s=r/2,t.x+s>b&&(b=t.x+s,o=i),t.x-s<E&&(E=t.x-s,l=i)):180>I?t.x+r>b&&(b=t.x+r,o=i):t.x-r<E&&(E=t.x-r,l=i)}h=E,c=Math.ceil(b-this.width),a=this.getIndexAngle(o),u=this.getIndexAngle(l),d=c/Math.sin(a+Math.PI/2),f=h/Math.sin(u+Math.PI/2),d=e.isNumber(d)?d:0,f=e.isNumber(f)?f:0,this.drawingArea=Math.round(x-(f+d)/2),this.setCenterPoint(f,d)},setCenterPoint:function(t,e){var n=this,i=n.width-e-n.drawingArea,r=t+n.drawingArea;n.xCenter=Math.round((r+i)/2+n.left),n.yCenter=Math.round(n.height/2+n.top)},getIndexAngle:function(t){var e=2*Math.PI/this.getValueCount(),n=(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360;return t*e-Math.PI/2+n},getDistanceFromCenterForValue:function(t){var e=this;if(null===t)return 0;var n=e.drawingArea/(e.max-e.min);return e.options.reverse?(e.max-t)*n:(t-e.min)*n},getPointPosition:function(t,e){var n=this,i=n.getIndexAngle(t);return{x:Math.round(Math.cos(i)*e)+n.xCenter,y:Math.round(Math.sin(i)*e)+n.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(){var t=this,e=t.min,n=t.max;return t.getPointPositionForValue(0,t.beginAtZero?0:0>e&&0>n?n:e>0&&n>0?e:0)},draw:function(){var t=this,i=t.options,r=i.gridLines,s=i.ticks,o=i.angleLines,a=i.pointLabels,l=e.getValueOrDefault;if(i.display){var u=t.ctx,h=l(s.fontSize,n.defaultFontSize),c=l(s.fontStyle,n.defaultFontStyle),d=l(s.fontFamily,n.defaultFontFamily),f=e.fontString(h,c,d);if(e.each(t.ticks,function(o,a){if(a>0||i.reverse){var c=t.getDistanceFromCenterForValue(t.ticksAsNumbers[a]),d=t.yCenter-c;if(r.display&&0!==a)if(u.strokeStyle=e.getValueAtIndexOrDefault(r.color,a-1),u.lineWidth=e.getValueAtIndexOrDefault(r.lineWidth,a-1),i.lineArc)u.beginPath(),u.arc(t.xCenter,t.yCenter,c,0,2*Math.PI),u.closePath(),u.stroke();else{u.beginPath();for(var g=0;g<t.getValueCount();g++){var p=t.getPointPosition(g,c);0===g?u.moveTo(p.x,p.y):u.lineTo(p.x,p.y)}u.closePath(),u.stroke()}if(s.display){var m=l(s.fontColor,n.defaultFontColor);if(u.font=f,s.showLabelBackdrop){var v=u.measureText(o).width;u.fillStyle=s.backdropColor,u.fillRect(t.xCenter-v/2-s.backdropPaddingX,d-h/2-s.backdropPaddingY,v+2*s.backdropPaddingX,h+2*s.backdropPaddingY)}u.textAlign="center",u.textBaseline="middle",u.fillStyle=m,u.fillText(o,t.xCenter,d)}}}),!i.lineArc){u.lineWidth=o.lineWidth,u.strokeStyle=o.color;for(var g=t.getDistanceFromCenterForValue(i.reverse?t.min:t.max),p=l(a.fontSize,n.defaultFontSize),m=l(a.fontStyle,n.defaultFontStyle),v=l(a.fontFamily,n.defaultFontFamily),y=e.fontString(p,m,v),x=t.getValueCount()-1;x>=0;x--){if(o.display){var b=t.getPointPosition(x,g);u.beginPath(),u.moveTo(t.xCenter,t.yCenter),u.lineTo(b.x,b.y),u.stroke(),u.closePath()}var E=t.getPointPosition(x,g+5),I=l(a.fontColor,n.defaultFontColor);u.font=y,u.fillStyle=I;var C=t.pointLabels,w=360*(this.getIndexAngle(x)+Math.PI/2)/(2*Math.PI)%360;u.textAlign=0===w||180===w?"center":180>w?"left":"right",u.textBaseline=90===w||270===w?"middle":w>270||90>w?"bottom":"top",u.fillText(C[x]?C[x]:"",E.x,E.y)}}}}});t.scaleService.registerScaleType("radialLinear",r,i)}},{}],46:[function(t,e,n){"use strict";var i=t(6);i="function"==typeof i?i:window.moment,e.exports=function(t){var e=t.helpers,n={units:[{name:"millisecond",steps:[1,2,5,10,20,50,100,250,500]},{name:"second",steps:[1,2,5,10,30]},{name:"minute",steps:[1,2,5,10,30]},{name:"hour",steps:[1,2,3,6,12]},{name:"day",steps:[1,2,5]},{name:"week",maxStep:4},{name:"month",maxStep:3},{name:"quarter",maxStep:4},{name:"year",maxStep:!1}]},r={position:"bottom",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm:ss a",hour:"MMM D, hA",day:"ll",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1}},s=t.Scale.extend({initialize:function(){if(!i)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");t.Scale.prototype.initialize.call(this)},getLabelMoment:function(t,e){return null===t||null===e?null:void 0!==this.labelMoments[t]?this.labelMoments[t][e]:null},getLabelDiff:function(t,e){var n=this;return null===t||null===e?null:(void 0===n.labelDiffs&&n.buildLabelDiffs(),void 0!==n.labelDiffs[t]?n.labelDiffs[t][e]:null)},getMomentStartOf:function(t){var e=this;return"week"===e.options.time.unit&&!1!==e.options.time.isoWeekday?t.clone().startOf("isoWeek").isoWeekday(e.options.time.isoWeekday):t.clone().startOf(e.tickUnit)},determineDataLimits:function(){var t=this;t.labelMoments=[];var n=[];t.chart.data.labels&&t.chart.data.labels.length>0?(e.each(t.chart.data.labels,function(e){var i=t.parseTime(e);i.isValid()&&(t.options.time.round&&i.startOf(t.options.time.round),n.push(i))},t),t.firstTick=i.min.call(t,n),t.lastTick=i.max.call(t,n)):(t.firstTick=null,t.lastTick=null),e.each(t.chart.data.datasets,function(r,s){var o=[],a=t.chart.isDatasetVisible(s);"object"==typeof r.data[0]&&null!==r.data[0]?e.each(r.data,function(e){var n=t.parseTime(t.getRightValue(e));n.isValid()&&(t.options.time.round&&n.startOf(t.options.time.round),o.push(n),a&&(t.firstTick=null!==t.firstTick?i.min(t.firstTick,n):n,t.lastTick=null!==t.lastTick?i.max(t.lastTick,n):n))},t):o=n,t.labelMoments.push(o)},t),t.options.time.min&&(t.firstTick=t.parseTime(t.options.time.min)),t.options.time.max&&(t.lastTick=t.parseTime(t.options.time.max)),t.firstTick=(t.firstTick||i()).clone(),t.lastTick=(t.lastTick||i()).clone()},buildLabelDiffs:function(){var t=this;t.labelDiffs=[];var n=[];t.chart.data.labels&&t.chart.data.labels.length>0&&e.each(t.chart.data.labels,function(e){var i=t.parseTime(e);i.isValid()&&(t.options.time.round&&i.startOf(t.options.time.round),n.push(i.diff(t.firstTick,t.tickUnit,!0)))},t),e.each(t.chart.data.datasets,function(i){var r=[];"object"==typeof i.data[0]&&null!==i.data[0]?e.each(i.data,function(e){var n=t.parseTime(t.getRightValue(e));n.isValid()&&(t.options.time.round&&n.startOf(t.options.time.round),r.push(n.diff(t.firstTick,t.tickUnit,!0)))},t):r=n,t.labelDiffs.push(r)},t)},buildTicks:function(){var i=this;i.ctx.save();var r=e.getValueOrDefault(i.options.ticks.fontSize,t.defaults.global.defaultFontSize),s=e.getValueOrDefault(i.options.ticks.fontStyle,t.defaults.global.defaultFontStyle),o=e.getValueOrDefault(i.options.ticks.fontFamily,t.defaults.global.defaultFontFamily),a=e.fontString(r,s,o);if(i.ctx.font=a,i.ticks=[],i.unitScale=1,i.scaleSizeInUnits=0,i.options.time.unit)i.tickUnit=i.options.time.unit||"day",i.displayFormat=i.options.time.displayFormats[i.tickUnit],i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0),i.unitScale=e.getValueOrDefault(i.options.time.unitStepSize,1);else{var l=i.isHorizontal()?i.width-(i.paddingLeft+i.paddingRight):i.height-(i.paddingTop+i.paddingBottom),u=i.tickFormatFunction(i.firstTick,0,[]),h=i.ctx.measureText(u).width,c=l/(h=h*Math.cos(e.toRadians(i.options.ticks.maxRotation))+r*Math.sin(e.toRadians(i.options.ticks.maxRotation)));i.tickUnit=i.options.time.minUnit,i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0),i.displayFormat=i.options.time.displayFormats[i.tickUnit];for(var d=0,f=n.units[d];d<n.units.length;){if(i.unitScale=1,e.isArray(f.steps)&&Math.ceil(i.scaleSizeInUnits/c)<e.max(f.steps)){for(var g=0;g<f.steps.length;++g)if(f.steps[g]>=Math.ceil(i.scaleSizeInUnits/c)){i.unitScale=e.getValueOrDefault(i.options.time.unitStepSize,f.steps[g]);break}break}if(!1===f.maxStep||Math.ceil(i.scaleSizeInUnits/c)<f.maxStep){i.unitScale=e.getValueOrDefault(i.options.time.unitStepSize,Math.ceil(i.scaleSizeInUnits/c));break}++d,f=n.units[d],i.tickUnit=f.name;var p=i.firstTick.diff(i.getMomentStartOf(i.firstTick),i.tickUnit,!0),m=i.getMomentStartOf(i.lastTick.clone().add(1,i.tickUnit)).diff(i.lastTick,i.tickUnit,!0);i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0)+p+m,i.displayFormat=i.options.time.displayFormats[f.name]}}var v;if(i.options.time.min?v=i.getMomentStartOf(i.firstTick):(i.firstTick=i.getMomentStartOf(i.firstTick),v=i.firstTick),!i.options.time.max){var y=i.getMomentStartOf(i.lastTick),x=y.diff(i.lastTick,i.tickUnit,!0);0>x?i.lastTick=i.getMomentStartOf(i.lastTick.add(1,i.tickUnit)):x>=0&&(i.lastTick=y),i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0)}i.options.time.displayFormat&&(i.displayFormat=i.options.time.displayFormat),i.ticks.push(i.firstTick.clone());for(var b=1;b<=i.scaleSizeInUnits;++b){var E=v.clone().add(b,i.tickUnit);if(i.options.time.max&&E.diff(i.lastTick,i.tickUnit,!0)>=0)break;b%i.unitScale==0&&i.ticks.push(E)}(0!==i.ticks[i.ticks.length-1].diff(i.lastTick,i.tickUnit)||0===i.scaleSizeInUnits)&&(i.options.time.max?(i.ticks.push(i.lastTick.clone()),i.scaleSizeInUnits=i.lastTick.diff(i.ticks[0],i.tickUnit,!0)):(i.ticks.push(i.lastTick.clone()),i.scaleSizeInUnits=i.lastTick.diff(i.firstTick,i.tickUnit,!0))),i.ctx.restore(),i.labelDiffs=void 0},getLabelForIndex:function(t,e){var n=this,i=n.chart.data.labels&&t<n.chart.data.labels.length?n.chart.data.labels[t]:"";return"object"==typeof n.chart.data.datasets[e].data[0]&&(i=n.getRightValue(n.chart.data.datasets[e].data[t])),n.options.time.tooltipFormat&&(i=n.parseTime(i).format(n.options.time.tooltipFormat)),i},tickFormatFunction:function(t,n,i){var r=t.format(this.displayFormat),s=this.options.ticks,o=e.getValueOrDefault(s.callback,s.userCallback);return o?o(r,n,i):r},convertTicksToLabels:function(){var t=this;t.tickMoments=t.ticks,t.ticks=t.ticks.map(t.tickFormatFunction,t)},getPixelForValue:function(t,e,n){var i=this,r=null;if(void 0!==e&&void 0!==n&&(r=i.getLabelDiff(n,e)),null===r&&(t&&t.isValid||(t=i.parseTime(i.getRightValue(t))),t&&t.isValid&&t.isValid()&&(r=t.diff(i.firstTick,i.tickUnit,!0))),null!==r){var s=0!==r?r/i.scaleSizeInUnits:r;if(i.isHorizontal()){var o=(i.width-(i.paddingLeft+i.paddingRight))*s+i.paddingLeft;return i.left+Math.round(o)}var a=(i.height-(i.paddingTop+i.paddingBottom))*s+i.paddingTop;return i.top+Math.round(a)}},getPixelForTick:function(t){return this.getPixelForValue(this.tickMoments[t],null,null)},getValueForPixel:function(t){var e=this,n=e.isHorizontal()?e.width-(e.paddingLeft+e.paddingRight):e.height-(e.paddingTop+e.paddingBottom),r=(t-(e.isHorizontal()?e.left+e.paddingLeft:e.top+e.paddingTop))/n;return r*=e.scaleSizeInUnits,e.firstTick.clone().add(i.duration(r,e.tickUnit).asSeconds(),"seconds")},parseTime:function(t){var e=this;return"string"==typeof e.options.time.parser?i(t,e.options.time.parser):"function"==typeof e.options.time.parser?e.options.time.parser(t):"function"==typeof t.getMonth||"number"==typeof t?i(t):t.isValid&&t.isValid()?t:"string"!=typeof e.options.time.format&&e.options.time.format.call?(console.warn("options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale"),e.options.time.format(t)):i(t,e.options.time.format)}});t.scaleService.registerScaleType("time",s,r)}},{6:6}]},{},[7])(7)}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).turf=t()}}(function(){return function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return r(n||t)},h,h.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){var i=t("geojson-area").geometry;e.exports=function(t){if("FeatureCollection"===t.type){for(var e=0,n=0;e<t.features.length;e++)t.features[e].geometry&&(n+=i(t.features[e].geometry));return n}return i("Feature"===t.type?t.geometry:t)}},{"geojson-area":18}],2:[function(t,e,n){var i=t("@turf/meta").coordEach;e.exports=function(t){var e=[1/0,1/0,-1/0,-1/0];return i(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},{"@turf/meta":10}],3:[function(t,e,n){function i(t,e){var n=(new o.io.GeoJSONReader).read(t.geometry).buffer(e);return n=(new o.io.GeoJSONWriter).write(n),{type:"Feature",geometry:n,properties:{}}}var r=t("@turf/helpers"),s=r.featureCollection,o=t("jsts"),a=t("geojson-normalize");e.exports=function(t,e,n){var o=r.distanceToDegrees(e,n),l=a(t),u=a(s(l.features.map(function(t){return i(t,o)})));return u.features.length>1?u:1===u.features.length?u.features[0]:void 0}},{"@turf/helpers":8,"geojson-normalize":19,jsts:21}],4:[function(t,e,n){var i=t("@turf/meta").coordEach,r=t("@turf/centroid"),s=t("@turf/convex"),o=t("@turf/explode"),a=t("@turf/helpers").point;e.exports=function(t){if("Feature"===t.type&&"Polygon"===t.geometry.type){var n=[];i(t,function(t){n.push(t)});var l,u,h,c,d,f,g,p,m=r(t),v=m.geometry.coordinates,y=0,x=0,b=0,E=n.map(function(t){return[t[0]-v[0],t[1]-v[1]]});for(l=0;l<n.length-1;l++)u=E[l],c=u[0],f=u[1],h=E[l+1],d=h[0],g=h[1],p=c*g-d*f,b+=p,y+=(c+d)*p,x+=(f+g)*p;if(0===b)return m;var I=1/(.5*b*6);return a([v[0]+I*y,v[1]+I*x])}var C=s(o(t));return C?e.exports(C):r(t)}},{"@turf/centroid":5,"@turf/convex":6,"@turf/explode":7,"@turf/helpers":8,"@turf/meta":10}],5:[function(t,e,n){var i=t("@turf/meta").coordEach,r=t("@turf/helpers").point;e.exports=function(t){var e=0,n=0,s=0;return i(t,function(t){e+=t[0],n+=t[1],s++},!0),r([e/s,n/s])}},{"@turf/helpers":8,"@turf/meta":10}],6:[function(t,e,n){var i=t("@turf/meta").coordEach,r=t("convex-hull"),s=t("@turf/helpers").polygon;e.exports=function(t){var e=[];i(t,function(t){e.push([t[0],t[1]])});var n=r(e);if(n.length>=3){for(var o=[],a=0;a<n.length;a++)o.push(e[n[a][0]]);return o.push(e[n[n.length-1][1]]),s([o])}}},{"@turf/helpers":8,"@turf/meta":10,"convex-hull":14}],7:[function(t,e,n){var i=t("@turf/helpers").featureCollection,r=t("@turf/meta").coordEach,s=t("@turf/helpers").point;e.exports=function(t){var e=[];return r(t,function(t){e.push(s(t))}),i(e)}},{"@turf/helpers":8,"@turf/meta":10}],8:[function(t,e,n){function i(t,e){return{type:"Feature",properties:e||{},geometry:t}}e.exports.feature=i,e.exports.point=function(t,e){if(!Array.isArray(t))throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");return i({type:"Point",coordinates:t.slice()},e)},e.exports.polygon=function(t,e){if(!t)throw new Error("No coordinates passed");for(var n=0;n<t.length;n++){var r=t[n];if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<r[r.length-1].length;s++)if(r[r.length-1][s]!==r[0][s])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:t},e)},e.exports.lineString=function(t,e){if(!t)throw new Error("No coordinates passed");return i({type:"LineString",coordinates:t},e)},e.exports.featureCollection=function(t){return{type:"FeatureCollection",features:t}},e.exports.multiLineString=function(t,e){if(!t)throw new Error("No coordinates passed");return i({type:"MultiLineString",coordinates:t},e)},e.exports.multiPoint=function(t,e){if(!t)throw new Error("No coordinates passed");return i({type:"MultiPoint",coordinates:t},e)},e.exports.multiPolygon=function(t,e){if(!t)throw new Error("No coordinates passed");return i({type:"MultiPolygon",coordinates:t},e)},e.exports.geometryCollection=function(t,e){return i({type:"GeometryCollection",geometries:t},e)};var r={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};e.exports.radiansToDistance=function(t,e){var n=r[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t*n},e.exports.distanceToRadians=function(t,e){var n=r[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t/n},e.exports.distanceToDegrees=function(t,e){var n=r[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t/n*57.2958}},{}],9:[function(t,e,n){var i=t("jsts");e.exports=function(t,e){var n,r;n="Feature"===t.type?t.geometry:t,r="Feature"===e.type?e.geometry:e;var s=new i.io.GeoJSONReader,o=s.read(JSON.stringify(n)),a=s.read(JSON.stringify(r)),l=o.intersection(a);if(!l.isEmpty())return{type:"Feature",properties:{},geometry:(new i.io.GeoJSONWriter).write(l)}}},{jsts:21}],10:[function(t,e,n){function i(t,e,n){var r,s,o,a,l,u,h,c,d,f,g=0,p="FeatureCollection"===t.type,m="Feature"===t.type,v=p?t.features.length:1;for(r=0;r<v;r++)for(d=p?t.features[r].geometry:m?t.geometry:t,f="GeometryCollection"===d.type,h=f?d.geometries.length:1,a=0;a<h;a++)if(u=f?d.geometries[a]:d,c=u.coordinates,g=!n||"Polygon"!==u.type&&"MultiPolygon"!==u.type?0:1,"Point"===u.type)e(c);else if("LineString"===u.type||"MultiPoint"===u.type)for(s=0;s<c.length;s++)e(c[s]);else if("Polygon"===u.type||"MultiLineString"===u.type)for(s=0;s<c.length;s++)for(o=0;o<c[s].length-g;o++)e(c[s][o]);else if("MultiPolygon"===u.type)for(s=0;s<c.length;s++)for(o=0;o<c[s].length;o++)for(l=0;l<c[s][o].length-g;l++)e(c[s][o][l]);else{if("GeometryCollection"!==u.type)throw new Error("Unknown Geometry Type");for(s=0;s<u.geometries.length;s++)i(u.geometries[s],e,n)}}function r(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties);break;case"Feature":e(t.properties)}}e.exports.coordEach=i,e.exports.coordReduce=function(t,e,n,r){return i(t,function(t){n=e(n,t)},r),n},e.exports.propEach=r,e.exports.propReduce=function(t,e,n){return r(t,function(t){n=e(n,t)}),n},e.exports.featureEach=function(t,e){if("Feature"===t.type)e(t);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n])},e.exports.coordAll=function(t){var e=[];return i(t,function(t){e.push(t)}),e}},{}],11:[function(t,e,n){var i=t("jsts");e.exports=function(){for(var t=new i.io.GeoJSONReader,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=e.union(t.read(JSON.stringify(arguments[n].geometry)));return e=(new i.io.GeoJSONWriter).write(e),{type:"Feature",geometry:e,properties:arguments[0].properties}}},{jsts:21}],12:[function(t,e,n){"use strict";function i(t,e){for(var n=new Array(e+1),i=0;i<t.length;++i)n[i]=t[i];for(i=0;i<=t.length;++i){for(var s=t.length;s<=e;++s){for(var o=new Array(e),a=0;a<e;++a)o[a]=Math.pow(s+1-i,a);n[s]=o}if(r.apply(void 0,n))return!0}return!1}e.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var n=t[0].length,r=[t[0]],s=[0],o=1;o<e;++o)if(r.push(t[o]),i(r,n)){if(s.push(o),s.length===n+1)return s}else r.pop();return s};var r=t("robust-orientation")},{"robust-orientation":23}],13:[function(t,e,n){"use strict";"use restrict";function i(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-1<<31,n.sign=function(t){return(t>0)-(t<0)},n.abs=function(t){var e=t>>31;return(t^e)-e},n.min=function(t,e){return e^(t^e)&-(t<e)},n.max=function(t,e){return t^(t^e)&-(t<e)},n.isPow2=function(t){return!(t&t-1||!t)},n.log2=function(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,(e|=n)|t>>1},n.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},n.popCount=function(t){return t-=t>>>1&1431655765,16843009*((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},n.countTrailingZeros=i,n.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},n.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},n.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,i=e,r=7;for(n>>>=1;n;n>>>=1)i<<=1,i|=1&n,--r;t[e]=i<<r&255}}(r),n.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},n.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},n.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),(t=65535&(t|t>>>16))<<16>>16},n.interleave3=function(t,e,n){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t|n<<2},n.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),(t=1023&(t|t>>>16))<<22>>22},n.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},{}],14:[function(t,e,n){"use strict";var i=t("./lib/ch1d"),r=t("./lib/ch2d"),s=t("./lib/chnd");e.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var n=t[0].length;return 0===n?[]:1===n?i(t):2===n?r(t):s(t,n)}},{"./lib/ch1d":15,"./lib/ch2d":16,"./lib/chnd":17}],15:[function(t,e,n){"use strict";e.exports=function(t){for(var e=0,n=0,i=1;i<t.length;++i)t[i][0]<t[e][0]&&(e=i),t[i][0]>t[n][0]&&(n=i);return e<n?[[e],[n]]:e>n?[[n],[e]]:[[e]]}},{}],16:[function(t,e,n){"use strict";e.exports=function(t){var e=i(t),n=e.length;if(n<=2)return[];for(var r=new Array(n),s=e[n-1],o=0;o<n;++o){var a=e[o];r[o]=[s,a],s=a}return r};var i=t("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":22}],17:[function(t,e,n){"use strict";function i(t,e){for(var n=t.length,i=new Array(n),r=0;r<e.length;++r)i[r]=t[e[r]];for(var s=e.length,r=0;r<n;++r)e.indexOf(r)<0&&(i[s++]=t[r]);return i}function r(t,e){for(var n=t.length,i=e.length,r=0;r<n;++r)for(var s=t[r],o=0;o<s.length;++o){var a=s[o];if(a<i)s[o]=e[a];else{a-=i;for(var l=0;l<i;++l)a>=e[l]&&(a+=1);s[o]=a}}return t}e.exports=function(t,e){try{return s(t,!0)}catch(l){var n=o(t);if(n.length<=e)return[];var a=i(t,n);return r(s(a,!0),n)}};var s=t("incremental-convex-hull"),o=t("affine-hull")},{"affine-hull":12,"incremental-convex-hull":20}],18:[function(t,e,n){function r(t){var e,n=0;switch(t.type){case"Polygon":return s(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=s(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=r(t.geometries[e]);return n}}function s(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(o(t[n]))}return e}function o(t){var e,n,r,s,o,u,h=0,c=t.length;if(c>2){for(i=0;i<c;i++)i===c-2?(s=c-2,o=c-1,u=0):i===c-1?(s=c-1,o=0,u=1):(s=i,o=i+1,u=i+2),e=t[s],n=t[o],r=t[u],h+=(a(r[0])-a(e[0]))*Math.sin(a(n[1]));h=h*l.RADIUS*l.RADIUS/2}return h}function a(t){return t*Math.PI/180}var l=t("wgs84");e.exports.geometry=r,e.exports.ring=o},{wgs84:31}],19:[function(t,e,n){e.exports=function(t){if(!t||!t.type)return null;var e=i[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null};var i={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],20:[function(t,e,n){"use strict";function i(t,e,n){this.vertices=t,this.adjacent=e,this.boundary=n,this.lastVisited=-1}function r(t,e,n){this.vertices=t,this.cell=e,this.index=n}function s(t,e){return u(t.vertices,e.vertices)}function o(t){for(var e=["function orient(){var tuple=this.tuple;return test("],n=0;n<=t;++n)n>0&&e.push(","),e.push("tuple[",n,"]");e.push(")}return orient");var i=new Function("test",e.join("")),r=l[t+1];return r||(r=l),i(r)}function a(t,e,n){this.dimension=t,this.vertices=e,this.simplices=n,this.interior=n.filter(function(t){return!t.boundary}),this.tuple=new Array(t+1);for(var i=0;i<=t;++i)this.tuple[i]=this.vertices[i];var r=h[t];r||(r=h[t]=o(t)),this.orient=r}e.exports=function(t,e){var n=t.length;if(0===n)throw new Error("Must have at least d+1 points");var r=t[0].length;if(n<=r)throw new Error("Must input at least d+1 points");var s=t.slice(0,r+1),o=l.apply(void 0,s);if(0===o)throw new Error("Input not in general position");for(var u=new Array(r+1),h=0;h<=r;++h)u[h]=h;o<0&&(u[0]=1,u[1]=0);for(var c=new i(u,new Array(r+1),!1),d=c.adjacent,f=new Array(r+2),h=0;h<=r;++h){for(var g=u.slice(),p=0;p<=r;++p)p===h&&(g[p]=-1);var m=g[0];g[0]=g[1],g[1]=m;var v=new i(g,new Array(r+1),!0);d[h]=v,f[h]=v}f[r+1]=c;for(h=0;h<=r;++h)for(var g=d[h].vertices,y=d[h].adjacent,p=0;p<=r;++p){var x=g[p];if(x<0)y[p]=c;else for(var b=0;b<=r;++b)d[b].vertices.indexOf(x)<0&&(y[p]=d[b])}for(var E=new a(r,s,f),I=!!e,h=r+1;h<n;++h)E.insert(t[h],I);return E.boundary()};var l=t("robust-orientation"),u=t("simplicial-complex").compareCells;i.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var h=[],c=a.prototype;c.handleBoundaryDegeneracy=function(t,e){var n=this.dimension,i=this.vertices.length-1,r=this.tuple,s=this.vertices,o=[t];for(t.lastVisited=-i;o.length>0;)for(var a=((t=o.pop()).vertices,t.adjacent),l=0;l<=n;++l){var u=a[l];if(u.boundary&&!(u.lastVisited<=-i)){for(var h=u.vertices,c=0;c<=n;++c){var d=h[c];r[c]=d<0?e:s[d]}var f=this.orient();if(f>0)return u;u.lastVisited=-i,0===f&&o.push(u)}}return null},c.walk=function(t,e){var n=this.vertices.length-1,i=this.dimension,r=this.vertices,s=this.tuple,o=e?this.interior.length*Math.random()|0:this.interior.length-1,a=this.interior[o];t:for(;!a.boundary;){for(var l=a.vertices,u=a.adjacent,h=0;h<=i;++h)s[h]=r[l[h]];a.lastVisited=n;for(h=0;h<=i;++h){var c=u[h];if(!(c.lastVisited>=n)){var d=s[h];s[h]=t;var f=this.orient();if(s[h]=d,f<0){a=c;continue t}c.boundary?c.lastVisited=-n:c.lastVisited=n}}return}return a},c.addPeaks=function(t,e){var n=this.vertices.length-1,o=this.dimension,a=this.vertices,l=this.tuple,u=this.interior,h=this.simplices,c=[e];e.lastVisited=n,e.vertices[e.vertices.indexOf(-1)]=n,e.boundary=!1,u.push(e);for(var d=[];c.length>0;){var f=(e=c.pop()).vertices,g=e.adjacent,p=f.indexOf(n);if(!(p<0))for(L=0;L<=o;++L)if(L!==p){var m=g[L];if(m.boundary&&!(m.lastVisited>=n)){var v=m.vertices;if(m.lastVisited!==-n){for(var y=0,x=0;x<=o;++x)v[x]<0?(y=x,l[x]=t):l[x]=a[v[x]];if(this.orient()>0){v[y]=n,m.boundary=!1,u.push(m),c.push(m),m.lastVisited=n;continue}m.lastVisited=-n}var b=m.adjacent,E=f.slice(),I=g.slice(),C=new i(E,I,!0);h.push(C);var w=b.indexOf(e);if(!(w<0)){b[w]=C,I[p]=m,E[L]=-1,I[L]=e,g[L]=C,C.flip();for(x=0;x<=o;++x){var M=E[x];if(!(M<0||M===n)){for(var S=new Array(o-1),N=0,_=0;_<=o;++_){var T=E[_];T<0||_===x||(S[N++]=T)}d.push(new r(S,C,x))}}}}}}d.sort(s);for(var L=0;L+1<d.length;L+=2){var P=d[L],R=d[L+1],O=P.index,D=R.index;O<0||D<0||(P.cell.adjacent[P.index]=R.cell,R.cell.adjacent[R.index]=P.cell)}},c.insert=function(t,e){var n=this.vertices;n.push(t);var i=this.walk(t,e);if(i){for(var r=this.dimension,s=this.tuple,o=0;o<=r;++o){var a=i.vertices[o];s[o]=a<0?t:n[a]}var l=this.orient(s);l<0||(0!==l||(i=this.handleBoundaryDegeneracy(i,t)))&&this.addPeaks(t,i)}},c.boundary=function(){for(var t=this.dimension,e=[],n=this.simplices,i=n.length,r=0;r<i;++r){var s=n[r];if(s.boundary){for(var o=new Array(t),a=s.vertices,l=0,u=0,h=0;h<=t;++h)a[h]>=0?o[l++]=a[h]:u=1&h;if(u===(1&t)){var c=o[0];o[0]=o[1],o[1]=c}e.push(o)}}return e}},{"robust-orientation":23,"simplicial-complex":27}],21:[function(t,e,n){!function(t,i){i("object"==typeof n&&void 0!==e?n:t.jsts=t.jsts||{})}(this,function(t){"use strict";function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function n(){}function i(){}function r(){}function s(){}function o(){}function a(){}function l(){}function u(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}function h(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function c(){if(0===arguments.length)u.call(this);else if(1===arguments.length){var t=arguments[0];u.call(this,t)}}function d(){}function f(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)f.call(this,0,0);else if(1===arguments.length){var t=arguments[0];f.call(this,t.x,t.y,t.z)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];f.call(this,e,n,f.NULL_ORDINATE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this.x=i,this.y=r,this.z=s}}function g(){if(this.dimensionsToTest=2,0===arguments.length)g.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new i("only 2 or 3 dimensions may be specified");this.dimensionsToTest=t}}function p(){}function m(){}function v(t){this.message=t||""}function y(){}function x(t){this.message=t||""}function b(t){this.message=t||""}function E(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function I(){if(E.apply(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}function C(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof f){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];this.init(r,s,o,a)}}function w(){}function M(){w.call(this,"Projective point not representable on the Cartesian plane.")}function S(){}function N(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function _(){}function T(t){this.str=t}function L(t){this.value=t}function P(){}function R(){if(this.hi=0,this.lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof R){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];R.call(this,R.parse(n))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}}function O(){}function D(){}function k(){}function A(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof A&&arguments[1]instanceof A){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w,this.y=r.x*i.w-i.x*r.w,this.w=i.x*r.y-r.x*i.y}else if(arguments[0]instanceof f&&arguments[1]instanceof f){var s=arguments[0],o=arguments[1];this.x=s.y-o.y,this.y=o.x-s.x,this.w=s.x*o.y-o.x*s.y}}else if(3===arguments.length){var a=arguments[0],l=arguments[1],u=arguments[2];this.x=a,this.y=l,this.w=u}else if(4===arguments.length){var h=arguments[0],c=arguments[1],d=arguments[2],g=arguments[3],p=h.y-c.y,m=c.x-h.x,v=h.x*c.y-c.x*h.y,y=d.y-g.y,x=g.x-d.x,b=d.x*g.y-g.x*d.y;this.x=m*b-x*v,this.y=y*v-p*b,this.w=p*x-y*m}}function F(){}function B(){}function V(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function G(){}function z(){}function q(){}function j(){}function Y(){}function W(){}function U(){}function H(){}function X(){}function K(){}function Z(){}function J(){}function Q(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function $(t){return null==t?zs:t.color}function tt(t){return null==t?null:t.parent}function et(t,e){null!==t&&(t.color=e)}function nt(t){return null==t?null:t.left}function it(t){return null==t?null:t.right}function rt(){this.root_=null,this.size_=0}function st(){}function ot(){}function at(){this.array_=[],arguments[0]instanceof m&&this.addAll(arguments[0])}function lt(){}function ut(){}function ht(){}function ct(){}function dt(){this.geometries=null;var t=arguments[0],e=arguments[1];if(V.call(this,e),null===t&&(t=[]),V.hasNullElements(t))throw new i("geometries must not contain null elements");this.geometries=t}function ft(){var t=arguments[0],e=arguments[1];dt.call(this,t,e)}function gt(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length){var t=arguments[0];gt.call(this,t,z.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function pt(){this.count=null}function mt(){}function vt(){}function yt(){}function xt(){}function bt(){}function Et(){}function It(){}function Ct(){this.points=null;var t=arguments[0],e=arguments[1];V.call(this,e),this.init(t)}function wt(){}function Mt(){this.coordinates=null;var t=arguments[0],e=arguments[1];V.call(this,e),this.init(t)}function St(){}function Nt(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(V.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),V.hasNullElements(e))throw new i("holes must not contain null elements");if(t.isEmpty()&&V.hasNonEmptyElements(e))throw new i("shell is empty but holes are not");this.shell=t,this.holes=e}function _t(){var t=arguments[0],e=arguments[1];dt.call(this,t,e)}function Tt(){if(arguments[0]instanceof f&&arguments[1]instanceof Ut){var t=arguments[0],e=arguments[1];Tt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(N(arguments[0],D)&&arguments[1]instanceof Ut){var n=arguments[0],i=arguments[1];Ct.call(this,n,i),this.validateConstruction()}}function Lt(){var t=arguments[0],e=arguments[1];dt.call(this,t,e)}function Pt(){if(this.factory=null,this.isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.factory=t}}function Rt(){}function Ot(){}function Dt(){}function kt(){}function At(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];At.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(a=0;e>a;a++)this.coordinates[a]=new f}else if(N(arguments[0],D)){var n=arguments[0];if(null===n)return this.coordinates=new Array(0).fill(null),null;this.dimension=n.getDimension(),this.coordinates=new Array(n.size()).fill(null);for(a=0;a<this.coordinates.length;a++)this.coordinates[a]=n.getCoordinateCopy(a)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1];this.coordinates=i,this.dimension=r,null===i&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],o=arguments[1];this.coordinates=new Array(s).fill(null),this.dimension=o;for(var a=0;s>a;a++)this.coordinates[a]=new f}}function Ft(){}function Bt(t,e){return t===e||t!==t&&e!==e}function Vt(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}function Gt(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||0===e)for(js=t.length;js--&&!Bt(t[js],e););else js=t.indexOf(e);return js>-1}function zt(t,e,n){var i=[0],r=!1;return t.push(i),{next:function(){var s,o=i[0];return!r&&o<e.length?(s=n?[e[o],n[o]]:e[o],i[0]++):(r=!0,t.splice(t.indexOf(i),1)),{done:r,value:s}}}}function qt(){return this._values.length}function jt(){this.map_=new Us}function Yt(){if(this.modelType=null,this.scale=null,0===arguments.length)this.modelType=Yt.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Wt){var t=arguments[0];this.modelType=t,t===Yt.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this.modelType=Yt.FIXED,this.setScale(e)}else if(arguments[0]instanceof Yt){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}function Wt(){this.name=null;var t=arguments[0];this.name=t,Wt.nameToTypeMap.put(t,this)}function Ut(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length)Ut.call(this,new Yt,0);else if(1===arguments.length){if(N(arguments[0],F)){var t=arguments[0];Ut.call(this,new Yt,0,t)}else if(arguments[0]instanceof Yt){var e=arguments[0];Ut.call(this,e,0,Ut.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];Ut.call(this,n,i,Ut.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.precisionModel=r,this.coordinateSequenceFactory=o,this.SRID=s}}function Ht(t){this.geometryFactory=t||new Ut}function Xt(t){this.parser=new Ht(t)}function Kt(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new f,this.intPt[1]=new f,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function Zt(){Kt.apply(this)}function Jt(){}function Qt(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function $t(){}function te(){if(this.p0=null,this.p1=null,0===arguments.length)te.call(this,new f,new f);else if(1===arguments.length){var t=arguments[0];te.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];te.call(this,new f(i,r),new f(s,o))}}function ee(){if(this.matrix=null,0===arguments.length)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(ut.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];ee.call(this),this.set(t)}else if(arguments[0]instanceof ee){var e=arguments[0];ee.call(this),this.matrix[S.INTERIOR][S.INTERIOR]=e.matrix[S.INTERIOR][S.INTERIOR],this.matrix[S.INTERIOR][S.BOUNDARY]=e.matrix[S.INTERIOR][S.BOUNDARY],this.matrix[S.INTERIOR][S.EXTERIOR]=e.matrix[S.INTERIOR][S.EXTERIOR],this.matrix[S.BOUNDARY][S.INTERIOR]=e.matrix[S.BOUNDARY][S.INTERIOR],this.matrix[S.BOUNDARY][S.BOUNDARY]=e.matrix[S.BOUNDARY][S.BOUNDARY],this.matrix[S.BOUNDARY][S.EXTERIOR]=e.matrix[S.BOUNDARY][S.EXTERIOR],this.matrix[S.EXTERIOR][S.INTERIOR]=e.matrix[S.EXTERIOR][S.INTERIOR],this.matrix[S.EXTERIOR][S.BOUNDARY]=e.matrix[S.EXTERIOR][S.BOUNDARY],this.matrix[S.EXTERIOR][S.EXTERIOR]=e.matrix[S.EXTERIOR][S.EXTERIOR]}}function ne(){this.areaBasePt=null,this.triangleCent3=new f,this.areasum2=0,this.cg3=new f,this.lineCentSum=new f,this.totalLength=0,this.ptCount=0,this.ptCentSum=new f;var t=arguments[0];this.areaBasePt=null,this.add(t)}function ie(t){this.message=t||""}function re(){this.array_=[]}function se(){this.treeSet=new at,this.list=new E}function oe(){if(this.geomFactory=null,this.inputPts=null,1===arguments.length){var t=arguments[0];oe.call(this,oe.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputPts=se.filterCoordinates(e),this.geomFactory=n}}function ae(){this.origin=null;var t=arguments[0];this.origin=t}function le(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function ue(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new te,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Ct&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];ue.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.srcPts=n,this._isClosed=ue.isClosed(n),this.snapTolerance=i}}function he(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function ce(){if(le.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.snapTolerance=n,this.snapPts=i,this.isSelfSnap=r}}function de(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function fe(){this.commonCoord=null,this.ccFilter=new ge}function ge(){this.commonBitsX=new de,this.commonBitsY=new de}function pe(){this.trans=null;var t=arguments[0];this.trans=t}function me(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function ve(){if(this.boundaryRule=z.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new i("Rule must be non-null");this.boundaryRule=t}}function ye(){}function xe(){}function be(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Ee(){}function Ie(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function Ce(){this._size=null,this.items=null,this._size=0,this.items=new E,this.items.add(null)}function we(){}function Me(){}function Se(){if(this.childBoundables=new E,this.bounds=null,this.level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.level=t}}function Ne(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function _e(){if(this.root=null,this.built=!1,this.itemBoundables=new E,this.nodeCapacity=null,0===arguments.length)_e.call(this,_e.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];d.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function Te(){}function Le(){if(0===arguments.length)Le.call(this,Le.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];_e.call(this,t)}}function Pe(){var t=arguments[0];Se.call(this,t)}function Re(){}function Oe(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.segString=t,this.coord=new f(e),this.segmentIndex=n,this.segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}function De(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function ke(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function Ae(){}function Fe(){this.nodeList=new De(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Be(){this.tempEnv1=new C,this.tempEnv2=new C,this.overlapSeg1=new te,this.overlapSeg2=new te}function Ve(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=i}function Ge(){}function ze(){}function qe(){}function je(){if(this.segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}function Ye(){if(this.monoChains=new E,this.index=new Le,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];je.call(this,t)}}function We(){Be.apply(this),this.si=null;var t=arguments[0];this.si=t}function Ue(){if(this.pt=null,1===arguments.length){var t=arguments[0];u.call(this,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];u.call(this,Ue.msgWithCoord(e,n)),this.name="TopologyException",this.pt=new f(n)}}function He(){}function Xe(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new E,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function Ke(){this.li=new Zt,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function Ze(){this.nv=null;var t=arguments[0];this.nv=new Ke(Ze.toSegmentStrings(t))}function Je(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function Qe(){}function $e(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[Qe.ON]=e}else if(arguments[0]instanceof $e){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.init(3),this.location[Qe.ON]=r,this.location[Qe.LEFT]=s,this.location[Qe.RIGHT]=o}}function tn(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new $e(t),this.elt[1]=new $e(t)}else if(arguments[0]instanceof tn){var e=arguments[0];this.elt[0]=new $e(e.elt[0]),this.elt[1]=new $e(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new $e(S.NONE),this.elt[1]=new $e(S.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.elt[0]=new $e(r,s,o),this.elt[1]=new $e(r,s,o)}else if(4===arguments.length){var a=arguments[0],l=arguments[1],u=arguments[2],h=arguments[3];this.elt[0]=new $e(S.NONE,S.NONE,S.NONE),this.elt[1]=new $e(S.NONE,S.NONE,S.NONE),this.elt[a].setLocations(l,u,h)}}function en(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new E,this.pts=new E,this.label=new tn(S.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new E,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function nn(){var t=arguments[0],e=arguments[1];en.call(this,t,e)}function rn(){var t=arguments[0],e=arguments[1];en.call(this,t,e)}function sn(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.label=t}}function on(){sn.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new tn(0,S.NONE)}function an(){this.nodeMap=new rt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function ln(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length){var t=arguments[0];this.edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];ln.call(this,e,n,i,null)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];ln.call(this,r),this.init(s,o),this.label=a}}function un(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(ln.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function hn(){}function cn(){if(this.edges=new E,this.nodes=null,this.edgeEndList=new E,0===arguments.length)this.nodes=new an(new hn);else if(1===arguments.length){var t=arguments[0];this.nodes=new an(t)}}function dn(){this.geometryFactory=null,this.shellList=new E;var t=arguments[0];this.geometryFactory=t}function fn(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new E,this.resultLineList=new E;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function gn(){this.op=null,this.geometryFactory=null,this.resultPointList=new E;var t=arguments[0],e=arguments[1];arguments[2],this.op=t,this.geometryFactory=e}function pn(){}function mn(){this.geom=null;var t=arguments[0];this.geom=t}function vn(){this.edgeMap=new rt,this.edgeList=null,this.ptInAreaLocation=[S.NONE,S.NONE]}function yn(){vn.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function xn(){hn.apply(this)}function bn(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function En(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.eventType=En.DELETE,this.xValue=t,this.insertEvent=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.eventType=En.INSERT,this.label=n,this.xValue=i,this.obj=r}}function In(){}function Cn(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function wn(){In.apply(this),this.events=new E,this.nOverlaps=null}function Mn(){this.min=r.POSITIVE_INFINITY,this.max=r.NEGATIVE_INFINITY}function Sn(){}function Nn(){Mn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function _n(){Mn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function Tn(){this.leaves=new E,this.root=null,this.level=0}function Ln(){if(this.lines=null,this.isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this.lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function Pn(){this.items=new E}function Rn(){this.index=null;var t=arguments[0];if(!N(t,St))throw new i("Argument must be Polygonal");this.index=new Dn(t)}function On(){this.counter=null;var t=arguments[0];this.counter=t}function Dn(){this.index=new Tn;var t=arguments[0];this.init(t)}function kn(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new f(t),this.segmentIndex=e,this.dist=n}function An(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function Fn(){}function Bn(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new C,this.env2=new C;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Fn;this.startIndex=e.getChainStartIndices(this.pts)}function Vn(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;2>t;t++)for(var e=0;3>e;e++)this.depth[t][e]=Vn.NULL_VALUE}function Gn(){if(sn.apply(this),this.pts=null,this.env=null,this.eiList=new An(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Vn,this.depthDelta=0,1===arguments.length){var t=arguments[0];Gn.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function zn(){if(cn.apply(this),this.parentGeom=null,this.lineEdgeMap=new jt,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new ve,2===arguments.length){var t=arguments[0],e=arguments[1];zn.call(this,t,e,z.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.argIndex=n,this.parentGeom=i,this.boundaryNodeRule=r,null!==i&&this.add(i)}}function qn(){if(this.li=new Zt,this.resultPrecisionModel=null,this.arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new zn(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];qn.call(this,e,n,z.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new zn(0,i,s),this.arg[1]=new zn(1,r,s)}}function jn(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=jn.orientation(t)}function Yn(){this.edges=new E,this.ocaMap=new rt}function Wn(){this.ptLocator=new ve,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new Yn,this.resultPolyList=new E,this.resultLineList=new E,this.resultPointList=new E;var t=arguments[0],e=arguments[1];qn.call(this,t,e),this.graph=new cn(new xn),this.geomFact=t.getFactory()}function Un(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function Hn(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function Xn(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function Kn(){this.poly=null,this.centreY=null,this.hiY=r.MAX_VALUE,this.loY=-r.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=Xn.avg(this.loY,this.hiY)}function Zn(){this.centroid=null,this.minDistance=r.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.interiorPoint&&this.addEndpoints(t)}function Jn(){this.centroid=null,this.minDistance=r.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function Qn(){this.tempEnv1=new C,this.selectedSegment=new te}function $n(){this.items=new E,this.subnode=[null,null]}function ti(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.init(e,n)}}function ei(){}function ni(t,e){var n,i,r,s,o={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},a={32:8,64:11}[t];if(s||(n=0>e||0>1/e,isFinite(e)||(s=o[t],n&&(s.d+=1<<t/4-1),i=Math.pow(2,a)-1,r=0)),!s){for(i={32:127,64:1023}[t],r=Math.abs(e);r>=2;)i++,r/=2;for(;1>r&&i>0;)i--,r*=2;0>=i&&(r/=2),32===t&&i>254&&(s={d:n?255:127,c:128,b:0,a:0},i=Math.pow(2,a)-1,r=0)}return i}function ii(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function ri(){$n.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function si(){}function oi(){$n.apply(this)}function ai(){this.root=null,this.minExtent=1,this.root=new oi}function li(){}function ui(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new ti;var t=arguments[0];this.ring=t,this.buildIndex()}function hi(){Qn.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function ci(){}function di(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function fi(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function gi(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new te,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,1===arguments.length){var t=arguments[0];gi.call(this,t,!1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function pi(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function mi(){le.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function vi(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function yi(){this._isMarked=!1;var t=arguments[0];vi.call(this,t)}function xi(){this.vertexMap=new jt}function bi(){this._isStart=!1;var t=arguments[0];yi.call(this,t)}function Ei(){xi.apply(this)}function Ii(){this.result=null,this.factory=null,this.graph=null,this.lines=new E,this.nodeEdgeStack=new re,this.ringStartEdge=null,this.graph=new Ei}function Ci(){this.items=new E,this.subnode=new Array(4).fill(null)}function wi(){this.pt=new f,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function Mi(){Ci.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function Si(){Ci.apply(this)}function Ni(){this.root=null,this.minExtent=1,this.root=new Si}function _i(t){this.geometryFactory=t||new Ut}function Ti(t){this.geometryFactory=t||new Ut,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new _i(this.geometryFactory)}function Li(){this.parser=new _i(this.geometryFactory)}function Pi(t){this.geometryFactory=t||new Ut,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ht(this.geometryFactory)}function Ri(t){return[t.x,t.y]}function Oi(t){this.geometryFactory=t||new Ut}function Di(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];Di.call(this,t,e,0,0)}else if(4===arguments.length){var n=arguments[0],i=arguments[1];arguments[2],arguments[3],this.noder=n,this.scaleFactor=i,this.isScaled=!this.isIntegerPrecision()}}function ki(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this.inputGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function Ai(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function Fi(){if(this.quadrantSegments=Fi.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Fi.CAP_ROUND,this.joinStyle=Fi.JOIN_ROUND,this.mitreLimit=Fi.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=Fi.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(r),this.setJoinStyle(s),this.setMitreLimit(o)}}function Bi(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function Vi(){this.array_=[]}function Gi(){this.finder=null,this.dirEdgeList=new E,this.nodes=new E,this.rightMostCoord=null,this.env=null,this.finder=new Bi}function zi(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=$t.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function qi(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new E}function ji(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new te,this.seg1=new te,this.offset0=new te,this.offset1=new te,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new Zt,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Fi.JOIN_ROUND&&(this.closingSegLengthFactor=ji.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function Yi(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function Wi(){this.subgraphs=null,this.seg=new te,this.cga=new $t;var t=arguments[0];this.subgraphs=t}function Ui(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new te(t),this.leftDepth=e}function Hi(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new E;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function Xi(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function Ki(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new Yn;var t=arguments[0];this.bufParams=t}function Zi(){this.li=new Zt,this.segStrings=null;var t=arguments[0];this.segStrings=t}function Ji(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,0>=e)throw new i("Scale factor must be non-zero");1!==e&&(this.pt=new f(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new f,this.p1Scaled=new f),this.initCorners(this.pt)}function Qi(){this.index=null;var t=arguments[0];this.index=t}function $i(){Qn.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function tr(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new E}function er(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new Zt,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function nr(){if(this.argGeom=null,this.distance=null,this.bufParams=new Fi,this.resultGeometry=null,this.saveException=null,1===arguments.length){var t=arguments[0];this.argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function ir(){this.comps=null;var t=arguments[0];this.comps=t}function rr(){if(this.component=null,this.segIndex=null,this.pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];rr.call(this,t,rr.INSIDE_AREA,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.component=n,this.segIndex=i,this.pt=r}}function sr(){this.pts=null;var t=arguments[0];this.pts=t}function or(){this.locations=null;var t=arguments[0];this.locations=t}function ar(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new ve,this.minDistanceLocation=null,this.minDistance=r.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];ar.call(this,t,e,0)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],s=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=i,this.terminateDistance=s}}function lr(){this.factory=null,this.directedEdges=new E,this.coordinates=null;var t=arguments[0];this.factory=t}function ur(){this._isMarked=!1,this._isVisited=!1,this.data=null}function hr(){ur.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.from=t,this.to=e,this.edgeDirection=i,this.p0=t.getCoordinate(),this.p1=n;var r=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y;this.quadrant=Ge.quadrant(r,s),this.angle=Math.atan2(s,r)}function cr(){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];hr.call(this,t,e,n,i)}function dr(){if(ur.apply(this),this.dirEdge=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}function fr(){this.outEdges=new E,this.sorted=!1}function gr(){if(ur.apply(this),this.pt=null,this.deStar=null,1===arguments.length){var t=arguments[0];gr.call(this,t,new fr)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function pr(){dr.apply(this),this.line=null;var t=arguments[0];this.line=t}function mr(){this.nodeMap=new rt}function vr(){this.edges=new Q,this.dirEdges=new Q,this.nodeMap=new mr}function yr(){vr.apply(this)}function xr(){this.graph=new yr,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function br(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];hr.call(this,t,e,n,i)}function Er(){dr.apply(this),this.line=null;var t=arguments[0];this.line=t}function Ir(){this.factory=null,this.deList=new E,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function Cr(){}function wr(){vr.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function Mr(){if(this.lineStringAdder=new Sr(this),this.graph=null,this.dangles=new E,this.cutEdges=new E,this.invalidRingLines=new E,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,0===arguments.length)Mr.call(this,!1);else if(1===arguments.length){var t=arguments[0];this.extractOnlyPolygonal=t}}function Sr(){this.p=null;var t=arguments[0];this.p=t}function Nr(){}function _r(){if(this.edgeEnds=new E,1===arguments.length){var t=arguments[0];_r.call(this,null,t)}else if(2===arguments.length){var e=(arguments[0],arguments[1]);ln.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new tn(e.getLabel())),this.insert(e)}}function Tr(){vn.apply(this)}function Lr(){var t=arguments[0],e=arguments[1];on.call(this,t,e)}function Pr(){hn.apply(this)}function Rr(){this.li=new Zt,this.ptLocator=new ve,this.arg=null,this.nodes=new an(new Pr),this.im=null,this.isolatedEdges=new E,this.invalidPoint=null;var t=arguments[0];this.arg=t}function Or(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function Dr(){this.li=new Zt,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new f(t.getMinX(),t.getMinY()),this.diagUp1=new f(t.getMaxX(),t.getMaxY()),this.diagDown0=new f(t.getMinX(),t.getMaxY()),this.diagDown1=new f(t.getMaxX(),t.getMinY())}function kr(){this._isDone=!1}function Ar(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function Fr(){kr.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function Br(){kr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function Vr(){kr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new f,this.p1=new f;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new Dr(this.rectEnv)}function Gr(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];qn.call(this,t,e),this._relate=new Rr(this.arg)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];qn.call(this,n,i,r),this._relate=new Rr(this.arg)}}function zr(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=zr.extractFactory(t),this.inputGeoms=t}function qr(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function jr(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Yr(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,null===this.inputPolys&&(this.inputPolys=new E)}function Wr(){if(this.polygons=new E,this.lines=new E,this.points=new E,this.geomFact=null,1===arguments.length){if(N(arguments[0],m)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof V){var e=arguments[0];this.extract(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.geomFact=i,this.extract(n)}}function Ur(){this.geometryFactory=new Ut,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Hr(){this.nodes=new an(new Pr)}function Xr(){this.li=new Zt,this.geomGraph=null,this.nodeGraph=new Hr,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function Kr(){this.graph=null,this.rings=new E,this.totalEnv=new C,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function Zr(){if(this.errorType=null,this.pt=null,1===arguments.length){var t=arguments[0];Zr.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.errorType=e,null!==n&&(this.pt=n.copy())}}function Jr(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function Qr(){Pt.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function $r(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function ts(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new te;var t=arguments[0];this.pts=t}function es(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function ns(){le.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function is(){if(this.parent=null,this.index=null,2===arguments.length){var t=arguments[0],e=arguments[1];is.call(this,t,e,null,-1)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3];te.call(this,n,i),this.parent=r,this.index=s}}function rs(){if(this.parentLine=null,this.segs=null,this.resultSegs=new E,this.minimumSize=null,1===arguments.length){var t=arguments[0];rs.call(this,t,2)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function ss(){this.index=new Ni}function os(){this.querySeg=null,this.items=new E;var t=arguments[0];this.querySeg=t}function as(){this.li=new Zt,this.inputIndex=new ss,this.outputIndex=new ss,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function ls(){this.inputIndex=new ss,this.outputIndex=new ss,this.distanceTolerance=0}function us(){this.inputGeom=null,this.lineSimplifier=new ls,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function hs(){le.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function cs(){this.tps=null;var t=arguments[0];this.tps=t}function ds(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function fs(){}function gs(){}function ps(){}function ms(){if(this.p=null,1===arguments.length){var t=arguments[0];this.p=new f(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p=new f(e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this.p=new f(i,r,s)}}function vs(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];ms.call(this,t)}function ys(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function xs(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function bs(){}function Es(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function Is(){if(this.seg=null,1===arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];u.call(this,t)}else if(arguments[0]instanceof te){var e=arguments[0];u.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new te(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];u.call(this,Is.msgWithSpatial(n,i)),this.seg=new te(i)}}function Cs(){}function ws(){this.visitedKey=0,this.quadEdges=new E,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new te,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/ws.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new Es(this)}function Ms(){}function Ss(){this.triList=new E}function Ns(){this.triList=new E}function _s(){this.coordList=new I,this.triCoords=new E}function Ts(){if(this.ls=null,this.data=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.ls=new te(t,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.ls=new te(n,i),this.data=r}else if(6===arguments.length){var s=arguments[0],o=arguments[1],a=arguments[2],l=arguments[3],u=arguments[4],h=arguments[5];Ts.call(this,new f(s,o,a),new f(l,u,h))}else if(7===arguments.length){var c=arguments[0],d=arguments[1],g=arguments[2],p=arguments[3],m=arguments[4],v=arguments[5],y=arguments[6];Ts.call(this,new f(c,d,g),new f(p,m,v),y)}}function Ls(){}function Ps(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.p=new f(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.p=new f(n,i),this.left=null,this.right=null,this.count=1,this.data=r}}function Rs(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,0===arguments.length)Rs.call(this,0);else if(1===arguments.length){var t=arguments[0];this.tolerance=t}}function Os(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function Ds(){this.initialVertices=null,this.segVertices=null,this.segments=new E,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new gs,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new E(t),this.tolerance=e,this.kdt=new Rs(e)}function ks(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function As(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new rt}function Fs(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function Bs(){}Array.prototype.fill||(Array.prototype.fill=function(t){for(var e=Object(this),n=parseInt(e.length,10),i=arguments[1],r=parseInt(i,10)||0,s=0>r?Math.max(n+r,0):Math.min(r,n),o=arguments[2],a=void 0===o?n:parseInt(o,10)||0,l=0>a?Math.max(n+a,0):Math.min(a,n);l>s;s++)e[s]=t;return e}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return 0>t?Math.ceil(t):Math.floor(t)},e(n.prototype,{interfaces_:function(){return[]},getClass:function(){return n}}),n.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},r.isNaN=function(t){return Number.isNaN(t)},r.doubleToLongBits=function(t){return t},r.longBitsToDouble=function(t){return t},r.isInfinite=function(t){return!Number.isFinite(t)},r.MAX_VALUE=Number.MAX_VALUE,u.prototype=Object.create(Error.prototype),u.prototype.constructor=Error,h(c,u),e(c.prototype,{interfaces_:function(){return[]},getClass:function(){return c}}),e(d.prototype,{interfaces_:function(){return[]},getClass:function(){return d}}),d.shouldNeverReachHere=function(){if(0===arguments.length)d.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new c("Should never reach here"+(null!==t?": "+t:""))}},d.isTrue=function(){if(1===arguments.length){var t=arguments[0];d.isTrue(t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!e)throw null===n?new c:new c(n)}},d.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];d.equals(t,e,null)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(!i.equals(n))throw new c("Expected "+n+" but encountered "+i+(null!==r?": "+r:""))}},e(f.prototype,{setOrdinate:function(t,e){switch(t){case f.X:this.x=e;break;case f.Y:this.y=e;break;case f.Z:this.z=e;break;default:throw new i("Invalid ordinate index: "+t)}},equals2D:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!n.equalsWithTolerance(this.x,e.x,i)&&!!n.equalsWithTolerance(this.y,e.y,i)}},getOrdinate:function(t){switch(t){case f.X:return this.x;case f.Y:return this.y;case f.Z:return this.z}throw new i("Invalid ordinate index: "+t)},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||r.isNaN(this.z)&&r.isNaN(t.z))},equals:function(t){return t instanceof f&&this.equals2D(t)},equalInZ:function(t,e){return n.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return d.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}},copy:function(){return new f(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+f.hashCode(this.x),t=37*t+f.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[s,o,l]},getClass:function(){return f}}),f.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=r.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},e(g.prototype,{compare:function(t,e){var n=t,i=e,r=g.compare(n.x,i.x);if(0!==r)return r;var s=g.compare(n.y,i.y);return 0!==s?s:this.dimensionsToTest<=2?0:g.compare(n.z,i.z)},interfaces_:function(){return[a]},getClass:function(){return g}}),g.compare=function(t,e){return e>t?-1:t>e?1:r.isNaN(t)?r.isNaN(e)?0:-1:r.isNaN(e)?1:0},f.DimensionalComparator=g,f.serialVersionUID=0x5cbf2c235c7e5800,f.NULL_ORDINATE=r.NaN,f.X=0,f.Y=1,f.Z=2,p.prototype.hasNext=function(){},p.prototype.next=function(){},p.prototype.remove=function(){},m.prototype.add=function(){},m.prototype.addAll=function(){},m.prototype.isEmpty=function(){},m.prototype.iterator=function(){},m.prototype.size=function(){},m.prototype.toArray=function(){},m.prototype.remove=function(){},(v.prototype=new Error).name="IndexOutOfBoundsException",(y.prototype=Object.create(m.prototype)).constructor=y,y.prototype.get=function(){},y.prototype.set=function(){},y.prototype.isEmpty=function(){},(x.prototype=new Error).name="NoSuchElementException",(b.prototype=new Error).name="OperationNotSupported",E.prototype=Object.create(y.prototype),E.prototype.constructor=E,E.prototype.ensureCapacity=function(){},E.prototype.interfaces_=function(){return[y,m]},E.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},E.prototype.clear=function(){this.array_=[]},E.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},E.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},E.prototype.iterator=function(){return new Vs(this)},E.prototype.get=function(t){if(0>t||t>=this.size())throw new v;return this.array_[t]},E.prototype.isEmpty=function(){return 0===this.array_.length},E.prototype.size=function(){return this.array_.length},E.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},E.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;i>n;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var Vs=function(t){this.arrayList_=t,this.position_=0};Vs.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new x;return this.arrayList_.get(this.position_++)},Vs.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Vs.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},Vs.prototype.remove=function(){throw new b},h(I,E),e(I.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=!1,i=t.iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return E.prototype.addAll.apply(this,arguments)},clone:function(){for(var t=E.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},toCoordinateArray:function(){return this.toArray(I.coordArrayType)},add:function(){if(1===arguments.length){var t=arguments[0];E.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof f&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;E.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var r=arguments[0],s=arguments[1];return this.add(r,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];if(arguments[2])for(v=0;v<o.length;v++)this.add(o[v],a);else for(v=o.length-1;v>=0;v--)this.add(o[v],a);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof f){var l=arguments[0],u=arguments[1];if(!arguments[2]){var h=this.size();if(h>0){if(l>0&&this.get(l-1).equals2D(u))return null;if(h>l&&this.get(l).equals2D(u))return null}}E.prototype.add.call(this,l,u)}}else if(4===arguments.length){var c=arguments[0],d=arguments[1],g=arguments[2],p=arguments[3],m=1;g>p&&(m=-1);for(var v=g;v!==p;v+=m)this.add(c[v],d);return!0}},closeRing:function(){this.size()>0&&this.add(new f(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return I}}),I.coordArrayType=new Array(0).fill(null),e(C.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof C))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new C;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny;return new C(e,this.maxx<t.maxx?this.maxx:t.maxx,n,this.maxy<t.maxy?this.maxy:t.maxy)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof f){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof C){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this.minx&&n<=this.maxx&&i>=this.miny&&i<=this.maxy}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof f){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this.maxx||n<this.minx||i>this.maxy||i<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof f){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=i,this.maxy=i):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),i<this.miny&&(this.miny=i),i>this.maxy&&(this.maxy=i))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e>t?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof f){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},centre:function(){return this.isNull()?null:new f((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof f){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];s>r?(this.minx=r,this.maxx=s):(this.minx=s,this.maxx=r),a>o?(this.miny=o,this.maxy=a):(this.miny=a,this.maxy=o)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+f.hashCode(this.minx),t=37*t+f.hashCode(this.maxx),t=37*t+f.hashCode(this.miny),t=37*t+f.hashCode(this.maxy)},interfaces_:function(){return[s,l]},getClass:function(){return C}}),C.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=Math.min(s.x,o.x),l=Math.max(s.x,o.x),u=Math.min(i.x,r.x),h=Math.max(i.x,r.x);return!(u>l||a>h||(a=Math.min(s.y,o.y),l=Math.max(s.y,o.y),u=Math.min(i.y,r.y),h=Math.max(i.y,r.y),u>l||a>h))}},C.serialVersionUID=0x51845cd552189800,h(M,w),e(M.prototype,{interfaces_:function(){return[]},getClass:function(){return M}}),e(S.prototype,{interfaces_:function(){return[]},getClass:function(){return S}}),S.toLocationSymbol=function(t){switch(t){case S.EXTERIOR:return"e";case S.BOUNDARY:return"b";case S.INTERIOR:return"i";case S.NONE:return"-"}throw new i("Unknown location value: "+t)},S.INTERIOR=0,S.BOUNDARY=1,S.EXTERIOR=2,S.NONE=-1,e(_.prototype,{interfaces_:function(){return[]},getClass:function(){return _}}),_.log10=function(t){var e=Math.log(t);return r.isInfinite(e)?e:r.isNaN(e)?e:e/_.LOG_10},_.min=function(t,e,n,i){var r=t;return r>e&&(r=e),r>n&&(r=n),r>i&&(r=i),r},_.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return e>t?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],s=arguments[2];return r>i?r:i>s?s:i}},_.wrap=function(t,e){return 0>t?e- -t%e:t%e},_.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return e>(a=t)&&(a=e),n>a&&(a=n),a}if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=i;return r>a&&(a=r),s>a&&(a=s),o>a&&(a=o),a}},_.average=function(t,e){return(t+e)/2},_.LOG_10=Math.log(10),T.prototype.append=function(t){this.str+=t},T.prototype.setCharAt=function(t,e){return this.str.substr(0,t)+e+this.str.substr(t+1)},T.prototype.toString=function(t){return this.str},L.prototype.intValue=function(){return this.value},L.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},L.isNaN=function(t){return Number.isNaN(t)},P.isWhitespace=function(t){return 32>=t&&t>=0||127==t},P.toUpperCase=function(t){return t.toUpperCase()},e(R.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),i=R.magnitude(n.hi),r=R.TEN.pow(i);(n=n.divide(r)).gt(R.TEN)?(n=n.divide(R.TEN),i+=1):n.lt(R.ONE)&&(n=n.multiply(R.TEN),i-=1);for(var s=i+1,o=new T,a=R.MAX_PRINT_DIGITS-1,l=0;a>=l;l++){t&&l===s&&o.append(".");var u=Math.trunc(n.hi);if(0>u)break;var h=!1,c=0;u>9?(h=!0,c="9"):c="0"+u,o.append(c),n=n.subtract(R.valueOf(u)).multiply(R.TEN),h&&n.selfAdd(R.TEN);var d=!0,f=R.magnitude(n.hi);if(0>f&&Math.abs(f)>=a-l&&(d=!1),!d)break}return e[0]=i,o.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof R){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},equals:function(){if(1===arguments.length){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return 0===this.hi&&0===this.lo},selfSubtract:function(){if(arguments[0]instanceof R){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof R){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,s=null,o=null,a=null,l=null,u=null,h=null,c=null;return l=this.hi/n,u=R.SPLIT*l,r=u-l,c=R.SPLIT*n,r=u-r,s=l-r,o=c-n,h=l*n,o=c-o,a=n-o,c=r*o-h+r*a+s*o+s*a,u=(this.hi-h-c+this.lo-l*i)/n,c=l+u,this.hi=c,this.lo=l-c+u,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof R){var t=arguments[0],e=null,n=null,i=null,s=null,o=null,a=null,l=null,u=null;return n=(o=this.hi/t.hi)-(e=(a=R.SPLIT*o)-(e=a-o)),u=e*(i=(u=R.SPLIT*t.hi)-(i=u-t.hi))-(l=o*t.hi)+e*(s=t.hi-i)+n*i+n*s,new R(u=o+(a=(this.hi-l-u+this.lo-o*t.lo)/t.hi),o-u+a)}if("number"==typeof arguments[0]){var h=arguments[0];return r.isNaN(h)?R.createNaN():R.copy(this).selfDivide(h,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(0===t)return R.valueOf(1);var e=new R(this),n=R.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return 0>t?n.reciprocal():n},ceil:function(){if(this.isNaN())return R.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new R(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){return this.isNaN()?this:this.add(.5).floor()},setValue:function(){if(arguments[0]instanceof R){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return R.valueOf(0);if(this.isNegative())return R.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=R.valueOf(e),i=this.subtract(n.sqr()).hi*(.5*t);return n.add(i)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof R){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,s=null,o=null,a=null;return r=this.hi+e,o=r-this.hi,s=r-o,s=e-o+(this.hi-s),a=s+this.lo,n=r+a,i=a+(r-n),this.hi=n+i,this.lo=i+(n-this.hi),this}}else if(2===arguments.length){var l=arguments[0],u=arguments[1],n=null,i=null,h=null,c=null,r=null,s=null,o=null,a=null;r=this.hi+l,h=this.lo+u,s=r-(o=r-this.hi),c=h-(a=h-this.lo);var d=(n=r+(o=(s=l-o+(this.hi-s))+h))+(o=(c=u-a+(this.lo-c))+(i=o+(r-n))),f=o+(n-d);return this.hi=d,this.lo=f,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof R){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,s=null,o=null,a=null,l=null,u=null;r=(l=R.SPLIT*this.hi)-this.hi,u=R.SPLIT*n,r=l-r,s=this.hi-r,o=u-n;var h=(l=this.hi*n)+(u=r*(o=u-o)-l+r*(a=n-o)+s*o+s*a+(this.hi*i+this.lo*n)),c=u+(r=l-h);return this.hi=h,this.lo=c,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return R.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new R(t,e)},negate:function(){return this.isNaN()?this:new R(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}},multiply:function(){if(arguments[0]instanceof R){var t=arguments[0];return t.isNaN()?R.createNaN():R.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return r.isNaN(e)?R.createNaN():R.copy(this).selfMultiply(e,0)}},isNaN:function(){return r.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=R.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(0>i)r="0."+R.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var s=i-n.length;r=n+R.stringOfChar("0",s)+".0"}return this.isNegative()?"-"+r:r},reciprocal:function(){var t=null,e=null,n=null,i=null,r=null,s=null,o=null,a=null;e=(r=1/this.hi)-(t=(s=R.SPLIT*r)-(t=s-r)),n=(a=R.SPLIT*this.hi)-this.hi;var l=r+(s=(1-(o=r*this.hi)-(a=t*(n=a-n)-o+t*(i=this.hi-n)+e*n+e*i)-r*this.lo)/this.hi);return new R(l,r-l+s)},toSciNotation:function(){if(this.isZero())return R.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=R.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var s=n.charAt(0)+"."+r;return this.isNegative()?"-"+s+i:s+i},abs:function(){return this.isNaN()?R.NaN:this.isNegative()?this.negate():new R(this)},isPositive:function(){return this.hi>0||0===this.hi&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof R){var t=arguments[0];return R.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return R.copy(this).selfAdd(e)}},init:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof R){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.hi=n,this.lo=i}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||0===this.hi&&this.lo<0},trunc:function(){return this.isNaN()?R.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[l,s,o]},getClass:function(){return R}}),R.sqr=function(t){return R.valueOf(t).selfMultiply(t)},R.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return R.parse(t)}if("number"==typeof arguments[0])return new R(arguments[0])},R.sqrt=function(t){return R.valueOf(t).sqrt()},R.parse=function(t){for(var e=0,n=t.length;P.isWhitespace(t.charAt(e));)e++;var i=!1;if(n>e){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var s=new R,o=0,a=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,P.isDigit(u)){var h=u-"0";s.selfMultiply(R.TEN),s.selfAdd(h),o++}else{if("."!==u){if("e"===u||"E"===u){var c=t.substring(e);try{l=L.parseInt(c)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+c+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+u+"' at position "+e+" in string "+t)}a=o}}var d=s,f=o-a-l;if(0===f)d=s;else if(f>0){g=R.TEN.pow(f);d=s.divide(g)}else if(0>f){var g=R.TEN.pow(-f);d=s.multiply(g)}return i?d.negate():d},R.createNaN=function(){return new R(r.NaN,r.NaN)},R.copy=function(t){return new R(t)},R.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return e>=10*Math.pow(10,i)&&(i+=1),i},R.stringOfChar=function(t,e){for(var n=new T,i=0;e>i;i++)n.append(t);return n.toString()},R.PI=new R(3.141592653589793,1.2246467991473532e-16),R.TWO_PI=new R(6.283185307179586,2.4492935982947064e-16),R.PI_2=new R(1.5707963267948966,6.123233995736766e-17),R.E=new R(2.718281828459045,1.4456468917292502e-16),R.NaN=new R(r.NaN,r.NaN),R.EPS=1.23259516440783e-32,R.SPLIT=134217729,R.MAX_PRINT_DIGITS=32,R.TEN=R.valueOf(10),R.ONE=R.valueOf(1),R.SCI_NOT_EXPONENT_CHAR="E",R.SCI_NOT_ZERO="0.0E0",e(O.prototype,{interfaces_:function(){return[]},getClass:function(){return O}}),O.orientationIndex=function(t,e,n){var i=O.orientationIndexFilter(t,e,n);if(1>=i)return i;var r=R.valueOf(e.x).selfAdd(-t.x),s=R.valueOf(e.y).selfAdd(-t.y),o=R.valueOf(n.x).selfAdd(-e.x),a=R.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(s.selfMultiply(o)).signum()},O.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},O.intersection=function(t,e,n,i){var r=R.valueOf(i.y).selfSubtract(n.y).selfMultiply(R.valueOf(e.x).selfSubtract(t.x)),s=R.valueOf(i.x).selfSubtract(n.x).selfMultiply(R.valueOf(e.y).selfSubtract(t.y)),o=r.subtract(s),a=R.valueOf(i.x).selfSubtract(n.x).selfMultiply(R.valueOf(t.y).selfSubtract(n.y)),l=R.valueOf(i.y).selfSubtract(n.y).selfMultiply(R.valueOf(t.x).selfSubtract(n.x)),u=a.subtract(l).selfDivide(o).doubleValue(),h=R.valueOf(t.x).selfAdd(R.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),c=R.valueOf(e.x).selfSubtract(t.x).selfMultiply(R.valueOf(t.y).selfSubtract(n.y)),d=R.valueOf(e.y).selfSubtract(t.y).selfMultiply(R.valueOf(t.x).selfSubtract(n.x)),g=c.subtract(d).selfDivide(o).doubleValue();return new f(h,R.valueOf(n.y).selfAdd(R.valueOf(i.y).selfSubtract(n.y).selfMultiply(g)).doubleValue())},O.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),s=(t.y-n.y)*(e.x-n.x),o=r-s;if(r>0){if(0>=s)return O.signum(o);i=r+s}else{if(!(0>r))return O.signum(o);if(s>=0)return O.signum(o);i=-r-s}var a=O.DP_SAFE_EPSILON*i;return o>=a||-o>=a?O.signum(o):2},O.signum=function(t){return t>0?1:0>t?-1:0},O.DP_SAFE_EPSILON=1e-15,e(D.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[o]},getClass:function(){return D}}),D.X=0,D.Y=1,D.Z=2,D.M=3,k.arraycopy=function(t,e,n,i,r){for(var s=0,o=e;e+r>o;o++)n[i+s]=t[o],s++},k.getProperty=function(t){return{"line.separator":"\n"}[t]},e(A.prototype,{getY:function(){var t=this.y/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new M;return t},getX:function(){var t=this.x/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new M;return t},getCoordinate:function(){var t=new f;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return A}}),A.intersection=function(t,e,n,i){var s=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,l=n.y-i.y,u=i.x-n.x,h=n.x*i.y-i.x*n.y,c=s*u-l*o,d=(o*h-u*a)/c,g=(l*a-s*h)/c;if(r.isNaN(d)||r.isInfinite(d)||r.isNaN(g)||r.isInfinite(g))throw new M;return new f(d,g)},e(F.prototype,{create:function(){1===arguments.length?arguments[0]instanceof Array?arguments[0]:N(arguments[0],D)&&arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return F}}),e(B.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return B}}),e(V.prototype,{isGeometryCollection:function(){return this.getSortIndex()===V.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof V))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(V.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return null!==t&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,i)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===V.SORTINDEX_GEOMETRYCOLLECTION)throw new i("This method does not support GeometryCollection arguments")},equal:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new C(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),s=i.next(),o=r.compareTo(s);if(0!==o)return o}return n.hasNext()?1:i.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===V.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===V.SORTINDEX_MULTIPOINT||this.getSortIndex()===V.SORTINDEX_MULTILINESTRING||this.getSortIndex()===V.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[o,s,l]},getClass:function(){return V}}),V.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},V.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},V.serialVersionUID=0x799ea46522854c00,V.SORTINDEX_POINT=0,V.SORTINDEX_MULTIPOINT=1,V.SORTINDEX_LINESTRING=2,V.SORTINDEX_LINEARRING=3,V.SORTINDEX_MULTILINESTRING=4,V.SORTINDEX_POLYGON=5,V.SORTINDEX_MULTIPOLYGON=6,V.SORTINDEX_GEOMETRYCOLLECTION=7,V.geometryChangedFilter={interfaces_:function(){return[B]},filter:function(t){t.geometryChangedAction()}},e(G.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return G}}),e(z.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return z}}),e(q.prototype,{isInBoundary:function(t){return t%2==1},interfaces_:function(){return[z]},getClass:function(){return q}}),e(j.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[z]},getClass:function(){return j}}),e(Y.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[z]},getClass:function(){return Y}}),e(W.prototype,{isInBoundary:function(t){return 1===t},interfaces_:function(){return[z]},getClass:function(){return W}}),z.Mod2BoundaryNodeRule=q,z.EndPointBoundaryNodeRule=j,z.MultiValentEndPointBoundaryNodeRule=Y,z.MonoValentEndPointBoundaryNodeRule=W,z.MOD2_BOUNDARY_RULE=new q,z.ENDPOINT_BOUNDARY_RULE=new j,z.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new Y,z.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new W,z.OGC_SFS_BOUNDARY_RULE=z.MOD2_BOUNDARY_RULE,e(U.prototype,{interfaces_:function(){return[]},getClass:function(){return U}}),U.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},U.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(U.indexOf(i,e)<0)return i}return null},U.scroll=function(t,e){var n=U.indexOf(e,t);if(0>n)return null;var i=new Array(t.length).fill(null);k.arraycopy(t,n,i,0,t.length-n),k.arraycopy(t,0,i,t.length-n,n),k.arraycopy(i,0,t,0,t.length)},U.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(s=0;s<t.length;s++)if(!t[s].equals(e[s]))return!1;return!0}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(n===i)return!0;if(null===n||null===i)return!1;if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++)if(0!==r.compare(n[s],i[s]))return!1;return!0}},U.intersection=function(t,e){for(var n=new I,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},U.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},U.removeRepeatedPoints=function(t){return U.hasRepeatedPoints(t)?new I(t,!1).toCoordinateArray():t},U.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;n>=i;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},U.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,n=0;n<t.length;n++)null!==t[n]&&(i[r++]=t[n]);return i},U.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new f(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3],a=arguments[4],n=0;a>n;n++)s[o+n]=new f(i[r+n])},U.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},U.envelope=function(t){for(var e=new C,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},U.toCoordinateArray=function(t){return t.toArray(U.coordArrayType)},U.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},U.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},U.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},U.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},U.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},U.extract=function(t,e,n){e=_.clamp(e,0,t.length);var i=(n=_.clamp(n,-1,t.length))-e+1;0>n&&(i=0),e>=t.length&&(i=0),e>n&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var s=0,o=e;n>=o;o++)r[s++]=t[o];return r},e(H.prototype,{compare:function(t,e){var n=t,i=e;return U.compare(n,i)},interfaces_:function(){return[a]},getClass:function(){return H}}),e(X.prototype,{compare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=U.compare(n,i);return U.isEqualReversed(n,i)?0:r},OLDcompare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=U.increasingDirection(n),s=U.increasingDirection(i),o=r>0?0:n.length-1,a=s>0?0:n.length-1,l=0;l<n.length;l++){var u=n[o].compareTo(i[a]);if(0!==u)return u;o+=r,a+=s}return 0},interfaces_:function(){return[a]},getClass:function(){return X}}),U.ForwardComparator=H,U.BidirectionalComparator=X,U.coordArrayType=new Array(0).fill(null),K.prototype.get=function(){},K.prototype.put=function(){},K.prototype.size=function(){},K.prototype.values=function(){},K.prototype.entrySet=function(){},Z.prototype=new K,(J.prototype=new m).contains=function(){},Q.prototype=new J,Q.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++)if(this.array_[e]===t)return!0;return!1},Q.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},Q.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Q.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},Q.prototype.size=function(){return this.array_.length},Q.prototype.isEmpty=function(){return 0===this.array_.length},Q.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},Q.prototype.iterator=function(){return new Gs(this)};var Gs=function(t){this.hashSet_=t,this.position_=0};Gs.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new x;return this.hashSet_.array_[this.position_++]},Gs.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Gs.prototype.remove=function(){throw new b};var zs=0;rt.prototype=new Z,rt.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(0>n)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},rt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:zs,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,0>(i=t.compareTo(r.key)))r=r.left;else{if(!(i>0)){var s=r.value;return r.value=e,s}r=r.right}}while(null!==r);var o={key:t,left:null,right:null,value:e,parent:n,color:zs,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>i?n.left=o:n.right=o,this.fixAfterInsertion(o),this.size_++,null},rt.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;)if(tt(t)==nt(tt(tt(t))))1==$(e=it(tt(tt(t))))?(et(tt(t),zs),et(e,zs),et(tt(tt(t)),1),t=tt(tt(t))):(t==it(tt(t))&&(t=tt(t),this.rotateLeft(t)),et(tt(t),zs),et(tt(tt(t)),1),this.rotateRight(tt(tt(t))));else{var e=nt(tt(tt(t)));1==$(e)?(et(tt(t),zs),et(e,zs),et(tt(tt(t)),1),t=tt(tt(t))):(t==nt(tt(t))&&(t=tt(t),this.rotateRight(t)),et(tt(t),zs),et(tt(tt(t)),1),this.rotateLeft(tt(tt(t))))}this.root_.color=zs},rt.prototype.values=function(){var t=new E,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=rt.successor(e));)t.add(e.value);return t},rt.prototype.entrySet=function(){var t=new Q,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=rt.successor(e));)t.add(e);return t},rt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},rt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},rt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},rt.successor=function(t){if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}for(var e=t.parent,n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e},rt.prototype.size=function(){return this.size_},e(st.prototype,{interfaces_:function(){return[]},getClass:function(){return st}}),ot.prototype=new J,at.prototype=new ot,at.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},at.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;n>e;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},at.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},at.prototype.remove=function(t){throw new b},at.prototype.size=function(){return this.array_.length},at.prototype.isEmpty=function(){return 0===this.array_.length},at.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},at.prototype.iterator=function(){return new qs(this)};var qs=function(t){this.treeSet_=t,this.position_=0};qs.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new x;return this.treeSet_.array_[this.position_++]},qs.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},qs.prototype.remove=function(){throw new b},lt.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)return i=function(t,e){return t.compareTo(e)},void r.sort(i);if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else{if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var s=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<s.length;t++)r.push(s[t]);return}if(4===arguments.length){for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),s=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<s.length;t++)r.push(s[t]);return}}},lt.asList=function(t){for(var e=new E,n=0,i=t.length;i>n;n++)e.add(t[n]);return e},e(ut.prototype,{interfaces_:function(){return[]},getClass:function(){return ut}}),ut.toDimensionSymbol=function(t){switch(t){case ut.FALSE:return ut.SYM_FALSE;case ut.TRUE:return ut.SYM_TRUE;case ut.DONTCARE:return ut.SYM_DONTCARE;case ut.P:return ut.SYM_P;case ut.L:return ut.SYM_L;case ut.A:return ut.SYM_A}throw new i("Unknown dimension value: "+t)},ut.toDimensionValue=function(t){switch(P.toUpperCase(t)){case ut.SYM_FALSE:return ut.FALSE;case ut.SYM_TRUE:return ut.TRUE;case ut.SYM_DONTCARE:return ut.DONTCARE;case ut.SYM_P:return ut.P;case ut.SYM_L:return ut.L;case ut.SYM_A:return ut.A}throw new i("Unknown dimension symbol: "+t)},ut.P=0,ut.L=1,ut.A=2,ut.FALSE=-1,ut.TRUE=-2,ut.DONTCARE=-3,ut.SYM_FALSE="F",ut.SYM_TRUE="T",ut.SYM_DONTCARE="*",ut.SYM_P="0",ut.SYM_L="1",ut.SYM_A="2",e(ht.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return ht}}),e(ct.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ct}}),h(dt,V),e(dt.prototype,{computeEnvelopeInternal:function(){for(var t=new C,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return V.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var i=this.geometries[n].getCoordinates(),r=0;r<i.length;r++)e++,t[e]=i[r];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var i=0;i<this.geometries.length;i++)if(!this.geometries[i].equalsExact(n.geometries[i],e))return!1;return!0}return V.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();lt.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=ut.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=ut.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=new at(lt.asList(this.geometries)),n=new at(lt.asList(t.geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],s=i,o=this.getNumGeometries(),a=s.getNumGeometries(),l=0;o>l&&a>l;){var u=this.getGeometryN(l),h=s.getGeometryN(l),c=u.compareToSameClass(h,r);if(0!==c)return c;l++}return o>l?1:a>l?-1:0}},apply:function(){if(N(arguments[0],G))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(N(arguments[0],ct)){var n=arguments[0];if(0===this.geometries.length)return null;for(e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],ht)){var i=arguments[0];i.filter(this);for(e=0;e<this.geometries.length;e++)this.geometries[e].apply(i)}else if(N(arguments[0],B)){var r=arguments[0];r.filter(this);for(e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}},getBoundary:function(){return this.checkNotGeometryCollection(this),d.shouldNeverReachHere(),null},clone:function(){var t=V.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new dt(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return dt}}),dt.serialVersionUID=-0x4f07bcb1f857d800,h(ft,dt),e(ft.prototype,{getSortIndex:function(){return V.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&dt.prototype.equalsExact.call(this,t,e)}return dt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?ut.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new gt(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ft(t,this.factory)},interfaces_:function(){return[st]},getClass:function(){return ft}}),ft.serialVersionUID=0x7155d2ab4afa8000,e(gt.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof Ct?this.boundaryLineString(this.geom):this.geom instanceof ft?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){return this.geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this.bnRule.isInBoundary(2)?t.getStartPoint():this.geomFact.createMultiPoint():this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new E;this.endpointMap=new rt;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this.endpointMap.entrySet().iterator();r.hasNext();){var s=r.next(),o=s.getValue().count;this.bnRule.isInBoundary(o)&&e.add(s.getKey())}return U.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);null===e&&(e=new pt,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return gt}}),gt.getBoundary=function(){if(1===arguments.length)return(t=new gt(arguments[0])).getBoundary();if(2===arguments.length){var t=new gt(arguments[0],arguments[1]);return t.getBoundary()}},e(pt.prototype,{interfaces_:function(){return[]},getClass:function(){return pt}}),e(Et.prototype,{interfaces_:function(){return[]},getClass:function(){return Et}}),Et.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;e>i;i++)n[i]=t;return new String(n)},Et.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new yt,n=new mt(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],s="",o=new bt(new vt(Et.getStackTrace(i))),a=0;r>a;a++)try{s+=o.readLine()+Et.NEWLINE}catch(t){if(!(t instanceof xt))throw t;d.shouldNeverReachHere()}return s}},Et.split=function(t,e){for(var n=e.length,i=new E,r=""+t,s=r.indexOf(e);s>=0;){var o=r.substring(0,s);i.add(o),s=(r=r.substring(s+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),l=0;l<a.length;l++)a[l]=i.get(l);return a},Et.toString=function(){if(1===arguments.length){var t=arguments[0];return Et.SIMPLE_ORDINATE_FORMAT.format(t)}},Et.spaces=function(t){return Et.chars(" ",t)},Et.NEWLINE=k.getProperty("line.separator"),Et.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),e(It.prototype,{interfaces_:function(){return[]},getClass:function(){return It}}),It.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),s=0;r>s;s++)n.setOrdinate(i,s,t.getOrdinate(e,s))},It.isRing=function(t){var e=t.size();return 0===e||!(3>=e)&&t.getOrdinate(0,D.X)===t.getOrdinate(e-1,D.X)&&t.getOrdinate(0,D.Y)===t.getOrdinate(e-1,D.Y)},It.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),s=0;n>s;s++)for(var o=0;i>o;o++){var a=t.getOrdinate(s,o),l=e.getOrdinate(s,o);if(!(t.getOrdinate(s,o)===e.getOrdinate(s,o)||r.isNaN(a)&&r.isNaN(l)))return!1}return!0},It.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(It.copy(e,0,i,0,r),r>0)for(var s=r;n>s;s++)It.copy(e,r-1,i,s,1);return i},It.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;n>=i;i++)It.swap(t,i,e-i)},It.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},It.copy=function(t,e,n,i,r){for(var s=0;r>s;s++)It.copyCoord(t,e+s,n,i+s)},It.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new T;i.append("(");for(var r=0;e>r;r++){r>0&&i.append(" ");for(var s=0;n>s;s++)s>0&&i.append(","),i.append(Et.toString(t.getOrdinate(r,s)))}return i.append(")"),i.toString()}},It.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:3>=n?It.createClosedRing(t,e,4):e.getOrdinate(0,D.X)===e.getOrdinate(n-1,D.X)&&e.getOrdinate(0,D.Y)===e.getOrdinate(n-1,D.Y)?e:It.createClosedRing(t,e,n+1)},It.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();It.copy(e,0,i,0,r);for(var s=r;n>s;s++)It.copy(e,0,i,s,1);return i},h(Ct,V),e(Ct.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new C:this.points.expandEnvelope(new C)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return V.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var i=0;i<this.points.size();i++)if(!this.equal(this.points.getCoordinate(i),n.points.getCoordinate(i),e))return!1;return!0}return V.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&It.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?ut.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return $t.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();return It.reverse(t),this.getFactory().createLineString(t)},compareToSameClass:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this.points.size()&&n<t.points.size();){var i=this.points.getCoordinate(e).compareTo(t.points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this.points.size()?1:n<t.points.size()?-1:0}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this.points,t.points)}},apply:function(){if(N(arguments[0],G))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(N(arguments[0],ct)){var n=arguments[0];if(0===this.points.size())return null;for(e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else N(arguments[0],ht)?arguments[0].filter(this):N(arguments[0],B)&&arguments[0].filter(this)},getBoundary:function(){return new gt(this).getBoundary()},isEquivalentClass:function(t){return t instanceof Ct},clone:function(){var t=V.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new Ct(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return 0===this.points.size()},init:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new i("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[st]},getClass:function(){return Ct}}),Ct.serialVersionUID=0x2b2b51ba435c8e00,e(wt.prototype,{interfaces_:function(){return[]},getClass:function(){return wt}}),h(Mt,V),e(Mt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new C;var t=new C;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return V.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return V.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return ut.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var t=arguments[0];return arguments[1].compare(this.coordinates,t.coordinates)}},apply:function(){if(N(arguments[0],G)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(N(arguments[0],ct)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else N(arguments[0],ht)?arguments[0].filter(this):N(arguments[0],B)&&arguments[0].filter(this)},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=V.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new Mt(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this.coordinates.size()},init:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),d.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[wt]},getClass:function(){return Mt}}),Mt.serialVersionUID=0x44077bad161cbc00,e(St.prototype,{interfaces_:function(){return[]},getClass:function(){return St}}),h(Nt,V),e(Nt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return V.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),i=0;i<n.length;i++)e++,t[e]=n[i];for(var r=0;r<this.holes.length;r++)for(var s=this.holes[r].getCoordinates(),o=0;o<s.length;o++)e++,t[e]=s[o];return t},getArea:function(){var t=0;t+=Math.abs($t.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs($t.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;5>n;n++){if((s=t.getX(n))!==e.getMinX()&&s!==e.getMaxX())return!1;if((o=t.getY(n))!==e.getMinY()&&o!==e.getMaxY())return!1}for(var i=t.getX(0),r=t.getY(0),n=1;4>=n;n++){var s=t.getX(n),o=t.getY(n);if(s!==i===(o!==r))return!1;i=s,r=o}return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this.shell,r=n.shell;if(!i.equalsExact(r,e))return!1;if(this.holes.length!==n.holes.length)return!1;for(var s=0;s<this.holes.length;s++)if(!this.holes[s].equalsExact(n.holes[s],e))return!1;return!0}return V.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(0===arguments.length){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);lt.sort(this.holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);k.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=U.minCoordinate(e.getCoordinates());U.scroll(i,r),k.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],$t.isCCW(e.getCoordinates())===n&&U.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],s=i,e=this.shell,n=s.shell,o=e.compareToSameClass(n,r);if(0!==o)return o;for(var a=this.getNumInteriorRing(),l=s.getNumInteriorRing(),u=0;a>u&&l>u;){var h=this.getInteriorRingN(u),c=s.getInteriorRingN(u),d=h.compareToSameClass(c,r);if(0!==d)return d;u++}return a>u?1:l>u?-1:0}},apply:function(){if(N(arguments[0],G)){var t=arguments[0];this.shell.apply(t);for(i=0;i<this.holes.length;i++)this.holes[i].apply(t)}else if(N(arguments[0],ct)){var e=arguments[0];if(this.shell.apply(e),!e.isDone())for(i=0;i<this.holes.length&&(this.holes[i].apply(e),!e.isDone());i++);e.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],ht))arguments[0].filter(this);else if(N(arguments[0],B)){var n=arguments[0];n.filter(this),this.shell.apply(n);for(var i=0;i<this.holes.length;i++)this.holes[i].apply(n)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=V.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new Nt(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[St]},getClass:function(){return Nt}}),Nt.serialVersionUID=-0x307ffefd8dc97200,h(_t,dt),e(_t.prototype,{getSortIndex:function(){return V.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&dt.prototype.equalsExact.call(this,t,e)}return dt.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.geometries[t].getCoordinate()}return dt.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return ut.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new _t(t,this.factory)},interfaces_:function(){return[wt]},getClass:function(){return _t}}),_t.serialVersionUID=-0x6fb1ed4162e0fc00,h(Tt,Ct),e(Tt.prototype,{getSortIndex:function(){return V.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return ut.FALSE},isClosed:function(){return!!this.isEmpty()||Ct.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();return It.reverse(t),this.getFactory().createLinearRing(t)},validateConstruction:function(){if(!this.isEmpty()&&!Ct.prototype.isClosed.call(this))throw new i("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<Tt.MINIMUM_VALID_SIZE)throw new i("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new Tt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Tt}}),Tt.MINIMUM_VALID_SIZE=4,Tt.serialVersionUID=-0x3b229e262367a600,h(Lt,dt),e(Lt.prototype,{getSortIndex:function(){return V.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&dt.prototype.equalsExact.call(this,t,e)}return dt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new E,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],i=n.getBoundary(),r=0;r<i.getNumGeometries();r++)t.add(i.getGeometryN(r));var s=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(s))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Lt(t,this.factory)},interfaces_:function(){return[St]},getClass:function(){return Lt}}),Lt.serialVersionUID=-0x7a5aa1369171980,e(Pt.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return null===this.factory&&(this.factory=t.getFactory()),t instanceof dt?this.editGeometryCollection(t,e):t instanceof Nt?this.editPolygon(t,e):t instanceof Mt?e.edit(t,this.factory):t instanceof Ct?e.edit(t,this.factory):(d.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),i=new E,r=0;r<n.getNumGeometries();r++){var s=this.edit(n.getGeometryN(r),e);null===s||s.isEmpty()||i.add(s)}return n.getClass()===_t?this.factory.createMultiPoint(i.toArray([])):n.getClass()===ft?this.factory.createMultiLineString(i.toArray([])):n.getClass()===Lt?this.factory.createMultiPolygon(i.toArray([])):this.factory.createGeometryCollection(i.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this.factory.createPolygon();for(var r=new E,s=0;s<n.getNumInteriorRing();s++){var o=this.edit(n.getInteriorRingN(s),e);null===o||o.isEmpty()||r.add(o)}return this.factory.createPolygon(i,r.toArray([]))},interfaces_:function(){return[]},getClass:function(){return Pt}}),Pt.GeometryEditorOperation=Rt,e(Ot.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Rt]},getClass:function(){return Ot}}),e(Dt.prototype,{edit:function(t,e){if(t instanceof Tt)return e.createLinearRing(this.editCoordinates(t.getCoordinates(),t));if(t instanceof Ct)return e.createLineString(this.editCoordinates(t.getCoordinates(),t));if(t instanceof Mt){var n=this.editCoordinates(t.getCoordinates(),t);return n.length>0?e.createPoint(n[0]):e.createPoint()}return t},interfaces_:function(){return[Rt]},getClass:function(){return Dt}}),e(kt.prototype,{edit:function(t,e){return t instanceof Tt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Ct?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Mt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Rt]},getClass:function(){return kt}}),Pt.NoOpGeometryOperation=Ot,Pt.CoordinateOperation=Dt,Pt.CoordinateSequenceOperation=kt,e(At.prototype,{setOrdinate:function(t,e,n){switch(e){case D.X:this.coordinates[t].x=n;break;case D.Y:this.coordinates[t].y=n;break;case D.Z:this.coordinates[t].z=n;break;default:throw new i("invalid ordinateIndex")}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case D.X:return this.coordinates[t].x;case D.Y:return this.coordinates[t].y;case D.Z:return this.coordinates[t].z}return r.NaN},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new f(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new At(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new At(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new T(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[D,l]},getClass:function(){return At}}),At.serialVersionUID=-0xcb44a778db18e00,e(Ft.prototype,{readResolve:function(){return Ft.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new At(arguments[0]);if(N(arguments[0],D))return new At(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),2>e?new At(t):new At(t,e)}},interfaces_:function(){return[F,l]},getClass:function(){return Ft}}),Ft.instance=function(){return Ft.instanceObject},Ft.serialVersionUID=-0x38e49fa6cf6f2e00,Ft.instanceObject=new Ft;var js,Ys=Object.defineProperty,Ws=function(t,e){function n(t){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(t&&Vt.call(this,t))):new n(t)}return e||Ys(t,"size",{get:qt}),t.constructor=n,n.prototype=t,n}({delete:function(t){return this.has(t)&&(this._keys.splice(js,1),this._values.splice(js,1),this._itp.forEach(function(t){js<t[0]&&t[0]--})),js>-1},has:function(t){return Gt.call(this,this._keys,t)},get:function(t){return this.has(t)?this._values[js]:void 0},set:function(t,e){return this.has(t)?this._values[js]=e:this._values[this._keys.push(t)-1]=e,this},keys:function(){return zt(this._itp,this._keys)},values:function(){return zt(this._itp,this._values)},entries:function(){return zt(this._itp,this._keys,this._values)},forEach:function(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}}),Us="undefined"!=typeof Map&&Map.prototype.values?Map:Ws;jt.prototype=new K,jt.prototype.get=function(t){return this.map_.get(t)||null},jt.prototype.put=function(t,e){return this.map_.set(t,e),e},jt.prototype.values=function(){for(var t=new E,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},jt.prototype.entrySet=function(){var t=new Q;return this.map_.entries().forEach(function(e){return t.add(e)}),t},jt.prototype.size=function(){return this.map_.size()},e(Yt.prototype,{equals:function(t){if(!(t instanceof Yt))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new L(n).compareTo(new L(i))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===Yt.FLOATING||this.modelType===Yt.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===Yt.FLOATING?t="Floating":this.modelType===Yt.FLOATING_SINGLE?t="Floating-Single":this.modelType===Yt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if("number"==typeof arguments[0]){var t=arguments[0];return r.isNaN(t)?t:this.modelType===Yt.FLOATING_SINGLE?t:this.modelType===Yt.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof f){var e=arguments[0];if(this.modelType===Yt.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===Yt.FLOATING?t=16:this.modelType===Yt.FLOATING_SINGLE?t=6:this.modelType===Yt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[l,s]},getClass:function(){return Yt}}),Yt.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},e(Wt.prototype,{readResolve:function(){return Wt.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[l]},getClass:function(){return Wt}}),Wt.serialVersionUID=-552860263173159e4,Wt.nameToTypeMap=new jt,Yt.Type=Wt,Yt.serialVersionUID=0x6bee6404e9a25c00,Yt.FIXED=new Wt("FIXED"),Yt.FLOATING=new Wt("FLOATING"),Yt.FLOATING_SINGLE=new Wt("FLOATING SINGLE"),Yt.maximumPreciseValue=9007199254740992,e(Ut.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new f(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new f(t.getMinX(),t.getMinY()),new f(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new f(t.getMinX(),t.getMinY()),new f(t.getMinX(),t.getMaxY()),new f(t.getMaxX(),t.getMaxY()),new f(t.getMaxX(),t.getMinY()),new f(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],D))return new Ct(arguments[0],this)}},createMultiLineString:function(){return 0===arguments.length?new ft(null,this):1===arguments.length?new ft(arguments[0],this):void 0},buildGeometry:function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var s=r.next(),o=s.getClass();null===e&&(e=o),o!==e&&(n=!0),s.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(Ut.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Nt)return this.createMultiPolygon(Ut.toPolygonArray(t));if(a instanceof Ct)return this.createMultiLineString(Ut.toLineStringArray(t));if(a instanceof Mt)return this.createMultiPoint(Ut.toPointArray(t));d.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},createMultiPointFromCoords:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof f){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(N(arguments[0],D))return new Mt(arguments[0],this)}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return new Nt(null,null,this);if(1===arguments.length){if(N(arguments[0],D)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Tt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Nt(arguments[0],arguments[1],this)},getSRID:function(){return this.SRID},createGeometryCollection:function(){return 0===arguments.length?new dt(null,this):1===arguments.length?new dt(arguments[0],this):void 0},createGeometry:function(t){return new Pt(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return arguments[1],this.coordinateSequenceFactory.create(t)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],D))return new Tt(arguments[0],this)}},createMultiPolygon:function(){return 0===arguments.length?new Lt(null,this):1===arguments.length?new Lt(arguments[0],this):void 0},createMultiPoint:function(){if(0===arguments.length)return new _t(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new _t(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],D)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),i=0;i<e.size();i++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension());It.copy(e,i,r,0,1),n[i]=this.createPoint(r)}return this.createMultiPoint(n)}}},interfaces_:function(){return[l]},getClass:function(){return Ut}}),Ut.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ut.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Ut.getDefaultCoordinateSequenceFactory=function(){return Ft.instance()},Ut.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ut.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ut.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ut.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ut.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ut.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ut.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Ut.serialVersionUID=-0x5ea75f2051eeb400;var Hs={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};e(Ht.prototype,{read:function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=Hs.typeStr.exec(t);if(-1!==t.search("EMPTY")&&(r=Hs.emptyTypeStr.exec(t),r[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],Ks[n]&&(e=Ks[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!Xs[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Xs[e].apply(this,[t])+")"}});var Xs={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Xs.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push("("+Xs.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;i>n;++n)e.push(Xs.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;i>n;++n)e.push(Xs.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push("("+Xs.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Xs.linestring.apply(this,[t.shell])+")");for(var n=0,i=t.holes.length;i>n;++n)e.push("("+Xs.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push("("+Xs.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},Ks={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Hs.spaces);return this.geometryFactory.createPoint(new f(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,s=n.length;s>r;++r)e=n[r].replace(Hs.trimParens,"$1"),i.push(Ks.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,s=n.length;s>r;++r)e=n[r].trim().split(Hs.spaces),i.push(new f(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,s=n.length;s>r;++r)e=n[r].trim().split(Hs.spaces),i.push(new f(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Hs.parenComma),i=[],r=0,s=n.length;s>r;++r)e=n[r].replace(Hs.trimParens,"$1"),i.push(Ks.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,s=t.trim().split(Hs.parenComma),o=[],a=0,l=s.length;l>a;++a)e=s[a].replace(Hs.trimParens,"$1"),n=Ks.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n.points),0===a?r=i:o.push(i);return this.geometryFactory.createPolygon(r,o)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Hs.doubleParenComma),i=[],r=0,s=n.length;s>r;++r)e=n[r].replace(Hs.trimParens,"$1"),i.push(Ks.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;r>i;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}};e(Xt.prototype,{write:function(t){return this.parser.write(t)}}),e(Xt,{toLineString:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),e(Kt.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new T;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,i){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=i,this.result=this.computeIntersect(t,e,n,i)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(0===arguments.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==Kt.NO_INTERSECTION},getEdgeDistance:function(t,e){return Kt.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1])},isCollinear:function(){return this.result===Kt.COLLINEAR_INTERSECTION},toString:function(){return Xt.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+Xt.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return Kt}}),Kt.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),s=-1;if(t.equals(e))s=0;else if(t.equals(n))s=i>r?i:r;else{var o=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(s=i>r?o:a)||t.equals(e)||(s=Math.max(o,a))}return d.isTrue(!(0===s&&!t.equals(e)),"Bad distance calculation"),s},Kt.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,s=Math.sqrt(i*i+r*r);return d.isTrue(!(0===s&&!t.equals(e)),"Invalid distance calculation"),s},Kt.DONT_INTERSECT=0,Kt.DO_INTERSECT=1,Kt.COLLINEAR=2,Kt.NO_INTERSECTION=0,Kt.POINT_INTERSECTION=1,Kt.COLLINEAR_INTERSECTION=2,h(Zt,Kt),e(Zt.prototype,{isInSegmentEnvelopes:function(t){var e=new C(this.inputLines[0][0],this.inputLines[0][1]),n=new C(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(3!==arguments.length)return Kt.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,C.intersects(e,n,t)&&0===$t.orientationIndex(e,n,t)&&0===$t.orientationIndex(n,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=Kt.POINT_INTERSECTION,null):void(this.result=Kt.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},safeHCoordinateIntersection:function(t,e,n,i){var r=null;try{r=A.intersection(t,e,n,i)}catch(s){if(!(s instanceof M))throw s;r=Zt.nearestEndpoint(t,e,n,i)}return r},intersection:function(t,e,n,i){var r=this.intersectionWithNormalization(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new f(Zt.nearestEndpoint(t,e,n,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(r),r},smallestInAbsValue:function(t,e,n,i){var r=t,s=Math.abs(r);return Math.abs(e)<s&&(r=e,s=Math.abs(e)),Math.abs(n)<s&&(r=n,s=Math.abs(n)),Math.abs(i)<s&&(r=i),r},checkDD:function(t,e,n,i,r){var s=O.intersection(t,e,n,i),o=this.isInSegmentEnvelopes(s);k.out.println("DD in env = "+o+"  --------------------- "+s),r.distance(s)>1e-4&&k.out.println("Distance = "+r.distance(s))},intersectionWithNormalization:function(t,e,n,i){var r=new f(t),s=new f(e),o=new f(n),a=new f(i),l=new f;this.normalizeToEnvCentre(r,s,o,a,l);var u=this.safeHCoordinateIntersection(r,s,o,a);return u.x+=l.x,u.y+=l.y,u},computeCollinearIntersection:function(t,e,n,i){var r=C.intersects(t,e,n),s=C.intersects(t,e,i),o=C.intersects(n,i,t),a=C.intersects(n,i,e);return r&&s?(this.intPt[0]=n,this.intPt[1]=i,Kt.COLLINEAR_INTERSECTION):o&&a?(this.intPt[0]=t,this.intPt[1]=e,Kt.COLLINEAR_INTERSECTION):r&&o?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||s||a?Kt.COLLINEAR_INTERSECTION:Kt.POINT_INTERSECTION):r&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||s||o?Kt.COLLINEAR_INTERSECTION:Kt.POINT_INTERSECTION):s&&o?(this.intPt[0]=i,this.intPt[1]=t,!i.equals(t)||r||a?Kt.COLLINEAR_INTERSECTION:Kt.POINT_INTERSECTION):s&&a?(this.intPt[0]=i,this.intPt[1]=e,!i.equals(e)||r||o?Kt.COLLINEAR_INTERSECTION:Kt.POINT_INTERSECTION):Kt.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,i,r){var s=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<i.x?n.x:i.x,h=n.y<i.y?n.y:i.y,c=n.x>i.x?n.x:i.x,d=n.y>i.y?n.y:i.y,f=((s>u?s:u)+(c>a?a:c))/2,g=((o>h?o:h)+(d>l?l:d))/2;r.x=f,r.y=g,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},computeIntersect:function(t,e,n,i){if(this._isProper=!1,!C.intersects(t,e,n,i))return Kt.NO_INTERSECTION;var r=$t.orientationIndex(t,e,n),s=$t.orientationIndex(t,e,i);if(r>0&&s>0||0>r&&0>s)return Kt.NO_INTERSECTION;var o=$t.orientationIndex(n,i,t),a=$t.orientationIndex(n,i,e);return o>0&&a>0||0>o&&0>a?Kt.NO_INTERSECTION:0===r&&0===s&&0===o&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===s||0===o||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this.intPt[0]=e:0===r?this.intPt[0]=new f(n):0===s?this.intPt[0]=new f(i):0===o?this.intPt[0]=new f(t):0===a&&(this.intPt[0]=new f(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,i)),Kt.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return Zt}}),Zt.nearestEndpoint=function(t,e,n,i){var r=t,s=$t.distancePointLine(t,n,i),o=$t.distancePointLine(e,n,i);return s>o&&(s=o,r=e),o=$t.distancePointLine(n,t,e),s>o&&(s=o,r=n),o=$t.distancePointLine(i,t,e),s>o&&(s=o,r=i),r},e(Jt.prototype,{interfaces_:function(){return[]},getClass:function(){return Jt}}),Jt.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=n.x-e.x,o=n.y-e.y;return Jt.signOfDet2x2(i,r,s,o)},Jt.signOfDet2x2=function(t,e,n,i){var r=null,s=null,o=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?i>=e||(r=-r,s=t,t=n,n=s,s=e,e=i,i=s):-i>=e?(r=-r,n=-n,i=-i):(s=t,t=-n,n=s,s=e,e=-i,i=s):i>0?i>=-e?(r=-r,t=-t,e=-e):(s=-t,t=n,n=s,s=-e,e=i,i=s):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,s=-t,t=-n,n=s,s=-e,e=-i,i=s),t>0){if(!(n>0))return r;if(!(n>=t))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if(1,o=Math.floor(n/t),n-=o*t,0>(i-=o*e))return-r;if(i>e)return r;if(t>n+n){if(i+i>e)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if(o=Math.floor(t/n),t-=o*n,0>(e-=o*i))return r;if(e>i)return-r;if(n>t+t){if(e+e>i)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}},e(Qt.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this.p.x>=n&&this.p.x<=i&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var r=t.x-this.p.x,s=t.y-this.p.y,o=e.x-this.p.x,a=e.y-this.p.y,l=Jt.signOfDet2x2(r,s,o,a);if(0===l)return this.isPointOnSegment=!0,null;s>a&&(l=-l),l>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==S.EXTERIOR},getLocation:function(){return this.isPointOnSegment?S.BOUNDARY:this.crossingCount%2==1?S.INTERIOR:S.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return Qt}}),Qt.locatePointInRing=function(){if(arguments[0]instanceof f&&N(arguments[1],D)){for(var t=arguments[0],e=arguments[1],n=new Qt(t),i=new f,r=new f,s=1;s<e.size();s++)if(e.getCoordinate(s,i),e.getCoordinate(s-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof f&&arguments[1]instanceof Array){for(var o=arguments[0],a=arguments[1],n=new Qt(o),s=1;s<a.length;s++){var i=a[s],r=a[s-1];if(n.countSegment(i,r),n.isOnSegment())return n.getLocation()}return n.getLocation()}},e($t.prototype,{interfaces_:function(){return[]},getClass:function(){return $t}}),$t.orientationIndex=function(t,e,n){return O.orientationIndex(t,e,n)},$t.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,s=t[i+1].y;e+=r*(t[i-1].y-s)}return e/2}if(N(arguments[0],D)){var o=arguments[0],a=o.size();if(3>a)return 0;var l=new f,u=new f,h=new f;o.getCoordinate(0,u),o.getCoordinate(1,h);n=u.x;h.x-=n;for(var e=0,i=1;a-1>i;i++)l.y=u.y,u.x=h.x,u.y=h.y,o.getCoordinate(i+1,h),h.x-=n,e+=u.x*(l.y-h.y);return e/2}},$t.distanceLineLine=function(t,e,n,i){if(t.equals(e))return $t.distancePointLine(t,n,i);if(n.equals(i))return $t.distancePointLine(i,t,e);var r=!1;if(C.intersects(t,e,n,i)){var s=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===s)r=!0;else{var o=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/s,l=o/s;(0>l||l>1||0>a||a>1)&&(r=!0)}}else r=!0;return r?_.min($t.distancePointLine(t,n,i),$t.distancePointLine(e,n,i),$t.distancePointLine(n,t,e),$t.distancePointLine(i,t,e)):0},$t.isPointInRing=function(t,e){return $t.locatePointInRing(t,e)!==S.EXTERIOR},$t.computeLength=function(t){var e=t.size();if(1>=e)return 0;var n=0,i=new f;t.getCoordinate(0,i);for(var r=i.x,s=i.y,o=1;e>o;o++){t.getCoordinate(o,i);var a=i.x,l=i.y,u=a-r,h=l-s;n+=Math.sqrt(u*u+h*h),r=a,s=l}return n},$t.isCCW=function(t){var e=t.length-1;if(3>e)throw new i("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,s=1;e>=s;s++){var o=t[s];o.y>n.y&&(n=o,r=s)}var a=r;do{0>(a-=1)&&(a=e)}while(t[a].equals2D(n)&&a!==r);var l=r;do{l=(l+1)%e}while(t[l].equals2D(n)&&l!==r);var u=t[a],h=t[l];if(u.equals2D(n)||h.equals2D(n)||u.equals2D(h))return!1;var c=$t.computeOrientation(u,n,h);return 0===c?u.x>h.x:c>0},$t.locatePointInRing=function(t,e){return Qt.locatePointInRing(t,e)},$t.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},$t.computeOrientation=function(t,e,n){return $t.orientationIndex(t,e,n)},$t.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new i("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var s=$t.distancePointLine(t,e[r],e[r+1]);n>s&&(n=s)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],l=arguments[2];if(a.x===l.x&&a.y===l.y)return o.distance(a);var u=(l.x-a.x)*(l.x-a.x)+(l.y-a.y)*(l.y-a.y),h=((o.x-a.x)*(l.x-a.x)+(o.y-a.y)*(l.y-a.y))/u;if(0>=h)return o.distance(a);if(h>=1)return o.distance(l);var c=((a.y-o.y)*(l.x-a.x)-(a.x-o.x)*(l.y-a.y))/u;return Math.abs(c)*Math.sqrt(u)}},$t.isOnLine=function(t,e){for(var n=new Zt,i=1;i<e.length;i++){var r=e[i-1],s=e[i];if(n.computeIntersection(t,r,s),n.hasIntersection())return!0}return!1},$t.CLOCKWISE=-1,$t.RIGHT=$t.CLOCKWISE,$t.COUNTERCLOCKWISE=1,$t.LEFT=$t.COUNTERCLOCKWISE,$t.COLLINEAR=0,$t.STRAIGHT=$t.COLLINEAR,e(te.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof te){var t=arguments[0],e=$t.orientationIndex(this.p0,this.p1,t.p0),n=$t.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):0>=e&&0>=n?Math.max(e,n):0}if(arguments[0]instanceof f){var i=arguments[0];return $t.orientationIndex(this.p0,this.p1,i)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof te))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new Zt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof f){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new f(t);var e=this.projectionFactor(t),n=new f;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof te){var i=arguments[0],r=this.projectionFactor(i.p0),s=this.projectionFactor(i.p1);if(r>=1&&s>=1)return null;if(0>=r&&0>=s)return null;var o=this.project(i.p0);0>r&&(o=this.p0),r>1&&(o=this.p1);var a=this.project(i.p1);return 0>s&&(a=this.p0),s>1&&(a=this.p1),new te(o,a)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return 0===t?this.p0:this.p1},distancePerpendicular:function(t){return $t.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return te.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return 0>=i?r.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},closestPoints:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=r.MAX_VALUE,s=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);i>(s=a.distance(t.p1))&&(i=s,n[0]=a,n[1]=t.p1);var l=t.closestPoint(this.p0);i>(s=l.distance(this.p0))&&(i=s,n[0]=this.p0,n[1]=l);var u=t.closestPoint(this.p1);return s=u.distance(this.p1),i>s&&(i=s,n[0]=this.p1,n[1]=u),n},closestPoint:function(t){var e=this.projectionFactor(t);if(e>0&&1>e)return this.project(t);var n=this.p0.distance(t);return this.p1.distance(t)>n?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{return A.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof M))throw t}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,o=Math.sqrt(r*r+s*s),a=0,l=0;if(0!==e){if(0>=o)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/o,l=e*s/o}return new f(n-l,i+a)},setCoordinates:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return 0>e?e=0:(e>1||r.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof te){var t=arguments[0];return $t.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof f){var e=arguments[0];return $t.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new f;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);return n^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))},interfaces_:function(){return[s,l]},getClass:function(){return te}}),te.midPoint=function(t,e){return new f((t.x+e.x)/2,(t.y+e.y)/2)},te.serialVersionUID=0x2d2172135f411c00,e(ee.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){return(ee.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||ee.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||ee.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||ee.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]))&&this.matrix[S.EXTERIOR][S.INTERIOR]===ut.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===ut.FALSE},isCoveredBy:function(){return(ee.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||ee.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||ee.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||ee.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]))&&this.matrix[S.INTERIOR][S.EXTERIOR]===ut.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===ut.FALSE},set:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.matrix[n][i]=ut.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.matrix[r][s]=o}},isContains:function(){return ee.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.EXTERIOR][S.INTERIOR]===ut.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===ut.FALSE},setAtLeast:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,ut.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];this.matrix[r][s]<o&&(this.matrix[r][s]=o)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return ee.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===ut.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===ut.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):(t===ut.A&&e===ut.A||t===ut.L&&e===ut.L||t===ut.L&&e===ut.A||t===ut.P&&e===ut.A||t===ut.P&&e===ut.L)&&this.matrix[S.INTERIOR][S.INTERIOR]===ut.FALSE&&(ee.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||ee.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||ee.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]))},isOverlaps:function(t,e){return t===ut.P&&e===ut.P||t===ut.A&&e===ut.A?ee.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&ee.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&ee.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):t===ut.L&&e===ut.L&&1===this.matrix[S.INTERIOR][S.INTERIOR]&&ee.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&ee.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR])},isEquals:function(t,e){return t===e&&ee.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===ut.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===ut.FALSE&&this.matrix[S.EXTERIOR][S.INTERIOR]===ut.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===ut.FALSE},toString:function(){for(var t=new T("123456789"),e=0;3>e;e++)for(var n=0;3>n;n++)t.setCharAt(3*e+n,ut.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(9!==t.length)throw new i("Should be length 9: "+t);for(var e=0;3>e;e++)for(var n=0;3>n;n++)if(!ee.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[S.INTERIOR][S.INTERIOR]===ut.FALSE&&this.matrix[S.INTERIOR][S.BOUNDARY]===ut.FALSE&&this.matrix[S.BOUNDARY][S.INTERIOR]===ut.FALSE&&this.matrix[S.BOUNDARY][S.BOUNDARY]===ut.FALSE},isCrosses:function(t,e){return t===ut.P&&e===ut.L||t===ut.P&&e===ut.A||t===ut.L&&e===ut.A?ee.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&ee.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR]):t===ut.L&&e===ut.P||t===ut.A&&e===ut.P||t===ut.A&&e===ut.L?ee.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&ee.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):t===ut.L&&e===ut.L&&0===this.matrix[S.INTERIOR][S.INTERIOR]},interfaces_:function(){return[o]},getClass:function(){return ee}}),ee.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===ut.SYM_DONTCARE||e===ut.SYM_TRUE&&(t>=0||t===ut.TRUE)||e===ut.SYM_FALSE&&t===ut.FALSE||e===ut.SYM_P&&t===ut.P||e===ut.SYM_L&&t===ut.L||e===ut.SYM_A&&t===ut.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return new ee(n).matches(i)}},ee.isTrue=function(t){return t>=0||t===ut.TRUE};var Zs=Object.freeze({Coordinate:f,CoordinateList:I,Envelope:C,LineSegment:te,GeometryFactory:Ut,Geometry:V,Point:Mt,LineString:Ct,LinearRing:Tt,Polygon:Nt,GeometryCollection:dt,MultiPoint:_t,MultiLineString:ft,MultiPolygon:Lt,Dimension:ut,IntersectionMatrix:ee});e(ne.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){null===this.areaBasePt&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);if(0!==i){e+=i;var r=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=i*r;var s=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=i*s}}this.totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=$t.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new f;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!$t.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,i){var r=i?1:-1;ne.centroid3(t,e,n,this.triangleCent3);var s=ne.area2(t,e,n);this.cg3.x+=r*s*this.triangleCent3.x,this.cg3.y+=r*s*this.triangleCent3.y,this.areasum2+=r*s},add:function(){if(arguments[0]instanceof Nt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(r=0;r<t.getNumInteriorRing();r++)this.addHole(t.getInteriorRingN(r).getCoordinates())}else if(arguments[0]instanceof V){var e=arguments[0];if(e.isEmpty())return null;if(e instanceof Mt)this.addPoint(e.getCoordinate());else if(e instanceof Ct)this.addLineSegments(e.getCoordinates());else if(e instanceof Nt){var n=e;this.add(n)}else if(e instanceof dt)for(var i=e,r=0;r<i.getNumGeometries();r++)this.add(i.getGeometryN(r))}},interfaces_:function(){return[]},getClass:function(){return ne}}),ne.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},ne.centroid3=function(t,e,n,i){return i.x=t.x+e.x+n.x,i.y=t.y+e.y+n.y,null},ne.getCentroid=function(t){return new ne(t).getCentroid()},(ie.prototype=new Error).name="EmptyStackException",re.prototype=new y,re.prototype.add=function(t){return this.array_.push(t),!0},re.prototype.get=function(t){if(0>t||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},re.prototype.push=function(t){return this.array_.push(t),t},re.prototype.pop=function(t){if(0===this.array_.length)throw new ie;return this.array_.pop()},re.prototype.peek=function(){if(0===this.array_.length)throw new ie;return this.array_[this.array_.length-1]},re.prototype.empty=function(){return 0===this.array_.length},re.prototype.isEmpty=function(){return this.empty()},re.prototype.search=function(t){return this.array_.indexOf(t)},re.prototype.size=function(){return this.array_.length},re.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},e(se.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[G]},getClass:function(){return se}}),se.filterCoordinates=function(t){for(var e=new se,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},e(oe.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return lt.sort(t,1,t.length,new ae(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new I;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(3===(t=this.cleanRing(t)).length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){d.equals(t[0],t[t.length-1]);for(var e=new E,n=null,i=0;i<=t.length-2;i++){var r=t[i],s=t[i+1];r.equals(s)||null!==n&&this.isBetween(n,r,s)||(e.add(r),n=r)}e.add(t[t.length-1]);var o=new Array(e.size()).fill(null);return e.toArray(o)},isBetween:function(t,e,n){if(0!==$t.computeOrientation(t,e,n))return!1;if(t.x!==n.x){if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0}return!1},reduce:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new at,i=0;i<e.length;i++)n.add(e[i]);for(i=0;i<t.length;i++)$t.isPointInRing(t[i],e)||n.add(t[i]);var r=U.toCoordinateArray(n);return r.length<3?this.padArray3(r):r},getConvexHull:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),i=this.toCoordinateArray(n);return this.lineOrPolygon(i)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var i=1;i<t.length;i++)t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=t.get(n);e[n]=i}return e},grahamScan:function(t){var e=null,n=new re;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var i=3;i<t.length;i++){for(e=n.pop();!n.empty()&&$t.computeOrientation(n.peek(),e,t[i])>0;)e=n.pop();e=n.push(e),e=n.push(t[i])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return oe}}),oe.extractCoordinates=function(t){var e=new se;return t.apply(e),e.getCoordinates()},e(ae.prototype,{compare:function(t,e){var n=t,i=e;return ae.polarCompare(this.origin,n,i)},interfaces_:function(){return[a]},getClass:function(){return ae}}),ae.polarCompare=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=n.x-t.x,o=n.y-t.y,a=$t.computeOrientation(t,e,n);if(a===$t.COUNTERCLOCKWISE)return 1;if(a===$t.CLOCKWISE)return-1;var l=i*i+r*r,u=s*s+o*o;return u>l?-1:l>u?1:0},oe.RadialComparator=ae,e(le.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof Tt&&!i.isEmpty()||(n=!1);for(var r=new E,s=0;s<t.getNumInteriorRing();s++){var o=this.transformLinearRing(t.getInteriorRingN(s),t);null===o||o.isEmpty()||(o instanceof Tt||(n=!1),r.add(o))}if(n)return this.factory.createPolygon(i,r.toArray([]));var a=new E;return null!==i&&a.add(i),a.addAll(r),this.factory.buildGeometry(a)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new E,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new E,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new E,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new E,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this.pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(Ut.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof Mt)return this.transformPoint(t,null);if(t instanceof _t)return this.transformMultiPoint(t,null);if(t instanceof Tt)return this.transformLinearRing(t,null);if(t instanceof Ct)return this.transformLineString(t,null);if(t instanceof ft)return this.transformMultiLineString(t,null);if(t instanceof Nt)return this.transformPolygon(t,null);if(t instanceof Lt)return this.transformMultiPolygon(t,null);if(t instanceof dt)return this.transformGeometryCollection(t,null);throw new i("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this.factory.createLinearRing(null);var i=n.size();return i>0&&4>i&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return le}}),e(ue.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;n>i;i++){var r=t.get(i),s=this.findSnapForVertex(r,e);null!==s&&(t.set(i,new f(s)),0===i&&this._isClosed&&t.set(t.size()-1,new f(s)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new I(this.srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},snapSegments:function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;n>i;i++){var r=e[i],s=this.findSegmentIndexToSnap(r,t);s>=0&&t.add(s+1,new f(r),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=r.MAX_VALUE,i=-1,s=0;s<e.size()-1;s++){if(this.seg.p0=e.get(s),this.seg.p1=e.get(s+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var o=this.seg.distance(t);o<this.snapTolerance&&n>o&&(n=o,i=s)}return i},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return ue}}),ue.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},e(he.prototype,{snapTo:function(t,e){return new ce(e,this.extractTargetCoordinates(t)).transform(this.srcGeom)},snapToSelf:function(t,e){var n=new ce(t,this.extractTargetCoordinates(this.srcGeom),!0).transform(this.srcGeom),i=n;return e&&N(i,St)&&(i=n.buffer(0)),i},computeSnapTolerance:function(t){return this.computeMinimumSegmentLength(t)/10},extractTargetCoordinates:function(t){for(var e=new at,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=r.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);e>i&&(e=i)}return e},interfaces_:function(){return[]},getClass:function(){return he}}),he.snap=function(t,e,n){var i=new Array(2).fill(null),r=new he(t);i[0]=r.snapTo(e,n);var s=new he(e);return i[1]=s.snapTo(i[0],n),i},he.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=he.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Yt.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],s=arguments[1];return Math.min(he.computeOverlaySnapTolerance(r),he.computeOverlaySnapTolerance(s))}},he.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*he.SNAP_PRECISION_FACTOR},he.snapToSelf=function(t,e,n){return new he(t).snapToSelf(e,n)},he.SNAP_PRECISION_FACTOR=1e-9,h(ce,le),e(ce.prototype,{snapLine:function(t,e){var n=new ue(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(i)},interfaces_:function(){return[]},getClass:function(){return ce}}),e(de.prototype,{getCommon:function(){return r.longBitsToDouble(this.commonBits)},add:function(t){var e=r.doubleToLongBits(t);return this.isFirst?(this.commonBits=e,this.commonSignExp=de.signExpBits(this.commonBits),this.isFirst=!1,null):de.signExpBits(e)!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=de.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=de.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],e=r.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+Long.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},interfaces_:function(){return[]},getClass:function(){return de}}),de.getBit=function(t,e){return 0!=(t&1<<e)?1:0},de.signExpBits=function(t){return t>>52},de.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},de.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(de.getBit(t,i)!==de.getBit(e,i))return n;n++}return 52},e(fe.prototype,{addCommonBits:function(t){var e=new pe(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(0===this.commonCoord.x&&0===this.commonCoord.y)return t;var e=new f(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new pe(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return fe}}),e(ge.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new f(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[G]},getClass:function(){return ge}}),e(pe.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ct]},getClass:function(){return pe}}),fe.CommonCoordinateFilter=ge,fe.Translater=pe,e(me.prototype,{next:function(){if(this.atStart)return this.atStart=!1,me.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new x;var t=this.parent.getGeometryN(this.index++);return t instanceof dt?(this.subcollectionIterator=new me(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[p]},getClass:function(){return me}}),me.isAtomic=function(t){return!(t instanceof dt)},e(ve.prototype,{locateInternal:function(){if(arguments[0]instanceof f&&arguments[1]instanceof Nt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return S.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===S.EXTERIOR)return S.EXTERIOR;if(i===S.BOUNDARY)return S.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var s=e.getInteriorRingN(r),o=this.locateInPolygonRing(t,s);if(o===S.INTERIOR)return S.EXTERIOR;if(o===S.BOUNDARY)return S.BOUNDARY}return S.INTERIOR}if(arguments[0]instanceof f&&arguments[1]instanceof Ct){var a=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(a))return S.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!a.equals(u[0])&&!a.equals(u[u.length-1])?$t.isOnLine(a,u)?S.INTERIOR:S.EXTERIOR:S.BOUNDARY}if(arguments[0]instanceof f&&arguments[1]instanceof Mt){var h=arguments[0];return arguments[1].getCoordinate().equals2D(h)?S.INTERIOR:S.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?$t.locatePointInRing(t,e.getCoordinates()):S.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==S.EXTERIOR},updateLocationInfo:function(t){t===S.INTERIOR&&(this.isIn=!0),t===S.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof Mt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Ct)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Nt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ft)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof Lt)for(var s=e,i=0;i<s.getNumGeometries();i++){var o=s.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,o))}else if(e instanceof dt)for(var a=new me(e);a.hasNext();){var l=a.next();l!==e&&this.computeLocation(t,l)}},locate:function(t,e){return e.isEmpty()?S.EXTERIOR:e instanceof Ct?this.locateInternal(t,e):e instanceof Nt?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?S.BOUNDARY:this.numBoundaries>0||this.isIn?S.INTERIOR:S.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return ve}}),e(ye.prototype,{interfaces_:function(){return[]},getClass:function(){return ye}}),ye.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof f&&arguments[1]instanceof f){var s=arguments[0],o=arguments[1],a=o.x-s.x,l=o.y-s.y;if(0===a&&0===l)throw new i("Cannot compute the octant for two identical points "+s);return ye.octant(a,l)}},e(xe.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return xe}}),e(be.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:ye.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return Xt.toLineString(new At(this.pts))},interfaces_:function(){return[xe]},getClass:function(){return be}}),e(Ee.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return Ee}}),e(Ie.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[Ee,l]},getClass:function(){return Ie}}),e(Ce.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return 0===this._size},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return Ce}}),e(we.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return we}}),e(Me.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return Me}}),e(Se.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){d.isTrue(null===this.bounds),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[Ee,l]},getClass:function(){return Se}}),Se.serialVersionUID=0x5a1e55ec41369800;var Js={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return Js.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?lt.sort(n,e):lt.sort(n);for(var i=t.iterator(),r=0,s=n.length;s>r;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new E;return e.add(t),e}};e(Ne.prototype,{expandToQueue:function(t,e){var n=Ne.isComposite(this.boundable1),r=Ne.isComposite(this.boundable2);if(n&&r)return Ne.area(this.boundable1)>Ne.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new i("neither boundable is composite")},isLeaves:function(){return!(Ne.isComposite(this.boundable1)||Ne.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var s=new Ne(r.next(),e,this.itemDistance);s.getDistance()<i&&n.add(s)}},getBoundable:function(t){return 0===t?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[s]},getClass:function(){return Ne}}),Ne.area=function(t){return t.getBounds().getArea()},Ne.isComposite=function(t){return t instanceof Se},e(_e.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Se?t+=this.size(n):n instanceof Ie&&(t+=1)}return t}},removeItem:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Ie&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},itemsTree:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this.root);return null===t?new E:t}if(1===arguments.length){for(var e=arguments[0],n=new E,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Se){var s=this.itemsTree(r);null!==s&&n.add(s)}else r instanceof Ie?n.add(r.getItem()):d.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){d.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new Ie(t,e))},boundablesAtLevel:function(){if(1===arguments.length){var t=arguments[0],e=new E;return this.boundablesAtLevel(t,this.root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(d.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var o=s.next();o instanceof Se?this.boundablesAtLevel(n,o,r):(d.isTrue(o instanceof Ie),-1===n&&r.add(o))}return null}},query:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new E;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,i)}else if(3===arguments.length)if(N(arguments[2],we)&&arguments[0]instanceof Object&&arguments[1]instanceof Se)for(var r=arguments[0],s=arguments[1],o=arguments[2],a=s.getChildBoundables(),l=0;l<a.size();l++){f=a.get(l);this.getIntersectsOp().intersects(f.getBounds(),r)&&(f instanceof Se?this.query(r,f,o):f instanceof Ie?o.visitItem(f.getItem()):d.shouldNeverReachHere())}else if(N(arguments[2],y)&&arguments[0]instanceof Object&&arguments[1]instanceof Se)for(var u=arguments[0],h=arguments[1],c=arguments[2],a=h.getChildBoundables(),l=0;l<a.size();l++){var f=a.get(l);this.getIntersectsOp().intersects(f.getBounds(),u)&&(f instanceof Se?this.query(u,f,c):f instanceof Ie?c.add(f.getItem()):d.shouldNeverReachHere())}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=this.removeItem(i,r);if(s)return!0;for(var o=null,a=i.getChildBoundables().iterator();a.hasNext();){var l=a.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Se&&(s=this.remove(n,l,r))){o=l;break}}return null!==o&&o.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(o),s}},createHigherLevels:function(t,e){d.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Se){var i=this.depth(n);i>t&&(t=i)}}return t+1}},createParentBoundables:function(t,e){d.isTrue(!t.isEmpty());var n=new E;n.add(this.createNode(e));var i=new E(t);Js.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var s=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(s)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[l]},getClass:function(){return _e}}),_e.compareDoubles=function(t,e){return t>e?1:e>t?-1:0},_e.IntersectsOp=function(){},_e.serialVersionUID=-0x35ef64c82d4c5400,_e.DEFAULT_NODE_CAPACITY=10,e(Te.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Te}}),h(Le,_e),e(Le.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){d.isTrue(t.length>0);for(var n=new E,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},createNode:function(t){return new Pe(t)},size:function(){return 0===arguments.length?_e.prototype.size.call(this):_e.prototype.size.apply(this,arguments)},insert:function(){if(2!==arguments.length)return _e.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void _e.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return Le.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),s=0;e>s;s++){i[s]=new E;for(var o=0;r.hasNext()&&n>o;){var a=r.next();i[s].add(a),o++}}return i},query:function(){if(1===arguments.length){var t=arguments[0];return _e.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];_e.prototype.query.call(this,e,n)}else if(3===arguments.length)if(N(arguments[2],we)&&arguments[0]instanceof Object&&arguments[1]instanceof Se){var i=arguments[0],r=arguments[1],s=arguments[2];_e.prototype.query.call(this,i,r,s)}else if(N(arguments[2],y)&&arguments[0]instanceof Object&&arguments[1]instanceof Se){var o=arguments[0],a=arguments[1],l=arguments[2];_e.prototype.query.call(this,o,a,l)}},getComparator:function(){return Le.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return _e.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return _e.prototype.remove.call(this,t,e)}return _e.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?_e.prototype.depth.call(this):_e.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){d.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new E(t);Js.sort(i,Le.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)},nearestNeighbour:function(){if(1===arguments.length){if(N(arguments[0],Te)){var t=arguments[0],e=new Ne(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ne){var n=arguments[0];return this.nearestNeighbour(n,r.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof Le&&N(arguments[1],Te)){var i=arguments[0],s=arguments[1],e=new Ne(this.getRoot(),i.getRoot(),s);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ne&&"number"==typeof arguments[1]){var o=arguments[0],a=arguments[1],l=null,u=new Ce;for(u.add(o);!u.isEmpty()&&a>0;){var h=u.poll(),c=h.getDistance();if(c>=a)break;h.isLeaves()?(a=c,l=h):h.expandToQueue(u,a)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],f=arguments[1],g=arguments[2],p=new Ie(d,f),e=new Ne(this.getRoot(),p,g);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[Me,l]},getClass:function(){return Le}}),Le.centreX=function(t){return Le.avg(t.getMinX(),t.getMaxX())},Le.avg=function(t,e){return(t+e)/2},Le.centreY=function(t){return Le.avg(t.getMinY(),t.getMaxY())},h(Pe,Se),e(Pe.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new C(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Pe}}),Le.STRtreeNode=Pe,Le.serialVersionUID=0x39920f7d5f261e0,Le.xComparator={interfaces_:function(){return[a]},compare:function(t,e){return _e.compareDoubles(Le.centreX(t.getBounds()),Le.centreX(e.getBounds()))}},Le.yComparator={interfaces_:function(){return[a]},compare:function(t,e){return _e.compareDoubles(Le.centreY(t.getBounds()),Le.centreY(e.getBounds()))}},Le.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},Le.DEFAULT_NODE_CAPACITY=10,e(Re.prototype,{interfaces_:function(){return[]},getClass:function(){return Re}}),Re.relativeSign=function(t,e){return e>t?-1:t>e?1:0},Re.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=Re.relativeSign(e.x,n.x),r=Re.relativeSign(e.y,n.y);switch(t){case 0:return Re.compareValue(i,r);case 1:return Re.compareValue(r,i);case 2:return Re.compareValue(r,-i);case 3:return Re.compareValue(-i,r);case 4:return Re.compareValue(-i,-r);case 5:return Re.compareValue(-r,-i);case 6:return Re.compareValue(-r,i);case 7:return Re.compareValue(i,-r)}return d.shouldNeverReachHere("invalid octant value"),0},Re.compareValue=function(t,e){return 0>t?-1:t>0?1:0>e?-1:e>0?1:0},e(Oe.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Re.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[s]},getClass:function(){return Oe}}),e(De.prototype,{getSplitCoordinates:function(){var t=new I;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new E;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),i=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(i)&&t.add(new L(e+1))}},addEdgeCoordinates:function(t,e,n){e.segmentIndex,t.segmentIndex;var i=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new f(t.coord),!1);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)n.add(this.edge.getCoordinate(s));r&&n.add(new f(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new L(e[0])),i=r}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),o=0;s[o++]=new f(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)s[o++]=this.edge.getCoordinate(a);return r&&(s[o]=new f(e.coord)),new Fe(s,this.edge.getData())},add:function(t,e){var n=new Oe(this.edge,t,e,this.edge.getSegmentOctant(e)),i=this.nodeMap.get(n);return null!==i?(d.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new u("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new u("bad split edge end point at "+r)},interfaces_:function(){return[]},getClass:function(){return De}}),e(ke.prototype,{next:function(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex,this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this.nextNode},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[p]},getClass:function(){return ke}}),e(Ae.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[xe]},getClass:function(){return Ae}}),e(Fe.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:ye.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=(arguments[2],arguments[3]),s=new f(n.getIntersection(r));this.addIntersection(s,i)}},toString:function(){return Xt.toLineString(new At(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,i=n+1;if(i<this.pts.length){var r=this.pts[i];t.equals2D(r)&&(n=i)}return this.nodeList.add(t,n)},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[Ae]},getClass:function(){return Fe}}),Fe.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new E;return Fe.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)},e(Be.prototype,{overlap:function(){if(2===arguments.length)arguments[0],arguments[1];else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(i,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return Be}}),e(Ve.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,i){var r=this.pts[e],s=this.pts[n];if(i.tempEnv1.init(r,s),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var o=Math.trunc((e+n)/2);o>e&&this.computeSelect(t,e,o,i),n>o&&this.computeSelect(t,o,n,i)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(null===this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new C(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,i,r,s){var o=this.pts[t],a=this.pts[e],l=n.pts[i],u=n.pts[r];if(e-t==1&&r-i==1)return s.overlap(this,t,n,i),null;if(s.tempEnv1.init(o,a),s.tempEnv2.init(l,u),!s.tempEnv1.intersects(s.tempEnv2))return null;var h=Math.trunc((t+e)/2),c=Math.trunc((i+r)/2);h>t&&(c>i&&this.computeOverlapsInternal(t,h,n,i,c,s),r>c&&this.computeOverlapsInternal(t,h,n,c,r,s)),e>h&&(c>i&&this.computeOverlapsInternal(h,e,n,i,c,s),r>c&&this.computeOverlapsInternal(h,e,n,c,r,s))},interfaces_:function(){return[]},getClass:function(){return Ve}}),e(Ge.prototype,{interfaces_:function(){return[]},getClass:function(){return Ge}}),Ge.isNorthern=function(t){return t===Ge.NE||t===Ge.NW},Ge.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Ge.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=e>t?t:e,i=t>e?t:e;return 0===n&&3===i?3:n},Ge.isInHalfPlane=function(t,e){return e===Ge.SE?t===Ge.SE||t===Ge.SW:t===e||t===e+1},Ge.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Ge.NE:Ge.SE:e>=0?Ge.NW:Ge.SW}if(arguments[0]instanceof f&&arguments[1]instanceof f){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new i("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Ge.NE:Ge.SE:r.y>=n.y?Ge.NW:Ge.SW}},Ge.NE=0,Ge.NW=1,Ge.SW=2,Ge.SE=3,e(ze.prototype,{interfaces_:function(){return[]},getClass:function(){return ze}}),ze.getChainStartIndices=function(t){var e=0,n=new E;n.add(new L(e));do{var i=ze.findChainEnd(t,e);n.add(new L(i)),e=i}while(e<t.length-1);return ze.toIntArray(n)},ze.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Ge.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Ge.quadrant(t[r-1],t[r])===i);)r++;return r-1},ze.getChains=function(){if(1===arguments.length){var t=arguments[0];return ze.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new E,r=ze.getChainStartIndices(e),s=0;s<r.length-1;s++){var o=new Ve(e,r[s],r[s+1],n);i.add(o)}return i}},ze.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(qe.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return qe}}),e(je.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[qe]},getClass:function(){return je}}),h(Ye,je),e(Ye.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Fe.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=ze.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this.idCounter++),this.index.insert(n.getEnvelope(),n),this.monoChains.add(n)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new We(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this.index.query(n.getEnvelope()),r=i.iterator();r.hasNext();){var s=r.next();if(s.getId()>n.getId()&&(n.computeOverlaps(s,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return Ye}}),h(We,Be),e(We.prototype,{overlap:function(){if(4!==arguments.length)return Be.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=t.getContext(),s=n.getContext();this.si.processIntersections(r,e,s,i)},interfaces_:function(){return[]},getClass:function(){return We}}),Ye.SegmentOverlapAction=We,h(Ue,u),e(Ue.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ue}}),Ue.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(He.prototype,{processIntersections:function(t,e,n,i){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return He}}),e(Xe.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,i){if(!this.findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this.isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(n,i)))return null;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,s,o,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=r,this.intSegments[1]=s,this.intSegments[2]=o,this.intSegments[3]=a,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return 0===e||e>=t.size()-2},hasIntersection:function(){return null!==this.interiorIntersection},isDone:function(){return!this.findAllIntersections&&null!==this.interiorIntersection},interfaces_:function(){return[He]},getClass:function(){return Xe}}),Xe.createAllIntersectionsFinder=function(t){var e=new Xe(t);return e.setFindAllIntersections(!0),e},Xe.createAnyIntersectionFinder=function(t){return new Xe(t)},Xe.createIntersectionCounter=function(t){var e=new Xe(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},e(Ke.prototype,{execute:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new Xe(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new Ye;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new Ue(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+Xt.toLineString(t[0],t[1])+" and "+Xt.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return Ke}}),Ke.computeIntersections=function(t){var e=new Ke(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},e(Ze.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return Ze}}),Ze.toSegmentStrings=function(t){for(var e=new E,n=t.iterator();n.hasNext();){var i=n.next();e.add(new be(i.getCoordinates(),i))}return e},Ze.checkValid=function(t){new Ze(t).checkValid()},e(Je.prototype,{map:function(t){for(var e=new E,n=0;n<t.getNumGeometries();n++){var i=this.mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(Ut.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return Je}}),Je.map=function(t,e){return new Je(e).map(t)},e(Qe.prototype,{interfaces_:function(){return[]},getClass:function(){return Qe}}),Qe.opposite=function(t){return t===Qe.LEFT?Qe.RIGHT:t===Qe.RIGHT?Qe.LEFT:t},Qe.ON=0,Qe.LEFT=1,Qe.RIGHT=2,e($e.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==S.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===S.NONE&&(this.location[e]=t)},isLine:function(){return 1===this.location.length},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Qe.ON]=this.location[Qe.ON],e[Qe.LEFT]=S.NONE,e[Qe.RIGHT]=S.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===S.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[Qe.LEFT];this.location[Qe.LEFT]=this.location[Qe.RIGHT],this.location[Qe.RIGHT]=t},toString:function(){var t=new T;return this.location.length>1&&t.append(S.toLocationSymbol(this.location[Qe.LEFT])),t.append(S.toLocationSymbol(this.location[Qe.ON])),this.location.length>1&&t.append(S.toLocationSymbol(this.location[Qe.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[Qe.ON]=t,this.location[Qe.LEFT]=e,this.location[Qe.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:S.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===S.NONE)return!0;return!1},setLocation:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Qe.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(S.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return $e}}),e(tn.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;2>e;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new $e(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Qe.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new T;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Qe.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new $e(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return tn}}),tn.toLineLabel=function(t){for(var e=new tn(S.NONE),n=0;2>n;n++)e.setLocation(n,t.getLocation(n));return e},e(en.prototype,{computeRing:function(){if(null!==this.ring)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=$t.isCCW(this.ring.getCoordinates())},isIsolated:function(){return 1===this.label.getGeometryCount()},computePoints:function(t){this.startDe=t;var e=t,n=!0;do{if(null===e)throw new Ue("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ue("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var i=e.getLabel();d.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this.maxNodeDegree&&(this.maxNodeDegree=e),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var i=t.getCoordinates();if(e){r=1;n&&(r=0);for(s=r;s<i.length;s++)this.pts.add(i[s])}else{var r=i.length-2;n&&(r=i.length-1);for(var s=r;s>=0;s--)this.pts.add(i[s])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!$t.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this.holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return null===this.shell},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,Qe.RIGHT);if(i===S.NONE)return null;if(this.label.getLocation(n)===S.NONE)return this.label.setLocation(n,i),null}},setShell:function(t){this.shell=t,null!==t&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},interfaces_:function(){return[]},getClass:function(){return en}}),h(nn,en),e(nn.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return nn}}),h(rn,en),e(rn.prototype,{buildMinimalRings:function(){var t=new E,e=this.startDe;do{if(null===e.getMinEdgeRing()){var n=new nn(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return rn}}),e(sn.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){d.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return sn}}),h(on,sn),e(on.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},isIsolated:function(){return 1===this.label.getGeometryCount()},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=S.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==S.BOUNDARY&&(n=i)}return n},setLabel:function(){if(2!==arguments.length)return sn.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this.label?this.label=new tn(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof on){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof tn)for(var e=arguments[0],n=0;2>n;n++){var i=this.computeMergedLocation(e,n);this.label.getLocation(n)===S.NONE&&this.label.setLocation(n,i)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(null===this.label)return null;var e=S.NONE;null!==this.label&&(e=this.label.getLocation(t));var n=null;switch(e){case S.BOUNDARY:n=S.INTERIOR;break;case S.INTERIOR:n=S.BOUNDARY;break;default:n=S.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return on}}),e(an.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof f){var t=arguments[0];return null===(n=this.nodeMap.get(t))&&(n=this.nodeFact.createNode(t),this.nodeMap.put(t,n)),n}if(arguments[0]instanceof on){var e=arguments[0],n=this.nodeMap.get(e.getCoordinate());return null===n?(this.nodeMap.put(e.getCoordinate(),e),e):(n.mergeLabel(e),n)}},print:function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new E,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===S.BOUNDARY&&e.add(i)}return e},add:function(t){var e=t.getCoordinate();this.addNode(e).add(t)},interfaces_:function(){return[]},getClass:function(){return an}}),e(ln.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:$t.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=Ge.quadrant(this.dx,this.dy),d.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[s]},getClass:function(){return ln}}),h(un,ln),e(un.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new tn(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(-999!==this.depth[t]&&this.depth[t]!==e)throw new Ue("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var t=!0,e=0;2>e;e++)this.label.isArea(e)&&this.label.getLocation(e,Qe.LEFT)===S.INTERIOR&&this.label.getLocation(e,Qe.RIGHT)===S.INTERIOR||(t=!1);return t},setNextMin:function(t){this.nextMin=t},print:function(t){ln.prototype.print.call(this,t),t.print(" "+this.depth[Qe.LEFT]+"/"+this.depth[Qe.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,S.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,S.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Qe.LEFT&&(i=-1);var r=Qe.opposite(t),s=e+n*i;this.setDepth(t,e),this.setDepth(r,s)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return un}}),un.depthFactor=function(t,e){return t===S.EXTERIOR&&e===S.INTERIOR?1:t===S.INTERIOR&&e===S.EXTERIOR?-1:0},e(hn.prototype,{createNode:function(t){return new on(t,null)},interfaces_:function(){return[]},getClass:function(){return hn}}),e(cn.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof on){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof f){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},debugPrintln:function(t){k.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===S.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},matchInSameDirection:function(t,e,n,i){return!!t.equals(n)&&$t.computeOrientation(t,e,i)===$t.COLLINEAR&&Ge.quadrant(t,e)===Ge.quadrant(n,i)},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){k.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var i=new un(n,!0),r=new un(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},interfaces_:function(){return[]},getClass:function(){return cn}}),cn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()},e(dn.prototype,{sortShellsAndHoles:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},computePolygons:function(t){for(var e=new E,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this.geometryFactory);e.add(i)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Ue("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},buildMinimalEdgeRings:function(t,e,n){for(var i=new E,r=t.iterator();r.hasNext();){var s=r.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var o=s.buildMinimalRings(),a=this.findShell(o);null!==a?(this.placePolygonHoles(a,o),e.add(a)):n.addAll(o)}else i.add(s)}return i},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},buildMaximalEdgeRings:function(t){for(var e=new E,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new rn(i,this.geometryFactory);e.add(r),r.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},getPolygons:function(){return this.computePolygons(this.shellList)},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),s=null,o=null,a=e.iterator();a.hasNext();){var l=a.next(),u=l.getLinearRing(),h=u.getEnvelopeInternal();null!==s&&(o=s.getLinearRing().getEnvelopeInternal());var c=!1;h.contains(i)&&$t.isPointInRing(r,u.getCoordinates())&&(c=!0),c&&(null===s||o.contains(h))&&(s=l)}return s},findShell:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return d.isTrue(1>=e,"found two shells in MinimalEdgeRing list"),n},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];cn.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new E,s=this.buildMinimalEdgeRings(i,this.shellList,r);this.sortShellsAndHoles(s,this.shellList,r),this.placeFreeHoles(this.shellList,r)}},interfaces_:function(){return[]},getClass:function(){return dn}}),e(fn.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Wn.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this.op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(i),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(d.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Wn.isResultOfOp(i,e)&&e===Wn.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return fn}}),e(gn.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Wn.INTERSECTION)){var i=n.getLabel();Wn.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return gn}}),e(pn.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return pn}}),e(mn.prototype,{locate:function(t){return mn.locate(t,this.geom)},interfaces_:function(){return[pn]},getClass:function(){return mn}}),mn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&$t.isPointInRing(t,e.getCoordinates())},mn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!mn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(mn.isPointInRing(t,r))return!1}return!0},mn.containsPoint=function(t,e){if(e instanceof Nt)return mn.containsPointInPolygon(t,e);if(e instanceof dt)for(var n=new me(e);n.hasNext();){var i=n.next();if(i!==e&&mn.containsPoint(t,i))return!0}return!1},mn.locate=function(t,e){return e.isEmpty()?S.EXTERIOR:mn.containsPoint(t,e)?S.INTERIOR:S.EXTERIOR},e(vn.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return 0===e&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=S.NONE,n=this.iterator();n.hasNext();)(s=(r=n.next()).getLabel()).isArea(t)&&s.getLocation(t,Qe.LEFT)!==S.NONE&&(e=s.getLocation(t,Qe.LEFT));if(e===S.NONE)return null;for(var i=e,n=this.iterator();n.hasNext();){var r=n.next(),s=r.getLabel();if(s.getLocation(t,Qe.ON)===S.NONE&&s.setLocation(t,Qe.ON,i),s.isArea(t)){var o=s.getLocation(t,Qe.LEFT),a=s.getLocation(t,Qe.RIGHT);if(a!==S.NONE){if(a!==i)throw new Ue("side location conflict",r.getCoordinate());o===S.NONE&&d.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),i=o}else d.isTrue(s.getLocation(t,Qe.LEFT)===S.NONE,"found single null side"),s.setLocation(t,Qe.RIGHT,i),s.setLocation(t,Qe.LEFT,i)}}},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},print:function(t){k.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Qe.LEFT);d.isTrue(i!==S.NONE,"Found unlabelled area edge");for(var r=i,s=this.iterator();s.hasNext();){var o=s.next().getLabel();d.isTrue(o.isArea(t),"Found non-area edge");var a=o.getLocation(t,Qe.LEFT),l=o.getLocation(t,Qe.RIGHT);if(a===l)return!1;if(l!==r)return!1;r=a}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++)if(this.edgeList.get(e)===t)return e;return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this.edgeList&&(this.edgeList=new E(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===S.NONE&&(this.ptInAreaLocation[t]=mn.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new T;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),s=0;2>s;s++)r.isLine(s)&&r.getLocation(s)===S.BOUNDARY&&(e[s]=!0);for(n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),s=0;2>s;s++)if(r.isAnyNull(s)){var o=S.NONE;if(e[s])o=S.EXTERIOR;else{var a=i.getCoordinate();o=this.getLocation(s,a,t)}r.setAllLocationsIfNull(s,o)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return vn}}),h(yn,vn),e(yn.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,i=0;i<this.resultAreaEdgeList.size();i++){var r=this.resultAreaEdgeList.get(i),s=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this.SCANNING_FOR_INCOMING:if(!s.isInResult())continue;e=s,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new Ue("no outgoing dirEdge found",this.getCoordinate());d.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(1>e)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),s=i.getQuadrant();return Ge.isNorthern(r)&&Ge.isNorthern(s)?n:Ge.isNorthern(r)||Ge.isNorthern(s)?0!==n.getDy()?n:0!==i.getDy()?i:(d.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},print:function(t){k.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new E;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var i=this.edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},computeDepths:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(Qe.LEFT)),i=t.getDepth(Qe.RIGHT),r=this.computeDepths(e+1,this.edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new Ue("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],o=arguments[1],a=arguments[2],l=s;o>l;l++){var u=this.edgeList.get(l);u.getLabel(),u.setEdgeDepths(Qe.RIGHT,a),a=u.getDepth(Qe.LEFT)}return a}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,i=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;r>=0;r--){var s=this.resultAreaEdgeList.get(r),o=s.getSym();switch(null===e&&s.getEdgeRing()===t&&(e=s),i){case this.SCANNING_FOR_INCOMING:if(o.getEdgeRing()!==t)continue;n=o,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=this.SCANNING_FOR_INCOMING}}i===this.LINKING_TO_OUTGOING&&(d.isTrue(null!==e,"found null for first outgoing dirEdge"),d.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)(i=e.next()).isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],t=0,e=this.iterator();e.hasNext();){var i=e.next();i.getEdgeRing()===n&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=S.NONE,e=this.iterator();e.hasNext();){r=(i=e.next()).getSym();if(!i.isLineEdge()){if(i.isInResult()){t=S.INTERIOR;break}if(r.isInResult()){t=S.EXTERIOR;break}}}if(t===S.NONE)return null;for(var n=t,e=this.iterator();e.hasNext();){var i=e.next(),r=i.getSym();i.isLineEdge()?i.getEdge().setCovered(n===S.INTERIOR):(i.isInResult()&&(n=S.EXTERIOR),r.isInResult()&&(n=S.INTERIOR))}},computeLabelling:function(t){vn.prototype.computeLabelling.call(this,t),this.label=new tn(S.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge(),r=i.getLabel(),s=0;2>s;s++){var o=r.getLocation(s);o!==S.INTERIOR&&o!==S.BOUNDARY||this.label.setLocation(s,S.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return yn}}),h(xn,hn),e(xn.prototype,{createNode:function(t){return new on(t,new yn)},interfaces_:function(){return[]},getClass:function(){return xn}}),e(bn.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return bn}}),e(En.prototype,{isDelete:function(){return this.eventType===En.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===En.INSERT},isSameLabel:function(t){return null!==this.label&&this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[s]},getClass:function(){return En}}),En.INSERT=1,En.DELETE=2,e(In.prototype,{interfaces_:function(){return[]},getClass:function(){return In}}),e(Cn.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(Cn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,s,o,a),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return Cn}}),Cn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},h(wn,In),e(wn.prototype,{prepareEvents:function(){Js.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Cn&&N(arguments[0],y)&&N(arguments[1],y)){var i=arguments[0],r=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&N(arguments[0],y)&&arguments[1]instanceof Cn){var o=arguments[0],a=arguments[1];arguments[2]?this.addEdges(o,null):this.addEdges(o),this.computeIntersections(a)}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var s=new bn(n,r),o=new En(e,n.getMinX(r),s);this.events.add(o),this.events.add(new En(n.getMaxX(r),o))}},processOverlaps:function(t,e,n,i){for(var r=n.getObject(),s=t;e>s;s++){var o=this.events.get(s);if(o.isInsert()){var a=o.getObject();n.isSameLabel(o)||(r.computeIntersections(a,i),this.nOverlaps++)}}},addEdges:function(){if(1===arguments.length)for(var t=arguments[0],e=t.iterator();e.hasNext();){r=e.next();this.addEdge(r,r)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1],e=n.iterator();e.hasNext();){var r=e.next();this.addEdge(r,i)}},interfaces_:function(){return[]},getClass:function(){return wn}}),e(Mn.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return Xt.toLineString(new f(this.min,0),new f(this.max,0))},interfaces_:function(){return[]},getClass:function(){return Mn}}),e(Sn.prototype,{compare:function(t,e){var n=t,i=e,r=(n.min+n.max)/2,s=(i.min+i.max)/2;return s>r?-1:r>s?1:0},interfaces_:function(){return[a]},getClass:function(){return Sn}}),Mn.NodeComparator=Sn,h(Nn,Mn),e(Nn.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return Nn}}),h(_n,Mn),e(_n.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(null!==this.node1&&this.node1.query(t,e,n),void(null!==this.node2&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return _n}}),e(Tn.prototype,{buildTree:function(){Js.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new E;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new Nn(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return null!==this.root?null:void(this.root=this.buildTree())},printNode:function(t){k.out.println(Xt.toLineString(new f(t.min,this.level),new f(t.max,this.level)))},init:function(){return null!==this.root?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new _n(t.get(n),t.get(n+1));e.add(r)}}},interfaces_:function(){return[]},getClass:function(){return Tn}}),e(Ln.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof Tt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof Ct&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[B]},getClass:function(){return Ln}}),Ln.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Ln.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Ln.getLines(e,n))}},Ln.getLines=function(){if(1===arguments.length){var t=arguments[0];return Ln.getLines(t,!1)}if(2===arguments.length){if(N(arguments[0],m)&&N(arguments[1],m)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){d=i.next();Ln.getLines(d,n)}return n}if(arguments[0]instanceof V&&"boolean"==typeof arguments[1]){var r=arguments[0],s=arguments[1],o=new E;return r.apply(new Ln(o,s)),o}if(arguments[0]instanceof V&&N(arguments[1],m)){var a=arguments[0],l=arguments[1];return a instanceof Ct?l.add(a):a.apply(new Ln(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&N(arguments[0],m)&&N(arguments[1],m)){for(var u=arguments[0],h=arguments[1],c=arguments[2],i=u.iterator();i.hasNext();){var d=i.next();Ln.getLines(d,h,c)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof V&&N(arguments[1],m)){var f=arguments[0],g=arguments[1],p=arguments[2];return f.apply(new Ln(g,p)),g}}},e(Pn.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[we]},getClass:function(){return Pn}}),e(Rn.prototype,{locate:function(t){var e=new Qt(t),n=new On(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[pn]},getClass:function(){return Rn}}),e(On.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[we]},getClass:function(){return On}}),e(Dn.prototype,{init:function(t){for(var e=Ln.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new te(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this.index.insert(i,r,n)}},query:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Pn;return this.index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];this.index.query(i,r,s)}},interfaces_:function(){return[]},getClass:function(){return Dn}}),Rn.SegmentVisitor=On,Rn.IntervalIndexedGeometry=Dn,e(kn.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[s]},getClass:function(){return kn}}),e(An.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),o=0;s[o++]=new f(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)s[o++]=this.edge.pts[a];return r&&(s[o]=e.coord),new Gn(s,new tn(this.edge.label))},add:function(t,e,n){var i=new kn(t,e,n),r=this.nodeMap.get(i);return null!==r?r:(this.nodeMap.put(i,i),i)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},interfaces_:function(){return[]},getClass:function(){return An}}),e(Fn.prototype,{getChainStartIndices:function(t){var e=0,n=new E;n.add(new L(e));do{var i=this.findChainEnd(t,e);n.add(new L(i)),e=i}while(e<t.length-1);return Fn.toIntArray(n)},findChainEnd:function(t,e){for(var n=Ge.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Ge.quadrant(t[i-1],t[i])===n;)i++;return i-1},interfaces_:function(){return[]},getClass:function(){return Fn}}),Fn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(Bn.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n>e?e:n},computeIntersectsForChain:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3],l=arguments[4],u=arguments[5],h=this.pts[r],c=this.pts[s],d=o.pts[a],f=o.pts[l];if(s-r==1&&l-a==1)return u.addIntersections(this.e,r,o.e,a),null;if(this.env1.init(h,c),this.env2.init(d,f),!this.env1.intersects(this.env2))return null;var g=Math.trunc((r+s)/2),p=Math.trunc((a+l)/2);g>r&&(p>a&&this.computeIntersectsForChain(r,g,o,a,p,u),l>p&&this.computeIntersectsForChain(r,g,o,p,l,u)),s>g&&(p>a&&this.computeIntersectsForChain(g,s,o,a,p,u),l>p&&this.computeIntersectsForChain(g,s,o,p,l,u))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},interfaces_:function(){return[]},getClass:function(){return Bn}}),e(Vn.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(0===arguments.length){for(var t=0;2>t;t++)for(var e=0;3>e;e++)if(this.depth[t][e]!==Vn.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this.depth[n][1]===Vn.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.depth[i][r]===Vn.NULL_VALUE}},normalize:function(){for(var t=0;2>t;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),0>e&&(e=0);for(var n=1;3>n;n++){var i=0;this.depth[t][n]>e&&(i=1),this.depth[t][n]=i}}},getDelta:function(t){return this.depth[t][Qe.RIGHT]-this.depth[t][Qe.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?S.EXTERIOR:S.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(1===arguments.length)for(var t=arguments[0],e=0;2>e;e++)for(var n=1;3>n;n++){var i=t.getLocation(e,n);i!==S.EXTERIOR&&i!==S.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=Vn.depthAtLocation(i):this.depth[e][n]+=Vn.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],s=arguments[1];arguments[2]===S.INTERIOR&&this.depth[r][s]++}},interfaces_:function(){return[]},getClass:function(){return Vn}}),Vn.depthAtLocation=function(t){return t===S.EXTERIOR?0:t===S.INTERIOR?1:Vn.NULL_VALUE},Vn.NULL_VALUE=-1,h(Gn,sn),e(Gn.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new Gn(t,tn.toLineLabel(this.label))},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Gn))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(e.pts[s])||(n=!1),this.pts[s].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Gn.updateIM(this.label,t)},isCollapsed:function(){return!!this.label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return null===this.mce&&(this.mce=new Bn(this)),this.mce},getEnvelope:function(){if(null===this.env){this.env=new C;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,i){var r=new f(t.getIntersection(i)),s=e,o=t.getEdgeDistance(n,i),a=s+1;if(a<this.pts.length){var l=this.pts[a];r.equals2D(l)&&(s=a,o=0)}this.eiList.add(r,s,o)},toString:function(){var t=new T;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[]},getClass:function(){return Gn}}),Gn.updateIM=function(){if(2!==arguments.length)return sn.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Qe.ON),t.getLocation(1,Qe.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Qe.LEFT),t.getLocation(1,Qe.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Qe.RIGHT),t.getLocation(1,Qe.RIGHT),2))},h(zn,cn),e(zn.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e).getLabel(),i=1;S.NONE;n.getLocation(t,Qe.ON)===S.BOUNDARY&&i++;var r=zn.determineBoundary(this.boundaryNodeRule,i);n.setLocation(t,r)},computeSelfNodes:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=new Cn(n,!0,!1);s.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this.parentGeom instanceof Tt||this.parentGeom instanceof Nt||this.parentGeom instanceof Lt,l=i||!a;return o.computeIntersections(this.edges,s,l),this.addSelfIntersectionNodes(this.argIndex),s}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},computeEdgeIntersections:function(t,e,n){var i=new Cn(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this.edges,t.edges,i),i},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof Mt){var t=arguments[0].getCoordinate();this.insertPoint(this.argIndex,t,S.INTERIOR)}else if(arguments[0]instanceof f){var e=arguments[0];this.insertPoint(this.argIndex,e,S.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),S.EXTERIOR,S.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,S.INTERIOR,S.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],S.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],S.BOUNDARY)},addLineString:function(t){var e=U.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new Gn(e,new tn(this.argIndex,S.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),d.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},getBoundaryNodes:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===S.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var i=U.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=i[0],null;var r=e,s=n;$t.isCCW(i)&&(r=n,s=e);var o=new Gn(i,new tn(this.argIndex,S.BOUNDARY,r,s));this.lineEdgeMap.put(t,o),this.insertEdge(o),this.insertPoint(this.argIndex,i[0],S.BOUNDARY)},insertPoint:function(t,e,n){var i=this.nodes.addNode(e),r=i.getLabel();null===r?i.label=new tn(t,n):r.setLocation(t,n)},createEdgeSetIntersector:function(){return new wn},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var s=r.next();this.addSelfIntersectionNode(t,s.coord,i)}},add:function(){if(1!==arguments.length)return cn.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Lt&&(this.useBoundaryDeterminationRule=!1),t instanceof Nt)this.addPolygon(t);else if(t instanceof Ct)this.addLineString(t);else if(t instanceof Mt)this.addPoint(t);else if(t instanceof _t)this.addCollection(t);else if(t instanceof ft)this.addCollection(t);else if(t instanceof Lt)this.addCollection(t);else{if(!(t instanceof dt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return N(this.parentGeom,St)&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new Rn(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(1===arguments.length){var t=arguments[0];return this.lineEdgeMap.get(t)}return cn.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return zn}}),zn.determineBoundary=function(t,e){return t.isInBoundary(e)?S.BOUNDARY:S.INTERIOR},e(qn.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return qn}}),e(jn.prototype,{compareTo:function(t){var e=t;return jn.compareOriented(this.pts,this._orientation,e.pts,e._orientation)},interfaces_:function(){return[s]},getClass:function(){return jn}}),jn.orientation=function(t){return 1===U.increasingDirection(t)},jn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,s=i?1:-1,o=e?t.length:-1,a=i?n.length:-1,l=e?0:t.length-1,u=i?0:n.length-1;;){var h=t[l].compareTo(n[u]);if(0!==h)return h;var c=(l+=r)===o,d=(u+=s)===a;if(c&&!d)return-1;if(!c&&d)return 1;if(c&&d)return 0}},e(Yn.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new jn(t.getCoordinates());return this.ocaMap.get(e)},add:function(t){this.edges.add(t);var e=new jn(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return Yn}}),h(Wn,qn),e(Wn.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new tn(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,i){var r=new E;return r.addAll(t),r.addAll(e),r.addAll(n),r.isEmpty()?Wn.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(r)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this.ptLocator.locate(t,i)!==S.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new E,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new E;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Ze.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new dn(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var i=new fn(this,this.geomFact,this.ptLocator);this.resultLineList=i.build(t);var r=new gn(this,this.geomFact,this.ptLocator);this.resultPointList=r.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&Wn.isResultOfOp(i.getLocation(0,Qe.RIGHT),i.getLocation(1,Qe.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;2>r;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(d.isTrue(!i.isNull(r,Qe.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Qe.LEFT,i.getLocation(r,Qe.LEFT)),d.isTrue(!i.isNull(r,Qe.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Qe.RIGHT,i.getLocation(r,Qe.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this.arg);this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(0,n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return Wn}}),Wn.overlayOp=function(t,e,n){return new Wn(t,e).getResultGeometry(n)},Wn.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Wn.createEmptyResult(Wn.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Je.map(t,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Hn.overlayOp(t,e,Wn.INTERSECTION)},Wn.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Wn.createEmptyResult(Wn.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Hn.overlayOp(t,e,Wn.SYMDIFFERENCE)},Wn.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),s=-1;switch(t){case Wn.INTERSECTION:s=Math.min(i,r);break;case Wn.UNION:s=Math.max(i,r);break;case Wn.DIFFERENCE:s=i;break;case Wn.SYMDIFFERENCE:s=Math.max(i,r)}return s},Wn.createEmptyResult=function(t,e,n,i){var r=null;switch(Wn.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Wn.difference=function(t,e){return t.isEmpty()?Wn.createEmptyResult(Wn.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Hn.overlayOp(t,e,Wn.DIFFERENCE))},Wn.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Wn.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],s=arguments[1],o=arguments[2];switch(r===S.BOUNDARY&&(r=S.INTERIOR),s===S.BOUNDARY&&(s=S.INTERIOR),o){case Wn.INTERSECTION:return r===S.INTERIOR&&s===S.INTERIOR;case Wn.UNION:return r===S.INTERIOR||s===S.INTERIOR;case Wn.DIFFERENCE:return r===S.INTERIOR&&s!==S.INTERIOR;case Wn.SYMDIFFERENCE:return r===S.INTERIOR&&s!==S.INTERIOR||r!==S.INTERIOR&&s===S.INTERIOR}return!1}},Wn.INTERSECTION=1,Wn.UNION=2,Wn.DIFFERENCE=3,Wn.SYMDIFFERENCE=4,e(Un.prototype,{selfSnap:function(t){return new he(t).snapTo(t,this.snapTolerance)},removeCommonBits:function(t){this.cbr=new fe,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=Wn.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||k.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=he.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t);return he.snap(e[0],e[1],this.snapTolerance)},interfaces_:function(){return[]},getClass:function(){return Un}}),Un.overlayOp=function(t,e,n){return new Un(t,e).getResultGeometry(n)},Un.union=function(t,e){return Un.overlayOp(t,e,Wn.UNION)},Un.intersection=function(t,e){return Un.overlayOp(t,e,Wn.INTERSECTION)},Un.symDifference=function(t,e){return Un.overlayOp(t,e,Wn.SYMDIFFERENCE)},Un.difference=function(t,e){return Un.overlayOp(t,e,Wn.DIFFERENCE)},e(Hn.prototype,{getResultGeometry:function(t){var e=null,n=!1,i=null;try{e=Wn.overlayOp(this.geom[0],this.geom[1],t);n=!0}catch(t){if(!(t instanceof u))throw t;i=t}if(!n)try{e=Un.overlayOp(this.geom[0],this.geom[1],t)}catch(t){throw t instanceof u?i:t}return e},interfaces_:function(){return[]},getClass:function(){return Hn}}),Hn.overlayOp=function(t,e,n){return new Hn(t,e).getResultGeometry(n)},Hn.union=function(t,e){return Hn.overlayOp(t,e,Wn.UNION)},Hn.intersection=function(t,e){return Hn.overlayOp(t,e,Wn.INTERSECTION)},Hn.symDifference=function(t,e){return Hn.overlayOp(t,e,Wn.SYMDIFFERENCE)},Hn.difference=function(t,e){return Hn.overlayOp(t,e,Wn.DIFFERENCE)},e(Xn.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,i=this.horizontalBisector(t);if(0===i.getLength())n=0,e=i.getCoordinate();else{var r=Hn.overlayOp(i,t,Wn.INTERSECTION),s=this.widestGeometry(r);n=s.getEnvelopeInternal().getWidth(),e=Xn.centre(s.getEnvelopeInternal())}(null===this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof dt){var t=arguments[0];if(t.isEmpty())return t;for(var e=t.getGeometryN(0),n=1;n<t.getNumGeometries();n++)t.getGeometryN(n).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=t.getGeometryN(n));return e}if(arguments[0]instanceof V){var i=arguments[0];return i instanceof dt?this.widestGeometry(i):i}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=Kn.getBisectorY(t);return this.factory.createLineString([new f(e.getMinX(),n),new f(e.getMaxX(),n)])},add:function(t){if(t instanceof Nt)this.addPolygon(t);else if(t instanceof dt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return Xn}}),Xn.centre=function(t){return new f(Xn.avg(t.getMinX(),t.getMaxX()),Xn.avg(t.getMinY(),t.getMaxY()))},Xn.avg=function(t,e){return(t+e)/2},e(Kn.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));return Xn.avg(this.hiY,this.loY)},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var i=e.getY(n);this.updateInterval(i)}},interfaces_:function(){return[]},getClass:function(){return Kn}}),Kn.getBisectorY=function(t){return new Kn(t).getBisectorY()},Xn.SafeBisectorFinder=Kn,e(Zn.prototype,{addEndpoints:function(){if(arguments[0]instanceof V){var t=arguments[0];if(t instanceof Ct)this.addEndpoints(t.getCoordinates());else if(t instanceof dt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var i=arguments[0];this.add(i[0]),this.add(i[i.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof V){var t=arguments[0];if(t instanceof Ct)this.addInterior(t.getCoordinates());else if(t instanceof dt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var i=arguments[0],n=1;n<i.length-1;n++)this.add(i[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new f(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return Zn}}),e(Jn.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof V){var t=arguments[0];if(t instanceof Mt)this.add(t.getCoordinate());else if(t instanceof dt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof f){var i=arguments[0],r=i.distance(this.centroid);r<this.minDistance&&(this.interiorPoint=new f(i),this.minDistance=r)}},interfaces_:function(){return[]},getClass:function(){return Jn}}),e(Qn.prototype,{select:function(){if(1===arguments.length)arguments[0];else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return Qn}}),e($n.prototype,{hasChildren:function(){for(var t=0;2>t;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;2>e;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;2>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return null===t||this.isSearchMatch(t)?(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;2>i;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n||(n=this.items.remove(e))},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;2>e;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;2>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},e(ti.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof ti){var t=arguments[0];return this.contains(t.min,t.max)}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return n>=this.min&&i<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return ti}}),ei.exponent=function(t){return ni(64,t)-1023},ei.powerOf2=function(t){return Math.pow(2,t)},e(ii.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=ii.computeLevel(t),this.interval=new ti,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=ei.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return ii}}),ii.computeLevel=function(t){var e=t.getWidth();return ei.exponent(e)+1},h(ri,$n),e(ri.prototype,{getInterval:function(){return this.interval},find:function(t){var e=$n.getSubnodeIndex(t,this.centre);return-1===e?this:null!==this.subnode[e]?this.subnode[e].find(t):this},insert:function(t){d.isTrue(null===this.interval||this.interval.contains(t.interval));var e=$n.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=$n.getSubnodeIndex(t,this.centre);return-1!==e?this.getSubnode(e).getNode(t):this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}return new ri(new ti(e,n),this.level-1)},interfaces_:function(){return[]},getClass:function(){return ri}}),ri.createNode=function(t){var e=new ii(t);return new ri(e.getInterval(),e.getLevel())},ri.createExpanded=function(t,e){var n=new ti(e);null!==t&&n.expandToInclude(t.interval);var i=ri.createNode(n);return null!==t&&i.insert(t),i},e(si.prototype,{interfaces_:function(){return[]},getClass:function(){return si}}),si.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var i=n/Math.max(Math.abs(t),Math.abs(e));return ei.exponent(i)<=si.MIN_BINARY_EXPONENT},si.MIN_BINARY_EXPONENT=-50,h(oi,$n),e(oi.prototype,{insert:function(t,e){var n=$n.getSubnodeIndex(t,oi.origin);if(-1===n)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getInterval().contains(t)){var r=ri.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){d.isTrue(t.getInterval().contains(e));(si.isZeroWidth(e.getMin(),e.getMax())?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return oi}}),oi.origin=0,e(ai.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=ai.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new ti(t,t))}if(arguments[0]instanceof ti){var e=arguments[0],n=new E;return this.query(e,n),n}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.root.addAllItemsFromOverlapping(i,r)}},iterator:function(){var t=new E;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=ai.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return null!==this.root?this.root.depth():0},nodeSize:function(){return null!==this.root?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return ai}}),ai.ensureExtent=function(t,e){var n=t.getMin(),i=t.getMax();return n!==i?t:(n===i&&(n-=e/2,i=n+e/2),new ti(n,i))},e(li.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return li}}),e(ui.prototype,{testLineSegment:function(t,e){var n=null,i=null,r=null,s=null,o=e.p0,a=e.p1;n=o.x-t.x,i=o.y-t.y,r=a.x-t.x,s=a.y-t.y,(i>0&&0>=s||s>0&&0>=i)&&Jt.signOfDet2x2(n,i,r,s)/(s-i)>0&&this.crossings++},buildIndex:function(){this.tree=new ai;for(var t=U.removeRepeatedPoints(this.ring.getCoordinates()),e=ze.getChains(t),n=0;n<e.size();n++){var i=e.get(n),r=i.getEnvelope();this.interval.min=r.getMinY(),this.interval.max=r.getMaxY(),this.tree.insert(this.interval,i)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new C(r.NEGATIVE_INFINITY,r.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),i=new hi(this,t),s=n.iterator();s.hasNext();){var o=s.next();this.testMonotoneChain(e,i,o)}return this.crossings%2==1},interfaces_:function(){return[li]},getClass:function(){return ui}}),h(hi,Qn),e(hi.prototype,{select:function(){if(1!==arguments.length)return Qn.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return hi}}),ui.MCSelecter=hi,e(ci.prototype,{interfaces_:function(){return[]},getClass:function(){return ci}}),ci.toDegrees=function(t){return 180*t/Math.PI},ci.normalize=function(t){for(;t>Math.PI;)t-=ci.PI_TIMES_2;for(;t<=-Math.PI;)t+=ci.PI_TIMES_2;return t},ci.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},ci.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},ci.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return 0>i*(n.x-e.x)+r*(n.y-e.y)},ci.interiorAngle=function(t,e,n){var i=ci.angle(e,t),r=ci.angle(e,n);return Math.abs(r-i)},ci.normalizePositive=function(t){if(0>t){for(;0>t;)t+=ci.PI_TIMES_2;t>=ci.PI_TIMES_2&&(t=0)}else{for(;t>=ci.PI_TIMES_2;)t-=ci.PI_TIMES_2;0>t&&(t=0)}return t},ci.angleBetween=function(t,e,n){var i=ci.angle(e,t),r=ci.angle(e,n);return ci.diff(i,r)},ci.diff=function(t,e){var n=null;return(n=e>t?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},ci.toRadians=function(t){return t*Math.PI/180},ci.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?ci.COUNTERCLOCKWISE:0>n?ci.CLOCKWISE:ci.NONE},ci.angleBetweenOriented=function(t,e,n){var i=ci.angle(e,t),r=ci.angle(e,n)-i;return r<=-Math.PI?r+ci.PI_TIMES_2:r>Math.PI?r-ci.PI_TIMES_2:r},ci.PI_TIMES_2=2*Math.PI,ci.PI_OVER_2=Math.PI/2,ci.PI_OVER_4=Math.PI/4,ci.COUNTERCLOCKWISE=$t.COUNTERCLOCKWISE,ci.CLOCKWISE=$t.CLOCKWISE,ci.NONE=$t.COLLINEAR,e(di.prototype,{area:function(){return di.area(this.p0,this.p1,this.p2)},signedArea:function(){return di.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(null===t)throw new i("Supplied point is null.");return di.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return di.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return di.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return di.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return di.area3D(this.p0,this.p1,this.p2)},centroid:function(){return di.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return di.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return di}}),di.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},di.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},di.det=function(t,e,n,i){return t*i-e*n},di.interpolateZ=function(t,e,n,i){var r=e.x,s=e.y,o=n.x-r,a=i.x-r,l=n.y-s,u=i.y-s,h=o*u-a*l,c=t.x-r,d=t.y-s,f=(u*c-a*d)/h,g=(-l*c+o*d)/h;return e.z+f*(n.z-e.z)+g*(i.z-e.z)},di.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),s=n.distance(t),o=i;return r>o&&(o=r),s>o&&(o=s),o},di.isAcute=function(t,e,n){return!(!ci.isAcute(t,e,n)||!ci.isAcute(e,n,t)||!ci.isAcute(n,t,e))},di.circumcentre=function(t,e,n){var i=n.x,r=n.y,s=t.x-i,o=t.y-r,a=e.x-i,l=e.y-r,u=2*di.det(s,o,a,l);return new f(i-di.det(o,s*s+o*o,l,a*a+l*l)/u,r+di.det(s,s*s+o*o,a,a*a+l*l)/u)},di.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y;return new A(new A(t.x+n/2,t.y+i/2,1),new A(t.x-i+n/2,t.y+n+i/2,1))},di.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),s=n.x-t.x,o=n.y-t.y;return new f(t.x+r*s,t.y+r*o)},di.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=e.z-t.z,o=n.x-t.x,a=n.y-t.y,l=n.z-t.z,u=r*l-s*a,h=s*o-i*l,c=i*a-r*o,d=u*u+h*h+c*c;return Math.sqrt(d)/2},di.centroid=function(t,e,n){return new f((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},di.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),s=t.distance(e),o=i+r+s;return new f((i*t.x+r*e.x+s*n.x)/o,(i*t.y+r*e.y+s*n.y)/o)},e(fi.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(1===this.input.getNumPoints()){e=this.input.getCoordinates();return this.extremalPts=[new f(e[0])],null}var t=this.input.convexHull().getCoordinates(),e=t;if(t[0].equals2D(t[t.length-1])&&(e=new Array(t.length-1).fill(null),U.copyDeep(t,0,e,0,t.length-1)),e.length<=2)return this.extremalPts=U.copyDeep(e),null;for(var n=fi.lowestPoint(e),i=fi.pointWitMinAngleWithX(e,n),r=0;r<e.length;r++){var s=fi.pointWithMinAngleWithSegment(e,n,i);if(ci.isObtuse(n,s,i))return this.extremalPts=[new f(n),new f(i)],null;if(ci.isObtuse(s,n,i))n=s;else{if(!ci.isObtuse(s,i,n))return this.extremalPts=[new f(n),new f(i),new f(s)],null;i=s}}d.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return null!==this.extremalPts?null:(this.computeCirclePoints(),this.computeCentre(),void(null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return 0===this.radius?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new f((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=di.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return fi}}),fi.pointWitMinAngleWithX=function(t,e){for(var n=r.MAX_VALUE,i=null,s=0;s<t.length;s++){var o=t[s];if(o!==e){var a=o.x-e.x,l=o.y-e.y;0>l&&(l=-l);var u=l/Math.sqrt(a*a+l*l);n>u&&(n=u,i=o)}}return i},fi.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},fi.pointWithMinAngleWithSegment=function(t,e,n){for(var i=r.MAX_VALUE,s=null,o=0;o<t.length;o++){var a=t[o];if(a!==e&&a!==n){var l=ci.angleBetween(e,a,n);i>l&&(i=l,s=a)}}return s},e(gi.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){this.convexHullPts=t instanceof Nt?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=r.MAX_VALUE;for(var e=1,n=new te,i=0;i<t.length-1;i++)n.p0=t[i],n.p1=t[i+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(null!==this.minWidthPt)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new oe(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var i=e.distancePerpendicular(t[n]),r=i,s=n,o=s;r>=i;)i=r,s=o,o=gi.nextIndex(t,s),r=e.distancePerpendicular(t[o]);return i<this.minWidth&&(this.minPtIndex=s,this.minWidth=i,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new te(e)),s},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=r.MAX_VALUE,i=-r.MAX_VALUE,s=r.MAX_VALUE,o=-r.MAX_VALUE,a=0;a<this.convexHullPts.length;a++){var l=gi.computeC(t,e,this.convexHullPts[a]);l>i&&(i=l),n>l&&(n=l);var u=gi.computeC(-e,t,this.convexHullPts[a]);u>o&&(o=u),s>u&&(s=u)}var h=gi.computeSegmentForLine(-t,-e,o),c=gi.computeSegmentForLine(-t,-e,s),d=gi.computeSegmentForLine(-e,t,i),f=gi.computeSegmentForLine(-e,t,n),g=d.lineIntersection(h),p=f.lineIntersection(h),m=f.lineIntersection(c),v=d.lineIntersection(c),y=this.inputGeom.getFactory().createLinearRing([g,p,m,v,g]);return this.inputGeom.getFactory().createPolygon(y,null)},interfaces_:function(){return[]},getClass:function(){return gi}}),gi.nextIndex=function(t,e){return++e>=t.length&&(e=0),e},gi.computeC=function(t,e,n){return t*n.y-e*n.x},gi.getMinimumDiameter=function(t){return new gi(t).getDiameter()},gi.getMinimumRectangle=function(t){return new gi(t).getMinimumRectangle()},gi.computeSegmentForLine=function(t,e,n){var i=null,r=null;return Math.abs(e)>Math.abs(t)?(i=new f(0,n/e),r=new f(1,n/e-t/e)):(i=new f(n/t,0),r=new f(n/t-e/t,1)),new te(i,r)};var Qs=Object.freeze({Centroid:ne,CGAlgorithms:$t,ConvexHull:oe,InteriorPointArea:Xn,InteriorPointLine:Zn,InteriorPointPoint:Jn,RobustLineIntersector:Zt,MCPointInRing:ui,MinimumBoundingCircle:fi,MinimumDiameter:gi});e(pi.prototype,{getResultGeometry:function(){return new mi(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>=t)throw new i("Tolerance must be positive");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return pi}}),pi.densifyPoints=function(t,e,n){for(var i=new te,r=new I,s=0;s<t.length-1;s++){i.p0=t[s],i.p1=t[s+1],r.add(i.p0,!1);var o=i.getLength(),a=Math.trunc(o/e)+1;if(a>1)for(var l=o/a,u=1;a>u;u++){var h=u*l/o,c=i.pointAlong(h);n.makePrecise(c),r.add(c,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()},pi.densify=function(t,e){var n=new pi(t);return n.setDistanceTolerance(e),n.getResultGeometry()},h(mi,le),e(mi.prototype,{transformMultiPolygon:function(t,e){var n=le.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=le.prototype.transformPolygon.call(this,t,e);return e instanceof Lt?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=pi.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof Ct&&1===i.length&&(i=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(i)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return mi}}),pi.DensifyTransformer=mi;var $s=Object.freeze({Densifier:pi});e(vi.prototype,{find:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var i=n.oNext();if(i.compareTo(t)!==e||i===this)return n.insertAfter(t),null;n=i}while(n!==this);d.shouldNeverReachHere()},insertAfter:function(t){d.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){var t=0,e=this;do{t++,e=e.oNext()}while(e!==this);return t},equals:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),i=t.deltaX(),r=t.deltaY();if(e===i&&n===r)return 0;var s=Ge.quadrant(e,n),o=Ge.quadrant(i,r);return s>o?1:o>s?-1:$t.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;2===t.degree();)if((t=t.prev())===this)return null;return t},compareTo:function(t){var e=t;return this.compareAngularDirection(e)},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return vi}}),vi.init=function(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},vi.create=function(t,e){var n=new vi(t),i=new vi(e);return n.init(i),n},h(yi,vi),e(yi.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return yi}}),yi.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},yi.isMarked=function(t){return t.isMarked()},yi.setMark=function(t,e){t.setMark(e)},yi.markBoth=function(t){t.mark(),t.sym().mark()},yi.mark=function(t){t.mark()},e(xi.prototype,{insert:function(t,e,n){var i=this.create(t,e);null!==n?n.insert(i):this.vertexMap.put(t,i);var r=this.vertexMap.get(e);return null!==r?r.insert(i.sym()):this.vertexMap.put(e,i.sym()),i},create:function(t,e){var n=this.createEdge(t),i=this.createEdge(e);return vi.init(n,i),n},createEdge:function(t){return new vi(t)},addEdge:function(t,e){if(!xi.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),i=null;return null!==n&&(i=n.find(e)),null!==i?i:this.insert(t,e,n)},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return null===n?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return xi}}),xi.isValidEdge=function(t,e){return 0!==e.compareTo(t)},h(bi,yi),e(bi.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return bi}}),h(Ei,xi),e(Ei.prototype,{createEdge:function(t){return new bi(t)},interfaces_:function(){return[]},getClass:function(){return Ei}}),e(Ii.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym()).isStart()?null===this.ringStartEdge?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return null===this.result&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new I,n=t;for(e.add(n.orig().copy(),!1);2===n.sym().degree();){var i=n.next();if(i===t)break;e.add(i.orig().copy(),!1),n=i}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new I,n=t;for(this.ringStartEdge=null,yi.markBoth(n),e.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var i=n.next();if(i===t)return this.buildRing(this.ringStartEdge),null;e.add(i.orig().copy(),!1),n=i,yi.markBoth(n)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do{yi.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext()}while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges().iterator();t.hasNext();){var e=t.next();yi.isMarked(e)||this.process(e)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();yi.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof V)arguments[0].apply({interfaces_:function(){return[B]},filter:function(t){t instanceof Ct&&this.add(t)}});else if(N(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof Ct){var i=arguments[0];null===this.factory&&(this.factory=i.getFactory());for(var r=i.getCoordinateSequence(),s=!1,e=1;e<r.size();e++){var o=this.graph.addEdge(r.getCoordinate(e-1),r.getCoordinate(e));null!==o&&(s||(o.setStart(),s=!0))}}},interfaces_:function(){return[]},getClass:function(){return Ii}}),Ii.dissolve=function(t){var e=new Ii;return e.add(t),e.getResult()};var to=Object.freeze({LineDissolver:Ii}),eo=Object.freeze({GeometryGraph:zn});e(Ci.prototype,{hasChildren:function(){for(var t=0;4>t;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;4>e;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;4>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;4>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;4>n;n++)null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;4>i;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n||(n=this.items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;4>n;n++)null!==this.subnode[n]&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;4>e;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;4>e;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},add:function(t){this.items.add(t)},interfaces_:function(){return[l]},getClass:function(){return Ci}}),Ci.getSubnodeIndex=function(t,e,n){var i=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(i=3),t.getMaxY()<=n&&(i=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(i=2),t.getMaxY()<=n&&(i=0)),i},e(wi.prototype,{getLevel:function(){return this.level},computeKey:function(){if(1===arguments.length){var t=arguments[0];for(this.level=wi.computeQuadLevel(t),this.env=new C,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=ei.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/i)*i,this.pt.y=Math.floor(n.getMinY()/i)*i,this.env.init(this.pt.x,this.pt.x+i,this.pt.y,this.pt.y+i)}},getEnvelope:function(){return this.env},getCentre:function(){return new f((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return wi}}),wi.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),i=e>n?e:n;return ei.exponent(i)+1},h(Mi,Ci),e(Mi.prototype,{find:function(t){var e=Ci.getSubnodeIndex(t,this.centrex,this.centrey);return-1===e?this:null!==this.subnode[e]?this.subnode[e].find(t):this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=Ci.getSubnodeIndex(t,this.centrex,this.centrey);return-1!==e?this.getSubnode(e).getNode(t):this},createSubnode:function(t){var e=0,n=0,i=0,r=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,i=this.env.getMinY(),r=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),i=this.env.getMinY(),r=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,i=this.centrey,r=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),i=this.centrey,r=this.env.getMaxY()}return new Mi(new C(e,n,i,r),this.level-1)},insertNode:function(t){d.isTrue(null===this.env||this.env.contains(t.env));var e=Ci.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return Mi}}),Mi.createNode=function(t){var e=new wi(t);return new Mi(e.getEnvelope(),e.getLevel())},Mi.createExpanded=function(t,e){var n=new C(e);null!==t&&n.expandToInclude(t.env);var i=Mi.createNode(n);return null!==t&&i.insertNode(t),i},h(Si,Ci),e(Si.prototype,{insert:function(t,e){var n=Ci.getSubnodeIndex(t,Si.origin.x,Si.origin.y);if(-1===n)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getEnvelope().contains(t)){var r=Mi.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){d.isTrue(t.getEnvelope().contains(e));var i=si.isZeroWidth(e.getMinX(),e.getMaxX()),r=si.isZeroWidth(e.getMinY(),e.getMaxY());(i||r?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return Si}}),Si.origin=new f(0,0),e(Ni.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=Ni.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){var t=arguments[0],e=new Pn;return this.query(t,e),e.getItems()}if(2===arguments.length){var n=arguments[0],i=arguments[1];this.root.visit(n,i)}},queryAll:function(){var t=new E;return this.root.addAllItems(t),t},remove:function(t,e){var n=Ni.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},depth:function(){return null!==this.root?this.root.depth():0},isEmpty:function(){return null===this.root},interfaces_:function(){return[Me,l]},getClass:function(){return Ni}}),Ni.ensureExtent=function(t,e){var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),s=t.getMaxY();return n!==i&&r!==s?t:(n===i&&(n-=e/2,i=n+e/2),r===s&&(r-=e/2,s=r+e/2),new C(n,i,r,s))},Ni.serialVersionUID=-0x678b60c967a25400;var no=Object.freeze({Quadtree:Ni}),io=Object.freeze({STRtree:Le}),ro=Object.freeze({quadtree:no,strtree:io}),so=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];e(_i.prototype,{read:function(t){var e=void 0,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!oo[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==so.indexOf(n)?oo[n].apply(this,[e.coordinates]):"GeometryCollection"===n?oo[n].apply(this,[e.geometries]):oo[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!ao[e])throw new Error("Geometry is not supported");return ao[e].apply(this,[t])}});var oo={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!oo[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=oo.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new f(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new f(t[0],t[1]),new f(t[2],t[1]),new f(t[2],t[3]),new f(t[0],t[3]),new f(t[0],t[1])])},Point:function(t){var e=new f(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(oo.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=oo.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(oo.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=oo.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var s=t[r],o=oo.coordinates.apply(this,[s]),a=this.geometryFactory.createLinearRing(o);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(oo.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},ao={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:ao.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=ao.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(ao.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=ao.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=ao.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var i=0;i<t.holes.length;++i){var r=t.holes[i],s=ao.LineString.apply(this,[r]);e.push(s.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=ao.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=i.getGeometryType();e.push(ao[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}};e(Ti.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Yt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;n>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;n>e;e++)this.reducePrecision(t.geometries[e])}}),e(Li.prototype,{write:function(t){return this.parser.write(t)}}),e(Pi.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Yt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;n>e;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var i=0,r=t.geometries.length;r>i;i++)this.reducePrecision(t.geometries[i])}}),e(Oi.prototype,{read:function(t){return t instanceof ol.geom.Point?this.convertFromPoint(t):t instanceof ol.geom.LineString?this.convertFromLineString(t):t instanceof ol.geom.LinearRing?this.convertFromLinearRing(t):t instanceof ol.geom.Polygon?this.convertFromPolygon(t):t instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof ol.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new f(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new f(t[0],t[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new f(t[0],t[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,i=[],r=0;r<e.length;r++){var s=this.convertFromLinearRing(e[r]);0===r?n=s:i.push(s)}return this.geometryFactory.createPolygon(n,i)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0},convertToPoint:function(t){return new ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(Ri);return new ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(Ri);return new ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(Ri)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(Ri));return new ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new ol.geom.MultiPoint(t.getCoordinates().map(Ri))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var i=t.geometries[n];e.push(this.write(i))}return new ol.geom.GeometryCollection(e)}});var lo=Object.freeze({GeoJSONReader:Ti,GeoJSONWriter:Li,OL3Parser:Oi,WKTReader:Pi,WKTWriter:Xt});e(Di.prototype,{rescale:function(){if(N(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var i=arguments[0];2===i.length&&(new f(i[0]),new f(i[1]));for(e=0;e<i.length;e++)i[e].x=i[e].x/this.scaleFactor+this.offsetX,i[e].y=i[e].y/this.scaleFactor+this.offsetY;2===i.length&&i[0].equals2D(i[1])&&k.out.println(i)}},scale:function(){if(N(arguments[0],m)){for(var t=arguments[0],e=new E,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Fe(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],s=new Array(r.length).fill(null),n=0;n<r.length;n++)s[n]=new f(Math.round((r[n].x-this.offsetX)*this.scaleFactor),Math.round((r[n].y-this.offsetY)*this.scaleFactor),r[n].z);return U.removeRepeatedPoints(s)}},isIntegerPrecision:function(){return 1===this.scaleFactor},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[qe]},getClass:function(){return Di}});var uo=Object.freeze({MCIndexNoder:Ye,ScaledNoder:Di,SegmentString:xe});e(ki.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new at,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n).getCoordinate();if(e.contains(i))return this.nonSimpleLocation=i,!1;e.add(i)}return!0},isSimplePolygonal:function(t){for(var e=Ln.getLines(t).iterator();e.hasNext();){var n=e.next();if(!this.isSimpleLinearGeometry(n))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new rt,n=t.getEdgeIterator();n.hasNext();){var i=n.next(),r=(i.getMaximumSegmentIndex(),i.isClosed()),s=i.getCoordinate(0);this.addEndpoint(e,s,r);var o=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(e,o,r)}for(n=e.values().iterator();n.hasNext();){var a=n.next();if(a.isClosed&&2!==a.degree)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new zn(0,t),n=new Zt,i=e.computeSelfNodes(n,!0);return!(i.hasIntersection()&&(i.hasProperIntersection()?(this.nonSimpleLocation=i.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(e)||this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getMaximumSegmentIndex(),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next();if(!s.isEndPoint(i))return this.nonSimpleLocation=s.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var i=t.get(e);null===i&&(i=new Ai(e),t.put(e,i)),i.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof Ct?this.isSimpleLinearGeometry(t):t instanceof ft?this.isSimpleLinearGeometry(t):t instanceof _t?this.isSimpleMultiPoint(t):N(t,St)?this.isSimplePolygonal(t):!(t instanceof dt)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return ki}}),e(Ai.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ai}}),ki.EndpointInfo=Ai,e(Fi.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=Fi.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Fi.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==Fi.JOIN_ROUND&&(this.quadrantSegments=Fi.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=0>t?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return Fi}}),Fi.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Fi.CAP_ROUND=1,Fi.CAP_FLAT=2,Fi.CAP_SQUARE=3,Fi.JOIN_ROUND=1,Fi.JOIN_MITRE=2,Fi.JOIN_BEVEL=3,Fi.DEFAULT_QUADRANT_SEGMENTS=8,Fi.DEFAULT_MITRE_LIMIT=5,Fi.DEFAULT_SIMPLIFY_FACTOR=.01,e(Bi.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return 0>n&&(n=this.getRightmostSideOfSegment(t,e-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();d.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],i=$t.computeOrientation(this.minCoord,n,e),r=!1;e.y<this.minCoord.y&&n.y<this.minCoord.y&&i===$t.COUNTERCLOCKWISE?r=!0:e.y>this.minCoord.y&&n.y>this.minCoord.y&&i===$t.CLOCKWISE&&(r=!0),r&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge().getCoordinates();if(0>e||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Qe.LEFT;return n[e].y<n[e+1].y&&(i=Qe.RIGHT),i},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode().getEdges();this.minDe=t.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}d.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe,this.getRightmostSide(this.minDe,this.minIndex)===Qe.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Bi}}),Vi.prototype.addLast=function(t){this.array_.push(t)},Vi.prototype.removeFirst=function(){return this.array_.shift()},Vi.prototype.isEmpty=function(){return 0===this.array_.length},e(Gi.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();)if((i=n.next()).isVisited()||i.getSym().isVisited()){e=i;break}if(null===e)throw new Ue("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(n=t.getEdges().iterator();n.hasNext();){var i=n.next();i.setVisited(!0),this.copySymDepths(i)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(Qe.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Qe.RIGHT)>=1&&e.getDepth(Qe.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new Q,n=new Vi,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var s=r.getEdges().iterator();s.hasNext();){var o=s.next().getSym();if(!o.isVisited()){var a=o.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(null===this.env){for(var t=new C,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge().getCoordinates(),r=0;r<i.length-1;r++)t.expandToInclude(i[r]);this.env=t}return this.env},addReachable:function(t){var e=new re;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(Qe.LEFT,t.getDepth(Qe.RIGHT)),e.setDepth(Qe.RIGHT,t.getDepth(Qe.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this.dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[s]},getClass:function(){return Gi}}),e(zi.prototype,{isDeletable:function(t,e,n,i){var r=this.inputLine[t],s=this.inputLine[e],o=this.inputLine[n];return!(!this.isConcave(r,s,o)||!this.isShallow(r,s,o,i))&&this.isShallowSampled(r,s,t,n,i)},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),i=!1;n<this.inputLine.length;){var r=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=zi.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},isShallowConcavity:function(t,e,n,i){return $t.computeOrientation(t,e,n)===this.angleOrientation&&i>$t.distancePointLine(e,t,n)},isShallowSampled:function(t,e,n,i,r){var s=Math.trunc((i-n)/zi.NUM_PTS_TO_CHECK);0>=s&&(s=1);for(var o=n;i>o;o+=s)if(!this.isShallow(t,e,this.inputLine[o],r))return!1;return!0},isConcave:function(t,e,n){var i=$t.computeOrientation(t,e,n)===this.angleOrientation;return i},simplify:function(t){this.distanceTol=Math.abs(t),0>t&&(this.angleOrientation=$t.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===zi.DELETE;)e++;return e},isShallow:function(t,e,n,i){return i>$t.distancePointLine(e,t,n)},collapseLine:function(){for(var t=new I,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==zi.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return zi}}),zi.simplify=function(t,e){return new zi(t).simplify(e)},zi.INIT=0,zi.DELETE=1,zi.KEEP=1,zi.NUM_PTS_TO_CHECK=10,e(qi.prototype,{getCoordinates:function(){return this.ptList.toArray(qi.COORDINATE_ARRAY_TYPE)},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new f(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1);return t.distance(e)<this.minimimVertexDistance},toString:function(){return(new Ut).createLineString(this.getCoordinates()).toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new f(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return qi}}),qi.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),e(ji.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=$t.computeOrientation(this.s0,this.s1,this.s2),i=n===$t.CLOCKWISE&&this.side===Qe.LEFT||n===$t.COUNTERCLOCKWISE&&this.side===Qe.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new te(t,e),i=new te;this.computeOffsetSegment(n,Qe.LEFT,this.distance,i);var r=new te;this.computeOffsetSegment(n,Qe.RIGHT,this.distance,r);var s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s);switch(this.bufParams.getEndCapStyle()){case Fi.CAP_ROUND:this.segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,$t.CLOCKWISE,this.distance),this.segList.addPt(r.p1);break;case Fi.CAP_FLAT:this.segList.addPt(i.p1),this.segList.addPt(r.p1);break;case Fi.CAP_SQUARE:var l=new f;l.x=Math.abs(this.distance)*Math.cos(a),l.y=Math.abs(this.distance)*Math.sin(a);var u=new f(i.p1.x+l.x,i.p1.y+l.y),h=new f(r.p1.x+l.x,r.p1.y+l.y);this.segList.addPt(u),this.segList.addPt(h)}},getCoordinates:function(){return this.segList.getCoordinates()},addMitreJoin:function(t,e,n,i){var r=!0,s=null;try{s=A.intersection(e.p0,e.p1,n.p0,n.p1),(0>=i?1:s.distance(t)/Math.abs(i))>this.bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof M))throw t;s=new f(0,0),r=!1}r?this.segList.addPt(s):this.addLimitedMitreJoin(e,n,i,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,i,r){var s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s),l=n.x-t.x,u=n.y-t.y,h=Math.atan2(u,l);i===$t.CLOCKWISE?h>=a&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,a,h,i,r),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*ji.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Fi.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Fi.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new f(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new f(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new f(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new f(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,i){var r=this.seg0.p1,s=ci.angle(r,this.seg0.p0),o=(ci.angle(r,this.seg1.p1),ci.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1))/2,a=ci.normalize(s+o),l=ci.normalize(a+Math.PI),u=i*n,h=n-u*Math.abs(Math.sin(o)),c=new te(r,new f(r.x+u*Math.cos(l),r.y+u*Math.sin(l))),d=c.pointAlongOffset(1,h),g=c.pointAlongOffset(1,-h);this.side===Qe.LEFT?(this.segList.addPt(d),this.segList.addPt(g)):(this.segList.addPt(g),this.segList.addPt(d))},computeOffsetSegment:function(t,e,n,i){var r=e===Qe.LEFT?1:-1,s=t.p1.x-t.p0.x,o=t.p1.y-t.p0.y,a=Math.sqrt(s*s+o*o),l=r*n*s/a,u=r*n*o/a;i.p0.x=t.p0.x-u,i.p0.y=t.p0.y+l,i.p1.x=t.p1.x-u,i.p1.y=t.p1.y+l},addFilletArc:function(t,e,n,i,r){var s=i===$t.CLOCKWISE?-1:1,o=Math.abs(e-n),a=Math.trunc(o/this.filletAngleQuantum+.5);if(1>a)return null;var l=null;l=o/a;for(var u=0,h=new f;o>u;){var c=e+s*u;h.x=t.x+r*Math.cos(c),h.y=t.y+r*Math.sin(c),this.segList.addPt(h),u+=l}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*ji.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new f((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var i=new f((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new f(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new qi,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*ji.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2),this.li.getIntersectionNum()>=2&&(this.bufParams.getJoinStyle()===Fi.JOIN_BEVEL||this.bufParams.getJoinStyle()===Fi.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,$t.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return ji}}),ji.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,ji.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,ji.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,ji.MAX_CLOSING_SEG_LEN_FACTOR=80,e(Yi.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,0===e)return null;var n=0>e,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var s=r.getCoordinates();return n&&U.reverse(s),s},computeSingleSidedBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var r=zi.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],Qe.LEFT),n.addFirstSegment();for(l=s-2;l>=0;l--)n.addNextSegment(r[l],!0)}else{n.addSegments(t,!1);var o=zi.simplify(t,i),a=o.length-1;n.initSideSegments(o[0],o[1],Qe.LEFT),n.addFirstSegment();for(var l=2;a>=l;l++)n.addNextSegment(o[l],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);e===Qe.RIGHT&&(i=-i);var r=zi.simplify(t,i),s=r.length-1;n.initSideSegments(r[s-1],r[0],e);for(var o=1;s>=o;o++){var a=1!==o;n.addNextSegment(r[o],a)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),i=zi.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Qe.LEFT);for(a=2;r>=a;a++)e.addNextSegment(i[a],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=zi.simplify(t,-n),o=s.length-1;e.initSideSegments(s[o],s[o-1],Qe.LEFT);for(var a=o-2;a>=0;a--)e.addNextSegment(s[a],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case Fi.CAP_ROUND:e.createCircle(t);break;case Fi.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,0>e&&!this.bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this.bufParams.isSingleSided()){var r=0>e;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Yi.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},computeOffsetCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){var r=zi.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],Qe.LEFT),n.addFirstSegment();for(l=s-2;l>=0;l--)n.addNextSegment(r[l],!0)}else{var o=zi.simplify(t,i),a=o.length-1;n.initSideSegments(o[0],o[1],Qe.LEFT),n.addFirstSegment();for(var l=2;a>=l;l++)n.addNextSegment(o[l],!0)}n.addLastSegment()},getSegGen:function(t){return new ji(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return Yi}}),Yi.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new f(t[n]);return e},e(Wi.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var t=arguments[0],e=new E,n=this.subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(N(arguments[2],y)&&arguments[0]instanceof f&&arguments[1]instanceof un){for(var s=arguments[0],o=arguments[1],a=arguments[2],l=o.getEdge().getCoordinates(),n=0;n<l.length-1;n++)if(this.seg.p0=l[n],this.seg.p1=l[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse(),!(Math.max(this.seg.p0.x,this.seg.p1.x)<s.x||this.seg.isHorizontal()||s.y<this.seg.p0.y||s.y>this.seg.p1.y||$t.computeOrientation(this.seg.p0,this.seg.p1,s)===$t.RIGHT)){var u=o.getDepth(Qe.LEFT);this.seg.p0.equals(l[n])||(u=o.getDepth(Qe.RIGHT));var h=new Ui(this.seg,u);a.add(h)}}else if(N(arguments[2],y)&&arguments[0]instanceof f&&N(arguments[1],y))for(var c=arguments[0],d=arguments[1],g=arguments[2],n=d.iterator();n.hasNext();){var p=n.next();p.isForward()&&this.findStabbedSegments(c,p,g)}},getDepth:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Js.min(e).leftDepth},interfaces_:function(){return[]},getClass:function(){return Wi}}),e(Ui.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return 0!==n?n:0!=(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg))?n:this.upwardSeg.compareTo(e.upwardSeg)},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[s]},getClass:function(){return Ui}}),Wi.DepthSegment=Ui,e(Hi.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)},addPolygon:function(t){var e=this.distance,n=Qe.LEFT;this.distance<0&&(e=-this.distance,n=Qe.RIGHT);var i=t.getExteriorRing(),r=U.removeRepeatedPoints(i.getCoordinates());if(this.distance<0&&this.isErodedCompletely(i,this.distance))return null;if(this.distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,S.EXTERIOR,S.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var o=t.getInteriorRingN(s),a=U.removeRepeatedPoints(o.getCoordinates());this.distance>0&&this.isErodedCompletely(o,-this.distance)||this.addPolygonRing(a,e,Qe.opposite(n),S.INTERIOR,S.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new di(t[0],t[1],t[2]),i=n.inCentre();return $t.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=U.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)},addCurve:function(t,e,n){if(null===t||t.length<2)return null;var i=new Fe(t,new tn(0,S.BOUNDARY,e,n));this.curveList.add(i)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,i,r){if(0===e&&t.length<Tt.MINIMUM_VALID_SIZE)return null;var s=i,o=r;t.length>=Tt.MINIMUM_VALID_SIZE&&$t.isCCW(t)&&(s=r,o=i,n=Qe.opposite(n));var a=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(a,s,o)},add:function(t){if(t.isEmpty())return null;if(t instanceof Nt)this.addPolygon(t);else if(t instanceof Ct)this.addLineString(t);else if(t instanceof Mt)this.addPoint(t);else if(t instanceof _t)this.addCollection(t);else if(t instanceof ft)this.addCollection(t);else if(t instanceof Lt)this.addCollection(t);else{if(!(t instanceof dt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return 0>e;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return 0>e&&2*Math.abs(e)>r},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return Hi}}),e(Xi.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(Xi.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,s,o,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[He]},getClass:function(){return Xi}}),Xi.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},e(Ki.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new tn(t.getLabel())).flip(),n.merge(i);var r=Ki.depthDelta(i),s=e.getDepthDelta()+r;e.setDepthDelta(s)}else this.edgeList.add(t),t.setDepthDelta(Ki.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new E,i=t.iterator();i.hasNext();){var r=i.next(),s=r.getRightmostCoordinate(),o=new Wi(n).getDepth(s);r.computeDepth(o),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},createSubgraphs:function(t){for(var e=new E,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Gi;r.create(i),e.add(r)}}return Js.sort(e,Js.reverseOrder()),e},createEmptyResultGeometry:function(){return this.geomFact.createPolygon()},getNoder:function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new Ye,n=new Zt;return n.setPrecisionModel(t),e.setSegmentIntersector(new Xi(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var i=new Hi(t,e,new Yi(n,this.bufParams)).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this.graph=new cn(new xn),this.graph.addEdges(this.edgeList.getEdges());var r=this.createSubgraphs(this.graph),s=new dn(this.geomFact);this.buildSubgraphs(r,s);var o=s.getPolygons();return o.size()<=0?this.createEmptyResultGeometry():this.geomFact.buildGeometry(o)},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),s=r.getCoordinates();if(2!==s.length||!s[0].equals2D(s[1])){var o=r.getData(),a=new Gn(r.getCoordinates(),new tn(o));this.insertUniqueEdge(a)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return Ki}}),Ki.depthDelta=function(t){var e=t.getLocation(0,Qe.LEFT),n=t.getLocation(0,Qe.RIGHT);return e===S.INTERIOR&&n===S.EXTERIOR?1:e===S.EXTERIOR&&n===S.INTERIOR?-1:0},Ki.convertSegStrings=function(t){for(var e=new Ut,n=new E;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)},e(Zi.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(n=this.segStrings.iterator();n.hasNext();){r=(i=n.next()).getCoordinates();this.checkEndPtVertexIntersections(r[0],this.segStrings),this.checkEndPtVertexIntersections(r[r.length-1],this.segStrings)}else if(2===arguments.length)for(var t=arguments[0],e=arguments[1],n=e.iterator();n.hasNext();)for(var i=n.next(),r=i.getCoordinates(),s=1;s<r.length-1;s++)if(r[s].equals(t))throw new u("found endpt/interior pt intersection at index "+s+" :pt "+t)},checkInteriorIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],s=arguments[1],o=r.getCoordinates(),a=s.getCoordinates(),l=0;l<o.length-1;l++)for(var h=0;h<a.length-1;h++)this.checkInteriorIntersections(r,l,s,h);else if(4===arguments.length){var c=arguments[0],d=arguments[1],f=arguments[2],g=arguments[3];if(c===f&&d===g)return null;var p=c.getCoordinates()[d],m=c.getCoordinates()[d+1],v=f.getCoordinates()[g],y=f.getCoordinates()[g+1];if(this.li.computeIntersection(p,m,v,y),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,p,m)||this.hasInteriorIntersection(this.li,v,y)))throw new u("found non-noded intersection at "+p+"-"+m+" and "+v+"-"+y)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(i=this.segStrings.iterator();i.hasNext();){var t=i.next();this.checkCollapses(t)}else if(1===arguments.length)for(var e=arguments[0],n=e.getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},hasInteriorIntersection:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new u("found non-noded collapse at "+Zi.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return Zi}}),Zi.fact=new Ut,e(Ji.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),s=Math.max(t.y,e.y),o=this.maxx<n||this.minx>i||this.maxy<r||this.miny>s;if(o)return!1;var a=this.intersectsToleranceSquare(t,e);return d.isTrue(!(o&&a),"Found bad envelope test"),a},initCorners:function(t){this.minx=t.x-.5,this.maxx=t.x+.5,this.miny=t.y-.5,this.maxy=t.y+.5,this.corner[0]=new f(this.maxx,this.maxy),this.corner[1]=new f(this.minx,this.maxy),this.corner[2]=new f(this.minx,this.miny),this.corner[3]=new f(this.maxx,this.miny)},intersects:function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(null===this.safeEnv){var t=Ji.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new C(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.hasIntersection()))))},intersectsToleranceSquare:function(t,e){var n=!1,i=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()||(this.li.hasIntersection()&&(i=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||n&&i||t.equals(this.pt)||e.equals(this.pt)))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return Ji}}),Ji.SAFE_ENV_EXPANSION_FACTOR=.75,e(Qi.prototype,{snap:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),s=new $i(e,n,i);return this.index.query(r,{interfaces_:function(){return[we]},visitItem:function(t){t.select(r,s)}}),s.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return Qi}}),h($i,Qn),e($i.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(2!==arguments.length)return Qn.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return null!==this.parentEdge&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return $i}}),Qi.HotPixelSnapAction=$i,e(tr.prototype,{processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this.li.computeIntersection(r,s,o,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var l=0;l<this.li.getIntersectionNum();l++)this.interiorIntersections.add(this.li.getIntersection(l));t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[He]},getClass:function(){return tr}}),e(er.prototype,{checkCorrectness:function(t){var e=new Zi(Fe.getNodedSubstrings(t));try{e.checkValid()}catch(t){if(!(t instanceof w))throw t;t.printStackTrace()}},getNodedSubstrings:function(){return Fe.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new tr(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(N(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof Fe)for(var i=arguments[0],r=i.getCoordinates(),s=0;s<r.length;s++){var o=new Ji(r[s],this.scaleFactor,this.li);this.pointSnapper.snap(o,i,s)&&i.addIntersection(r[s],s)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new Ye,this.pointSnapper=new Qi(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=new Ji(e.next(),this.scaleFactor,this.li);this.pointSnapper.snap(n)}},interfaces_:function(){return[qe]},getClass:function(){return er}}),e(nr.prototype,{bufferFixedPrecision:function(t){var e=new Di(new er(new Yt(1)),t.getScale()),n=new Ki(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var t=nr.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof Ue))throw t;this.saveException=t}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===arguments.length){var e=arguments[0],n=new Yt(nr.precisionScaleFactor(this.argGeom,this.distance,e));this.bufferFixedPrecision(n)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===Yt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new Ki(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof u))throw t;this.saveException=t}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return nr}}),nr.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return d=new nr(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof V&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2];return(c=new nr(n)).setQuadrantSegments(r),d=c.getResultGeometry(i)}if(arguments[2]instanceof Fi&&arguments[0]instanceof V&&"number"==typeof arguments[1]){var s=arguments[0],o=arguments[1];return d=(c=new nr(s,arguments[2])).getResultGeometry(o)}}else if(4===arguments.length){var a=arguments[0],l=arguments[1],u=arguments[2],h=arguments[3],c=new nr(a);c.setQuadrantSegments(u),c.setEndCapStyle(h);var d=c.getResultGeometry(l);return d}},nr.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=_.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),s=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,s)},nr.CAP_ROUND=Fi.CAP_ROUND,nr.CAP_BUTT=Fi.CAP_FLAT,nr.CAP_FLAT=Fi.CAP_FLAT,nr.CAP_SQUARE=Fi.CAP_SQUARE,nr.MAX_PRECISION_DIGITS=12;var ho=Object.freeze({BufferOp:nr,BufferParameters:Fi});e(ir.prototype,{filter:function(t){t instanceof Nt&&this.comps.add(t)},interfaces_:function(){return[ht]},getClass:function(){return ir}}),ir.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return ir.getPolygons(t,new E)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Nt?n.add(e):e instanceof dt&&e.apply(new ir(n)),n}},e(rr.prototype,{isInsideArea:function(){return this.segIndex===rr.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return rr}}),rr.INSIDE_AREA=-1,e(sr.prototype,{filter:function(t){t instanceof Mt&&this.pts.add(t)},interfaces_:function(){return[ht]},getClass:function(){return sr}}),sr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Mt?Js.singletonList(t):sr.getPoints(t,new E)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Mt?n.add(e):e instanceof dt&&e.apply(new sr(n)),n}},e(or.prototype,{filter:function(t){(t instanceof Mt||t instanceof Ct||t instanceof Nt)&&this.locations.add(new rr(t,0,t.getCoordinate()))},interfaces_:function(){return[ht]},getClass:function(){return or}}),or.getLocations=function(t){var e=new E;return t.apply(new or(e)),e},e(ar.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=ir.getPolygons(this.geom[e]);if(r.size()>0){var s=or.getLocations(this.geom[i]);if(this.computeContainmentDistance(s,r,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[i]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&N(arguments[0],y)&&N(arguments[1],y)){for(var o=arguments[0],a=arguments[1],l=arguments[2],u=0;u<o.size();u++)for(var h=o.get(u),c=0;c<a.size();c++)if(this.computeContainmentDistance(h,a.get(c),l),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof rr&&arguments[1]instanceof Nt){var d=arguments[0],f=arguments[1],g=arguments[2],p=d.getCoordinate();if(S.EXTERIOR!==this.ptLocator.locate(p,f))return this.minDistance=0,g[0]=d,g[1]=new rr(f,p),null}},computeMinDistanceLinesPoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s);if(this.computeMinDistance(r,o,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=Ln.getLines(this.geom[0]),n=Ln.getLines(this.geom[1]),i=sr.getPoints(this.geom[0]),r=sr.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return null===t[0]?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){return this.computeMinDistance(),[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()]},computeMinDistance:function(){if(0===arguments.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Ct&&arguments[1]instanceof Mt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),s=0;s<i.length-1;s++){if((d=$t.distancePointLine(r,i[s],i[s+1]))<this.minDistance){this.minDistance=d;var o=new te(i[s],i[s+1]).closestPoint(r);n[0]=new rr(t,s,o),n[1]=new rr(e,0,r)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ct&&arguments[1]instanceof Ct){var a=arguments[0],l=arguments[1],u=arguments[2];if(a.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this.minDistance)return null;for(var i=a.getCoordinates(),h=l.getCoordinates(),s=0;s<i.length-1;s++)for(var c=0;c<h.length-1;c++){var d=$t.distanceLineLine(i[s],i[s+1],h[c],h[c+1]);if(d<this.minDistance){this.minDistance=d;var f=new te(i[s],i[s+1]),g=new te(h[c],h[c+1]),p=f.closestPoints(g);u[0]=new rr(a,s,p[0]),u[1]=new rr(l,c,p[1])}if(this.minDistance<=this.terminateDistance)return null}}},computeMinDistancePoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s),a=r.getCoordinate().distance(o.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,n[0]=new rr(r,0,r.getCoordinate()),n[1]=new rr(o,0,o.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(null===this.geom[0]||null===this.geom[1])throw new i("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),s=0;s<e.size();s++){var o=e.get(s);if(this.computeMinDistance(r,o,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return ar}}),ar.distance=function(t,e){return new ar(t,e).distance()},ar.isWithinDistance=function(t,e,n){return new ar(t,e,n).distance()<=n},ar.nearestPoints=function(t,e){return new ar(t,e).nearestPoints()};var co=Object.freeze({DistanceOp:ar});e(lr.prototype,{getCoordinates:function(){if(null===this.coordinates){for(var t=0,e=0,n=new I,i=this.directedEdges.iterator();i.hasNext();){var r=i.next();r.getEdgeDirection()?t++:e++,n.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),e>t&&U.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return lr}}),e(ur.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return ur}}),ur.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},ur.setVisited=function(t,e){for(;t.hasNext();)t.next().setVisited(e)},ur.setMarked=function(t,e){for(;t.hasNext();)t.next().setMarked(e)},h(hr,ur),e(hr.prototype,{isRemoved:function(){return null===this.parentEdge},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:$t.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);t.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[s]},getClass:function(){return hr}}),hr.toEdges=function(t){for(var e=new E,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},h(cr,hr),e(cr.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(d.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return cr}}),h(dr,ur),e(dr.prototype,{isRemoved:function(){return null===this.dirEdge},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof gr){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return dr}}),e(fr.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(Js.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof dr){var t=arguments[0];this.sortEdges();for(n=0;n<this.outEdges.size();n++)if((i=this.outEdges.get(n)).getEdge()===t)return n;return-1}if(arguments[0]instanceof hr){var e=arguments[0];this.sortEdges();for(var n=0;n<this.outEdges.size();n++){var i=this.outEdges.get(n);if(i===e)return n}return-1}if(Number.isInteger(arguments[0])){var r=arguments[0]%this.outEdges.size();return 0>r&&(r+=this.outEdges.size()),r}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return fr}}),h(gr,ur),e(gr.prototype,{isRemoved:function(){return null===this.pt},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(0===arguments.length)this.pt=null;else if(1===arguments.length){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return gr}}),gr.getEdgesBetween=function(t,e){var n=new Q(hr.toEdges(t.getOutEdges().getEdges())),i=hr.toEdges(e.getOutEdges().getEdges());return n.retainAll(i),n},h(pr,dr),e(pr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return pr}}),e(mr.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return mr}}),e(vr.prototype,{findNodesOfDegree:function(t){for(var e=new E,n=this.nodeIterator();n.hasNext();){var i=n.next();i.getDegree()===t&&e.add(i)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof dr){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof hr){var e=arguments[0];null!==(s=e.getSym())&&s.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof gr){for(var n=arguments[0],i=n.getOutEdges().getEdges().iterator();i.hasNext();){var r=i.next(),s=r.getSym();null!==s&&this.remove(s),this.dirEdges.remove(r);var o=r.getEdge();null!==o&&this.edges.remove(o)}this.nodeMap.remove(n.getCoordinate()),n.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof dr){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof hr){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof gr){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof dr){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof hr){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return vr}}),h(yr,vr),e(yr.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=U.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),s=this.getNode(i),o=new cr(r,s,e[1],!0),a=new cr(s,r,e[e.length-2],!1),l=new pr(t);l.setDirectedEdges(o,a),this.add(l)},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new gr(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return yr}}),e(xr.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(d.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(null!==this.mergedLineStrings)return null;ur.setMarked(this.graph.nodeIterator(),!1),ur.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new E,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new E;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new lr(this.factory),n=t;do{e.add(n),n.getEdge().setMarked(!0),n=n.getNext()}while(null!==n&&n!==t);return e},add:function(){if(arguments[0]instanceof V)arguments[0].apply({interfaces_:function(){return[B]},filter:function(t){t instanceof Ct&&this.add(t)}});else if(N(arguments[0],m)){var t=arguments[0];this.mergedLineStrings=null;for(var e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}}else if(arguments[0]instanceof Ct){var i=arguments[0];null===this.factory&&(this.factory=i.getFactory()),this.graph.addEdge(i)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return xr}});var fo=Object.freeze({LineMerger:xr}),go=Object.freeze({OverlayOp:Wn});h(br,hr),e(br.prototype,{getNext:function(){return this.next},isInRing:function(){return null!==this.edgeRing},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return br}}),h(Er,dr),e(Er.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Er}}),e(Ir.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this.ringPts){for(var t=new I,e=this.deList.iterator();e.hasNext();){var n=e.next(),i=n.getEdge();Ir.addEdge(i.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),this.ring.isValid())},build:function(t){var e=t;do{this.add(e),e.setRing(this),e=e.getNext(),d.isTrue(null!==e,"found null DE in ring"),d.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t)},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(null!==this.holes){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}return this.factory.createPolygon(this.ring,t)},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Tt){var t=arguments[0];null===this.holes&&(this.holes=new E),this.holes.add(t)}else if(arguments[0]instanceof Ir){var e=arguments[0];e.setShell(this);var n=e.getRing();null===this.holes&&(this.holes=new E),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t).getSym().getRing();if(e.isOuterHole())return e}return null},computeHole:function(){var t=this.getRing();this._isHole=$t.isCCW(t.getCoordinates())},hasShell:function(){return null!==this.shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return Xt.toLineString(new At(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&k.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof w))throw t;k.out.println(this.ringPts)}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t).getSym().getRing().getShell();if(null!==e&&e.isIncludedSet())return this.setIncluded(!e.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return Ir}}),Ir.findDirEdgesInRing=function(t){var e=t,n=new E;do{n.add(e),e=e.getNext(),d.isTrue(null!==e,"found null DE in ring"),d.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t);return n},Ir.addEdge=function(t,e,n){if(e)for(i=0;i<t.length;i++)n.add(t[i],!1);else for(var i=t.length-1;i>=0;i--)n.add(t[i],!1)},Ir.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),s=null,o=null,a=e.iterator();a.hasNext();){var l=a.next(),u=l.getRing(),h=u.getEnvelopeInternal();if(!h.equals(i)&&h.contains(i)){r=U.ptNotInList(n.getCoordinates(),u.getCoordinates());var c=!1;$t.isPointInRing(r,u.getCoordinates())&&(c=!0),c&&(null===s||o.contains(h))&&(s=l,o=s.getRing().getEnvelopeInternal())}}return s},e(Cr.prototype,{compare:function(t,e){var n=e;return t.getRing().getEnvelope().compareTo(n.getRing().getEnvelope())},interfaces_:function(){return[a]},getClass:function(){return Cr}}),Ir.EnvelopeComparator=Cr,h(wr,vr),e(wr.prototype,{findEdgeRing:function(t){var e=new Ir(this.factory);return e.build(t),e},computeDepthParity:function(){if(0===arguments.length)for(;;){return null}else 1===arguments.length&&arguments[0]},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();wr.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=U.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),s=this.getNode(i),o=new br(r,s,e[1],!0),a=new br(s,r,e[e.length-2],!1),l=new Er(t);l.setDirectedEdges(o,a),this.add(l)},deleteCutEdges:function(){this.computeNextCWEdges(),wr.findLabeledEdgeRings(this.dirEdges);for(var t=new E,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var i=n.getSym();if(n.getLabel()===i.getLabel()){n.setMarked(!0),i.setMarked(!0);var r=n.getEdge();t.add(r.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),wr.label(this.dirEdges,-1);var t=wr.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new E,n=this.dirEdges.iterator();n.hasNext();){var i=n.next();if(!i.isMarked()&&!i.isInRing()){var r=this.findEdgeRing(i);e.add(r)}}return e},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new gr(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel(),r=wr.findIntersectionNodes(n,i);if(null!==r)for(var s=r.iterator();s.hasNext();){var o=s.next();wr.computeNextCCWEdges(o,i)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new Q,n=new re,i=t.iterator();i.hasNext();)n.push(i.next());for(;!n.isEmpty();){var r=n.pop();wr.deleteAllEdges(r);for(i=r.getOutEdges().getEdges().iterator();i.hasNext();){var s=i.next();s.setMarked(!0);var o=s.getSym();null!==o&&o.setMarked(!0);var a=s.getEdge();e.add(a.getLine());var l=s.getToNode();1===wr.getDegreeNonDeleted(l)&&n.push(l)}}return e},interfaces_:function(){return[]},getClass:function(){return wr}}),wr.findLabeledEdgeRings=function(t){for(var e=new E,n=1,i=t.iterator();i.hasNext();){var r=i.next();if(!(r.isMarked()||r.getLabel()>=0)){e.add(r);var s=Ir.findDirEdgesInRing(r);wr.label(s,n),n++}}return e},wr.getDegreeNonDeleted=function(t){for(var e=0,n=t.getOutEdges().getEdges().iterator();n.hasNext();)n.next().isMarked()||e++;return e},wr.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges().iterator();e.hasNext();){var n=e.next();n.setMarked(!0);var i=n.getSym();null!==i&&i.setMarked(!0)}},wr.label=function(t,e){for(var n=t.iterator();n.hasNext();)n.next().setLabel(e)},wr.computeNextCWEdges=function(t){for(var e=null,n=null,i=t.getOutEdges().getEdges().iterator();i.hasNext();){var r=i.next();r.isMarked()||(null===e&&(e=r),null!==n&&(s=n.getSym()).setNext(r),n=r)}if(null!==n){var s=n.getSym();s.setNext(e)}},wr.computeNextCCWEdges=function(t,e){for(var n=null,i=null,r=t.getOutEdges().getEdges(),s=r.size()-1;s>=0;s--){var o=r.get(s),a=o.getSym(),l=null;o.getLabel()===e&&(l=o);var u=null;a.getLabel()===e&&(u=a),null===l&&null===u||(null!==u&&(i=u),null!==l&&(null!==i&&(i.setNext(l),i=null),null===n&&(n=l)))}null!==i&&(d.isTrue(null!==n),i.setNext(n))},wr.getDegree=function(t,e){for(var n=0,i=t.getOutEdges().getEdges().iterator();i.hasNext();)i.next().getLabel()===e&&n++;return n},wr.findIntersectionNodes=function(t,e){var n=t,i=null;do{var r=n.getFromNode();wr.getDegree(r,e)>1&&(null===i&&(i=new E),i.add(r)),n=n.getNext(),d.isTrue(null!==n,"found null DE in ring"),d.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return i},e(Mr.prototype,{getGeometry:function(){return null===this.geomFactory&&(this.geomFactory=new Ut),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(Ut.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isValid()?e.add(r):n.add(r.getLineString())}},polygonize:function(){if(null!==this.polyList)return null;if(this.polyList=new E,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new E;this.invalidRingLines=new E,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),Mr.assignHolesToShells(this.holeList,this.shellList),Js.sort(this.shellList,new Ir.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(Mr.findDisjointShells(this.shellList),n=!1),this.polyList=Mr.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(N(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof Ct){var i=arguments[0];this.geomFactory=i.getFactory(),null===this.graph&&(this.graph=new wr(this.geomFactory)),this.graph.addEdge(i)}else arguments[0]instanceof V&&arguments[0].apply(this.lineStringAdder)},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new E,this.shellList=new E;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return Mr}}),Mr.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getOuterHole();null===i||i.isProcessed()||(n.setIncluded(!0),i.setProcessed(!0))}},Mr.extractPolygons=function(t,e){for(var n=new E,i=t.iterator();i.hasNext();){var r=i.next();(e||r.isIncluded())&&n.add(r.getPolygon())}return n},Mr.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();Mr.assignHoleToShell(i,e)}},Mr.assignHoleToShell=function(t,e){var n=Ir.findEdgeRingContaining(t,e);null!==n&&n.addHole(t)},Mr.findDisjointShells=function(t){Mr.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var i=n.next();i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(e=!0))}}while(e)},e(Sr.prototype,{filter:function(t){t instanceof Ct&&this.p.add(t)},interfaces_:function(){return[B]},getClass:function(){return Sr}}),Mr.LineStringAdder=Sr;var po=Object.freeze({Polygonizer:Mr});e(Nr.prototype,{createEdgeEndForNext:function(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;var s=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(s=i.coord);var o=new ln(t,n.coord,s,new tn(t.getLabel()));e.add(o)},createEdgeEndForPrev:function(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}var s=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(s=i.coord);var o=new tn(t.getLabel());o.flip();var a=new ln(t,n.coord,s,o);e.add(a)},computeEdgeEnds:function(){if(1===arguments.length){for(var t=arguments[0],e=new E,n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e)}return e}if(2===arguments.length){var r=arguments[0],s=arguments[1],o=r.getEdgeIntersectionList();o.addEndpoints();var a=o.iterator(),l=null,u=null;if(!a.hasNext())return null;var h=a.next();do{l=u,u=h,h=null,a.hasNext()&&(h=a.next()),null!==u&&(this.createEdgeEndForPrev(r,s,u,l),this.createEdgeEndForNext(r,s,u,h))}while(null!==u)}},interfaces_:function(){return[]},getClass:function(){return Nr}}),h(_r,ln),e(_r.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--\x3e Label: "+this.label);for(var e=this.iterator();e.hasNext();)e.next().print(t),t.println()},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();)(s=r.next().getLabel().getLocation(t))===S.BOUNDARY&&n++,s===S.INTERIOR&&(i=!0);var s=S.NONE;i&&(s=S.INTERIOR),n>0&&(s=zn.determineBoundary(e,n)),this.label.setLocation(t,s)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){var r=i.getLabel().getLocation(t,e);if(r===S.INTERIOR)return this.label.setLocation(t,e,S.INTERIOR),null;r===S.EXTERIOR&&this.label.setLocation(t,e,S.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,Qe.LEFT),this.computeLabelSide(t,Qe.RIGHT)},updateIM:function(t){Gn.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();)n.next().getLabel().isArea()&&(e=!0);this.label=e?new tn(S.NONE,S.NONE,S.NONE):new tn(S.NONE);for(var i=0;2>i;i++)this.computeLabelOn(i,t),e&&this.computeLabelSides(i)},interfaces_:function(){return[]},getClass:function(){return _r}}),h(Tr,vn),e(Tr.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();)e.next().updateIM(t)},insert:function(t){var e=this.edgeMap.get(t);null===e?(e=new _r(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return Tr}}),h(Lr,on),e(Lr.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return Lr}}),h(Pr,hn),e(Pr.prototype,{createNode:function(t){return new Lr(t,new Tr)},interfaces_:function(){return[]},getClass:function(){return Pr}}),e(Rr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),i=this.arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),s=t.hasProperInteriorIntersection();2===n&&2===i?r&&e.setAtLeast("212101212"):2===n&&1===i?(r&&e.setAtLeast("FFF0FFFF2"),s&&e.setAtLeast("1FFFFF1FF")):1===n&&2===i?(r&&e.setAtLeast("F0FFFFFF2"),s&&e.setAtLeast("1F1FFFFFF")):1===n&&1===i&&s&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var i=n.next();i.isIsolated()&&(this.labelIsolatedEdge(i,e,this.arg[e].getGeometry()),this.isolatedEdges.add(i))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var i=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,i)}else t.getLabel().setAllLocations(e,S.EXTERIOR)},computeIM:function(){var t=new ee;if(t.set(S.EXTERIOR,S.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new Nr,i=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();)t.next().getEdges().computeLabelling(this.arg)},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.nodes.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),o=this.nodes.find(s.coord);o.getLabel().isNull(t)&&(i===S.BOUNDARY?o.setLabelBoundary(t):o.setLabel(t,S.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var s=r.next(),o=this.nodes.addNode(s.coord);i===S.BOUNDARY?o.setLabelBoundary(t):o.getLabel().isNull(t)&&o.setLabel(t,S.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();d.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();)e.next().updateIM(t);for(var n=this.nodes.iterator();n.hasNext();){var i=n.next();i.updateIM(t),i.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(S.INTERIOR,S.EXTERIOR,e.getDimension()),t.set(S.BOUNDARY,S.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(S.EXTERIOR,S.INTERIOR,n.getDimension()),t.set(S.EXTERIOR,S.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return Rr}}),e(Or.prototype,{isContainedInBoundary:function(t){if(t instanceof Nt)return!1;if(t instanceof Mt)return this.isPointContainedInBoundary(t);if(t instanceof Ct)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new f,i=new f,r=0;r<e.size()-1;r++)if(e.getCoordinate(r,n),e.getCoordinate(r+1,i),!this.isLineSegmentContainedInBoundary(n,i))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof Mt){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof f){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return Or}}),Or.contains=function(t,e){return new Or(t).contains(e)},e(Dr.prototype,{intersects:function(t,e){var n=new C(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t))return!0;if(this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var i=t;t=e,e=i}var r=!1;return e.y>t.y&&(r=!0),r?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Dr}}),e(kr.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof dt)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return kr}}),e(Ar.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Fr(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new Br(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var i=new Vr(this.rectangle);return i.applyTo(t),!!i.intersects()},interfaces_:function(){return[]},getClass:function(){return Ar}}),Ar.intersects=function(t,e){return new Ar(t).intersects(e)},h(Fr,kr),e(Fr.prototype,{isDone:function(){return!0===this._intersects},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Fr}}),h(Br,kr),e(Br.prototype,{isDone:function(){return!0===this._containsPoint},visit:function(t){if(!(t instanceof Nt))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new f,i=0;4>i;i++)if(this.rectSeq.getCoordinate(i,n),e.contains(n)&&mn.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return Br}}),h(Vr,kr),e(Vr.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return!0===this.hasIntersection},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=Ln.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Vr}}),h(Gr,qn),e(Gr.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return Gr}}),Gr.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||Gr.relate(t,e).isCovers())},Gr.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?Ar.intersects(t,e):e.isRectangle()?Ar.intersects(e,t):Gr.relate(t,e).isIntersects())},Gr.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Gr.relate(t,e).isTouches(t.getDimension(),e.getDimension())},Gr.within=function(t,e){return e.contains(t)},Gr.coveredBy=function(t,e){return Gr.covers(e,t)},Gr.relate=function(){if(2===arguments.length)return r=(i=new Gr(arguments[0],arguments[1])).getIntersectionMatrix();if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof V&&arguments[1]instanceof V){var t=arguments[0],e=arguments[1],n=arguments[2];return Gr.relateWithCheck(t,e).matches(n)}if(N(arguments[2],z)&&arguments[0]instanceof V&&arguments[1]instanceof V){var i=new Gr(arguments[0],arguments[1],arguments[2]),r=i.getIntersectionMatrix();return r}}},Gr.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Gr.relate(t,e).isOverlaps(t.getDimension(),e.getDimension())},Gr.disjoint=function(t,e){return!t.intersects(e)},Gr.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Gr.relate(t,e)},Gr.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Gr.relate(t,e).isCrosses(t.getDimension(),e.getDimension())},Gr.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?Or.contains(t,e):Gr.relate(t,e).isContains())};var mo=Object.freeze({RelateOp:Gr});e(zr.prototype,{extractElements:function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.skipEmpty&&i.isEmpty()||e.add(i)}},combine:function(){for(var t=new E,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return zr}}),zr.combine=function(){if(1===arguments.length)return(s=new zr(arguments[0])).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return(s=new zr(zr.createList(t,e))).combine()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=new zr(zr.createList(n,i,r));return s.combine()}},zr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},zr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return(s=new E).add(t),s.add(e),s}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=new E;return s.add(n),s.add(i),s.add(r),s}},e(qr.prototype,{union:function(){for(var t=new ve,e=new at,n=0;n<this.pointGeom.getNumGeometries();n++){var i=this.pointGeom.getGeometryN(n).getCoordinate();t.locate(i,this.otherGeom)===S.EXTERIOR&&e.add(i)}if(0===e.size())return this.otherGeom;var r=null,s=U.toCoordinateArray(e);return r=1===s.length?this.geomFact.createPoint(s[0]):this.geomFact.createMultiPointFromCoords(s),zr.combine(r,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return qr}}),qr.union=function(t,e){return new qr(t,e).union()},e(jr.prototype,{filter:function(t){-1!==this.sortIndex&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[ht]},getClass:function(){return jr}}),jr.extract=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return jr.extract(t,e,new E)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return n.getSortIndex()===i?r.add(n):n instanceof dt&&n.apply(new jr(i,r)),r}},e(Yr.prototype,{reduceToGeometries:function(t){for(var e=new E,n=t.iterator();n.hasNext();){var i=n.next(),r=null;N(i,y)?r=this.unionTree(i):i instanceof V&&(r=i),e.add(r)}return e},extractByEnvelope:function(t,e,n){for(var i=new E,r=0;r<e.getNumGeometries();r++){var s=e.getGeometryN(r);s.getEnvelopeInternal().intersects(t)?i.add(s):n.add(s)}return this.geomFactory.buildGeometry(i)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return zr.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},union:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new Le(Yr.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},binaryUnion:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(1>=i-n){s=Yr.getGeometry(e,n);return this.unionSafe(s,null)}if(i-n==2)return this.unionSafe(Yr.getGeometry(e,n),Yr.getGeometry(e,n+1));var r=Math.trunc((i+n)/2),s=this.binaryUnion(e,n,r),o=this.binaryUnion(e,r,i);return this.unionSafe(s,o)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},unionSafe:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Yr.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},unionUsingEnvelopeIntersection:function(t,e,n){var i=new E,r=this.extractByEnvelope(n,t,i),s=this.extractByEnvelope(n,e,i),o=this.unionActual(r,s);return i.add(o),zr.combine(i)},bufferUnion:function(){if(1===arguments.length){var t=arguments[0];return s=(r=(i=t.get(0).getFactory()).buildGeometry(t)).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getFactory(),r=i.createGeometryCollection([e,n]),s=r.buffer(0);return s}},interfaces_:function(){return[]},getClass:function(){return Yr}}),Yr.restrictToPolygons=function(t){if(N(t,St))return t;var e=ir.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Ut.toPolygonArray(e))},Yr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Yr.union=function(t){return new Yr(t).union()},Yr.STRTREE_NODE_CAPACITY=4,e(Wr.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return Hn.overlayOp(t,e,Wn.UNION)},unionWithNull:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},extract:function(){if(N(arguments[0],m))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n)}else if(arguments[0]instanceof V){var i=arguments[0];null===this.geomFact&&(this.geomFact=i.getFactory()),jr.extract(i,V.SORTINDEX_POLYGON,this.polygons),jr.extract(i,V.SORTINDEX_LINESTRING,this.lines),jr.extract(i,V.SORTINDEX_POINT,this.points)}},union:function(){if(null===this.geomFact)return null;var t=null;if(this.points.size()>0){var e=this.geomFact.buildGeometry(this.points);t=this.unionNoOpt(e)}var n=null;if(this.lines.size()>0){var i=this.geomFact.buildGeometry(this.lines);n=this.unionNoOpt(i)}var r=null;this.polygons.size()>0&&(r=Yr.union(this.polygons));var s=this.unionWithNull(n,r),o=null;return o=null===t?s:null===s?t:qr.union(t,s),null===o?this.geomFact.createGeometryCollection():o},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.union=function(){if(1===arguments.length){if(N(arguments[0],m))return(t=new Wr(arguments[0])).union();if(arguments[0]instanceof V)return(t=new Wr(arguments[0])).union()}else if(2===arguments.length){var t=new Wr(arguments[0],arguments[1]);return t.union()}};var vo=Object.freeze({UnaryUnionOp:Wr});e(Ur.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),i=n[0],r=Ur.findDifferentPoint(n,i),s=e.findEdgeInSameDirection(i,r),o=e.findEdgeEnd(s),a=null;o.getLabel().getLocation(0,Qe.RIGHT)===S.INTERIOR?a=o:o.getSym().getLabel().getLocation(0,Qe.RIGHT)===S.INTERIOR&&(a=o.getSym()),d.isTrue(null!==a,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(a)},visitShellInteriors:function(t,e){if(t instanceof Nt){r=t;this.visitInteriorRing(r.getExteriorRing(),e)}if(t instanceof Lt)for(var n=t,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.visitInteriorRing(r.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,Qe.RIGHT)===S.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do{d.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext()}while(n!==e)},buildEdgeRings:function(t){for(var e=new E,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&null===i.getEdgeRing()){var r=new rn(i,this.geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var s=r.buildMinimalRings();e.addAll(s)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,Qe.RIGHT)===S.INTERIOR)for(var s=0;s<i.size();s++)if(!(r=i.get(s)).isVisited())return this.disconnectedRingcoord=r.getCoordinate(),!0}}return!1},isInteriorsConnected:function(){var t=new E;this.geomGraph.computeSplitEdges(t);var e=new cn(new xn);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return Ur}}),Ur.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},e(Hr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next();this.nodes.addNode(i.getCoordinate()).setLabel(e,i.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=(new Nr).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(e)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),r=i.getLabel().getLocation(e),s=i.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next(),a=this.nodes.addNode(o.coord);r===S.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,S.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Hr}}),e(Xr.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var i=n.next();if(i.getEdgeEnds().size()>1)return this.invalidPoint=i.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Xr}}),e(Kr.prototype,{buildIndex:function(){this.index=new Le;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),i=this.index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var s=i.get(r),o=s.getCoordinates();if(e!==s&&e.getEnvelopeInternal().intersects(s.getEnvelopeInternal())){var a=Jr.findPtNotNode(n,s,this.graph);if(null!==a&&$t.isPointInRing(a,o))return this.nestedPt=a,!1}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return Kr}}),e(Zr.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Zr.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return null!==this.pt&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return Zr}}),Zr.ERROR=0,Zr.REPEATED_POINT=1,Zr.HOLE_OUTSIDE_SHELL=2,Zr.NESTED_HOLES=3,Zr.DISCONNECTED_INTERIOR=4,Zr.SELF_INTERSECTION=5,Zr.RING_SELF_INTERSECTION=6,Zr.NESTED_SHELLS=7,Zr.DUPLICATE_RINGS=8,Zr.TOO_FEW_POINTS=9,Zr.INVALID_COORDINATE=10,Zr.RING_NOT_CLOSED=11,Zr.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],e(Jr.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!Jr.isValid(t[e]))return this.validErr=new Zr(Zr.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof Nt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),null!==this.validErr)return null}},checkHolesNotNested:function(t,e){for(var n=new Kr(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);n.add(r)}n.isNonNested()||(this.validErr=new Zr(Zr.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new Xr(t);return e.isNodeConsistentArea()?void(e.hasDuplicateRings()&&(this.validErr=new Zr(Zr.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new Zr(Zr.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),null===this.validErr},checkShellInsideHole:function(t,e,n){var i=t.getCoordinates(),r=e.getCoordinates(),s=Jr.findPtNotNode(i,e,n);if(null!==s&&!$t.isPointInRing(s,r))return s;var o=Jr.findPtNotNode(r,t,n);return null!==o?$t.isPointInRing(o,i)?o:null:(d.shouldNeverReachHere("points in shell and hole appear to be equal"),null)},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}},checkConnectedInteriors:function(t){var e=new Ur(t);e.isInteriorsConnected()||(this.validErr=new Zr(Zr.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new at,n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this.validErr=new Zr(Zr.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),i=new ui(n),r=0;r<t.getNumInteriorRing();r++){var s=t.getInteriorRingN(r),o=Jr.findPtNotNode(s.getCoordinates(),n,e);if(null===o)return null;if(!i.isInside(o))return this.validErr=new Zr(Zr.HOLE_OUTSIDE_SHELL,o),null}},checkTooFewPoints:function(t){return t.hasTooFewPoints()?(this.validErr=new Zr(Zr.TOO_FEW_POINTS,t.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof Mt){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof _t){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Tt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(n),null!==this.validErr)return null;l=new zn(0,n);if(this.checkTooFewPoints(l),null!==this.validErr)return null;var i=new Zt;l.computeSelfNodes(i,!0,!0),this.checkNoSelfIntersectingRings(l)}else if(arguments[0]instanceof Ct){var r=arguments[0];if(this.checkInvalidCoordinates(r.getCoordinates()),null!==this.validErr)return null;l=new zn(0,r);this.checkTooFewPoints(l)}else if(arguments[0]instanceof Nt){var s=arguments[0];if(this.checkInvalidCoordinates(s),null!==this.validErr)return null;if(this.checkClosedRings(s),null!==this.validErr)return null;l=new zn(0,s);if(this.checkTooFewPoints(l),null!==this.validErr)return null;if(this.checkConsistentArea(l),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(l),null!==this.validErr))return null;if(this.checkHolesInShell(s,l),null!==this.validErr)return null;if(this.checkHolesNotNested(s,l),null!==this.validErr)return null;this.checkConnectedInteriors(l)}else if(arguments[0]instanceof Lt){for(var o=arguments[0],a=0;a<o.getNumGeometries();a++){u=o.getGeometryN(a);if(this.checkInvalidCoordinates(u),null!==this.validErr)return null;if(this.checkClosedRings(u),null!==this.validErr)return null}var l=new zn(0,o);if(this.checkTooFewPoints(l),null!==this.validErr)return null;if(this.checkConsistentArea(l),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(l),null!==this.validErr))return null;for(a=0;a<o.getNumGeometries();a++){u=o.getGeometryN(a);if(this.checkHolesInShell(u,l),null!==this.validErr)return null}for(a=0;a<o.getNumGeometries();a++){var u=o.getGeometryN(a);if(this.checkHolesNotNested(u,l),null!==this.validErr)return null}if(this.checkShellsNotNested(o,l),null!==this.validErr)return null;this.checkConnectedInteriors(l)}else if(arguments[0]instanceof dt)for(var h=arguments[0],a=0;a<h.getNumGeometries();a++){var c=h.getGeometryN(a);if(this.checkValid(c),null!==this.validErr)return null}else if(arguments[0]instanceof V){var d=arguments[0];if(this.validErr=null,d.isEmpty())return null;if(d instanceof Mt)this.checkValid(d);else if(d instanceof _t)this.checkValid(d);else if(d instanceof Tt)this.checkValid(d);else if(d instanceof Ct)this.checkValid(d);else if(d instanceof Nt)this.checkValid(d);else if(d instanceof Lt)this.checkValid(d);else{if(!(d instanceof dt))throw new UnsupportedOperationException(d.getClass().getName());this.checkValid(d)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var i=t.getCoordinates(),r=e.getExteriorRing(),s=r.getCoordinates(),o=Jr.findPtNotNode(i,r,n);if(null===o)return null;if(!$t.isPointInRing(o,s))return null;if(e.getNumInteriorRing()<=0)return this.validErr=new Zr(Zr.NESTED_SHELLS,o),null;for(var a=null,l=0;l<e.getNumInteriorRing();l++){var u=e.getInteriorRingN(l);if(null===(a=this.checkShellInsideHole(t,u,n)))return null}this.validErr=new Zr(Zr.NESTED_SHELLS,a)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this.validErr)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new Zr(Zr.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var i=t.getGeometryN(n),r=i.getExteriorRing(),s=0;s<t.getNumGeometries();s++)if(n!==s){var o=t.getGeometryN(s);if(this.checkShellNotNested(r,o,e),null!==this.validErr)return null}},interfaces_:function(){return[]},getClass:function(){return Jr}}),Jr.findPtNotNode=function(t,e,n){for(var i=n.findEdge(e).getEdgeIntersectionList(),r=0;r<t.length;r++){var s=t[r];if(!i.isIntersection(s))return s}return null},Jr.isValid=function(){if(arguments[0]instanceof V)return new Jr(arguments[0]).isValid();if(arguments[0]instanceof f){var t=arguments[0];return!(r.isNaN(t.x)||r.isInfinite(t.x)||r.isNaN(t.y)||r.isInfinite(t.y))}};var yo=Object.freeze({IsValidOp:Jr,ConsistentAreaTester:Xr}),xo=Object.freeze({BoundaryOp:gt,IsSimpleOp:ki,buffer:ho,distance:co,linemerge:fo,overlay:go,polygonize:po,relate:mo,union:vo,valid:yo});h(Qr,Pt.CoordinateOperation),e(Qr.prototype,{editCoordinates:function(t,e){if(0===t.length)return null;for(var n=new Array(t.length).fill(null),i=0;i<t.length;i++){var r=new f(t[i]);this.targetPM.makePrecise(r),n[i]=r}var s=new I(n,!1).toCoordinateArray(),o=0;e instanceof Ct&&(o=2),e instanceof Tt&&(o=4);var a=n;return this.removeCollapsed&&(a=null),s.length<o?a:s},interfaces_:function(){return[]},getClass:function(){return Qr}}),e($r.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),i=n;return this.changePrecisionModel||(i=t.getFactory().createGeometry(n)),i},reducePointwise:function(t){var e=null;e=this.changePrecisionModel?new Pt(this.createFactory(t.getFactory(),this.targetPM)):new Pt;var n=this.removeCollapsed;return t.getDimension()>=2&&(n=!0),e.edit(t,new Qr(this.targetPM,n))},changePM:function(t,e){return this.createEditor(t.getFactory(),e).edit(t,new Pt.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){return new Ut(e,t.getSRID(),t.getCoordinateSequenceFactory())},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:N(e,St)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){return t.getPrecisionModel()===e?new Pt:new Pt(this.createFactory(t,e))},interfaces_:function(){return[]},getClass:function(){return $r}}),$r.reduce=function(t,e){return new $r(e).reduce(t)},$r.reducePointwise=function(t,e){var n=new $r(e);return n.setPointwise(!0),n.reduce(t)};var bo=Object.freeze({GeometryPrecisionReducer:$r});e(ts.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,i=t,r=t+1;e>r;r++){var s=this.seg.distance(this.pts[r]);s>n&&(n=s,i=r)}if(n<=this.distanceTolerance)for(r=t+1;e>r;r++)this.usePt[r]=!1;else this.simplifySection(t,i),this.simplifySection(i,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(e=0;e<this.pts.length;e++)this.usePt[e]=!0;this.simplifySection(0,this.pts.length-1);for(var t=new I,e=0;e<this.pts.length;e++)this.usePt[e]&&t.add(new f(this.pts[e]));return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return ts}}),ts.simplify=function(t,e){var n=new ts(t);return n.setDistanceTolerance(e),n.simplify()},e(es.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new ns(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>t)throw new i("Tolerance must be non-negative");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return es}}),es.simplify=function(t,e){var n=new es(t);return n.setDistanceTolerance(e),n.getResultGeometry()},h(ns,le),e(ns.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=le.prototype.transformPolygon.call(this,t,e);return e instanceof Lt?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=null;return i=0===n.length?new Array(0).fill(null):ts.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(i)},transformMultiPolygon:function(t,e){var n=le.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof Nt,i=le.prototype.transformLinearRing.call(this,t,e);return!n||i instanceof Tt?i:null},interfaces_:function(){return[]},getClass:function(){return ns}}),es.DPTransformer=ns,h(is,te),e(is.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return is}}),e(rs.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(rs.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return 0===t?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(rs.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new is(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return rs.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return rs}}),rs.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,i=0;i<t.size();i++)n=t.get(i),e[i]=n.p0;return e[e.length-1]=n.p1,e},e(ss.prototype,{remove:function(t){this.index.remove(new C(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof rs)for(var t=arguments[0],e=t.getSegments(),n=0;n<e.length;n++){var i=e[n];this.add(i)}else if(arguments[0]instanceof te){var r=arguments[0];this.index.insert(new C(r.p0,r.p1),r)}},query:function(t){var e=new C(t.p0,t.p1),n=new os(t);return this.index.query(e,n),n.getItems()},interfaces_:function(){return[]},getClass:function(){return ss}}),e(os.prototype,{visitItem:function(t){var e=t;C.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[we]},getClass:function(){return os}}),e(as.prototype,{flatten:function(t,e){var n=new te(this.linePts[t],this.linePts[e]);return this.remove(this.line,t,e),this.outputIndex.add(n),n},hasBadIntersection:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var i=new Array(2).fill(null);if(t+1===e){l=this.line.getSegment(t);return this.line.addToResult(l),null}var r=!0;this.line.getResultSize()<this.line.getMinimumSize()&&n+1<this.line.getMinimumSize()&&(r=!1);var s=new Array(1).fill(null),o=this.findFurthestPoint(this.linePts,t,e,s);s[0]>this.distanceTolerance&&(r=!1);var a=new te;if(a.p0=this.linePts[t],a.p1=this.linePts[e],i[0]=t,i[1]=e,this.hasBadIntersection(this.line,i,a)&&(r=!1),r){var l=this.flatten(t,e);return this.line.addToResult(l),null}this.simplifySection(t,o,n),this.simplifySection(o,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t).iterator();e.hasNext();){var n=e.next();if(this.hasInteriorIntersection(n,t))return!0}return!1},findFurthestPoint:function(t,e,n,i){var r=new te;r.p0=t[e],r.p1=t[n];for(var s=-1,o=e,a=e+1;n>a;a++){var l=t[a],u=r.distance(l);u>s&&(s=u,o=a)}return i[0]=s,o},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var i=e;n>i;i++){var r=t.getSegment(i);this.inputIndex.remove(r)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var i=this.inputIndex.query(n).iterator();i.hasNext();){var r=i.next();if(this.hasInteriorIntersection(r,n)){if(as.isInLineSection(t,e,r))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return as}}),as.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var i=n.getIndex();return i>=e[0]&&i<e[1]},e(ls.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var n=new as(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return ls}}),e(us.prototype,{getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():(this.linestringMap=new jt,this.inputGeom.apply(new cs(this)),this.lineSimplifier.simplify(this.linestringMap.values()),new hs(this.linestringMap).transform(this.inputGeom))},setDistanceTolerance:function(t){if(0>t)throw new i("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return us}}),us.simplify=function(t,e){var n=new us(t);return n.setDistanceTolerance(e),n.getResultGeometry()},h(hs,le),e(hs.prototype,{transformCoordinates:function(t,e){if(0===t.size())return null;if(e instanceof Ct){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return le.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return hs}}),e(cs.prototype,{filter:function(t){if(t instanceof Ct){var e=t;if(e.isEmpty())return null;var n=new rs(e,e.isClosed()?4:2);this.tps.linestringMap.put(e,n)}},interfaces_:function(){return[B]},getClass:function(){return cs}}),us.LineStringTransformer=hs,us.LineStringMapBuilderFilter=cs;var Eo=Object.freeze({DouglasPeuckerSimplifier:es,TopologyPreservingSimplifier:us});e(ds.prototype,{splitAt:function(){if(1===arguments.length){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=ds.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.getConstrainedLength(n)/this.segLen;i.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(r):this.splitPt=ds.pointAlongReverse(this.seg,r)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return ds}}),ds.pointAlongReverse=function(t,e){var n=new f;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},e(fs.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return fs}}),e(gs.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),i=n.getLength()/2,r=new ds(n),s=gs.projectedSplitPoint(t,e),o=2*s.distance(e)*.8;return o>i&&(o=i),r.setMinimumLength(o),r.splitAt(s),r.getSplitPoint()},interfaces_:function(){return[fs]},getClass:function(){return gs}}),gs.projectedSplitPoint=function(t,e){return t.getLineSegment().project(e)},e(ps.prototype,{interfaces_:function(){return[]},getClass:function(){return ps}}),ps.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},ps.isInCircleDDNormalized=function(t,e,n,i){var r=R.valueOf(t.x).selfSubtract(i.x),s=R.valueOf(t.y).selfSubtract(i.y),o=R.valueOf(e.x).selfSubtract(i.x),a=R.valueOf(e.y).selfSubtract(i.y),l=R.valueOf(n.x).selfSubtract(i.x),u=R.valueOf(n.y).selfSubtract(i.y),h=r.multiply(a).selfSubtract(o.multiply(s)),c=o.multiply(u).selfSubtract(l.multiply(a)),d=l.multiply(s).selfSubtract(r.multiply(u)),f=r.multiply(r).selfAdd(s.multiply(s)),g=o.multiply(o).selfAdd(a.multiply(a)),p=l.multiply(l).selfAdd(u.multiply(u));return f.selfMultiply(c).selfAdd(g.selfMultiply(d)).selfAdd(p.selfMultiply(h)).doubleValue()>0},ps.checkRobustInCircle=function(t,e,n,i){var r=ps.isInCircleNonRobust(t,e,n,i),s=ps.isInCircleDDSlow(t,e,n,i),o=ps.isInCircleCC(t,e,n,i),a=di.circumcentre(t,e,n);k.out.println("p radius diff a = "+Math.abs(i.distance(a)-t.distance(a))/t.distance(a)),r===s&&r===o||(k.out.println("inCircle robustness failure (double result = "+r+", DD result = "+s+", CC result = "+o+")"),k.out.println(Xt.toLineString(new At([t,e,n,i]))),k.out.println("Circumcentre = "+Xt.toPoint(a)+" radius = "+t.distance(a)),k.out.println("p radius diff a = "+Math.abs(i.distance(a)/t.distance(a)-1)),k.out.println("p radius diff b = "+Math.abs(i.distance(a)/e.distance(a)-1)),k.out.println("p radius diff c = "+Math.abs(i.distance(a)/n.distance(a)-1)),k.out.println())},ps.isInCircleDDFast=function(t,e,n,i){var r=R.sqr(t.x).selfAdd(R.sqr(t.y)).selfMultiply(ps.triAreaDDFast(e,n,i)),s=R.sqr(e.x).selfAdd(R.sqr(e.y)).selfMultiply(ps.triAreaDDFast(t,n,i)),o=R.sqr(n.x).selfAdd(R.sqr(n.y)).selfMultiply(ps.triAreaDDFast(t,e,i)),a=R.sqr(i.x).selfAdd(R.sqr(i.y)).selfMultiply(ps.triAreaDDFast(t,e,n));return r.selfSubtract(s).selfAdd(o).selfSubtract(a).doubleValue()>0},ps.isInCircleCC=function(t,e,n,i){var r=di.circumcentre(t,e,n),s=t.distance(r);return 0>=i.distance(r)-s},ps.isInCircleNormalized=function(t,e,n,i){var r=t.x-i.x,s=t.y-i.y,o=e.x-i.x,a=e.y-i.y,l=n.x-i.x,u=n.y-i.y;return(r*r+s*s)*(o*u-l*a)+(o*o+a*a)*(l*s-r*u)+(l*l+u*u)*(r*a-o*s)>0},ps.isInCircleDDSlow=function(t,e,n,i){var r=R.valueOf(i.x),s=R.valueOf(i.y),o=R.valueOf(t.x),a=R.valueOf(t.y),l=R.valueOf(e.x),u=R.valueOf(e.y),h=R.valueOf(n.x),c=R.valueOf(n.y),d=o.multiply(o).add(a.multiply(a)).multiply(ps.triAreaDDSlow(l,u,h,c,r,s)),f=l.multiply(l).add(u.multiply(u)).multiply(ps.triAreaDDSlow(o,a,h,c,r,s)),g=h.multiply(h).add(c.multiply(c)).multiply(ps.triAreaDDSlow(o,a,l,u,r,s)),p=r.multiply(r).add(s.multiply(s)).multiply(ps.triAreaDDSlow(o,a,l,u,h,c));return d.subtract(f).add(g).subtract(p).doubleValue()>0},ps.isInCircleNonRobust=function(t,e,n,i){return(t.x*t.x+t.y*t.y)*ps.triArea(e,n,i)-(e.x*e.x+e.y*e.y)*ps.triArea(t,n,i)+(n.x*n.x+n.y*n.y)*ps.triArea(t,e,i)-(i.x*i.x+i.y*i.y)*ps.triArea(t,e,n)>0},ps.isInCircleRobust=function(t,e,n,i){return ps.isInCircleNormalized(t,e,n,i)},ps.triAreaDDSlow=function(t,e,n,i,r,s){return n.subtract(t).multiply(s.subtract(e)).subtract(i.subtract(e).multiply(r.subtract(t)))},ps.triAreaDDFast=function(t,e,n){var i=R.valueOf(e.x).selfSubtract(t.x).selfMultiply(R.valueOf(n.y).selfSubtract(t.y)),r=R.valueOf(e.y).selfSubtract(t.y).selfMultiply(R.valueOf(n.x).selfSubtract(t.x));return i.selfSubtract(r)},e(ms.prototype,{circleCenter:function(t,e){var n=new ms(this.getX(),this.getY()),i=new A(this.bisector(n,t),this.bisector(t,e)),r=null;try{r=new ms(i.getX(),i.getY())}catch(i){if(!(i instanceof M))throw i;k.err.println("a: "+n+"  b: "+t+"  c: "+e),k.err.println(i)}return r},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),i=e.getY()-t.getY();return new A(new A(t.getX()+n/2,t.getY()+i/2,1),new A(t.getX()-i+n/2,t.getY()+n+i/2,1))},equals:function(){if(1===arguments.length){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return ps.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var i=t.getX(),r=t.getY(),s=e.getX()-i,o=n.getX()-i,a=e.getY()-r,l=n.getY()-r,u=s*l-o*a,h=this.getX()-i,c=this.getY()-r,d=(l*h-o*c)/u,f=(-a*h+s*c)/u;return t.getZ()+d*(e.getZ()-t.getZ())+f*(n.getZ()-t.getZ())},midPoint:function(t){return new ms((this.p.x+t.getX())/2,(this.p.y+t.getY())/2,(this.p.z+t.getZ())/2)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new ms(t*this.p.x,t*this.p.y)},cross:function(){return new ms(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new ms(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=this,i=e.sub(t),r=n.sub(t),s=i.crossProduct(r);return s>0?ms.LEFT:0>s?ms.RIGHT:i.getX()*r.getX()<0||i.getY()*r.getY()<0?ms.BEHIND:i.magn()<r.magn()?ms.BEYOND:t.equals(n)?ms.ORIGIN:e.equals(n)?ms.DESTINATION:ms.BETWEEN},sum:function(t){return new ms(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),i=this.distance(n,t),r=this.distance(this,t),s=this.distance(t,e);return r>s&&(r=s),s=this.distance(e,this),r>s&&(r=s),i/r},interfaces_:function(){return[]},getClass:function(){return ms}}),ms.interpolateZ=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=e.distance(n),r=t.distance(e),s=n.z-e.z;return e.z+s*(r/i)}if(4===arguments.length){var o=arguments[0],a=arguments[1],l=arguments[2],u=arguments[3],h=a.x,c=a.y,d=l.x-h,f=u.x-h,g=l.y-c,p=u.y-c,m=d*p-f*g,v=o.x-h,y=o.y-c,x=(p*v-f*y)/m,b=(-g*v+d*y)/m;return a.z+x*(l.z-a.z)+b*(u.z-a.z)}},ms.LEFT=0,ms.RIGHT=1,ms.BEYOND=2,ms.BEHIND=3,ms.BETWEEN=4,ms.ORIGIN=5,ms.DESTINATION=6,h(vs,ms),e(vs.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return vs}}),e(ys.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new te(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return Xt.toLineString(t,e)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return ys}}),ys.makeEdge=function(t,e){var n=new ys,i=new ys,r=new ys,s=new ys;n._rot=i,i._rot=r,r._rot=s,s._rot=n,n.setNext(n),i.setNext(s),r.setNext(r),s.setNext(i);var o=n;return o.setOrig(t),o.setDest(e),o},ys.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();ys.splice(t,e),ys.splice(t.sym(),n),ys.splice(t,e.lNext()),ys.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},ys.splice=function(t,e){var n=t.oNext().rot(),i=e.oNext().rot(),r=e.oNext(),s=t.oNext(),o=i.oNext(),a=n.oNext();t.setNext(r),e.setNext(s),n.setNext(o),i.setNext(a)},ys.connect=function(t,e){var n=ys.makeEdge(t.dest(),e.orig());return ys.splice(n,t.lNext()),ys.splice(n.sym(),e),n},e(xs.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);ys.splice(n,e);var i=n;do{n=this.subdiv.connect(e,n.sym()),e=n.oPrev()}while(e.lNext()!==i);for(;;){var r=e.oPrev();if(r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))ys.swap(e),e=e.oPrev();else{if(e.oNext()===i)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return xs}}),e(bs.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return bs}}),e(Es.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){return this.subdiv.getEdges().iterator().next()},interfaces_:function(){return[bs]},getClass:function(){return Es}}),h(Is,u),e(Is.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Is}}),Is.msgWithSpatial=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(Cs.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Cs}}),e(ws.prototype,{getTriangleVertices:function(t){var e=new Ns;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this.frameVertex[0])||!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=ys.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new E,i=t;do{var r=t.rot().orig().getCoordinate();n.add(r),t=t.oPrev()}while(t!==i);var s=new I;s.addAll(n,!1),s.closeRing(),s.size()<4&&(k.out.println(s),s.add(s.get(s.size()-1),!0));var o=s.toCoordinateArray(),a=e.createPolygon(e.createLinearRing(o),null),l=i.orig();return a.setUserData(l.getCoordinate()),a},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);ys.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return ys.splice(e.sym(),n),ys.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);ws.getTriangleEdges(t,e);var n=new Array(3).fill(null);ws.getTriangleEdges(t.sym(),n);var i=t.lNext().dest();if(this.isFrameVertex(i))return!0;var r=t.sym().lNext().dest();return!!this.isFrameVertex(r)},makeEdge:function(t,e){var n=ys.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new re;n.push(this.startingEdge);for(var i=new Q;!n.empty();){var r=n.pop();if(!i.contains(r)){var s=this.fetchTriangleToVisit(r,n,e,i);null!==s&&t.visit(s)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){return this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this.seg.distance(e)<this.edgeCoincidenceTolerance},getEnvelope:function(){return new C(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),i=0;i=e>n?10*e:10*n,this.frameVertex[0]=new ms((t.getMaxX()+t.getMinX())/2,t.getMaxY()+i),this.frameVertex[1]=new ms(t.getMinX()-i,t.getMinY()-i),this.frameVertex[2]=new ms(t.getMaxX()+i,t.getMinY()-i),this.frameEnv=new C(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new _s;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new Q,n=this.quadEdges.iterator();n.hasNext();){var i=n.next(),r=i.orig();!t&&this.isFrameVertex(r)||e.add(r);var s=i.dest();!t&&this.isFrameVertex(s)||e.add(s)}return e},fetchTriangleToVisit:function(t,e,n,i){var r=t,s=0,o=!1;do{this.triEdges[s]=r,this.isFrameEdge(r)&&(o=!0);var a=r.sym();i.contains(a)||e.push(a),i.add(r),s++,r=r.lNext()}while(r!==t);return o&&!n?null:this.triEdges},getEdges:function(){if(0===arguments.length)return this.quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var s=r.next();n[i++]=t.createLineString([s.orig().getCoordinate(),s.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new E,n=new Q,i=this.quadEdges.iterator();i.hasNext();){var r=i.next(),s=r.orig();n.contains(s)||(n.add(s),!t&&this.isFrameVertex(s)||e.add(r));var o=r.sym(),a=o.orig();n.contains(a)||(n.add(a),!t&&this.isFrameVertex(a)||e.add(o))}return e},getTriangleEdges:function(t){var e=new Ss;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new E,n=new re;n.push(this.startingEdge);for(var i=new Q;!n.empty();){var r=n.pop();if(!i.contains(r)){var s=r.getPrimary();!t&&this.isFrameEdge(s)||e.add(s),n.push(r.oNext()),n.push(r.sym().oNext()),i.add(r),i.add(r.sym())}}return e},delete:function(t){ys.splice(t,t.oPrev()),ys.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),i=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(i),t.delete(),e.delete(),n.delete(),i.delete()},locateFromEdge:function(t,e){for(var n=0,i=this.quadEdges.size(),r=e;;){if(++n>i)throw new Is(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new Ms,!0);for(var e=new E,n=this.getVertexUniqueEdges(!1).iterator();n.hasNext();){var i=n.next();e.add(this.getVoronoiCellPolygon(i,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(Ut.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var s=r.next();n[i++]=t.createPolygon(t.createLinearRing(s),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);ys.splice(n,e);var i=n;do{n=this.connect(e,n.sym()),e=n.oPrev()}while(e.lNext()!==i);return i},locate:function(){if(1===arguments.length){if(arguments[0]instanceof ms){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof f){var e=arguments[0];return this.locator.locate(new ms(e))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.locator.locate(new ms(n));if(null===r)return null;var s=r;r.dest().getCoordinate().equals2D(n)&&(s=r.sym());var o=s;do{if(o.dest().getCoordinate().equals2D(i))return o;o=o.oNext()}while(o!==s);return null}},interfaces_:function(){return[]},getClass:function(){return ws}}),ws.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new i("Edges do not form a triangle")},e(Ms.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),i=t[2].orig().getCoordinate(),r=new ms(di.circumcentre(e,n,i)),s=0;3>s;s++)t[s].rot().setOrig(r)},interfaces_:function(){return[Cs]},getClass:function(){return Ms}}),e(Ss.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[Cs]},getClass:function(){return Ss}}),e(Ns.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[Cs]},getClass:function(){return Ns}}),e(_s.prototype,{checkTriangleSize:function(t){t.length>=2?Xt.toLineString(t[0],t[1]):t.length>=1&&Xt.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;3>e;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var i=this.coordList.toCoordinateArray();if(4!==i.length)return null;this.triCoords.add(i)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[Cs]},getClass:function(){return _s}}),ws.TriangleCircumcentreVisitor=Ms,ws.TriangleEdgesListVisitor=Ss,ws.TriangleVertexListVisitor=Ns,ws.TriangleCoordinatesVisitor=_s,ws.EDGE_COINCIDENCE_TOL_FACTOR=1e3,e(Ts.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){return this.ls.getCoordinate(1).z},getStartZ:function(){return this.ls.getCoordinate(0).z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){return this.ls.getCoordinate(1).y},getStartX:function(){return this.ls.getCoordinate(0).x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){return this.ls.getCoordinate(0).y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){return this.ls.getCoordinate(1).x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return Ts}}),e(Ls.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Ls}}),e(Ps.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return Ps}}),e(Rs.prototype,{insert:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1];if(null===this.root)return this.root=new Ps(e,n),this.root;if(this.tolerance>0){var i=this.findBestMatchNode(e);if(null!==i)return i.increment(),i}return this.insertExact(e,n)}},query:function(){var t=arguments,e=this;if(1===arguments.length){var n=arguments[0],i=new E;return this.query(n,i),i}if(2===arguments.length)if(arguments[0]instanceof C&&N(arguments[1],y))!function(){var n=t[0],i=t[1];e.queryNode(e.root,n,!0,{interfaces_:function(){return[Ls]},visit:function(t){i.add(t)}})}();else if(arguments[0]instanceof C&&N(arguments[1],Ls)){var r=arguments[0],s=arguments[1];this.queryNode(this.root,r,!0,s)}},queryNode:function(t,e,n,i){if(null===t)return null;var r=null,s=null,o=null;n?(r=e.getMinX(),s=e.getMaxX(),o=t.getX()):(r=e.getMinY(),s=e.getMaxY(),o=t.getY());var a=s>=o;o>r&&this.queryNode(t.getLeft(),e,!n,i),e.contains(t.getCoordinate())&&i.visit(t),a&&this.queryNode(t.getRight(),e,!n,i)},findBestMatchNode:function(t){var e=new Os(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return null===this.root},insertExact:function(t,e){for(var n=this.root,i=this.root,r=!0,s=!0;null!==n;){if(null!==n&&t.distance(n.getCoordinate())<=this.tolerance)return n.increment(),n;i=n,n=(s=r?t.x<n.getX():t.y<n.getY())?n.getLeft():n.getRight(),r=!r}this.numberOfNodes=this.numberOfNodes+1;var o=new Ps(t,e);return s?i.setLeft(o):i.setRight(o),o},interfaces_:function(){return[]},getClass:function(){return Rs}}),Rs.toCoordinates=function(){if(1===arguments.length){var t=arguments[0];return Rs.toCoordinates(t,!1)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new I,r=e.iterator();r.hasNext();)for(var s=r.next(),o=n?s.getCount():1,a=0;o>a;a++)i.add(s.getCoordinate(),!0);return i.toCoordinateArray()}},e(Os.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate());if(!(e<=this.tolerance))return null;var n=!1;(null===this.matchNode||e<this.matchDist||null!==this.matchNode&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(n=!0),n&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new C(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[Ls]},getClass:function(){return Os}}),Rs.BestMatchVisitor=Os,e(Ds.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do{e=this.enforceGabriel(this.segments),t++}while(e>0&&t<Ds.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){r=n.next();t[e++]=r.getCoordinate()}for(var i=this.segVertices.iterator();i.hasNext();){var r=i.next();t[e++]=r.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new Ut,e=new oe(this.getPointArray(),t);this.convexHull=e.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),i=new f((e.x+n.x)/2,(e.y+n.y)/2),s=e.distance(i),o=new C(i);o.expandBy(s);for(var a=this.kdt.query(o),l=null,u=r.MAX_VALUE,h=a.iterator();h.hasNext();){var c=h.next().getCoordinate();if(!c.equals2D(e)&&!c.equals2D(n)){var d=i.distance(c);if(s>d){var g=d;(null===l||u>g)&&(l=c,u=g)}}}return l},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new E,n=0,i=new E,r=t.iterator();r.hasNext();){var s=r.next(),o=this.findNonGabrielPoint(s);if(null!==o){this.splitPt=this.splitFinder.findSplitPoint(s,o);var a=this.createVertex(this.splitPt,s),l=(this.insertSite(a),new Ts(s.getStartX(),s.getStartY(),s.getStartZ(),a.getX(),a.getY(),a.getZ(),s.getData())),u=new Ts(a.getX(),a.getY(),a.getZ(),s.getEndX(),s.getEndY(),s.getEndZ(),s.getData());e.add(l),e.add(u),i.add(s),n+=1}}return t.removeAll(i),t.addAll(e),n},createVertex:function(){if(1===arguments.length){var t=arguments[0],e=null;return e=null!==this.vertexFactory?this.vertexFactory.createVertex(t,null):new vs(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=null;return(e=null!==this.vertexFactory?this.vertexFactory.createVertex(n,i):new vs(n)).setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=Ds.computeVertexEnvelope(this.initialVertices),e=Ds.computeVertexEnvelope(this.segVertices),n=new C(t);n.expandToInclude(e);var i=.2*n.getWidth(),r=.2*n.getHeight(),s=Math.max(i,r);this.computeAreaEnv=new C(n),this.computeAreaEnv.expandBy(s)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new ws(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new Es(this.subdiv)),this.incDel=new xs(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof vs){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof f){var i=arguments[0];this.insertSite(this.createVertex(i))}},interfaces_:function(){return[]},getClass:function(){return Ds}}),Ds.computeVertexEnvelope=function(t){for(var e=new C,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i.getCoordinate())}return e},Ds.MAX_SPLIT_ITER=99,e(ks.prototype,{create:function(){if(null!==this.subdiv)return null;var t=ks.envelope(this.siteCoords),e=ks.toVertices(this.siteCoords);this.subdiv=new ws(t,this.tolerance),new xs(this.subdiv).insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof V){var t=arguments[0];this.siteCoords=ks.extractUniqueCoordinates(t)}else if(N(arguments[0],m)){var e=arguments[0];this.siteCoords=ks.unique(U.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return ks}}),ks.extractUniqueCoordinates=function(t){if(null===t)return new I;var e=t.getCoordinates();return ks.unique(e)},ks.envelope=function(t){for(var e=new C,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i)}return e},ks.unique=function(t){var e=U.copyDeep(t);return lt.sort(e),new I(e,!1)},ks.toVertices=function(t){for(var e=new E,n=t.iterator();n.hasNext();){var i=n.next();e.add(new ms(i))}return e},e(As.prototype,{createSiteVertices:function(t){for(var e=new E,n=t.iterator();n.hasNext();){var i=n.next();this.constraintVertexMap.containsKey(i)||e.add(new vs(i))}return e},create:function(){if(null!==this.subdiv)return null;var t=ks.envelope(this.siteCoords),e=new E;null!==this.constraintLines&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=As.createConstraintSegments(this.constraintLines));var n=new Ds(this.createSiteVertices(this.siteCoords),this.tolerance);n.setConstraints(e,new E(this.constraintVertexMap.values())),n.formInitialDelaunay(),n.enforceConstraints(),this.subdiv=n.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=ks.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var i=new vs(e[n]);this.constraintVertexMap.put(e[n],i)}},interfaces_:function(){return[]},getClass:function(){return As}}),As.createConstraintSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=Ln.getLines(t),n=new E,i=e.iterator();i.hasNext();){var r=i.next();As.createConstraintSegments(r,n)}return n}if(2===arguments.length)for(var s=arguments[0],o=arguments[1],a=s.getCoordinates(),i=1;i<a.length;i++)o.add(new Ts(a[i-1],a[i]))},e(Fs.prototype,{create:function(){if(null!==this.subdiv)return null;var t=ks.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv);var n=ks.toVertices(this.siteCoords);this.subdiv=new ws(t,this.tolerance),new xs(this.subdiv).insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Fs.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof V){var t=arguments[0];this.siteCoords=ks.extractUniqueCoordinates(t)}else if(N(arguments[0],m)){var e=arguments[0];this.siteCoords=ks.unique(U.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Fs}}),Fs.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),i=new E,r=0;r<t.getNumGeometries();r++){var s=t.getGeometryN(r),o=null;e.contains(s.getEnvelopeInternal())?o=s:e.intersects(s.getEnvelopeInternal())&&(o=n.intersection(s)).setUserData(s.getUserData()),null===o||o.isEmpty()||i.add(o)}return t.getFactory().createGeometryCollection(Ut.toGeometryArray(i))};var Io=Object.freeze({ConformingDelaunayTriangulationBuilder:As,DelaunayTriangulationBuilder:ks,VoronoiDiagramBuilder:Fs});e(Bs.prototype,{interfaces_:function(){return[]},getClass:function(){return Bs}}),Bs.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Wn.createEmptyResult(Wn.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Hn.overlayOp(t,e,Wn.UNION)},e(V.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&Gr.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){if(0===arguments.length)return Wr.union(this);if(1===arguments.length){var t=arguments[0];return Bs.union(this,t)}},isValid:function(){return Jr.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return Wn.createEmptyResult(Wn.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return Je.map(this,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Hn.overlayOp(this,t,Wn.INTERSECTION)},covers:function(t){return Gr.covers(this,t)},coveredBy:function(t){return Gr.coveredBy(this,t)},touches:function(t){return Gr.touches(this,t)},intersects:function(t){return Gr.intersects(this,t)},within:function(t){return Gr.within(this,t)},overlaps:function(t){return Gr.overlaps(this,t)},disjoint:function(t){return Gr.disjoint(this,t)},crosses:function(t){return Gr.crosses(this,t)},buffer:function(){if(1===arguments.length){var t=arguments[0];return nr.bufferOp(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return nr.bufferOp(this,e,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];return nr.bufferOp(this,i,r,s)}},convexHull:function(){return new oe(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return Gr.relate.apply(Gr,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=ne.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(0===e)t=(n=new Jn(this)).getInteriorPoint();else if(1===e)t=(n=new Zn(this)).getInteriorPoint();else{var n=new Xn(this);t=n.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return Wn.createEmptyResult(Wn.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Hn.overlayOp(this,t,Wn.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){return(new Xt).write(this)},toString:function(){this.toText()},contains:function(t){return Gr.contains(this,t)},difference:function(t){return this.isEmpty()?Wn.createEmptyResult(Wn.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Hn.overlayOp(this,t,Wn.DIFFERENCE))},isSimple:function(){return new ki(this).isSimple()},isWithinDistance:function(t,e){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>e)&&ar.isWithinDistance(this,t,e)},distance:function(t){return ar.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});t.version="1.2.0 (d405c89)",t.algorithm=Qs,t.densify=$s,t.dissolve=to,t.geom=Zs,t.geomgraph=eo,t.index=ro,t.io=lo,t.noding=uo,t.operation=xo,t.precision=bo,t.simplify=Eo,t.triangulate=Io})},{}],22:[function(t,e,n){"use strict";e.exports=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}for(var s=new Array(e),r=0;r<e;++r)s[r]=r;s.sort(function(e,n){var i=t[e][0]-t[n][0];return i||t[e][1]-t[n][1]});for(var o=[s[0],s[1]],a=[s[0],s[1]],r=2;r<e;++r){for(var l=s[r],u=t[l],h=o.length;h>1&&i(t[o[h-2]],t[o[h-1]],u)<=0;)h-=1,o.pop();for(o.push(l),h=a.length;h>1&&i(t[a[h-2]],t[a[h-1]],u)>=0;)h-=1,a.pop();a.push(l)}for(var n=new Array(a.length+o.length-2),c=0,r=0,d=o.length;r<d;++r)n[c++]=o[r];for(var f=a.length-2;f>0;--f)n[c++]=a[f];return n};var i=t("robust-orientation")[3]},{"robust-orientation":23}],23:[function(t,e,n){"use strict";function i(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),s=0,o=0;s<t.length;++s)s!==e&&(r[o++]=t[i][s]);return n}function r(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m",i,"[",t-n-1,"]"].join("")}return e}function s(t){return 1&t?"-":""}function o(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",o(t.slice(0,e)),",",o(t.slice(e)),")"].join("")}function a(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",o(a(i(t,n))),",",s(n),t[0][n],")"].join(""));return e}function l(t){for(var e=[],n=[],s=r(t),l=[],u=0;u<t;++u)0==(1&u)?e.push.apply(e,a(i(s,u))):n.push.apply(n,a(i(s,u))),l.push("m"+u);var g=o(e),p=o(n),m="orientation"+t+"Exact",v=["function ",m,"(",l.join(),"){var p=",g,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",m].join("");return new Function("sum","prod","scale","sub",v)(c,h,d,f)}function u(t){var e=v[t.length];return e||(e=v[t.length]=l(t.length)),e.apply(void 0,t)}var h=t("two-product"),c=t("robust-sum"),d=t("robust-scale"),f=t("robust-subtract"),g=5,p=l(3),m=l(4),v=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),o=r-s;if(r>0){if(s<=0)return o;i=r+s}else{if(!(r<0))return o;if(s>=0)return o;i=-(r+s)}var a=3.3306690738754716e-16*i;return o>=a||o<=-a?o:p(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],s=e[0]-i[0],o=n[0]-i[0],a=t[1]-i[1],l=e[1]-i[1],u=n[1]-i[1],h=t[2]-i[2],c=e[2]-i[2],d=n[2]-i[2],f=s*u,g=o*l,p=o*a,v=r*u,y=r*l,x=s*a,b=h*(f-g)+c*(p-v)+d*(y-x),E=7.771561172376103e-16*((Math.abs(f)+Math.abs(g))*Math.abs(h)+(Math.abs(p)+Math.abs(v))*Math.abs(c)+(Math.abs(y)+Math.abs(x))*Math.abs(d));return b>E||-b>E?b:m(t,e,n,i)}];!function(){for(;v.length<=g;)v.push(l(v.length));for(var t=[],n=["slow"],i=0;i<=g;++i)t.push("a"+i),n.push("o"+i);for(var r=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"],i=2;i<=g;++i)r.push("case ",i,":return o",i,"(",t.slice(0,i).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(r.join(""));var s=Function.apply(void 0,n);e.exports=s.apply(void 0,[u].concat(v));for(i=0;i<=g;++i)e.exports[i]=v[i]}()},{"robust-scale":24,"robust-subtract":25,"robust-sum":26,"two-product":28}],24:[function(t,e,n){"use strict";var i=t("two-product"),r=t("two-sum");e.exports=function(t,e){var n=t.length;if(1===n){var s=i(t[0],e);return s[0]?s:[s[1]]}var o=new Array(2*n),a=[.1,.1],l=[.1,.1],u=0;i(t[0],e,a),a[0]&&(o[u++]=a[0]);for(var h=1;h<n;++h){i(t[h],e,l);var c=a[1];r(c,l[0],a),a[0]&&(o[u++]=a[0]);var d=l[1],f=a[1],g=d+f,p=f-(g-d);a[1]=g,p&&(o[u++]=p)}return a[1]&&(o[u++]=a[1]),0===u&&(o[u++]=0),o.length=u,o}},{"two-product":28,"two-sum":29}],25:[function(t,e,n){"use strict";function i(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}e.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return i(t[0],-e[0]);var s,o,a=n+r,l=new Array(a),u=0,h=0,c=0,d=Math.abs,f=t[h],g=d(f),p=-e[c],m=d(p);g<m?(o=f,(h+=1)<n&&(f=t[h],g=d(f))):(o=p,(c+=1)<r&&(p=-e[c],m=d(p))),h<n&&g<m||c>=r?(s=f,(h+=1)<n&&(f=t[h],g=d(f))):(s=p,(c+=1)<r&&(p=-e[c],m=d(p)));for(var v,y,x,b,E,I=s+o,C=I-s,w=o-C,M=w,S=I;h<n&&c<r;)g<m?(s=f,(h+=1)<n&&(f=t[h],g=d(f))):(s=p,(c+=1)<r&&(p=-e[c],m=d(p))),o=M,I=s+o,C=I-s,(w=o-C)&&(l[u++]=w),v=S+I,y=v-S,x=v-y,b=I-y,E=S-x,M=E+b,S=v;for(;h<n;)s=f,o=M,I=s+o,C=I-s,(w=o-C)&&(l[u++]=w),v=S+I,y=v-S,x=v-y,b=I-y,E=S-x,M=E+b,S=v,(h+=1)<n&&(f=t[h]);for(;c<r;)s=p,o=M,I=s+o,C=I-s,(w=o-C)&&(l[u++]=w),v=S+I,y=v-S,x=v-y,b=I-y,E=S-x,M=E+b,S=v,(c+=1)<r&&(p=-e[c]);return M&&(l[u++]=M),S&&(l[u++]=S),u||(l[u++]=0),l.length=u,l}},{}],26:[function(t,e,n){"use strict";function i(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}e.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return i(t[0],e[0]);var s,o,a=n+r,l=new Array(a),u=0,h=0,c=0,d=Math.abs,f=t[h],g=d(f),p=e[c],m=d(p);g<m?(o=f,(h+=1)<n&&(f=t[h],g=d(f))):(o=p,(c+=1)<r&&(p=e[c],m=d(p))),h<n&&g<m||c>=r?(s=f,(h+=1)<n&&(f=t[h],g=d(f))):(s=p,(c+=1)<r&&(p=e[c],m=d(p)));for(var v,y,x,b,E,I=s+o,C=I-s,w=o-C,M=w,S=I;h<n&&c<r;)g<m?(s=f,(h+=1)<n&&(f=t[h],g=d(f))):(s=p,(c+=1)<r&&(p=e[c],m=d(p))),o=M,I=s+o,C=I-s,(w=o-C)&&(l[u++]=w),v=S+I,y=v-S,x=v-y,b=I-y,E=S-x,M=E+b,S=v;for(;h<n;)s=f,o=M,I=s+o,C=I-s,(w=o-C)&&(l[u++]=w),v=S+I,y=v-S,x=v-y,b=I-y,E=S-x,M=E+b,S=v,(h+=1)<n&&(f=t[h]);for(;c<r;)s=p,o=M,I=s+o,C=I-s,(w=o-C)&&(l[u++]=w),v=S+I,y=v-S,x=v-y,b=I-y,E=S-x,M=E+b,S=v,(c+=1)<r&&(p=e[c]);return M&&(l[u++]=M),S&&(l[u++]=S),u||(l[u++]=0),l.length=u,l}},{}],27:[function(t,e,n){"use strict";"use restrict";function i(t,e){var n=t.length,i=t.length-e.length,r=Math.min;if(i)return i;switch(n){case 0:return 0;case 1:return t[0]-e[0];case 2:return(u=t[0]+t[1]-e[0]-e[1])||r(t[0],t[1])-r(e[0],e[1]);case 3:var s=t[0]+t[1],o=e[0]+e[1];if(u=s+t[2]-(o+e[2]))return u;var a=r(t[0],t[1]),l=r(e[0],e[1]),u=r(a,t[2])-r(l,e[2]);return u||r(a+t[2],s)-r(l+e[2],o);default:var h=t.slice(0);h.sort();var c=e.slice(0);c.sort();for(var d=0;d<n;++d)if(i=h[d]-c[d])return i;return 0}}function r(t,e){return i(t[0],e[0])}function s(t,e){if(e){for(var n=t.length,s=new Array(n),o=0;o<n;++o)s[o]=[t[o],e[o]];s.sort(r);for(o=0;o<n;++o)t[o]=s[o][0],e[o]=s[o][1];return t}return t.sort(i),t}function o(t){if(0===t.length)return[];for(var e=1,n=t.length,r=1;r<n;++r){var s=t[r];if(i(s,t[r-1])){if(r===e){e++;continue}t[e++]=s}}return t.length=e,t}function a(t,e){for(var n=0,r=t.length-1,s=-1;n<=r;){var o=n+r>>1,a=i(t[o],e);a<=0?(0===a&&(s=o),n=o+1):a>0&&(r=o-1)}return s}function l(t,e){for(var n=new Array(t.length),r=0,s=n.length;r<s;++r)n[r]=[];for(var o=[],r=0,l=e.length;r<l;++r)for(var u=e[r],h=u.length,c=1,f=1<<h;c<f;++c){o.length=d.popCount(c);for(var g=0,p=0;p<h;++p)c&1<<p&&(o[g++]=u[p]);var m=a(t,o);if(!(m<0))for(;n[m++].push(r),!(m>=t.length||0!==i(t[m],o)););}return n}function u(t,e){if(e<0)return[];for(var n=[],i=(1<<e+1)-1,r=0;r<t.length;++r)for(var o=t[r],a=i;a<1<<o.length;a=d.nextCombination(a)){for(var l=new Array(e+1),u=0,h=0;h<o.length;++h)a&1<<h&&(l[u++]=o[h]);n.push(l)}return s(n)}function h(t,e){for(var n=new f(e),i=0;i<t.length;++i)for(var r=t[i],s=0;s<r.length;++s)for(var o=s+1;o<r.length;++o)n.link(r[s],r[o]);for(var a=[],l=n.ranks,i=0;i<l.length;++i)l[i]=-1;for(i=0;i<t.length;++i){var u=n.find(t[i][0]);l[u]<0?(l[u]=a.length,a.push([t[i].slice(0)])):a[l[u]].push(t[i].slice(0))}return a}function c(t){for(var e=o(s(u(t,0))),n=new f(e.length),i=0;i<t.length;++i)for(var r=t[i],l=0;l<r.length;++l)for(var h=a(e,[r[l]]),c=l+1;c<r.length;++c)n.link(h,a(e,[r[c]]));for(var d=[],g=n.ranks,i=0;i<g.length;++i)g[i]=-1;for(i=0;i<t.length;++i){var p=n.find(a(e,[t[i][0]]));g[p]<0?(g[p]=d.length,d.push([t[i].slice(0)])):d[g[p]].push(t[i].slice(0))}return d}var d=t("bit-twiddle"),f=t("union-find");n.dimension=function(t){for(var e=0,n=Math.max,i=0,r=t.length;i<r;++i)e=n(e,t[i].length);return e-1},n.countVertices=function(t){for(var e=-1,n=Math.max,i=0,r=t.length;i<r;++i)for(var s=t[i],o=0,a=s.length;o<a;++o)e=n(e,s[o]);return e+1},n.cloneCells=function(t){for(var e=new Array(t.length),n=0,i=t.length;n<i;++n)e[n]=t[n].slice(0);return e},n.compareCells=i,n.normalize=s,n.unique=o,n.findCell=a,n.incidence=l,n.dual=function(t,e){if(!e)return l(o(u(t,0)),t,0);for(var n=new Array(e),i=0;i<e;++i)n[i]=[];for(var i=0,r=t.length;i<r;++i)for(var s=t[i],a=0,h=s.length;a<h;++a)n[s[a]].push(i);return n},n.explode=function(t){for(var e=[],n=0,i=t.length;n<i;++n)for(var r=t[n],o=0|r.length,a=1,l=1<<o;a<l;++a){for(var u=[],h=0;h<o;++h)a>>>h&1&&u.push(r[h]);e.push(u)}return s(e)},n.skeleton=u,n.boundary=function(t){for(var e=[],n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,a=r.length;o<a;++o){for(var l=new Array(r.length-1),u=0,h=0;u<a;++u)u!==o&&(l[h++]=r[u]);e.push(l)}return s(e)},n.connectedComponents=function(t,e){return e?h(t,e):c(t)}},{"bit-twiddle":13,"union-find":30}],28:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=t*e,s=i*t,o=s-(s-t),a=t-o,l=i*e,u=l-(l-e),h=e-u,c=a*h-(r-o*u-a*u-o*h);return n?(n[0]=c,n[1]=r,n):[c,r]};var i=+(Math.pow(2,27)+1)},{}],29:[function(t,e,n){"use strict";e.exports=function(t,e,n){var i=t+e,r=i-t,s=e-r,o=t-(i-r);return n?(n[0]=o+s,n[1]=i,n):[o+s,i]}},{}],30:[function(t,e,n){"use strict";"use restrict";function i(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}e.exports=i;var r=i.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},r.find=function(t){for(var e=t,n=this.roots;n[t]!==t;)t=n[t];for(;n[e]!==t;){var i=n[e];n[e]=t,e=i}return t},r.link=function(t,e){var n=this.find(t),i=this.find(e);if(n!==i){var r=this.ranks,s=this.roots,o=r[n],a=r[i];o<a?s[n]=i:a<o?s[i]=n:(s[i]=n,++r[n])}}},{}],31:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],32:[function(t,e,n){e.exports={bbox:t("@turf/bbox"),union:t("@turf/union"),centerOfMass:t("@turf/center-of-mass"),area:t("@turf/area"),intersect:t("@turf/intersect"),buffer:t("@turf/buffer")}},{"@turf/area":1,"@turf/bbox":2,"@turf/buffer":3,"@turf/center-of-mass":4,"@turf/intersect":9,"@turf/union":11}]},{},[32])(32)});